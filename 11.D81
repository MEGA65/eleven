X2 = FRMX + FRMW - TMPX1 - 1    Y2 = FRMY + Y2  BEND  RETURN'-------------------.CHECKBOXCOLLISION'-------------------  'PRINT "";CHR$(27);"Q";PX1;PY1;PX2;PY2  'PRINT CHR$(27);"Q";OX1;OY1;OX2;OY2;  'GET KEY A$  IF NOT ((OX1 > PXA$=ٯ THEN EXIT  LOOP  RETURN'--------------.GETUSERINPUT'--------------  GETKEY A$  IF A$ <> " " THEN GOSUB RESTORECHARUNDERCURSOR  IF A$ = ٯ AND X > 0 THEN X = X - 1  IF A$ = ٯ AND X < 79 THEN X = X + 1  IF A$ =-  IF FSEL = -1 THEN RETURN  IF CURRDIR = ү THEN RETURN  PRINT "";ٯ;ٯ;ٯ;ٯ;ٯ;CHR$(27);"QCURRFREQ=";CURRFREQ;    ' : AN'T USE  FOR  REGISTERS AS THE REGS ARE WRITE-ONLY  '       ( WILL INT ٯ AND Y > 0 THEN Y = Y - 1  IF A$ = ٯ AND Y < 49 THEN Y = Y + 1  IF A$ = "D" THEN GOSUB DELETEFRAME  IF A$ = "Y" THEN GOSUB YANKSELECTION  IF A$ = "P" THEN GOSUB PASTE  IF A$ = "C" THEN BEGIN    PRINT "";    CURRFRAME = 0    GOSUB DRAWCURRFRAME  BEND  IF A$="-" AND CURRFRAME > 0 THEN BEGIN    CURRFRAME = CURRFRAME - 1    GOSUB DRAWCURRFRAME  BEND  IF A$="=" AND CURRFRAME < PEEK($50002)-1 THEN BEGIN    CURRFRAME = CURRFRAME + 1    GOSUB DRAWCURRFRAME  BEND ERNALLY NEED A READ PRIOR TO THE WRITE)  ' ?  COULDN'T DO  $415 (IT BECAME 868691 = $4153 ?!)  WPOKE 54293, (CURRFREQ AND 7) + ((CURRFREQ >> 3) * 256)  WPOKE 54357, (CURRFREQ AND 7) + ((CURRFREQ >> 3) * 256)  IF CURRDIR = ү THEN BEGIN    CURRFREQ = CURRFREQ + FILTSWEEP(FSEL)    IF CURRFREQ > FILTFREQ(FSEL) THEN BEGIN      CURRFREQ = FILTFREQ(FSEL)      IF FILTDIR(FSEL) = ү THEN CURRDIR = ү      IF FILTDIR(FSEL) = ү THEN CURRFREQ = FILTMIN(FSE IF A$=" " THEN BEGIN    STORESTATE = STORESTATE + 1    IF STORESTATE = 2 THEN BEGIN      GOSUB SAVENEWFRAMETOMEMORY      END    BEND  BEND  IF A$="L" THEN GOSUB LOADFRAME  IF A$="X" THEN BEGIN    CURSOR 0,0    KEY ON    END  BEND  I	L)    BEND    RETURN  BEND  IF CURRDIR = ү THEN BEGIN    CURRFREQ = CURRFREQ - FILTSWEEP(FSEL)    IF CURRFREQ < FILTMIN(FSEL) THEN BEGIN      CURRFREQ = FILTMIN(FSEL)      IF FILTDIR(FSEL) = ү THEN CURRDIR = ү      I
F FILTDIR(FSEL) = ү THEN CURRFREQ = FILTFREQ(FSEL)    BEND    RETURN  BEND  RETURN.APPLYSELECTEDFILTER'---------------------  IF FSEL = -1 THEN RETURN  CURRFREQ = FILTFREQ(FSEL)  CURRDIR = ү  IF   FILTDIR(FSEL) = ү _    OR FILTDIR(FSEL) = ү THEN BEGIN    CURRFREQ = FILTMIN(FSEL)    CURRDIR = ү  BEND  IF FILTDIR(FSEL) = ү THEN BEGIN    CURRDIR = ү  BEND  FILTER 1, FILTFREQ(FSEL), FILTLP(FSEL), _          FILTBP(FSEL), FILTHP(FSEL), FILTRES(FSEL)  FILTER 2, FILTFREQ(FSEL), FILTLP(FSEL), _          FILTBP(FSEL), FILTHP(FSEL), FILTRES(FSEL)  RETURN.CHANGEENVNAME'---------------  V$=""  INPUT "NEW NAME: ",V$  IF V$<>"" THEN ENVSNAME$(SROW) = V$  RETURN.EDITENVFIELD'--------------  IF SCOL = 0 THEN GOSUB CHANGEENVNAME : RETURN  IF SCOL = 6 THEN BEGIN    V$=""    INPUT "NEW VALUE: ",V$    V = VAL(V$)    IF V > 4095 THEN V = 4095    IF V < 0 THEN V = 0    ENVSPW(SROW) = V    RETURN  BEND  IF A$="+" THEN DELTA=1 : GOSUB INCRVAL  IF A$="-" THEN DELTA=1 : GOSUB DECRVAL  RETURN.EDITFILTERFIELD'-----------------  IF FSCOL = 2 THEN V=FILTLP(FSROW):V=MOD(V+1,2):FILTLP(FSROW)=V:RETURN  IF FSCOL = 3 THEN V=FILTBP(FSROW):V=MOD(V+F A$="E" THEN BEGIN    CURSOR 0,40    POKE $5FFFC, 1  ' EDIT FLAG ON    POKE $5FFFD, CURRFRAME    KEY ON    END  BEND  IF A$ = ٯ1 THEN GOSUB LOADBIN  IF A$ = ٯ3 THEN GOSUB SAVEBIN  IF A$ = ٯ5 THEN GOSUB SAVEOPTIMISED  IF A$ = ٯ7 THEN GOSUB EDITHITBOXES  RETURN'--------------.EDITHITBOXES'--------------  HBMODE = ¯ů  DO WHILE 1    GOSUB SHOWHITBOXTABLE    GOSUB DRAWHITBOXES    GOSUB ¯GETUSERINPUT    IF A$="X" OR A$=ٯ OR A$=ٯ7 THEN BEGIN      PRINT CHR$(147);      GOSUB DRAWCURRFRAME      EXIT    BEND  LOOP  RETURN#DEFINE үد = 112#DEFINE үد = 110#DEFINE үد = 109#DEFINE үد = 125#DEFINE ү   = 64#DEFINE ү   = 93#DEFINE ү  = 32'---------.DRAWCHAR'---------  IF PEEK($40800 + X + Y * 80) <> ү THEN BEGIN    K = K + 128  BEND:ELSE BEGIN    POKE $FF80000 + X + Y * 80, 1  BEND  POKE $40800 + X + Y * 80, K  RETURN'-------------.DRAWHITBOXES'-------------  GOSUB DRAWCURRFRAME  GOSUB GETCURRFRAMEPTR  FOR IDX = 0 TO 3    X1 = PEEK(PTR + BXOFFS(IDX))    Y1 = PEEK(PTR + BXOFFS(IDX) + 1)    X2 = PEEK(PTR + BXOFFS(IDX) + 2)    Y2 = PEEK(PTR + BXOFFS(IDX) + 3)    IF NOT (X1=0 AND Y1=0 AND X2=0 AND Y2=0) THEN BEGIN      ' DRAW CORNERS      ' ------------      X = X1 : Y = Y1 : K = үد : GOSUB DRAWCHAR      X = X2 : Y = Y1 : K = үد : GOSUB DRAWCHAR      X = X1 : Y = Y2 : K = үد : GOSUB DRAWCHAR      X = X2 : Y = Y2 : K = үد : GOSUB DRAWCHAR      ' DRAW HORIZONTALS      ' ----------------      FOR X = X1+1 TO X2-1        Y = Y1 : K = ү : GOSUB DRAWCHAR        Y = Y2 : K = ү : GOSUB DRAWCHAR      NEXT X      ' DRAW VERTICALS      ' --------------      FOR Y = Y1+1 TO Y2-1        X = X1 : K = ү : GOSUB DRAWCHAR        X = X2 : K = ү : GOSUB DRAWCHAR      NEXT Y    BEND  NEXT IDX  RETURN'-----------------.SHOWHITBOXTABLE'-----------------  GOSUB GETCURRFRAMEPTR  CURRPTR = PTR  IF HBSEL = 0 THEN PRINT ٯ֯;:ELSE PRINT ٯ֯;  CURSOR 40,40:PRINT ٯ;"Q  HEAD: ";  K = ͯԯ¯:GOSUB SHOWHITBOXCOORDS  IF HBSEL = 1 THEN PRINT ٯ֯;:ELSE PRINT ٯ֯;  CURSOR 40,41:PRINT ٯ;"Q TORSO: ";  K = ͯԯ¯:GOSUB SHOWHITBOXCOORDS  IF HBSEL = 2 THEN PRINT ٯ֯;:ELSE PRINT ٯ֯;  CURSOR 40,42:PRINT ٯ;"Q  FEET: ";   K = ͯԯ¯:GOSUB SHOWHITBOXCOORDS  IF HBSEL = 3 THEN PRINT ٯ֯;:ELSE PRINT ٯ֯;  CURSOR 40,43:PRINT ٯ;"QATTACK: ";  K = ͯԯ¯:GOSUB SHOWHITBOXCOORDS  PRINT ٯ֯;  GOSUB GETSELECTEDCOORDS  RETURN'--------------------------.GETSELECTEDOFFSETINTOK'--------------------------  IF HBSEL = 0 THEN K = ͯԯ¯  IF HBSEL = 1 THEN K = ͯԯ¯  IF HBSEL = 2 THEN K = ͯԯ¯  IF HBSEL = 3 THEN K = ͯԯ¯1,2):FILTBP(FSROW)=V:RETURN  IF FSCOL = 4 THEN V=FILTHP(FSROW):V=MOD(V+1,2):FILTHP(FSROW)=V:RETURN  IF FSCOL = 6 THEN V=FILTDIR(FSROW):V=MOD(V+1,4):FILTDIR(FSROW)=V:RETURN  V$=""  INPUT "NEW VALUE: ",V$  IF V$<>"" THEN BEGIN    IF FSCOL = 0 T4HEN FILTNAME$(FSROW) = V$    IF FSCOL = 1 THEN BEGIN      V = VAL(V$)      IF V > 2047 THEN V = 2047      IF V < 0 THEN V = 0      FILTFREQ(FSROW) = V    BEND    IF FSCOL = 5 THEN BEGIN      V = VAL(V$)      IF V > 15 THEN V = 15      IF V < 2) OR _          (OX2 < PX1) OR _          (OY1 > PY2) OR _          (OY2 < PY1)) THEN _  BEGIN    RET% = 1  BEND:ELSE BEGIN    RET% = 0  BEND  RETURN'---------.LOADSONG'---------  DOPEN #2,(SONG$),R,U8  ' LOAD MELODY CHUNKS  ' --7  RETURN'-------------------.GETSELECTEDCOORDS'-------------------  GOSUB GETSELECTEDOFFSETINTOK  GOSUB PEEKSELECTEDCOORDSINTOX1Y1X2Y2  RETURN  '-----------------.¯GETUSERINPUT'-----------------  GET KEY A$  IF A$=ٯ AN----------------  INPUT #2, CHUNKCNT  FOR CHUNKIDX = 0 TO CHUNKCNT - 1    FOR VIDX=0 TO 5      INPUT #2,V$(VIDX, CHUNKIDX)    NEXT VIDX  NEXT CHUNKIDX  INPUT #2,TMPO%    ' LOAD ENVELOPES  ' --------------  FOR ROW = 0 TO 9    INPUT #2,  ENVSNAME$(ROW)    INPUT #2, ENVSATTACK(ROW)    INPUT #2, ENVSDECAY(ROW)    INPUT #2, ENVSSUSTAIN(ROW)    INPUT #2, ENVSRELEASE(ROW)    INPUT #2, ENVSWAVEFORM(ROW)    INPUT #2, ENVSPW(ROW)    GOSUB SETENV  NEXT ROW  PRINT  ' LOAD FILTER+ PRESETS  ' -------------------  FOR ROW = 0 TO 10    INPUT #2, FILTNAME$(ROW)    INPUT #2, FILTFREQ(ROW)    INPUT #2, FILTLP(ROW)    INPUT #2, FILTBP(ROW)    INPUT #2, FILTHP(ROW)    INPUT #2, FILTRES(ROW)    INPUT #2, FILTDIR(ROW)    I"022000,$2001:NEW RESTORE":PRINT"RUN";:BANK128:POKE208,2:POKE688,13,13:END 49 T$=MID$(F$,10-W):Y$=",;":X=1:GOSUB 112:X=.:G$="" 50 IFY<.THENBEGIN 51 Z$="?DECLARE PARAMETER MISSING IN LINE "+STR$(J) 52 GOTO 108:BEND 53 FORD=.TOY:AA$=O$(D):GOSUB 58:N#EXTD 54 IFG$<>""THENBEGIN 55 O=.:F$="^^"+G$ 56 BEND:ELSEBEGIN:O=1:BEND 57 RETURN 58 AB$="":AC$="":Z=INSTR(AA$,"("):AA=INSTR(AA$,")"):AB=INSTR(AA$,"=") 59 IFAB<>.THENBEGIN 60 AC$=MID$(AA$,AB+1):AA$=LEFT$(AA$,AB-1):AD$=S$:T$=AA$:GOSUB 111:AA$=T$:T$=$AC$:GOSUB 110:GOSUB 111 61 AC$=T$ 62 IFLEFT$(AC$,1)="$"THENBEGIN 63 AE$=MID$(AC$,2):GOSUB 210:AC$=W$:BEND 64 IFLEFT$(AC$,1)="%"THENBEGIN 65 AF$=MID$(AC$,2):GOSUB 203:AC$=W$:BEND 66 BEND 67 IFZ<>.ANDAA<>.THENBEGIN 68 AB$=MID$(AA$,Z+1,AA-Z-1):AG$=L+EFT$(AA$,Z-1):T$=AB$:AC=1:GOSUB 122:AC=.:AB$=T$:AA$=AG$:O=.:BEND 69 AD=.:C$=RIGHT$(AA$,1) 70 IFPTHENBEGIN 71 PRINT"ADDING ";:BEND 72 IFINSTR("%&$",C$)=.THENBEGIN 73 C$="":AD=.:BEND 74 IFW=1THENBEGIN 75 AD=4:BEND 76 IFC$="%"THENBEGIN 77 AD=1:BEN&NIM = FORMANIM(BADDIEFORM, ͯ)        BADDIEFRAME = 0        IF BADDIEENERGY > 0 THEN BADDIEENERGY = BADDIEENERGY - 1        IF BADDIEENERGY = 0 THEN BEGIN          SOUND 1 + BADDIEMIRROR * 3, 8000, 50, 1, 435, 100, 0, 4000        BEN'D:ELSE BEGIN          SOUND 1 + BADDIEMIRROR * 3, 8000, 10, 1, 435, 200, 0, 4000        BEND      BEND      IDX = 2  ' FORCE BAIL OUT OF FOR-LOOP UPON ANY HIT    BEND    PTR = PTR + 4  NEXT IDX  MIRROR = TMPMIRROR  PTR = FRAMEADDR(DATIDX, F RAMEIDX)  RETURN'-------------.ADJUSTCOORDS'-------------  IF MIRROR = 0 THEN BEGIN    X1 = FRMX + X1    Y1 = FRMY + Y1    X2 = FRMX + X2    Y2 = FRMY + Y2  BEND:ELSE BEGIN    TMPX1 = X1    X1 = FRMX + FRMW - X2 - 1    Y1 = FRMY + Y1    R) : VOL V, V  IF CHUNKRPT > 0 THEN CHUNKRPT = CHUNKRPT - 1  IF CHUNKRPT <= 0 THEN PLYPTR = PLYPTR + 1  IF K = į THEN PLYPTR = 0  IF PLYPTR >= SEQCNT THEN PLYFLAG = 0 : PLYPTR = -1  RETURN.CHECKDURATIONCHANGE'---------------------  FOR K = į TO į    IF A$ = DUR$(K, ) THEN SDUR = K  NEXT K  ' CHECK OCTAVE TOO  IF A$ = ">" AND OCT < 6 THEN OCT = OCT + 1  IF A$ = "<" AND OCT > 0 THEN OCT = OCT - 1  RETURN.UPDATESELECTEDFILTER'---------------------RN.GETUSERINPUTFORTABLE'------------------------  ' GET KEY A$  GOSUB READKEYLOOP  IF A$ = ٯ AND SCOL > 0 THEN SCOL = SCOL - 1  IF A$ = ٯ AND SCOL < 6 THEN SCOL = SCOL + 1  IF A$ = ٯ AND SROW > 0 THEN SROW = SROW - 1  IF A$ = ٯ AND SROW < 9 THEN SROW = SROW + 1  IF A$ = "+" OR A$="=" THEN DELTA=1 : GOSUB INCRVAL  IF A$ = "-" THEN DELTA=1 : GOSUB DECRVAL  IF A$ = ٯԯ THEN DELTA=100 : GOSUB INCRVAL  IF A$ = ٯԯ THEN DELTA=100 : GOSUB  DECRVAL  IF A$ = ٯ THEN A$ = "+" : GOSUB EDITENVFIELD  IF A$ = ٯԯ THEN A$ = "-" : GOSUB EDITENVFIELD  IF A$ = ٯ THEN FFOCUS = 1 : GOSUB GETUSERINPUTFORFILTERS  GOSUB CHECKDURATIONCHANGE  GOSUB CHECKPIANOK'----.DOCS'----' RABBER OOL - PORTED TO LEVEN (FOR EASIER MAINTENANCE)' ============'' SAGE:' -----' - RESS 'SPACE' KEY ON TOP-LEFT POINT' - HEN USE CURSOR KEYS TO MOVE TO BOTTOM-RIGHT POINT & PRESS 'SPACE'' - RESS '-' AND '+' KEYS TO MOVE BETWEEN PREVIOUS AND NEXT FRAMES' - RESS 'C' TO REDRAW CURRENT FRAME' - RESS 'Y' TO YANK/COPY A SELECTED REGION' - RESS 'P' TO PASTE A SELECTED REGION TO CURRENT CURSOR LOCATION' - RESS 'E' TO EDIT CURRENT FRAME' - RESS 'D' TO DELETE THE CURRENT FRAME' - RESS 'L' THEN A FRAME# TO LOAD THAT FRAME' - RESS 'X' TO EXIT PROGRAM' - 1 = LOAD CHAR+COLOR .BIN FILE' - 3 = SAVE CHAR+COLOR .BIN FILE' - 5 = SAVE OPTIMIZED+REPAIRED .BIN FILE' - 7 = EDIT HIT BOXES#OUTPUT "GRABBER"' HAR+	SPRCOLOR " 13 I$(6)=" SPRITE SPRSAV SYS TAB TEMPO TROFF TRON TYPE USR VERIFY VOL XOR KEY VSYNC RCURSOR T@& C@& RGRAPHIC FREAD POINTER " 14 J$=" BLOAD BSAVE DLOAD TO SAVE DIR COLLECT DOPEN DCLOSE BACKUP FREAD GET ":GOSUB 227:BANK128:E$(0)="":E$(1)="%":E
$(2)="$":E$(3)="&":E(.)=1 15 FORD=1TO16:E(D)=E(D-1)+E(D-1):NEXTD 16 A=.:S$=CHR$(32)+CHR$(160)+"	":J=.:PRINT"PASS 1 ";:K=.:CLRTI:L=134414336:M=L:N=WPEEK(M):M=M+2:DOWHILEK<>N:GOSUB 263 17 GOSUB 267:T$=F$:GOSUB 111:F$=T$ 18 IFF$<>""THENBEGIN 19 O=.:IFPTHENPRINT">> :"Q;", : ";J;": ";F$ 20 IFLEFT$(F$,1)="."THENBEGIN 21 A=1:GOSUB 105:BEND 22 IFLEFT$(F$,1)="#"THENBEGIN 23 GOSUB 282:BEND 24 IFR=1THENGOTO 33 25 IFLEFT$(F$,4)="DATA"ORRIGHT$(F$,5)="BEGIN"THENBEGIN 26 A=1:BEND 27 IFO=.THENBEGIN 28 IFP=.THENPRINT"."; 29 T$=F$:GOSUB 122:GOSUB 295:GOSUB 337 30 GOSUB 341:IFRIGHT$(T$,4)="BEND"ORRIGHT$(T$,6)="RETURN"ORLEFT$(T$,2)="IF"THENBEGIN:A=1:BEND 31 BEND 32 BEND 33 J=J+1 34 IFPTHENBEGIN 35 PRINT"SRCLINENO=";J:GETKEYU$:BEND 36 LOOP 37 IFV$<>""THENBEGIN 38 K$(Q)=V$:Q=Q+1:BEND 39 CLOSE1:GOSUB 235:SCRATCH"11TEMP":SCRATCH"11TOKENIZED" 40 OPEN1,1,5,"11TEMP,S,W":PRINTCHR$(13)"PASS 2 ";:FORS=.TOQ-1:T$=K$(S):IFPTHENPRINTS;"=> "T$:ELSEPRINT"."; 41 DOWHILEINSTR(T$,H$)<>.:T=INSTR(T$,H$):U=INSTR(T$,H$,T+2) 42 IFU=.THENBEGIN 43 EXIT 44 BEND:ELSEBEGIN:W$=MID$(T$,T+2,U-T-2):GOSUB 197:T$=LEFT$(T$,T-1)+W$+MID$(T$,U+2):BEND 45 LOOP:IFPTHENPRINT"<= ";STR$(S)+T$ 46 PRINT#1,STR$(S)+" "+T$:NEXTS:GOSUB 354:FORV=.TO10:PRINT#1,STR$(32000+V):NEXTOLOR ILE ORMAT (1/3 KEYS)' ======================' : PROG-ADDRESS (IGNORED)' : SIZE OF DATA (INCLUDING THIS  AND ONWARDS)' : # OF FRAMES' '  #0' --------'   : X'   : Y'   : W'   : H'   : HEAD BOX (X1,Y1,X2,Y2)'   : TORSO BOX (X1,Y1,X2,Y2)'   : FEET BOX (X1,Y1,X2,Y2)'   : ATTACK BOX (X1,Y1,X2,Y2)'   [W*H]: CHAR DATA'   [W*H]: COLOR DATA''  #1' --------'   (AS BEFORE...)''  #N' --------'   (AS BEFORE...)' OLOR-ONLY ILE ORMAT (5 KEY)' ======================' : PROG-ADDRESS (IGNORED)' : SIZE OF DATA (INCLUDING THIS  AND ONWARDS)' : # OF FRAMES' '  #0' --------'   : X'   : Y'   : W'   : H'   : HEAD BOX (X1,Y1,X2,Y2)'   : TORSO BOX (X1,Y1,X2,Y2)'   : FEET BOX (X1,Y1,X2,Y2)'   : ATTACK BOX (X1,Y1,X2,Y2)'   [W*H]: COLOR DATA''  #1' --------'   (AS BEFORE...)''  #N' --------'   (AS BEFORE...)'--------.DECLARES'--------#DECLARE CLRLINERIGHT$ = CHR$(27)+"Q"   ' OLD CL$#DECLARE CURRENTFRAME  ' OLD FF#DECLARE X, Y  ' CURSOR POSITION#DECLARE PTR  ' POINTER TO DATA BYTES IN MEMORY#DECLARE FRAMECOUNT#DECLARE FRMIDX#DECLARE BYTESUSED  ' OLD L#DECLARE FRMW, FRMH#DECLARE STARTCHAR, STARTCOLOR, ENDCHAR, ENDCOLOR#DECLARE STARTX, STARTY, ENDX, ENDY#DECLARE CURRFRAME#DECLARE SRCCHARPTR, SRCCLRPTR#DECLARE A$, XIDX, YIDX#DECLARE DESTCHARPTR, DESTCLRPTR#DECLARE FNAME$#DECLARE CVAL#DECLARE STARTPTR, ENDPTR, CURRPTR, SRCPTR, DESTPTR, SZ, K, LN#DECLARE B(50,3)  ' HITBOXES#DECLARE X1, Y1, X2, Y2#DECLARE HBSEL = 0, HBMODE, IDX#DECLARE CLIPBOARDCHAR&(80*50)#DECLARE CLIPBOARDCLR&(80*50)#DECLARE CLIPW, CLIPH#DEFINE ů G$(9)"O1T5 QFRO2CR O1GRO2DRD":H$(9)"O2T3 O2QC SCRCR O4QG SGRGR O2QC SCRCR O4QGG SGRGR":F$(8)F$(8)F$(9):G$(8)G$(8)G$(9):H$(8)H$(8)H$(9):                                                                                                              ԯ = 0#DEFINE ůį = 1#DECLARE STORESTATE  ' ARE WE STORING START/END POS CHAR/COLOUR DETAILS#DECLARE NEWFRAMEFLAG#DEFINE ٯ = ""#DEFINE ٯ = ""#DEFINE ٯ = ""#DEFINE ٯ = ""#DEFINE ٯ1 = ""#DEFINE ٯ3 = ""#DEFINE ٯ4 = ""#DEFINE ٯ5 = ""#DEFINE ٯ7 = ""#DEFINE ٯ8 = ""#DEFINE ٯ = CHR$(27)#DEFINE ٯ֯ = ""#DEFINE ٯ֯ = ""#DEFINE ٯ = CHR$(13)#DEFINE Я = 0#DEFINE Я  = 1#D!V:X$="D:D"+A$+"11TOKENIZED"+A$ 47 X$=X$+":IFDS<>0THEN?"+A$+"DISC ERROR: ":X$=X$+A$+";DS$:ELSE?"+A$:X$=X$+"":X$=X$+A$+":D"+A$+"11.POST":PRINT#1,X$:CLOSE1:PRINT"" 48 PRINT"ELAPSED TIME:";TI;"TICKS":PRINT"EDMA 0,$1FFF,$8EFINE Я = 2#DEFINE Я = 3#DEFINE ¯ů     = 0#DEFINE ¯ů̯1 = 1#DEFINE ¯ů̯2 = 2#DEFINE ¯ů   = 3.OFFSETS#DEFINE ԯ  = 0#DEFINE ԯͯ = 2#DEFINE ԯ0     = 3#DEFINE ͯԯ          = 0#DEFINE ͯԯ          = 1#DEFINE ͯԯ          = 2#DEFINE ͯԯ          = 3#DEFINE ͯԯ   = 4#DEFINE ͯԯ¯    = 4#DEFINE ͯԯ¯   = 8#DEFINE ͯԯ¯    = 12#DEFINE ͯԯ¯  = 16#DEFINE ͯԯ       = 20#DECLARE BXOFFS(3)BXOFFS(0) = ͯԯ¯BXOFFS(1) = ͯԯ¯BXOFFS(2) = ͯԯ¯BXOFFS(3) = ͯԯ¯'----.MAIN'----  KEY OFF  POKE $D020, 11, 14  GOSUB INITVARS  GOSUB CHECKMAGICSIGNATURE  GOSUB CHECKEDITFLAG  GOSUB LOCATENEXTFREEBYTE  GOSUB DRAWFOOTER  DO WHILE 1    GOSUB STORESTATEINFO    GOSUB DRAWCURSOR    GOSUB GETUSERINPUT    GOSUB SHOWCOORDS  LOOP'-----------.SHOWCOORDS'-----------  CURSOR 0, 49  PRINT CLRLINERIGHT$;  IF STORESTATE = ůԯ THEN BEGIN    PRINT CHR$(27)+"QX=";X;", Y=";Y;  BEND  IF STORESTATE = ůį THEN BEGIN    PRINT CHR$(27)+"QX=";STARTX;", Y=";STARTY;    PRINT ", W=";X-STARTX+1;", H=";Y-STARTY+1;  BEND  PRINT CLRLINERIGHT$;  RETURN'-----------.ENTERCOORD'-----------  DO WHILE 1    GOSUB STORESTATEINFO    GOSUB DRAWCURSOR    GET KEY A$    IF A$ <> ٯ THEN GOSUB RESTORECHARUNDERCURSOR    IF A$ = ٯ AND X > 0 THEN X = X - 1    IF A$ = ٯ AND X < 79 THEN X = X + 1    IF A$ = ٯ AND Y > 0 THEN Y = Y - 1    IF A$ = ٯ AND Y < 49 THEN Y = Y + 1    IF !EYS  RETURN.GETUSERINPUTFORFILTERS'--------------------------  DO WHILE 1    GOSUB DRAWTABLE    ' GET KEY A$    GOSUB READKEYLOOP    IF A$ = ٯ AND FSCOL > 0 THEN FSCOL = FSCOL - 1    IF A$ = ٯ AND FSCOL < 8 THEN FSCOL = "FSCOL + 1    IF A$ = ٯ AND FSROW > 0 THEN FSROW = FSROW - 1    IF A$ = ٯ AND FSROW < 10 THEN FSROW = FSROW + 1    IF A$ = "+" OR A$="=" THEN DELTA=1 : GOSUB INCRFVAL    IF A$ = "-" THEN DELTA=1 : GOSUB DECRFVAL    IF A$ = ٯԯ# THEN DELTA = 100 : GOSUB INCRFVAL    IF A$ = ٯԯ THEN DELTA = 100 : GOSUB DECRFVAL    IF A$ = " " THEN BEGIN      IF FSEL = FSROW THEN FSEL = -1:ELSE FSEL = FSROW      GOSUB APPLYSELECTEDFILTER    BEND    IF A$ = ٯ THEN$ GOSUB EDITFILTERFIELD:GOSUB APPLYSELECTEDFILTER    IF A$ = ٯ OR A$ = ٯ THEN EXIT    GOSUB CHECKDURATIONCHANGE    GOSUB CHECKPIANOKEYS  LOOP  FFOCUS = 0  RETURN.READKEYLOOP'-------------  A$ = ""  DO WHILE A$=""    %GET A$    IF FSEL <> -1 THEN BEGIN      GOSUB UPDATESELECTEDFILTER    BEND    IF PLYFLAG = 1 THEN BEGIN      IF RPLAY(1) = 0 THEN GOSUB PARSECURRENTSEQPTR    BEND  LOOP  RETURN.PARSECURRENTSEQPTR'--------------------  K = SEQCHUNK(PLYP&TR)    IF K >= 0 THEN BEGIN    CHUNKIDX = K    IF CHUNKRPT <= 0 THEN CHUNKRPT = SEQEXTRA(PLYPTR)    GOSUB PLAYCHUNKIDX    SLEEP .1    GOSUB DRAWSEQUENCE  BEND  IF K = į THEN BEGIN    K = SEQEXTRA(PLYPTR)    TEMPO (K)    TMPO% '= K  BEND  IF K = į THEN BEGIN    K = SEQEXTRA(PLYPTR)    FSROW = K    FSEL = K    GOSUB APPLYSELECTEDFILTER  BEND  IF K = įϯ1 THEN ECHOM = 1 : ECHODELAY = 0  IF K = įϯ2 THEN ECHOM = 2 : ECHODELAY = 0  IF K =  ϯ  THEN ECHOB = 1 : ECHODELAY = 0  IF K = įϯ THEN ECHOM = 0 : ECHOB = 0  IF K = įϯ THEN ECHOSZ = SEQEXTRA(PLYPTR)  IF K = į THEN ECHODELAY = 1 : ECHOM = 0 : ECHOB = 0  IF K = į THEN V = SEQEXTRA(PLYPT V = ENVSDECAY(SROW)  IF SCOL = 3 THEN V = ENVSSUSTAIN(SROW)  IF SCOL = 4 THEN V = ENVSRELEASE(SROW)  IF SCOL = 5 THEN V = ENVSWAVEFORM(SROW)  IF SCOL = 6 THEN V = ENVSPW(SROW)  RETURN.SHOWCELL'---------  IF SROW=ROW AND SCOL = COL AND FFOCUS=0 THEN PRINT ٯ֯;:ELSE PRINT ٯ֯;  IF COL = 0 THEN BEGIN    PRINT V$;ٯ;"";    RETURN  BEND  IF COL = 5 THEN BEGIN    PRINT WNAME$(V);ٯ;ٯ֯;    RETURN  BEND  ' ELSE  PRINT V;ٯ;ٯ֯;  RETUCIE QGIEQGIE":G$(.)"T0O2Q.R .C IGGG O1Q.G O2IDDD Q.C IGGG O1Q.G O2IDDD":F$(1)"O5QFIEQDIF QEIDQCIE QDICO4QBIA Q.G" DlG$(1)"T0O2Q.F IAAA Q.C IGGG O1Q.GO2 IDDD O1Q.G":F$(2)"O5IFED Q.C RIE Q.G R IO4GO5CCCQCIE QGIEQGIE" lG$(2)"T0O2Q.R .C IGGG O1Q.G O2IDDD Q.C IGGG O1Q.G O2IDDD":F$(3)"O5QFIEQDIF QEIDQCIE QDIEQ#FIA GFD O4BGD":G$(3)"T0O2Q.F IAAA Q.C IGGG O2Q.D IAAA O1Q.G" 7mF$(4)"O5IBGDBGD A#FDA#FD GECGEC QDIEQ#FIA BGDBGD A#FDA#FD O6QCO5IBO6QCIEQ.D.#F" mG$(4)"M0T0O2Q.D IGGG Q.D IAAA Q.C IGGG Q.D IAAA Q.D IGGG Q.D IAAA Q.C IGGG H.D":F$(5)"O5QAFIO4M1CDEDCGFE O5QGE O4ICDEDCO3BAG" YnG$(5)"M0T0O2Q.C IAAA Q.C IAAA Q.C IGGG Q.C IGGG":F$(6)"O5QF.DID Q.E#FIA Q.G IFGF EFE DED":G$(6)"T0O1Q.G O2IDDD O1Q.G O2IDDD O1Q.G O2IDDD O1Q.G O2IDDD" nF$(7)"O5QAFIO4M1CDEDCGFE O5QGE O4ICDEDCO3BAG":G$(7)"M0T0O2Q.C IAAA Q.C IAAA Q.C IGGG Q.C IGGG":F$(8)"O5QQF.DID Q.EICO4BO5D CO4GO5CO4EGEQ.C" 'oG$(8)"T0O1Q.G O2IDDD O1Q.G O2IDDD O2Q.C IGGG O2Q.C": oF$(.)"O6M5T2 W.C HO5G W.#F HD WF HB O6D W.C HR":G$(.)"O5M5T2 W.C HO4G W.#F HD WF HB O5D W.C HR":H$(.)"" -pF$(1)"T6M0IO1#AO2CO1CC #AO2#CO1#C#C O2CEO1CC O2EFO1FF":G$(1)"T6M0IO1#AO2CO2CC #AO2#CO2#C#C O2CE1O2CC O2EFO2FF":H$(1)"M0T3Q O2CR O4GR O2CR O4GR" pF$(1)F$(1)F$(1):G$(1)G$(1)G$(1):H$(1)H$(1)H$(1):F$(1)F$(1)F$(1):G$(1)G$(1)G$(1):H$(1)H$(1)H$(1) 5qF$(2)"TO6 QRCCC CCC SC#DD#D O5WBR QR #G#G#G FF B O6SC#DD#D WCR":G$(2)"T6M0O1ICCRRCCRRCCRRCCRR GGRRGGRRGGRRGGRR FFRRFFRRFFRRFFRR CCRRCCRRCCRRCCRR" qH$(2)"T3Q O2CR O4GR O2CR O4GR O2C	R O4GR O2CR O4GR   O2CR O4GR O2CR O4GR O2CR O4GR O2CR O4GR" qF$(3)"TO6 QRGGG GGG SG#AA#A W#FR QRFFF SF#DFG #DD#DF DCD#D CO5#GG#G WCR" DrG$(3)"T6M0O1ICCRRCCRRCCRRCCRR #F#FRR#F#FRR#F#FRR#F#FRR FFRRFFRRFFRRFFRR CCRRCCRRCCRRCCRR" rH$(3)"T3Q O2CR O
4GR O2CR O4GR O2CR O4GR O2CR O4GR  O2CR O4GR O2CR O4GR O2CR O4GR O2CR O4GR":F$(4)F$(1):G$(4)G$(1):H$(4)H$(1):F$(5)F$(.):G$(5)G$(3) rH$(5)H$(3): UsF$(.)"T2O5 O5QGP6 IAG IDFQD":G$(.)"":F$(1)"O5P6M1 WG QR FSFGIF QE IESFEIE O4P9GP6Q#AHI#AR" sF$(1)F$(1)"T2O5P6M1 QRP0SCP6DCD P0CP6ID SR IDP3#F P6 O4Q.G O5P8IF P6QO4SP9#AA#A#B P6Q#A":G$(1)"T1O2WGG C   O2WCC":H$(1)"T1O3WDD O2G O2WGG" tF$(2)"T2O5QRSCI.D SCI.D SP9CDFG P8O4H.GQR O5QGIAG IDFQD":F$(2)F$(2)"P6T2O5 Q.GSAG QF O4.#AIR O5SP0DP3#DD#D O4P8IG#AO5CD":G$(2)"O2WCGF   O2WGO1#A" tH$(2)"O2WGO3DC O3WDO2F":F$(3)"T2O4 Q.G SP5GA IFP2G QF R P6FAO5C O4Q.A IG SP2FEFE P6QG R IGA SP3FEFE QD WG" {uF$(3)F$(3)"T2O5 P0QGP6IAG DFQD .GSAG QAQ.A IRQ #A#A SO6P8CO5#AO6CD":G$(3)"O2WGF DCG      O2WF GF":H$(3)"O3WDC O2AGO3D  O3WC DC" uF$(4)"T2O5 Q.GSAG QFQ.F IR QA IAO6C CD O5P8Q.DIC QD HA IAO6CCD O5P0DP6F WG":G$(4)"O2W#DFD#DG":H$(4)"O2W#AO3CO2A#AO3D" WvF$(5)"T2O5P6QFIFG SFGFG O4IP0#AO5P8D O4Q.GSAG QF.GIR O5QDIDFQD.DICO4S#AG#AGO5SCP3#CC#CQC" vF$(5)F$(5)"T2O5P6HQCO4#AO5 SCO4#AO5CD O4Q.GSAG QF.FIR QAIA QO5CSCO4#AO5CDCO4#AO5CD O4H.G":G$(5)"O2WFG#A#AO3C O2WG F G":H$(5)"O3WCDFFO3G O3WD C D" v bwF$(.)"O5T6 IP0FP3EP0FP3GP0FP3GP0EP3F P0SDP3#DD#D P0IDC DP3S#DR QP0DR":G$(.)"O2T5 P0O2QCRGR O1GR GGR" wH$(.)"O2T3 O2QC SCRCR O4QG SGRGR O2QC SCRCR O4 QGG SGRGR":F$(.)F$(.)F$(.):G$(.)G$(.)G$(.):H$(.)H$(.)H$(.) TxF$(1)"O5T6 IP0CP3O4#A P0O5QC SDP3#P0DP3D#D QC R IO4P0GP3A#AO5C SO4P0#AO5P3CO4P0#AO5P3C O4QA":G$(1)"O2T5 QCRGR O1GRGGR" xH$(1)"O2T3 O2QC SCRCR O4QG SGRGR O2QC SCRCR O4QGG SGRGR":F$(1)F$(1)F$(1):G$(1)G$(1)G$(1):H$(1)H$(1)H$(1) ?yF$(2)"O5T6QRIP0CO4P3#AO5CO4#AO5QCRIP0O4GP3AO4P0#AO5P3C SO4P0#AO5P3CO4P0#AO5P3C QO4P0A":G$(2)"O2T5 QCRGR O1GRGGR" yH$(2)"O2T3 O2QC SCRCR O4QG SGRGR O2QC SCRCR O4QGG SGRGR":F$(2)F$(2)F$(2):G$(2)G$(2)G$(2):H$(2)H$(2)H$(2) /zF$(3)"O5T6 IRP0#DDP4C O4P0#AO5P3CP0QD R IP0O4GP3A O4P0#AO5P3C SO4P0#AO5P3CO4P0#AO5P3C QO4A":G$(3)"O2T5 QCRGR O1GRGGR" zH$(3)"O2T3 O2QC SCRCR O4QG SGRGR O2QC SCRCR O4QGG SGRGR":F$(3)F$(3)F$(3):G$(3)G$(3)G$(3):H$(3)H$(3)H$(3):F$(4)"O4T6 Q.A IG QGG WG QR" N{G$(4)"O2T5 QCRGR O1GRO2DDD":H$(4)"O2T3 O2QC SCRCR O4QG SGRGR O2QC SCRCR O4QGG SGRGR":F$(5)"O5T7 P7 QRR GG P0SFIP3.GP0QG SFIP3.GP0QGG" {G$(5)"O1T5 QGRO2DR O1GRO2DRD":H$(5)"O2T3 O2QC SCRCR O4QG SGRGR O2QC SCRCR O4QGG SGRGR" |F$(6)"O5T7QP0FIEP3FP0SDP3#DP0DP3#DP0QCICO4P3#AP0O5QC SO4#AP3O5CP0O4#AP3O5C QO4AR":G$(6)"O1T5 QFRO2CR CRGRG" |H$(6)"O2T3 O2QC SCRCR O4QG SGRGR O2QC SCRCR O4QGG SGRGR":F$(5)F$(5)F$(6):G$(5)G$(5)G$(6):H$(5)H$(5)H$(6) (}F$(7)"O5T7P0 I#A#AQ#A SP0AP3I.#A SP0AP3I.#A QAA HG QR":G$(7)"O1T5 P0QFRO2CR O1GRO2DRD":H$(7)"O2T3 O2QC SCRCR O4QG SGRGR O2QC SCRCR O4QGG SGRGR" }F$(7)F$(7)F$(6):G$(7)G$(7)G$(6):H$(7)H$(7)H$(6):F$(8)"O4T7 IP0#AP3O5QC ICQCC P0O4I#AP3A P0#AO5P3C O4P0AP3#A P0GP3A QP0F" =~G$(8)"O2T5 QCRGR O1GRO2DRD":H$(8)"O2T3 O2QC SCRCR O4QG SGRGR O2QC SCRCR O4QGG SGRGR":F$(9)"O4T7QRIP0#AP3AP0#AO5P3C P0O4QA SA#AA#A QGHGQR" ~%AB%255:#2,AC%:AC%AC%255:AM%AB%(AC%R8):#2,AB%:AB%AB%255:#2,AC%:AC%AC%255:AN%AB%(AC%R8):0AJ%,AK%,AM%,AN%,W% 
^cU%1 ^d 372: $^eU%3 ^f"BOX ";:#2,AB%:AB%AB%255:#2,AC%:AC%AC%255:AO%AB%(AC%R8):#2,AB%:AB%AB%255:#2,AC%:AC%AC%255 ^gAP%AB%(AC%R8)S%:AP%.:AP%.: "_h#2,AB%:AB%AB%255:#2,AC%:AC%AC%255:AF%AB%(AC%R8):#2,AB%:AB%AB%255:#2,AC%:AC%AC%255 M_iAG%AB%(AC%R8)S%:AG%.:AG%.: p_jW%. 322:AO%,AP%,AF%,AG% z_kU%1 _l 372: _mU%4 `n"POLY ";:#2,A:AA255:AQ%A:A.AQ%1:#2,AB%:AB%AB%255:#2,AC%:AC%AC%255:AR%(A)AB%(AC%R8):#2,AB%:AB%AB%255 Y`o#2,AC%:AC%AC%255:AS%(A)AB%(AC%R8)S%:AS%(A).:AS%(A).: `p(A.)AR%(A1),AS%(A1),AR%(A),AS%(A) `qA:AR%(AQ%1),AS%(AQ%1),AR%(.),AS%(.):W%1 313 `rU%1 `s 372: `t:#2 `uBP%BN%. Jav!.,.,262144,134217728131072G%:!.,.,327680,134217728131072G%65536:BQ%(G%)1: VawBN%.: eaxM%G% ayM%G%::"","","","","","":A.10:F$(A)"":G$(A)"":H$(A)"":I$(A)"":J$(A)"":K$(A)"":A:N%(M%):F.:M%G% azM%. 416 a{M%1 434 
b|M%2 392 b}M%3 425 *b~M%4 408 1b 7b Db(1) YbEF:M%1EG(F) jbP%(M%)1 bF$(E),G$(E),H$(E):.05:,,,F$(E),G$(E),H$(E) b::F$(E),G$(E),H$(E):.05:,,,I$(E),J$(E),K$(E): bFF1:FO%(M%)F. b cF$(.)"T6M1O4HCCCC ICCCC CCCC O3GGGG GGGG":G$(.)"T1O3W CCCC":H$(.)"T1O3W EEEE":I$(.)"T6M1O5HCCCC SRICCCC CCCC O4GGGG GGGG":J$(.)"T1O3W GGGG" dK$(.)"T1O4W CCCC":F$(1)"T6O3I AAAAAAAA GGGGGGGG O4CCCCCCCC O3GGGG GGGG":G$(1)"T1O3W CCCC":H$(1)"T1O3W FFEE" dI$(1)"T6O4S RIAAAAAAAA GGGGGGGG O5CCCCCCCC O4GGGG GGGG":J$(1)"T1O3W AAGG":K$(1)"T1O4W CCCC":F$(2)"T6O3I AAAAAAAA O4CCCCCCCCC DDDDDDDD EEEEEEEE" $eG$(2)"T1O3W CCCC":H$(2)"T1O3W FFEE":I$(2)"T6O4S RIAAAAAAAA O5CCCCCCCCC DDDDDDDD EEEEEEEE":J$(2)"T1O3W AAGG":K$(2)"T1O4W CCCC" eF$(3)"T6O4 IDDDD GGGG EEER  EEER EEEEEEEE EEEEEEEE":G$(3)"T1O3W DDCC":H$(3)"T1O3W GGEE":I$(3)"T6O5SR IDDDD GGGG EEER  EEER EEEEEEEE EEEEEEEE" >fJ$(3)"T1O3W BBGG":K$(3)"T1O4W DDCC":F$(4)"T6O4I EEEE GGGG EEEE DDDD CCCCCCCC DDDDDDDD":G$(4)"T1O3W CCCC":H$(4)"T1O3W EEFF" fI$(4)"T6O5SR IEEEE GGGG EEEE DDDD CCCCCCCC DDDDDDDD":J$(4)"T1O3W GGAA":K$(4)"T1O4W CCCC":F$(5)"T6O4I EEEEEEEE DDDDDDDR DDDDDDDD DDDDDDRR" TgG$(5)"T1O3W CCDD":H$(5)"T1O3W EEGG":I$(5)"T6O5SR IEEEEEEEE DDDDDDDR DDDDDDDD DDDDDDRR":J$(5)"T1O3W GGBB":K$(5)"T1O4W CCDD" gF$(6)"T6O3I GGGGGGGG W R IAAAAAAAA WR IO4CCCCCCCC HR QO3FG":G$(6)"T1O3W CCCC DD":H$(6)"T1O3W FFEE FF" /hI$(6)"T7O4SR IGGGGGGGG WR IAAAAAAAA WR IO5CCCCCCCC Q.R QO4FG":J$(6)"T1O3W AAGG AA":K$(6)"T1O4W CCCC DD" hF$(7)"T6O3H AO4CED ICCCCCCCC O3HAG HO4 CCCC ICCCCCCCR CCC!CCCCR":G$(7)"T1O3W DD CC CC CC":H$(7)"T1O3W GG EE EE FF" &iI$(7)"T6O4H AO5CEDSR ICCCCCCCSC O4HAG HO5 CCCCSR ICCCCCCCR CCCCCCCR":J$(7)"T1O3W BB GG GG AA":K$(7)"T1O4W DD CC CC CC" iF$(8)"T6O3H RGA O4CDC O3BA IGGGGGGGG QRRED HCDEF I GGGGGGGG GGGG"GGGG GGGGGGGG GGGGGGGR":G$(8)"T1O3W CC CC CC DD CC CC":H$(8)"T1O3W EE FF EE GG EE FF" EjI$(8)"T6O4H RGA O5CDC O4BASR IGGGGGGGSG QRRED HCDEFSR I GGGGGGGG GGGGGGGG GGGGGGGG GGGGGGGR":J$(8)"T1O3W GG AA GG BB GG AA" jK$(8)"T1O4W CC CC CC DD CC CC":F$(9)"T6O3H GGGG IGGGGGGGR GGGGGGGR GGGGGGGG GGGGGGGR":G$(9)"T1O3W CC DD CC":H$(9)"T1O3W EE GG EE" =kI$(9)"T6O4H GGGGSR IGGGGGGGR GGGGGGGR GGGGGGGG GGGGGGGR":J$(9)"T1O3W GG BB GG":K$(9)"T1O4W CC DD CC": kF$(.)"O5IFED Q.C RIE Q.G R IO4GO5CCCQ$OLLISION    IF RET% = 1 THEN BEGIN      IF CHARACTER =  THEN BEGIN        PLAYERANIM = FORMANIM(PLAYERFORM, ͯ)        PLAYERFRAME = 0        IF PLAYERENERGY > 0 THEN PLAYERENERGY = PLAYERENERGY - 1        IF PLAYERENERGY = 0 %THEN BEGIN          SOUND 1 + PLAYERMIRROR * 3, 8000, 50, 1, 435, 100, 0, 4000        BEND:ELSE BEGIN          SOUND 1 + PLAYERMIRROR * 3, 8000, 10, 1, 435, 200, 0, 4000        BEND      BEND      IF CHARACTER =  THEN BEGIN        BADDIEA&RESET));ٯ;  K = 4 : GOSUB CHECKSHOWFILTERHIGHLIGHT  PRINT FILTSTATENAME$(FILTHP(FPRESET));ٯ;  K = 5 : GOSUB CHECKSHOWFILTERHIGHLIGHT  PRINT FILTRES(FPRESET);ٯ;  K = 6 : GOSUB CHECKSHOWFILTERHIGHLIGHT  PRINT DIRNAM'E$(FILTDIR(FPRESET));ٯ;  K = 7 : GOSUB CHECKSHOWFILTERHIGHLIGHT  PRINT FILTMIN(FPRESET);ٯ;  K = 8 : GOSUB CHECKSHOWFILTERHIGHLIGHT  PRINT FILTSWEEP(FPRESET);  PRINT ٯ֯  RETURN.CHECKSHOWFILTERHIGHLIGHT'-------- -------------------  IF FSROW = FPRESET AND FFOCUS = 1 AND FSCOL = K THEN _    PRINT ٯ֯; : ELSE PRINT ٯ֯;  RETURN.GETVAL'-------  IF SCOL = 0 THEN V$ = ENVSNAME$(SROW)  IF SCOL = 1 THEN V = ENVSATTACK(SROW)  IF SCOL = 2 THEN,< $D300K, DB(K)SZ -F K -P @-x *** FADE ALL COLOURS TO GREYSCALE SG(0-8) *** R-SZ  (8SG)8 a- K0  31 ~-GR(DR(K)DG(K)DB(K))3 - $D100K, (GR(DR(K)GR)SZ) - $D200K, (GR(DG(K)GR)SZ) - $D300K, (GR(DB(K)GR) SZ) - K -                                                                                                                                                                                                                                             QCHUNK(K) + 1  NEXT K  RETURN.TRANSPOSEOCTAVE'----------------  V1$ = V$(CURSORY, CHUNKIDX)  LIMIT = 0  IF DELTA = 1 THEN LIMIT = 6  RET% = 0  GOSUB CANTRANSPOSEOCTAVE  IF RET% = 0 THEN PRINT ٯ; : RETURN  K = 0  DO WHILE K < LEN(V1$)    V2$ = MID$(V1$,K+1,1)    IF V2$ = "O" AND (K + 1) < LEN(V1$) THEN BEGIN      V2$ = STR$(VAL(MID$(V1$,K+2,1)) + DELTA)      V2$ = MID$(V2$,2)      V1$ = LEFT$(V1$,K+1) + V2$ + MID$(V1$, K+3)    BEND    K = K + 1  LOOP  V$(CURSORY,;"OCKY THE LONED OCKATOO";(34);" - URCE":"ERMANY - ";(34);"HE NGEL'S NGLED NKLE";(34);" - URCE" uQ"HAILAND - ";(34);"HLEUN RATHOP ANG";(34):"    (AVES CRASH TO THE SHORE) - ING RAJADHIPOK" Q"URKEY - ";(34);"ATCAM IKMIS UL ALINA";(34):"    (Y ATCHE CAME OUT ON THE OSE RANCH) - NKNOWN" kR "IETNAM - ";(34);"ON HUONG AU ANG OC AU E";(34):"    (TILL OVE THE ITTER ERB THAT ROWS AFTER UMMER) - AC ON" R! 262:(147);:"HANKS TO RAADII":"------------------" $S""INALLY, A WORD OF THANKS TO RAADII FOR HIS AWESOME YOUTUBE VIDEOS:":"- HTTPS://TINYURL.COM/MRZAADII-PLAYLIST": S#"HE INSPIRATION FOR THIS GAME CAME FROM HIS 'SCAPE FROM NION AKE' GAME:":"- HTTPS://YOUTU.BE/VïQUUO": T$"IS LAST-RELEASED VERSION OF THE GAME NO LONGER WORKS WITH LATEST 65 :":"- HTTPS://TINYURL.COM/EFOC-ORIG": T%"'VE MADE SOME REPAIRS/ENHANCEMENTS SO THAT IT RUNS ON LATEST 65  HERE:":"- HTTPS://TINYURL.COM/EFOC-NEW": 262: 	T&<2:U%4:"ERROR LOADING FILE...":: U'AT%AS%(.):AU%AS%(.):AV%.AQ%1:AS%(AV%)AT%AT%AS%(AV%)  U(AS%(AV%)AU%AU%AS%(AV%) +U)AV%: }U*V%.:AW%.:AX%AS%(AV%1):AY%AS%(AV%):AX%AY%AZ%AX%:AX%AY%:AY%AZ%:AW%1 U+AX%BA%BA%AY%
V%1 U, U- 298:V%. U.BB%AR%(AV%1):BC%AR%(AV%):AW%1AZ%BB%:BB%BC%:BC%AZ% V/BB%BC%BD%BB%:V%1: FV0O(AY%AX%)(BC%BB%):PAX%OBB%:BD%(BA%P)O:V%1: V1BF%.:AR%(AQ%)AR%(.):AS%(AQ%)AS%(.):AV%1AQ%: 301:V%1BG%(BF%)BD%:BF%BF%1 V2AV%: V3BH%.BF%2:BI%.:BJ%.BF%BH%2 V4BG%(BJ%)BG%(BJ%1) *W5AZ%BG%(BJ%):BG%(BJ%)BG%(BJ%1):BG%(BJ%1)AZ%:BI%1: BW6BJ%:BI%.BH%BF% MW7BH%: W8 305: 307:AV%.BF%12:BG%(AV%),BA%,BG%(AV%1),BA%:AV%: CHUNKIDX) = V1$  RETURN.CANTRANSPOSEOCTAVE'--------------------  RET% = 1  K = 0  DO WHILE K < LEN(V1$)    V2$ = MID$(V1$,K+1,1)    IF V2$ = "O" AND (K+1) < LEN(V1$) THEN BEGIN      V2$ = MID$(V1$,K+2,1)      IF VAL(V2$) = LIMIT THEN RET W9L%.: 295:BA%AT%AU%: 312:L%L%1:L%5 385:L%. W:BA%: W;V%.:A("V") X<#2,A:A;:A("E") "X=#2,A:A;:A("C") 8X>V%1:Y%3:U%1: DX?BP% X@!.,.,134217728131072G%,262144:!.,.,134217728131072G%65536,327680: XA XBL%.:A1:AP%AG%A1 XCBA%AP%AG%A:AO%,BA%,AF%,BA%:L%L%1:L%5 385:L%. XDBA%: YEU%4 YFBN%1 -YG#2,(P$),R,U8:S%20 NYH::#2,(T$(G%)),R,U8: jYI:#2,A:"RD=";A;:ST xYJU%4 YK"CHECKVEC ";: 315 YLV%. 294::Չ 372 YM YNU%1 YO"NEWCMD ";:W%(A64)64:AA63:U%A: YPU%63 NZQ"COLOUR ";:#2,A:A;:3.,A:X%(Y%)63:Y%Y%1:X%(Y%)A:Y%Y%1:AA%A:Z%A:U%1 [ZR 372: hZSU%0 ZT"LINE ";:#2,AB%:AB%AB%255:#2,AC%:AC%AC%255:AD%AB%(AC%R8):#2,AB%:AB%AB%255:#2,AC%:AC%AC%255 [UAE%AB%(AC%R8)S%:AE%.:AE%.: g[V#2,AB%:AB%AB%255:#2,AC%:AC%AC%255:AF%AB%(AC%R8):#2,AB%:AB%AB%255:#2,AC%:AC%AC%255 [WAG%AB%(AC%R8)S%:AG%.:AG%.: [XAD%,AE%,AF%,AG%:U%1 [Y 372: [ZU%1 <\["CIRCLE ";:#2,AB%:AB%AB%255:#2,AC%:AC%AC%255:AH%AB%(AC%R8):#2,AB%:AB%(AB%255):#2,AC%:AC%(AC%255) g\\AI%AB%(AC%R8)S%:AI%.:AI%.: \]#2,AB%:AB%(AB%255):#2,% = 0 : RETURN    BEND    K = K + 1  LOOP  RETURN.PLAYCHUNKIDX'--------------  V1$ = V$(0,CHUNKIDX)  V2$ = V$(1,CHUNKIDX)  V3$ = V$(2,CHUNKIDX)  V4$ = V$(3,CHUNKIDX)  V5$ = V$(4,CHUNKIDX)  V6$ = V$(5,CHUNKIDX)  IF ECHODELAY = 1 THEN BEGIN    PLAY V1$    SLEEP (ECHOSZ)    PLAY ,V2$    SLEEP (ECHOSZ)    PLAY ,,V3$    SLEEP (ECHOSZ)    PLAY ,,,V4$    SLEEP (ECHOSZ)    PLAY ,,,,V5$    SLEEP (ECHOSZ)    PLAY ,,,,,V6$    SLEEP (ECHOSZ)    RETURN  BEND  IF ECHOM = 0 AND ECHOB = 0 THEN BEGIN    PLAY V1$, V2$, V3$, V4$, V5$, V6$    RETURN  BEND  IF ECHOM = 1 AND ECHOB = 0 THEN BEGIN    PLAY V1$, V2$, V3$,    , V5$, V6$    SLEEP (ECHOSZ)    PLAY    ,    ,    , V1$  BEND  IF ECHOM = 1 AND ECHOB = 1AC%:AC%(AC%255):AL%AB%(AC%R8):AH%,AI%,AL%,W%:U%1 \^ 372: \_U%2 J]`"ELLIPSE ";:#2,AB%:AB%AB%255:#2,AC%:AC%AC%255:AJ%AB%(AC%R8):#2,AB%:AB%AB%255:#2,AC%:AC%AC%255 u]aAK%AB%(AC%R8)S%:AK%.:AK%.:  ^b#2,AB%:AB THEN BEGIN    PLAY V1$, V2$, V3$,    , V5$    SLEEP (ECHOSZ)    PLAY    ,    ,    , V1$,    , V3$  BEND  IF ECHOM = 2 AND ECHOB = 0 THEN BEGIN    PLAY V1$,    , V3$,    ,    , V6$    SLEEP (ECHOSZ)    PLAY    ,    ,    , V1$    SLEEP (ECHOSZ)    PLAY    , V1$    SLEEP (ECHOSZ)    PLAY    ,    ,    ,    , V1$  BEND  IF ECHOM = 2 AND ECHOB = 1 THEN BEGIN    PLAY V1$,    , V3$    SLEEP (ECHOSZ)    PLAY    ,    ,    , V1$    SLEEP (ECHOSZ)    PLAY    , V1$,    ,    ,    , V3$    SLEEP (ECHOSZ)    PLAY    ,    ,    ,    , V1$  BEND  RETURN.ENVELOPEEDITOR'---------------  DO WHILE 1    GOSUB DRAWTABLE    GOSUB GETUSERINPUTFORTABLE    ' ALT+Q TO EXIT    IF A$ = ٯ THEN EXIT  LOOP  RETURN.DRAW CURSOR PIXEL WINDOW RWINDOW LINE BOX CIRCLE ELLIPSE PALETTE RESTORE DATA ERR$ ER EL CURSOR ON OFF" 8 I$(1)=I$(1)+" VAL SCRATCH RETURN RND STOP BANK TI DO OR ST IF EL ER ON TO PEN GET END INT NOT DS RUN USING DOT " 9 I$(2)=" APPEND ATN AUTO BACKUP BLOAD BOOT BSAVE BUMP BVERIFY CATALOG CHANGE CHAR CMD COLLISION COLOR CONCAT CONT COPY WPOKE WPEEK SETBIT CLRBIT " 10 I$(3)=" DCLEAR DEFFN DELETE FN DIR DISK DLOAD DMA DMODE DPAT DSAVE DVERIFY EDMA ENVELOPE ERASE EXIT EXP FAST FILTER FIND GO64 HEADER HELP HIGHLIGHT " 11 I$(4)=" JOY LIST LOAD LOCATE LPEN MOD MONITOR MOUSE MOVSPR NEW PAINT PLAY POINTER POLYGON POS POT PUDEF " 12 I$(5)=" RCOLOR RDOT READ RECORD REM RENAME RESUME RGR RMOUSE RPLAY RREG RSPCOLOR RSPPOS RSPRITE SAVE SCNCLR SLEEP SLOW SOUND SPC TABLE'----------  PRINT "ENV EDITOR";ٯ;DUR$(SDUR, );ٯ;"OCTAVE";OCT  PRINT "----------"  PRINT "-/+: DECR/INCR, </>: OCTAVE, : EDIT, : FOCUS ENV/FILTER, +: EXIT"  PRINT  PRINT "   ";ٯ;ٯ;"";ٯ;"";ٯ;"";ٯ;"";ٯ;  PRINT "";ٯ;""  FOR ROW = 0 TO 9    IF SROW = ROW THEN PRINT ">";:ELSE PRINT " ";    PRINT ROW;": ";    COL = 0 : V$ = ENVSNAME$(ROW)    GOSUB SHOWCELL    COL = 1 : V = ENVSATTACK(ROW)    GOSUB SHOWCELL    COL = 2 : V = ENVSDECAY(ROW)    GOSUB SHOWCELL    COL = 3 : V = ENVSSUSTAIN(ROW)    GOSUB SHOWCELL    COL = 4 : V = ENVSRELEASE(ROW)    GOSUB SHOWCELL    COL = 5 : V = ENVSWAVEFORM(ROW)    GOSUB SHOWCELL    COL = 6 : V = ENVSPW(ROW)    GOSUB SHOWCELL    PRINT  NEXT ROW  PRINT  PRINT "FILTER EDITOR"  PRINT "-------------";  PRINT ٯ;"FREQ";ٯ;"LP";ٯ;"BP";ٯ;"HP";ٯ;"RES";  PRINT ٯ;"DIR";ٯ;"MIN";ٯ ;"SWEEP"  FOR FPRESET = 0 TO 10    GOSUB SHOWFILTER  NEXT FPRESET  RETURN.SHOWFILTER'-----------  IF FSEL = FPRESET THEN PRINT ">";:ELSE PRINT " ";  K = 0 : GOSUB CHECKSHOWFILTERHIGHLIGHT  PRINT FILTNAME$(FPRESET);"  ";ٯ;  K% = 1 : GOSUB CHECKSHOWFILTERHIGHLIGHT  PRINT FILTFREQ(FPRESET);ٯ;  K = 2 : GOSUB CHECKSHOWFILTERHIGHLIGHT  PRINT FILTSTATENAME$(FILTLP(FPRESET));ٯ;  K = 3 : GOSUB CHECKSHOWFILTERHIGHLIGHT  PRINT FILTSTATENAME$(FILTBP(FP"Y=";Y0;", W=";XX01;", H=";YY01; +. "     "; "+8 F+L *** LOCATE NEXT FREE BYTE *** d+VZ$42001:MX($42000):I0 ~+` IMX  LZ$42000: +jZZ2 +tW(Z):ZZ1 +~H(Z):ZZ1 +ZZWH2 +II1: 1120 + *** STORE 1ST 32 DEFAULT  COLOURS *** , DR(32),DG(32),DB(32) , K0  31 U,DR(K)($D100K):DG(K)($D200K):DB(K)($D300K) ], K c, , *** FADE ALL COLOURS BY VALUE SV (0-8) *** ,SZ  (8SV)8 , K0  31 ,( $D100K, DR(K)SZ ,2 $D200K, DG(K)SZ $.CHECKALTKEYINPUTS'--------------------  ALTKEY = PEEK($D611) AND 16  IF ALTKEY = 0 THEN RETURN  IF KEY$="X" THEN CLIP$=V$(CURSORY, CHUNKIDX) : V$(CURSORY, CHUNKIDX) = ""  IF KEY$="C" THEN CLIP$=V$(CURSORY, CHUNKIDX)  IF KEY$="V" THEN% V$(CURSORY, CHUNKIDX) = CLIP$  IF KEY$="" THEN GOSUB COPYALLVOICESTOCLIPBOARD  IF KEY$="" THEN GOSUB PASTEALLVOICESFROMCLIPBOARD  IF KEY$=ٯ THEN BEGIN    V1$ = MID$(V$(CURSORY, CHUNKIDX), CURSORX + 1)    TEMPO TMPO% : PLAY &V1$  BEND  IF KEY$="," THEN DELTA = -1 : GOSUB TRANSPOSEOCTAVE  IF KEY$="." THEN DELTA = 1  : GOSUB TRANSPOSEOCTAVE  IF KEY$="I" THEN GOSUB INSERTCHUNK  KEY$ = ""  RETURN.COPYALLVOICESTOCLIPBOARD'----------------------------  FOR Y = 0' TO 5    CP$(Y) = V$(Y, CHUNKIDX)  NEXT Y  RETURN.PASTEALLVOICESFROMCLIPBOARD'-------------------------------  FOR Y = 0 TO 5    V$(Y, CHUNKIDX) = CP$(Y)  NEXT Y  RETURN.INSERTCHUNK'------------  FOR K = CHUNKMAX-1 TO CHUNKIDX + 1 STEP -1    FOR Y = 0 TO 5      V$(Y, K) = V$(Y, K-1)    NEXT Y  NEXT K  FOR Y = 0 TO 5    V$(Y, CHUNKIDX) = ""  NEXT Y  ' REPAIR ITEMS IN THE SEQUENCE THAT ARE AFFECTED  FOR K = 0 TO 100    IF SEQCHUNK(K) >= CHUNKIDX THEN SEQCHUNK(K) = SEINOSAUR CHOMPS DOWN THE SCRUMPTIOUS MITE AND THEN":H1:I14: 225:L$"FALLS BACK ASLEEP...":H1:I14: 225 M2b  Z2c G%2 2d L$"HE HAI DINOSAUR GRACEFULLY DINES ON THE CRYING-TIGER, AND ":H1:I14: 225 	3e L$"THEN RAISES ITS CLASPED PAWS TO ITS FOREHEAD TO WAI IN THANKS.":H1:I14: 225: 3f G%1 }3g L$"HE URKISH DINOSAUR ENTHUSIASTICALLY RIPS INTO THE TASTY FAINTED-EGGPLANT!":H1:I14: 225: 3h L$"T DROPS A PRESENT FOR YOU TO SHOW ITS GRATITUDE...":H1:I14: 225: 70:K%K%1: 3i  3j  P4k L$"NION CAKE LOOKS OVER YOUR INVENTORY...":H1:I14: 225:D1: 118:BK%.:B.3:D$(N$(B),3): 65 ]4l F%. 4m L$"'MM... OU SEEM TO BE MISSING A ":H.:I2: 225:L$N$(B):H.:I3: 225:L$"...'":H1:I2: 225:BK%1 4n D1: 118: 4o B 4p BK%1 `5q F%.:L$"":H1: 225:L$"' AM AFRAID THIS MEANS THAT  NEED TO SHOOT YOU NOW!'":H1:I2: 225:D1.5: 118 5r L$"":H1: 225:L$"!":H1:I10: 225:D1.5: 118: 5s  ,6t L$"'OOKS LIKE YOU'VE GOT IT ALL...'":H1:I2: 225:D1: 118:L$"'OW, DEMONSTRATE YOUR 65 CODING SKILLS TO ME, OTHERWISE...'" O6u H1:I2: 225:D2: 118:F%1: X6v CTI b6w  385 v6x (TIC)D 119 |6y  6z L$"PON HEARING YOUR MELODIOUS WHISTLING, NION AKE ARRIVES, HOLDING YOU":H1:I14: 225 E7{ L$"AT GUNPOINT, AND FORCEFULLY ESCORTING YOU TO HIS DUNGEON IN ERMANY...":H1:I14: 225:G%0: 376 Q7| N. n7} BN%1:P$"ONION.V": 325 7~ ::E$(.)"MEGA65":I%1: 7 N. 7 D2: 118: 7  244 7 N. 88 L$"' FINALLY CAUGHT THE THIEF THAT STOLE MY 65!'":H.:I2: 225:L$", NION AKE EXCLAIMS!":H1:I14: 225 8 L$"":H1: 225:D1.5: 118:L$"'F YOU SHOW ME YOUR PROGRAMMING SKILLS  WILL RELEASE YOU!'":H.:I2: 225 9 L$" HE OFFERS.":H1:I14: 225:L$"":H1: 225:D2: 118:L$"'F NOT,  WILL SHOOT YOU!'":H1:I2: 225 )9 D2: 118: 107 69 :: =9  O9 F%.BL%1: U9  a9  184: t9 A$U$(BR%) 9 BR%BR%1 9 BR%4 9 L$"'ELL DONE, YOU COMPLETED THE PROGRAM!'":H1:I2: 	225 : ::L$"'OOD, NOW FOR THE NEXT LINE!'":H1:I2: 225: }: ::L$"'O NO! OU MADE MISTAKES ON THIS LINE!'":H.:I2: 225:L$", NION AKE ROARS":H1:I14: 225 : L$"'YPE IT AGAIN PROPERLY, OTHERWISE  WILL SHOOT YOU!'":H1:I2: 225
: :  4; BN%1:P$"MEGA65.V": 325:BR%4:L$"YPE: ":H.:I11: 225:L$U$(BR%):H1:I12: 225: 139 ;  140::L$"'MPRESSIVE!'":H.:I2: 225:L$", NION AKE SAYS WITH ADMIRATION!":H1:I14: 225 	< D1: 118:L$"'OU HAVE PROVEN YOURSELF WORTHY TO KEEP ALIVE!  HEREBY RELEASE YOU!":H1:I2: 225:D2: 118 k< L$"EMEMBER YOUR PROMISE, OTHERWISE  WILL FIND YOU AND SHOOT YOU!'":H1:I2: 225:D2: 118 < L$"OU ARE FREE AGAIN! ONGRATULATIONS, YOU WON THE GAME!":H1:I7: 225:BL%1:D1.5: 118: <  173: 65 < F%. = L$"OU ARE NOT CARRYING THAT!":H1:I14: 225: %=  8= (B$,3)D$ N= D$"WHI" 122: _= D$"MEG" l= G%0 ~=  148:BL%1: = ::L$"OW COULD YOU THINK OF PLAYING WITH YOUR 65 WHEN THERE ARE HUNGRY":H1:I14: 225:L$"DINOSAURS TO FEED?!" > H1:I14: 225: >  >  O> L$"OU CANNOT USE THAT!":H1:I14: 225: U>  > L$"OU ARE CARRYING:":H1:I14: 225 > I%. > L$"  - NOTHING...":H1:I12: 225 > ::A.I%1:L$"  - ":H.:I14: 225:L$E$(A):H1:I3: 225:A: ?  ? A(A$," "):D$(A$,3) +? A. <? A$(A$,A1) P? ::A$"": V?  ? 3.,1:I1:K.15:Q%8,320R%16K,Q%87,320R%16K:K: ? 3.,.:K.15:Q%8,320R%16K,Q%87,320R%16K:K: ? R%R%1 ? R%5 ?  224:.1: @  @  178:M$"": $@ A$: 385 5@ A$"" 185 o@ L(A$):T%1:(L32L127)L13(L20(M$).)T%. |@ T%1 @ L13 @ A$M$: 179:Q%.: 180: @  @ L20 @ M$(M$,(M$)1): 179:Q%Q%1: 178: @ L13L20 &A M$M$A$: 179:L$A$:H.: 225: 178: -A  5A : VA  184:A$"N"A%1G%A%: qA A$"S"B%1G%B%: A A$"E"C%1G%C%: A A$"W"D%1G%D%: A A$"I" 168: "="  FF($42000)  FFFF1:BFF: 620 J$  A$" "  SS1: 1000: S2   150 l$  A$"L"   600: LOAD BLOCK $  A$"X"  A 0,0: $  1050 $  60 $  *** RESTORE ORIGINAL CHARS AND SAVE BLOCK TO MEMORY *** $  - SAVE X,Y,W,H,DATA  % A A$"L" 234: A A$"QUIT"A$"EXIT"BL%1: B  173:D$"LOO" 234: *B D$"TAK"D$"GET" 31: @B D$"INV" 168: UB D$"HIT" 48: jB D$"GIV" 74: B D$"USE" 153: B L$"ORRY,  DON'T UNDERSTAND THAT COMMAND":H1:I14: 225: B F%.:A.1:A$O$(G%,A):B$(A$,1):C$"AEIOU" C A$"" C F%. 6C L$"OU SEE A":H.:I14: 225:F%1 _C ::L$" AND A":H.:I14: 225: sC (C$,B$). C L$"N":H.:I14: 225: C L$" "A$:H.:I3: 225: C A C F%. C L$" HERE.":H1:I14: 225: C  dD M.7:!.,6404,26214464021M16384,26214464020M16384:M:M.7:!3,640,.,26214464024M16384:M:R%R%1: nD 3.,I ~D (L$). D J.(L$)1:Q%,320R%16,2,1,2,(L$,J1,1):Q%Q%1 D Q%80 D Q%.: 180: D J: D H1 D Q%.: 180: E  fE L$Q$(G%):H1:I14: 225: 212:A%1:B%1:C%1:D%1:L$"XITS: ":H.:I14: 225:A$R$(G%) vE (A$). E A1(A$):B$(A$,A,1):C$(S$(G%),A,1):L$B$:H.:I7: 225:A(A$)L$", ":H.:I14: 225 E B$""A%(C$) F B$""B%(C$) F B$""C%(C$) ,F B$""D%(C$) 6F A: _F (A$).L$"NONE...":H.:I12: 225 uF L$"":H1: 225: F Q%.:R%.:..: 376 F BP%1BQ%(G%)1 F  319: F  F S%BO%(G%): 325: F N1 F  122: F  244: 234 G  198 G BL%1 WG L$"":H1:I14: 225:L$" ":H1:I5: 225:D2: 118:.: ^G  vG G%H%H%G%: 249 G 252: H(147);:G%3:H%G%:I%.:K%.:BK%.:BL%.:BR%.:BN%.:M%1:O$(1,.)"RICE-PLANT":O$(2,.)"CARNIVOROUS-MITE":O$(3,.)"EGGPLANT":O$(4,.)"TIGER" UHO$(1,1)"":O$(2,1)"":O$(3,1)"":O$(4,1)"":..,640,400,4: kH 263: 258: 249 wH 260: H:"[RESS ANY KEY TO CONTINUE]":A$: I(147);::"","","","","","":"NION AKE AND THE UNGRY INOSAURS":"===================================" I"  ODING & USIC SEQUENCING BY URCE SIKYILDIZ":"  RTWORK BY YCA SIKYILDIZ"::" )NSTRUCTIONS":" )REDITS": I	" RESS   TO BEGIN":A$:A$ I
A$"I" 270: 263 IA$"C" 282: 263 IA$" " 263 J ^J(147);:"NSTRUCTIONS (PAGE 1 OF 2)":"============":"HE DINOSAURS ARE HUNGRY...": J"...GO AND FIND THEM THE FOOD THAT THEY LIKE!"::"HEN YOU GIVE THEM #ALL THE RIGHT FOOD, THEY WILL REWARD YOU WITH A " &K"NEW RETRO COMPUTER!"::"...BUT BEWARE OF DIRTY OLD NION AKE...": K"...HE IS ANGRY DUE TO SOMEBODY STEALING HIS FAVOURITE RETRO COMPUTER..."::"AYBE YOU CAN APPEASE HIS ANGER BY RETURNING I $40800X0Y080,T1: $FF80000X0Y080,C1 L%  $40800XY80,T2: $FF80000XY80,C2 j% I($42000): BLOCK COUNT %  1100: LOCATE NEXT FREE BYTE % Z$42000L %  Z,X0:ZZ1 %  Z,Y0:ZZ1 %  Z,XX01:ZZ1 % Z,YY01:ZZ1 % YYY0  Y 
&   XXX0  X /&"     Z,($40800XXYY80):ZZ1 :&6   XX C&@ YY S&A YYY0  Y e&B   XXX0  X &C     Z,($FF80000XXYY80):ZZ1 &D   XX &E YY &J $42000,I1 &^A 0,49: CL$;"BLOCK COUNT=";($42000);", NEXT-FREE=$";(Z); &hA 0,0: 'X *** LOAD BLOCK *** 4'b "";CL$;: "BLOCK#";B R'lMX($42000):Z$42001:I0 'v IMX  A 0,0: CL$;"INVALID BLOCK#!";: ' TRAVERSE TO FIND BLOCK ' IB   720: FOUND 'ZZ2: SKIP X,Y 'W(Z):ZZ1 'H(Z):ZZ1 'ZZWH2 (II1 ( 630 +( FOUND, NOW LOAD IT <(X(Z):ZZ1 M(Y(Z):ZZ1 g(W(Z):ZZ1:X1XW1 (H(Z):ZZ1:Y1YH1 ( "";CL$;"X=";X;", Y=";Y;", W=";W;", H=";H;", Z=$";(Z);"";(27);"J";CL$;"FRAME=";FF;", NXT=$";(ZWH 2); ")ZZZWH:P$40800XY80:PP$FF80000XY80 2) YYY  Y1 D)! 0, W, Z, P X)! 0, W, ZZ, PP z) ZZW:ZZZZW:PP80:PPPP80 )4 YY )> )A 0,0: ) *** IF MOVEMENT, RESTORE ORIGINAL CHAR *** ) A$" "   *   S0   $!40800XY80,T1: $FF80000XY80,C1 F*   S1   $40800XY80,T2: $FF80000XY80,C2 M* S* m* *** SHOW COORDS *** *A 0,49: "                            ";:A 0,49 * S0   (27)"QX=";X;", Y=";Y; +$ S1   (27)"QX=";X0;", "ٯ9 THEN GOSUB CHUNKSEQUENCER  ' 4 = SAVE AS TEXT  IF KEY$ = ٯ4 THEN GOSUB SAVEASTEXT  ' RETURN=PLAY ROW  IF KEY$ = ٯ THEN TEMPO TMPO% : PLAY V$(CURSORY,CHUNKIDX)  ' SHIFT+RETURN=PLAY ALL CHANNELS  IF KEY$ = ٯԯ #THEN BEGIN    TEMPO TMPO%    GOSUB PLAYCHUNKIDX  BEND  IF KEY$ = ٯ THEN BEGIN    V1$ = V$(CURSORY, CHUNKIDX)    V1$ = LEFT$(V1$,CURSORX) + MID$(V1$,CURSORX+2)    V$(CURSORY, CHUNKIDX) = V1$  BEND  GOSUB CHECKVALIDKEY  RETURN$T TO HIM..." K 262:(147);:"NSTRUCTIONS (PAGE 2 OF 2)":"============" `L"HIS IS A SIMPLE TEXT ADVENTURE GAME ACCOMPANIED BY VECTOR ART DRAWN ":"(SLOWLY) VIA  65 :)": L"S  65 DIDN'T COME WITH A ROUTINE TO DRAW FILLED IRREGULAR% POLYGONS,":" HAD TO WRITE MY OWN (IN !), THAT MADE THINGS EVEN SLOWER :)" wM:"RTWORK WILL BE CACHED AFTER 1ST DRAW ATTEMPT COMPLETES."::"YPE SIMPLE   STRINGS TO INTERACT WITH THE GAME." M"  - .G.  65"::"OU CAN ABBR&EVIATE ANY WORD TO THE FIRST 3 LETTERS.":"  - .G.  ": `N": URRENT 65 CORE HAS PROBLEMS IN 640X400 16 COLOUR MODE":"- ERFORMS BETTER IN EMU RIGHT NOW": 262:(147); N"AME OCABULARY":"---------------":"- , , ,    (TO GO' ORTH, OUTH, AST, EST)":"- /":"- /" CO"- / <OBJECT>":"-  <OBJECT>":"-  <OBJECT>":"-  <OBJECT>":"- /": 262: O(147);:"REDITS":"=======":"ODING AND USIC SEQUENCING BY URCE SIKYILDIZ":"RTWORK BY YCA SIKYILDIZ" 7P"- OU'RE WELCOME TO DONATE TO THE ARTIST TO ENCOURAGE HER TO CONTRIBUTE MORE":"  OF HER ARTWORK TO FUTURE 65 GAMES!" P"  - HTTPS://TINYURL.COM/AYCA-DONATE"::"ONG CREDITS":"------------" Q"USTRALIA - ";(34) 4   B0:C0:D0:A%0: A&(8192):B%0:C%0:D&0: 3 A   4: 42 I   1   E1:F1:B%.:B&.:D&.:"";:53280,.:53281,.:   A$:A$"" 17   A$""B. 39:BB1:   A$""B79 39:BB1:   A$""C. 39:CC1: ! A$""C49SORY,CHUNKIDX)) THEN _      CURSORX = LEN(V$(CURSORY,CHUNKIDX))  BEND  ' RIGHT ARROW?  IF KEY$ = ٯ AND CURSORX < LEN(V$(CURSORY,CHUNKIDX)) THEN BEGIN    CURSORX=CURSORX+1  BEND  ' LEFT ARROW?  IF KEY$ = ٯ AND CURSORX > 0 THEN CURSORX=CURSORX-1  ' BACKSPACE (INST/DEL)?  IF KEY$ = ٯ AND CURSORX > 0 THEN BEGIN    V$(CURSORY,CHUNKIDX)=LEFT$(V$(CURSORY,CHUNKIDX),CURSORX-1) _      + MID$(V$(CURSORY,CHUNKIDX),CURSORX+1)    CURSORX=CURSORX-1  BEND  39:CC1: !	 A$"" 30: 1!
 A$"" 33: D! A$"" 26: W! A$"" 20: j! A$""D&1: }! A$""D&.: ! A$""AB,C: 39: 18:A$;: 35 !  ! "";(27);"QFNAME=";B$;"  DIDX%=";B%;: ! D&1"";:ՙ""; !  " "";:C%.:C%B%:C&A&(C%):C%C%1 2" C&255B&1: 25 N" C&254B&.:.02: 25 t" BC&:B128BB128:"";:ՙ""; " CA&(C%):C%C%1:A$(A&(C%)):C%C%1:AB,C:A$;:B&..02 " : " B&. " B&1:A&(B%)255:53280,2 # ::B&.:A&(B%)254:53280,0: # B%B%1: ;# "LOAD NAME: ";B$:B$"" a#  3:#2,(B$),R,U8::#2,C&:ST #  A&(B%)C&:B%B%1::#2: 20: #! "SAVE NAME: ";B$:B$"" #" (B$):#2,(B$),W,U8:B.B%:2,(A&(B));:B:#2: ## EBFC $$ A&(B%3 )BD&128:A&(B%1)(A$) f$% :::A&(B%)BD&128:B%B%1:A&(B%)C:B%B%1:A&(B%)(A$):B%B%1:EB:FC: l$&  w$' A% $( A267911168B80C:A,(A)32:A%.:DTI: $)  $* TIDDTI.5:Վ $+ A267911168B80C:A,(A)32:A%A%1:   &.:A& IF ESCFLAG% THEN BEGIN    ESCFLAG%=0    IF KEY$ = "J" THEN BEGIN:CURSORX=0:BEND    IF KEY$ = "K" THEN BEGIN:CURSORX=LEN(V$(CURSORY,CHUNKIDX)):BEND    IF KEY$=ٯ THEN GOSUB STOPALLMUSIC    KEY$=""  BEND  IF KEY$ = ٯ THEN 	ESCFLAG%=ABS(ESCFLAG%-1)  ' CTRL-W = FORWARD ONE WORD  IF KEY$ = ٯ̯ THEN GOSUB FORWARDWORD  ' CTRL-U = BACK ONE WORD  IF KEY$ = ٯ̯ THEN GOSUB PREVIOUSWORD  ' < / > = PREVIOUS/NEXT CHUNK  IF KEY$ = "<" AND CHUNKIDX>0 THEN BEG
IN    CHUNKIDX=CHUNKIDX-1    CURSORX=0  BEND  IF KEY$ = ">" AND CHUNKIDX<CHUNKMAX THEN BEGIN    CHUNKIDX=CHUNKIDX+1    CURSORX=0  BEND  ' +/- = TEMPO CHANGE  IF KEY$="-" THEN TMPO%=TMPO%-1  IF KEY$="+" THEN TMPO%=TMPO%+1  ' MEGA-Q = !EXIT  IF KEY$ = ٯ THEN BEGIN    PRINT "ARE YOU SURE? (Y/N)"    GET KEY A$    IF A$="Y" THEN KEY ON:END  BEND  IF KEY$ = ٯ1 THEN GOSUB LOAD  IF KEY$ = ٯ3 THEN GOSUB SAVE  IF KEY$ = ٯ7 THEN GOSUB ENVELOPEEDITOR  IF KEY$ =  = ""#DEFINE ٯ  = "".INIT'----PRINT "";ٯ;ٯ;"5";PLAY : PLAY ""BACKGROUND 0 : BORDER 0COLOR 5.MAIN'----  KEY OFF  GOSUB DRAWEDITORSCREEN  GOSUB USERINPUT  GOTO MAIN.DRAWEDITORSCREEN'------------------  CURSOR 0,0:PRINT "PLAYMAKER V0.5 - BY GURCE ISIKYILDIZ"  PRINT "---------"  PRINT "<: PREV CHUNK, >: NEXT CHUNK, -/+ TEMPO, 7=ENV EDITOR, 9/-=SEQ EDITOR"  PRINT ": PLAY CURR VOICE, +: PLAY ALL VOICE, 1=LOAD, 3=SAVE, +=QUIT"  PRINT "-//: ROW CUT/COPY/PASTE, -: STOP MUSIC, -: PLAY FROM CURSOR"  PRINT  GOSUB DRAWCURRENTCHUNK  RETURN.DRAWCURRENTCHUNK'------------------  PRINT "TEMPO: "; TMPO%  PRINT "CHUNKIDX: "; CHUNKIDX       FOR VIDX=0 TO 5    IF CURSORY <> VIDX THEN BEGIN      CURSOR 0,9+VIDX*2:PRINT CHR$(27);"Q";"V";VIDX+1;": ";V$(VIDX,CHUNKIDX);    BEND:ELSE BEGIN      CURSOR 0,9+VIDX*2:PRINT CHR$(27);"Q";"V";VIDX+1;": ";      FOR IDX=1 TO LEN(V$(VIDX,CHUNKIDX))        IF CURSORX = IDX-1 THEN BEGIN          PRINT "";MID$(V$(VIDX,CHUNKIDX),IDX,1);"";        BEND:ELSE BEGIN          PRINT MID$(V$(VIDX,CHUNKIDX),IDX,1);        BEND      NEXT IDX      IF LEN(V$(VIDX,CHUNKIDX)) = 0 OR CURSORX=LEN(V$(VIDX,CHUNKIDX)) THEN PRINT " ";    BEND  NEXT VIDX  RETURN.CHECKVALIDKEY'---------------  FOR IDX=1 TO LEN(VALID$)    VAL$=MID$(VALID$,IDX,1)    IF KEY$= VAL$ THEN BEGIN      IF CURSORX < LEN(V$(CURSORY,CHUNKIDX)) THEN BEGIN        V$(CURSORY,CHUNKIDX) = LEFT$(V$(CURSORY,CHUNKIDX),CURSORX) _          + VAL$ + MID$(V$(CURSORY,CHUNKIDX),CURSORX+1)        CURSORX=CURSORX+1        RETURN      BEND      V$(CURSORY,CHUNKIDX)=V$(CURSORY,CHUNKIDX)+VAL$      CURSORX=CURSORX+1      RETURN    BEND  NEXT IDX  RETURN.FORWARDWORD'------------  IF CURSORX = LEN(V$(CURSORY,CHUNKIDX)) THEN RETURN  DO WHILE MID$(V$(CURSORY,CHUNKIDX),CURSORX+1,1) <> " "    CURSORX=CURSORX+1    IF CURSORX = LEN(V$(CURSORY,CHUNKIDX)) THEN RETURN  LOOP  DO WHILE MID$(V$(CURSORY,CHUNKIDX),CURSORX+1,1) = " "    CURSORX=CURSORX+1    IF CURSORX = LEN(V$(CURSORY,CHUNKIDX)) THEN RETURN  LOOP  RETURN.PREVIOUSWORD'-------------  IF CURSORX = 0 THEN RETURN  IF CURSORX = 1 THEN CURSORX = 0: RETURN  CURSORX = CURSORX - 1  DO WHILE MID$(V$(CURSORY,CHUNKIDX),CURSORX+1,1) = " "    CURSORX=CURSORX-1    IF CURSORX = 0 THEN RETURN  LOOP  DO WHILE MID$(V$(CURSORY,CHUNKIDX),CURSORX+1,1) <> " "    CURSORX=CURSORX-1    IF CURSORX = 0 THEN RETURN  LOOP  CURSORX=CURSORX+1  RETURN.SETALLENV'-----------  FOR ROW = 0 TO 9    GOSUB SETENV  NEXT ROW  RETURN.LOAD'----  INPUT "LOAD NAME: ";KEY$  IF KEY$="" THEN RETURN  DOPEN #2,(KEY$),R,U8  ' LOAD MELODY CHUNKS  ' ------------------  INPUT #2, CHUNKCNT  FOR CHUNKIDX = 0 TO CHUNKCNT - 1    FOR VIDX=0 TO 5      INPUT #2,V$(VIDX, CHUNKIDX)    NEXT VIDX  NEXT CHUNKIDX  INPUT #2,TMPO%    ' LOAD ENVELOPES  ' --------------  FOR ROW = 0 TO 9    INPUT #2, ENVSNAME$(ROW)    INPUT #2, ENVSATTACK(ROW)    INPUT #2, ENVSDECAY(ROW)    INPUT #2, ENVSSUSTAIN(ROW)    INPUT #2, ENVSRELEASE(ROW)    INPUT #2, ENVSWAVEFORM(ROW)    INPUT #2, ENVSPW(ROW)    GOSUB SETENV  NEXT ROW  PRINT  ' LOAD FILTER PRESETS  ' -------------------  FOR ROW = 0 TO 10    INPUT #2, FILTNAME$(ROW)    INPUT #2, FILTFREQ(ROW)    INPUT #2, FILTLP(ROW)    INPUT #2, FILTBP(ROW)    INPUT #2, FILTHP(ROW)    INPUT #2, FILTRES(ROW)    INPUT #2, FILTDIR(ROW)    INPUT #2, FILTMIN(ROW)    INPUT #2, FILTSWEEP(ROW)  NEXT ROW  ' LOAD SEQUENCE  ' -------------  SEQCNT = 0  INPUT #2, SEQCNT  ROW = 0  DO WHILE ROW < SEQCNT    INPUT #2, SEQCHUNK(ROW)    INPUT #2, SEQEXTRA(ROW)    ROW = ROW + 1  LOOP  DCLOSE #2  CHUNKIDX = 0  RETURN.GETCHUNKCNT'-------------  CHUNKCNT = 0  FOR K = 0 TO CHUNKMAX    IF V$(0,K)<>"" OR V$(1,K)<>"" OR V$(2,K)<>"" OR V$(3,K)<>"" OR V$(4,K)<>"" OR V$(5,K)<>"" THEN BEGIN      CHUNKCNT = K + 1    BEND  NEXT K  RETURN.SAVE'----  INPUT "SAVE NAME: ";KEY$  IF KEY$="" THEN RETURN    DELETE (KEY$)  DOPEN #2,(KEY$),W,U8  TMP = CHUNKIDX  ' SAVE MELODY CHUNKS  ' ------------------  GOSUB GETCHUNKCNT  PRINT #2, CHUNKCNT  FOR" !  CL$(27)"Q": $D020,11,14 1  FF0: 1200 N 
  *** SCREEN CAPTURE *** {   1. PRESS 'SPACE' KEY ON TOP-LEFT POINT    2. THEN USE CURSOR KEYS TO MOVE TO BOTTOM-RIGHT POINT & PRESS 'SPACE'  (  3. PROVIDE A FILENAME TO SAVE TO !2 X0:Y0:S0 CHUNKIDX = 0 TO CHUNKCNT - 1    FOR VIDX=0 TO 5      PRINT #2,V$(VIDX, CHUNKIDX)    NEXT VIDX  NEXT CHUNKIDX  PRINT #2,TMPO%  ' SAVE ENVELOPES  ' --------------  FOR ROW = 0 TO 9    PRINT #2, ENVSNAME$(ROW)    PRINT #2, ENVSATTACK(ROW)    PRINT #2, ENVSDECAY(ROW)    PRINT #2, ENVSSUSTAIN(ROW)    PRINT #2, ENVSRELEASE(ROW)    PRINT #2, ENVSWAVEFORM(ROW)    PRINT #2, ENVSPW(ROW)  NEXT ROW  ' SAVE FILTER PRESETS  ' -------------------  FOR ROW = 0 TO 10    PRINT #2, FILTN AME$(ROW)    PRINT #2, FILTFREQ(ROW)    PRINT #2, FILTLP(ROW)    PRINT #2, FILTBP(ROW)    PRINT #2, FILTHP(ROW)    PRINT #2, FILTRES(ROW)    PRINT #2, FILTDIR(ROW)    PRINT #2, FILTMIN(ROW)    PRINT #2, FILTSWEEP(ROW)  NEXT ROW  ' SAVE! SEQUENCE  ' -------------  PRINT #2, SEQCNT  ROW = 0  DO WHILE ROW < SEQCNT    PRINT #2, SEQCHUNK(ROW)    PRINT #2, SEQEXTRA(ROW)    ROW = ROW + 1  LOOP  DCLOSE #2  CHUNKIDX = TMP  RETURN.SAVEASTEXT'------------  INPUT "SAVE (AS TE%XT) NAME: ";KEY$  IF KEY$="" THEN RETURN  DELETE (KEY$)      DOPEN #2,(KEY$),W,U8  FOR CHUNKIDX = 0 TO CHUNKMAX    FOR VIDX=0 TO 5      PRINT #2, "V";CHR$(49+VIDX);"$(";STR$(CHUNKIDX);")=";      PRINT #2, CHR$(34);V$(VIDX, CHUNKIDX);CHR$(34)#:SV0 !3  ($5FFFE)71  ($5FFFF)73   $5FFFE,$4947: $42000,0: CHECK FOR MAGIC MARKER AT END OF BANK 5, IF NOT THERE, INITIALISE B4 MEM !7  A 0,49: 1100: CL$;"BLOCK COUNT=";($42000);", NEXT-FREE=$";(Z); "<  S0  T1($40800XY80):C1$($FF80000XY80):X0X:Y0Y X"A  S1  T2($40800XY80):C2($FF80000XY80):X1X:Y1Y "F  $40800XY80,43: $FF80000XY80,1 "P  A$ "U  A$" "   1000 "Z  A$""  X0  XX1 "d  A$""  X79  XX1  #e  A$";"  SV0  SVSV1: 1300 %#f  A$":"  SV8  SVSV1: 1300 J#g  A$"]"  SG0  SGSG1: 1400 o#h  A$"["  SG8  SGSG1: 1400 #n  A$""  Y0  YY1 #x  A$""  Y49  YY1 #y  A$"C"   "";:B0: 620 #z  A$"-"  FF0  FFFF1:BFF: 620  $|  A$&    NEXT VIDX      PRINT #2, ""  NEXT CHUNKIDX  DCLOSE #2  CHUNKIDX = 0  RETURN.USERINPUT'----------  ' GETKEY KEY$  GOSUB READKEYLOOP  KEY$ = A$  GOSUB CHECKALTKEYINPUTS  ' DOWN ARROW?  IF KEY$ = ٯ AND CURSORY<5 THEN BEGIN    CURSORY = CURSORY + 1    IF CURSORX > LEN(V$(CURSORY,CHUNKIDX)) THEN CURSORX = _      LEN(V$(CURSORY,CHUNKIDX))  BEND  ' UP ARROW?  IF KEY$ = ٯ AND CURSORY>0 THEN BEGIN    CURSORY = CURSORY - 1    IF CURSORX > LEN(V$(CUR E DINOSAUR APPRECIATES YOUR KIND GESTURE, BUT THAT ISN'T THE FOOD IT LIKES":H1:I14: 225: H1\ E%1 Q1]  68 ^1^ G%3 1_ L$"HE IETNAMESE DINOSAUR DEVOURS THE TASTY RICE-PAPER ROLL...":H1:I14: 225: 1` G%4 F2a L$"HE USTRALIAN D ECHO MELODY: VOICE 1 ON VOICE 4#DEFINE įϯ2 = -5   ' ECHO MELODY: VOICE 1 ON VOICE 2 + 4 + 5#DEFINE įϯ  = -6   ' ECHO BASS:   VOICE 3 ON VOICE 6#DEFINE įϯ = -7#DEFINE įϯ = -8#DEFINE į = -9#DEFINE į = -10#DEFINE į = 11#DECLARE SEQCMDNAME$(10)SEQCMDNAME$(1) = ""SEQCMDNAME$(2) = ""SEQCMDNAME$(3) = ""SEQCMDNAME$(4) = "ϯ1"SEQCMDNAME$(5) = "ϯ2"SEQCMDNAME$(6) = "ϯ"SEQCMDNAME$(7) = "ϯ"SEQCMDNAME$(8) = "ϯ"SEQCMDNAME$(9) = ""SEQCMDNAME$(10) = ""#DECLARE SEQCNT, SEQPTR#DECLARE ROW, COL, SROW, SCOL, A$, V, MAXV, V$#STRUCT ٯ IN$, OUT$ٯ KEYS(11) = [ _  [ "A", "C", ], _  [ "W", "#C", ], _  [ "S", "D", ], _  [ "E", "#D", ], _  [ "D", "E", ], _  [ "F", "F", ], _  [ "T", "#F", ], _  [ "G", "G", ], _  [ "Y", "#G", ], _  [ "H", "A", ], _  [ "U", "#A", ], _  [ "J", "B", ] _]#DECLARE PSTR$, K, DELTA#DECLARE WNAME$(4)WNAME$(0) = ""WNAME$(1) = ""WNAME$(2) = ""WNAME$(3) = ""WNAME$(4) = ""#DECLARE FILTSTATENAME$(2)FILTSTATENAME$(0) = ""FILTSTATENAME$(1) = ""#DECLARE FPRESET = 1#DECLARE FSCOL = 0, FSROW = 0, FFOCUS = 0, FSEL = -1#DECLARE OCT = 5#DECLARE CURRFREQ, CURRDIR#DECLARE HANDLED#DECLARE PLYPTR = -1, PLYFLAG.DURATION'--------#DEFINE  = 0#DEFINE  = 1#DEFINE   = 2#DEFINE į = 0#DEFINE į = 1#DEFINE į = 2#DEFINE į = 3#DEFINE į = 4#DECLARE SDUR = 2#DECLARE DUR$(5,2)DUR$(į, ) = "WHOLE"DUR$(į, ) = "W"DUR$(į, )  = "1"DUR$(į, ) = "HALF"DUR$(į, ) = "H"DUR$(į, )  = "2"DUR$(į, ) = "QUARTER"DUR$(į, ) = "Q"DUR$(į, )  = "3"DUR$(į, ) = "EIGHTH"DUR$(į, ) = "I"DUR$(į, )  = "4"DUR$(į, ) = "SIXTEENTH"DUR$(į, ) = "S"DUR$(į, )  = "5"#DECLARE CLIP$, ALTKEY, L	IMIT, RET%, Y, CP$(6).KEYS'----#DEFINE ٯ = ""#DEFINE ٯ = ""#DEFINE ٯ = ""#DEFINE ٯ = ""#DEFINE ٯ = " "#DEFINE ٯ = ""#DEFINE ٯ̯ = ""#DEFINE ٯ̯ = ""#DEFINE ٯ = ""#DEFINE
 ٯ1 = ""#DEFINE ٯ3 = ""#DEFINE ٯ4 = ""#DEFINE ٯ7 = ""#DEFINE ٯ8 = ""#DEFINE ٯ9 = CHR$(16)#DEFINE ٯ = CHR$(13)#DEFINE ٯ = CHR$(27)#DEFINE ٯԯ = CHR$(141)#DEFINE ٯԯ = ""#DEFINE ٯԯ = ""#DEFINE ٯ֯ = ""#DEFINE ٯ֯ = ""#DEFINE ٯ = CHR$(9)#DEFINE ٯ = ""#DEFINE ٯ  = ""#DEFINE ٯ = CHR$(14)#DEFINE ٯ = CHR$(142)#DEFINE ٯ = CHR$(7)#DEFINE  |   E$(10):I%0:J%0:K%0:L%0: F$(11): G$(11): H$(11): I$(11): J$(11): K$(11): G(14):G(.).:G(1)1:G(2)2:G(3)3 ! G(4)2:G(5)4:G(6)5:G(7)7:G(8)8:G(9)8:G(10)5:G(11)7:G(12)8:G(13)8: N%(4): O%(4): P%(4):N%(.)18:O%(.)6:P%(.)1:N%(1)25:O%(1)14:P%(1)1 ! N%(2)35:O%(2)10:P%(2).:N%(3)15:O%(3)6:P%(3)1:N%(4)20:O%(4)9:P%(4)1:N0: X%(12000):Y%3:Z%1:AA%1: AR%(250): AS%(250): BG%(20): "  N$(4):BK%0:BL%0:N$(.)"WHISTLE":N$(1)"FLOPPY-DISK":N$(2)"MEGA65":N$(3)"PROGRAM-LISTING": O$(4,2):BN%0: "  Q$(5): R$(5): S$(5): T$(5): BO%(5):Q$(.)"OU ARE TRAPPED IN NION AKE'S DIRTY SMELLY PRISON!":R$(.)"":S$(.)"":T$(.)"GERMAN.V":BO%(.). # Q$(1)" URKISH DINOSAUR IS BATHING IN THE THERMAL WATERS.":R$(1)"":S$(1)"2":T$(1)"TURK.V":BO%(1). # Q$(2)" HAI DINOSAUR IS PERFORMING A TRADITIONAL DANCE.":R$(2)"":S$(2)"13":T$(2)"THAI.V":BO%(2)9 # Q$(3)" IETNAMESE DINOSAUR IS TENDING TO THE RICE TERRACES.":R$(3)"":S$(3)"24":T$(3)"VIET.V":BO%(3). $	 Q$(4)"N INEBRIATED USTRALIAN DINOSAUR RESTS PEACEFULLY.":R$(4)"":S$(4)"3":T$(4)"AUS.V":BO%(4)16:M%2:BP%0: BQ%(5): U$(7):BR%0: %
 U$(.)"10 PRINT "(34)"I PROMISE TO ONION CAKE THAT I WILL"(34):U$(1)"20 PRINT "(34)"- ALWAYS WRITE BEAUTIFUL MEGA65 PROGRAMS"(34) m% U$(2)"30 PRINT "(34)"- MAKE USE OF DELICIOUS PETSCII CHARACTERS"(34) % U$(3)"40 PRINT "(34)"- MAKE BEAUTIFUL SID MUSIC WITH THE 'PLAY' COMMAND"(34):<.:;.:(14);(30); %  15 %  260 & (147);:134217728,35 !& (134217728)35 h& BP%.:"O ATTIC RAM DETECTED (WILL NOT CACHE ART)":1:(147);: o&  & 134217728,36 & (134217728)36 & BP%.:"O ATTIC RAM DETECTED (WILL NOT CACHE ART)":1:(147);: &  ' BP%1:"TTIC RAM DETECTED (WILL CACHE ART)":1: -' BM%1 =' O$(G%,1)"" [' :ՋBM%.:O$(G%,.)"" p' O$(G%,1)"" ' O$(G%,.)O$(G%,1):O$(G%,1)"": '  '  '  173:BM%1:B$"":A.1:C$O$(G%,A):D$(C$,3)B$C$:BM%A '  A '! (B$,3)D$ (" E%1 (# D$"EGG" q($ L$"HE EGGPLANT STUBBORNLY RESISTS YOUR ATTEMPT TO TAKE IT!":H1:I14: 225:E%.: (% B$"RICE-PLANT" (& L$"HE RICE-PLANT REFUSES TO RELENT TO YOUR WILL!":H1:I14: 225:E%.: (' D$"CAR" R)( L$"HE CARNIVOROUS-MITE GNASHES ITS TEETH AT YOU, FORCING YOU TO BACK DOWN!":H1:I14: 225:E%.: c)) D$"TIG" )* L$"HE TIGER UNLEASHES A FEROCIOUS GROWL, MAKING YOU SHIVER IN YOUR BOOTS!":H1:I14: 225:E%.: )+ E%1 )*, E$(I%)B$:I%I%1: 24:L$"OU TAKE THE ":H.:I14: 225:L$B$:H.:I3: 225 H*- L$"...":H1:I14: 225: *. ::L$"OU CAN'T SEE THAT HERE!":H1:I14: 225: */  *0  173:BM%1:B$"":A.1:C$O$(G%,A):D$(C$,3)B$C$:BM%A *1 A *2 (B$,3)D$ *3 D$"EGG" a+4 L$"HE IMPACT OF YOUR FIST CAUSES IT TO BECOME A ":H.:I14: 225:L$"FAINTED-EGGPLANT":H.:I3: 225 +5 L$".":H1: 225:O$(G%,BM%)"FAINTED-EGGPLANT": +6 D$"RIC" ,7 L$"OU FLATTEN THE RICE WITH YOUR FIST, FORMING A TASTY ":H.:I14: 225:L$"RICE-PAPER-ROLL":H.:I3: 225 S,8 L$".":H1:I14: 225:O$(G%,BM%)"RICE-PAPER-ROLL": d,9 D$"CAR" ,: L$"OUR VIOLENT ACTIONS HAVE MADE THE MITE RETHINK LIFE, IT IS NOW A ":H.:I14: 225:L$"VEGAN-MITE":H.:I3: 225 -; L$".":H1:I14: 225:O$(G%,BM%)"VEGAN-MITE": #-< D$"TIG" -= L$" THINK YOU HURT ITS FEELINGS, IT IS NOW A ":H.:I14: 225:L$"CRYING-TIGER":H.:I3: 225 -> L$"...":H1:I14: 225:O$(G%,BM%)"CRYING-TIGER": -? ::L$"OU CAN'T SEE THAT HERE!":H1:I14: 225: .@  .A F%.:J%1:I%. H.B A.I%1:(E$(A),3)D$F%1:J%A:B$E$(A) Q.C A: h.D J%I%1I%I%1: .E AJ%1I%1:E$(A1)E$(A):A:I%I%1: .F O$(G%,.)"" .G O$(G%,.)N$(K%) .H ::O$(G%,1)N$(K%): .I  .J  173: 65 .K F%. 1/L L$"OU ARE NOT CARRYING THAT!":H1:I14: 225: 8/M  K/N (B$,3)D$ h/O E%.:D$"RIC"G%3E%1 /P D$"VEG"G%4E%1 /Q D$"CRY"G%2E%1 /R D$"FAI"G%1E%1 /S G%0 /T D$"MEG" 40U L$"'OT YET,' SHOW ME THAT YOU KNOW HOW TO USE THIS BEAUTIFUL MACHINE, OR ELSE...'":H1:I2: 225 0V ::L$"NION AKE GLARES AT YOU, ":H.:I14: 225:L$"'TOP WASTING TIME AND PROVE YOUR SKILLS TO ME!'":H1:I2: 225 0W  0X  0Y  0Z E%. ;1[ L$"HNT VOICE STRING'       , = OVE TO START OF CURRENT VOICE STRING'       , = OVE TO END OF CURRENT VOICE STRING'      + = OVE FORWARD ONE WORD IN CURRENT VOICE STRING'      + = OVE BACK ONE WORD IN CURRENT VOICE STRING'           < = HOW PREVIOUS SONG CHUNK'           > = HOW NEXT SONG CHUNK'           - = ECREASE TEMPO'           + = NCREASE TEMPO'      + = UIT PROGRAM / XIT NV DITOR'          1 = OAD'          3 = AVE'          7 = NVELOPE EDITOR'          8 = ILTER EDITOR'   9/- = HUNK SEQUENCERTRAP RUNSTOPTRAPPER.DECLARATIONS'------------#DECLARE CHUNKIDX = 0#DECLARE CHUNKCNT = 0#DEFINE CHUNKMAX = 50#DECLARE VIDX, IDX#DECLARE CURSORX = 0#DECLARE CURSORY = 0#DECLARE V$ (5,CHUNKMAX)#DECLARE KEY$#DECLARE VALID$="CDEFGAB0123456789 #$.HIQRSWOTUXMPL"#DECLARE VAL$#DECLARE TMPO% = 12#DECLARE ESCFLAG% = 0#STRUCT  NAME$, ATTACK, DECAY, SUSTAIN, RELEASE, WAVEFORM, PW ENVS(9) = [ _  [ "IANO",       0,!  9,  0,  0,  2, 1536 ], _  [ "CCORDION",  12,  0, 12,  0,  1,    0 ], _  [ "ALLIOPE",    0,  0, 15,  0,  0,    0 ], _  [ "RUM",        0,  5,  5,  0,  3,    0 ], _  [ "LUTE",       9,  4,  4,  0,  0,    0 ], _  [ "UITAR",      0,  9,  2,  1,  "1,    0 ], _  [ "ARPSICRD",   0,  9,  0,  0,  2,  512 ], _  [ "RGAN",       0,  9,  9,  0,  2, 2048 ], _  [ "RUMPET",     8,  9,  4,  1,  2,  512 ], _  [ "YLOPHONE",   0,  9,  0,  0,  0,    0 ]  _]#DEFINE ү = 0#DEFINE ү   = 1#DEF#INE ү = 2#DEFINE ү  = 3#DECLARE DIRNAME$(3)DIRNAME$(0) = ""DIRNAME$(1) = ""DIRNAME$(2) = ""DIRNAME$(3) = ""#DEFINE Ư = 0#DEFINE Ư  = 1#STRUCT  NAME$, FREQ, LP, BP, HP, RES, DIR, MIN, SWEEP$ FILT(10) = [ _  [ "LOWPUP",    1000, Ư,  Ư, Ư, 15, ү,   100, 10 ], _  [ "LOWPDOWN",  1000, Ư,  Ư, Ư, 15, ү, 100, 10 ], _  [ "LOWPOSC",   1000, Ư,  Ư, Ư, 15, ү,  100, 10 ], __  [ "BANDPUP",   %1000, Ư, Ư,  Ư, 15, ү,   100, 10 ], _  [ "BANDPDOWN", 1000, Ư, Ư,  Ư, 15, ү, 100, 10 ], _  [ "BANDPOSC",  1000, Ư, Ư,  Ư, 15, ү,  100, 10 ], __  [ "HIGHPUP",   1000, Ư, Ư, Ư,  15, ү&,   100, 10 ], _  [ "HIGHPDOWN", 1000, Ư, Ư, Ư,  15, ү, 100, 10 ], _  [ "HIGHPOSC",  1000, Ư, Ư, Ư,  15, ү,  100, 10 ], __  [ "SPARE1",    0,    Ư, Ư, Ư, 0,  ү, 0,   0  ], _  [ "SPARE2",    '0,    Ư, Ư, Ư, 0,  ү, 0,   0  ], __]#DECLARE SEQCHUNK(200), SEQEXTRA(200)#DECLARE ECHOM, ECHOB, ECHOSZ = .05, CHUNKRPT, ECHODELAY#DECLARE V1$, V2$, V3$, V4$, V5$, V6$#DECLARE TMP#DECLARE SSCOL, S, SEQOFFS#DEFINE Я  = 0#DEFINE Я  = 1#DEFINE Я = 2#DEFINE Я = 3#DEFINE  = $D060#DEFINE  = $D061#DEFINE  = $D062.CMDS#DEFINE į = -1#DEFINE į = -2#DEFINE į = -3#DEFINE įϯ1 = -4   '*)('&%$#"!!"#$%'&''&&%$#"! .  ,/   .. !".#$%'()((*+,/---,+*)('%$#"! 	/
''''''''''/'   '                        '     //  'Ĝ //!,!"$%&()*+ +,-123-6-789:;<=>?@AB,C'CC@?.>/>>>'?@ A B CDEF ,G'HI'HEDDGHJ-KKKJ/IHGFDCBA@?>+=<;::;<= =/<8/7789:;<=@ABDEFHILM                                                                                          *)('&%$#"!!"#$%'&''&&%$#"! .  ,/   .. !".#$%'()((*+,/---,+*)('%$#"! 	/
''''''''''/'   '                        '     //  'Ĝ //!,!"$%&()*+ +,-123-6-789:;<=>?@AB,C'CC@?.>/>>>'?@ A B CDEF ,G'HI'HEDDGHJ-KKKJ/IHGFDCBA@?>+=<;::;<= =/<8/7789:;<=@ABDEFHILM                                                                                          	  FOR IDX = 0 TO 3    X1 = PEEK(PTR + 0)    Y1 = PEEK(PTR + 1)    X2 = PEEK(PTR + 2)    Y2 = PEEK(PTR + 3)    IF NOT (X1=0 AND Y1=0 AND X2=0 AND Y2=0) THEN BEGIN      GOSUB ADJUSTCOORDS      DRAWCOLOR = 7      IF IDX = 3 THEN BEGIN
        DRAWCOLOR = 2        GOSUB DRAWBOX        ' GOSUB CHECKIFHITOPPONENT      BEND:ELSE BEGIN        GOSUB DRAWBOX      BEND    BEND    PTR = PTR + 4  NEXT IDX  RETURN'--------.DRAWBOX'--------  ' DRAW CORNERS  ' ------------  X = X1 : Y = Y1 : K = үد : GOSUB DRAWCHAR  X = X2 : Y = Y1 : K = үد : GOSUB DRAWCHAR  X = X1 : Y = Y2 : K = үد : GOSUB DRAWCHAR  X = X2 : Y = Y2 : K = үد : GOSUB DRAWCHAR  ' DRAW HORIZONTALS  ' ----------------  FOR X = X1+1 TO X2-1    Y = Y1 : K = ү : GOSUB DRAWCHAR    Y = Y2 : K = ү : GOSUB DRAWCHAR  NEXT X  ' DRAW VERTICALS  ' --------------  FOR Y = Y1+1 TO Y2-1    X = X1 : K = ү : GOSUB DRAWCHAR    X = X2 : K = ү : GOSUB DRAWCHAR  NEXT Y  RETURN'---------.DRAWCHAR'---------  IF PEEK($50000 + X + Y * 80) <> ү THEN BEGIN    K = K + 128  BEND:ELSE BEGIN    POKE $51000 + X + Y * 80, 1  BEND  IF DRAWCOLOR = 2 THEN POKE $51000 + X + Y * 80, DRAWCOLOR  POKE $50000 + X + Y * 80, K  RETURN'---------------------.CHECKIFHITOPPONENT'---------------------  DATAADDR = FRAMEADDR(DATIDX, FRAMEIDX)  TMPMIRROR = MIRROR  IF CHARACTER =  THEN BEGIN    FRAMEIDX = ANIMORDER(BADDIEFORM, BADDIEANIM, BADDIEFRAME)    OPPONENTDATAADDR = FRAMEADDR(BADDIEDATIDX, FRAMEIDX)    OPPONENTMIRROR = BADDIEMIRROR    FX=BX : FY=BY  BEND  IF CHARACTER =  THEN BEGIN    FRAMEIDX = ANIMORDER(PLAYERFORM, PLAYERANIM, PLAYERFRAME)    OPPONENTDATAADDR = FRAMEADDR(PLAYERDATIDX, FRAMEIDX)    OPPONENTMIRROR = PLAYERMIRROR    FX=PX : FY=PY  BEND  X1 = PEEK(DATAADDR + ͯԯ¯ + 0)  Y1 = PEEK(DATAADDR + ͯԯ¯ + 1)  X2 = PEEK(DATAADDR + ͯԯ¯ + 2)  Y2 = PEEK(DATAADDR + ͯԯ¯ + 3)  IF X1=0 AND Y1=0 AND X2=0 AND Y2=0 THEN RETURN  GOSUB ADJUSTCOORDS  PX1 = X1  PY1 = Y1  PX2 = X2  PY2 = Y2  FRMX = PEEK(OPPONENTDATAADDR + ͯԯ)  FRMY = PEEK(OPPONENTDATAADDR + ͯԯ)  FRMX = FRMX + FX  FRMY = FRMY + FY  FRMW = PEEK(OPPONENTDATAADDR + ͯԯ)  FRMH = PEEK(OPPONENTDATAADDR + ͯԯ)  ' ITERATE THROUGH HEAD/TORSO/FEET HITBOXES OF OPPONENT  PTR = OP#PONENTDATAADDR + ͯԯ  FOR IDX = 0 TO 2    X1 = PEEK(PTR + 0)    Y1 = PEEK(PTR + 1)    X2 = PEEK(PTR + 2)    Y2 = PEEK(PTR + 3)    GOSUB ADJUSTCOORDS    OX1 = X1    OY1 = Y1    OX2 = X2    OY2 = Y2    GOSUB CHECKBOXC#OUTPUT PLAYMAKER' EYS:' ----'    P ARROW = OVE TO PREVIOUS VOICE'  OWN ARROW = OVE TO NEXT VOICE'  EFT ARROW = OVE LEFT WITHIN CURRRENT VOICE STRING' IGHT ARROW = OVE RIGHT WITHIN CURRENT VOICE STRING'    / = ELETE CHAR IN CURRE2,20488024: 0 Q(F$(R)) *0 QQ1:E$(F$(R),Q):R.O36:O21 <0 P24: 168: B0  |0 AO,P:BL1(E$):9(BL1,16)16:(E$,BL,1);:BL: 0 BM(5350416):BN(5376016):BO(5401616):L1630:53504L,(53504L1):53760L,(53760L1):54016L,(54016L1):L (1 5350431,BM:5376031,BN:5401631,BO: e1 ;1:<1:!.,2000,262144,2048:!.,2000,264144,267911168: 1 J.16: 178:.05:J: 1  177:J.16: 180:.05:J: 1  177:J.16: 179:.05:J: 	2 53272,(53272)253: "INTRO.DAT",P($40000),R: 181: 176: J2 L.31:D(L)(53504L):E(L)(53760L):F(L)(54016L):L: 2 L.31:G(L)(53504L):H(L)(53760L):I(L)(54016L):L: 2 KJ16:L.31:53504L,D(L)(15D(L))K:53760L,E(L)(15E(L))K:54016L,F(L)(15F(L))K:L: ]3 KJ16:L.31:53504L,G(L)(D(L)G(L))K:53760L,H(L)(E(L)H(L))K:54016L,I(L)(F(L)I(L))K:L: 3 K(16J)16:L.31:53504L,G(L)K:53760L,H(L)K:54016L,I(L)K:L: 4 :B.:C(.).:C(1)1:C(2)1:C(3)2:C(4)3:1,100,1:2,100,1:
2,3,3,3,10,.:
4,9,4,9,8:
7,.,9,9,.,2,1100 }4 
8,.,12,3,5,2,1100:
9,.,10,3,5,2,1100:A$(.)"T2O6M2 QDIR QC.R QDIR QC.R QDIR QC.R QDIR QC.R" 5 A$(1)"T2O6M2 QDIR QC.R QDIR QC.R P9A IR QAIR P0IDP9O5A O5IAO6DA Q.G IDO5A IBO6DG Q.A IGD O5BO6EG Q.A IGE O5IBO6DG Q.A IGD  O5BO6EGQA IG#FE " 5 A$(2)"T2O6M2 QDIR QC.R QDIR QC.R  IDDFQ.DIFD O5Q.#AHO6CIR O5#AQ#AO6HCIR IDDFHDIR  DDFQ.DIFD O5Q.#AHO6CIR O5#AQ#AO6HCIR O5Q.A O6HE IR 6 A$(3)"T2O6M2 IGG#GHGIR O5Q.G O6HD IR AA#AHA IR A O6D #F QE I#F QD  Q.#F.EDO6.G.#FE O5G I#A O6 QE O5I#A O6QE QDIR QC.R QDIR QC.R 6 A$(3)A$(3)"O6Q.G.#FE O5G I#A O6QE O5I#A O6QE QDIR QC.R QDIR QC.R QDIR QC.R QDIR QC.R":B$(.)"T2O5M4 QAIR Q#G.R QAIR Q#G.R QAIR Q#G.R QAIR Q#G.R" C7 B$(1)"T2O5M4 QAIR Q#G.R QAIR Q#G.R  O5 Q.#C .D O6I#FD O5D#FAO6Q.D IO5A#F  EGBO6Q.E O5IBG EAO6#CQ.E I#CO5A EGBO6Q.E O5IBG EAO6#CQE ID#CD" 7 B$(2)"T2O5M4 QAIR Q#G.R QAIR Q#G.R  IAAO6CO5Q.AIGA Q.FHG IR IFQF HG IR IAAO6CO5HA IR  AAO6CO5Q.AIGA Q.FHG IRFQF HG IR Q.E .A O6E " [8 B$(3)"T2O5M4 IGG#G HG IR Q.D HG IR DDGHD IR DDAQGIAQD Q.A.G#F .#A .A G  O5QEIGQ#AIG#AO6C QAIR Q#G.R QAIR Q#G.R Q.#A .A G O5QEIGQ#AIG#AO6C" 8 B$(3)B$(3)"QAIR Q#G.R QAIR Q#G.R QAIR Q#G.R QAIR Q#G.R" 9 C$(.)"X1T7O2M1 ID QR P1 ICD QR ICD SF#F QD IR O1AO2CO1A   O2ID QR P1 ICD QR ICD SF#F QD IR O1AO2CO1A" 9 C$(1)"X1T7O2M1 ID QR P1 ICD QR ICD SF#F QD QR IR O1A T8 O2Q.#CQD IDE#F Q.#F O1A IA O2Q#C O1Q.E E IEBG Q.A A IA O2QC Q.E E IE O1 QB Q.A A O2IE QA" 9 C$(2)"X1T7O2M1 ID QR P1 ICD QR ICD SF#F QD IR O1AO2CO1A" a: C$(2)C$(2)"T9O2IDDDDDDDD O1#A#A#A#A#A#A#A#A #A#A#A#A#A#A#A#A O2DDFQDIDDDDDDDDDDD O1#A#A#A#A#A#A#A#A #A#A#A T8O2QCICCC O1Q.AAIAAA" : C$(3)"O2Q.DDIDDD O1Q.GGI#AA#A Q.#A#AI#AQ#A Q.AAIAQA O2Q.DDIO1GO2QD Q.EEIEQE O1Q.AAIAQA T7O2 ID QR P 1 ICD QR ICD SF#F QD IR O1AO2CO1A" z; C$(3)C$(3)"O2Q.EEIEQE O1Q.AAIAQA T7O2 ID QR P1 ICD QR ICD SF#F QD IR O1AO2CO1A  T7O2 ID QR P1 ICD QR ICD SF#F QD IR O1AO2CO1A":D$(.)"" 	< D$(1)"T4O5P0 QR M2ID M4QD P5 M1O4#G H.A IAQA   O5Q.E H#F IR #F#FA QG IG#!F W M5 .G P9M2O4IA O5I.B.A SG#F AGABAB QG O4IAB O5H#F SG#F Q.E.D" ~< D$(2)"O5T4P7WDHRQ.RICP5O5IDDFQ.GIFDQ.FSEDHCIFFAQGIFDSCP2H.DP5I.RICDDFQ.GIFD Q.F SED HC IFFAQGIFD IGP1H.A P7IRA" < D$(3)"T4 IO6DD#DQDICO5#AH.#AQ.R IAA#AQAIAGP1WAP7IR":D$(3)D$(3)"H RI#FGAQ.GI#FG#FHERIR DHDRR IR#FGAQ.GI#FG#FHERIR DHD": 	= (1) T= AC(B):A$(A),C$(A),D$(A):.05:,,,B$(A),C$(A),D$(A):BB1:B5B1 Z=                                                                                                           #TE = ӯ THEN BEGIN    GOSUB CONSIDERNEXTBADDIEFRAME    PLAYERMIRROR = 0    BADDIEDEADTIME = BADDIEDEADTIME - 1    IF BADDIEDEADTIME = 0 THEN BADDIESTATE = ӯ:NEXTBADDIETIME=50    RETURN  BEND  RETURN'---------.PAGEFLIP'$---------  IF  THEN BEGIN    EDMA 0, $F00, $50000, $40800    EDMA 3, $F00, 160, $50000  BEND  EDMA 0, $F00, $51000, $FF80000  ' FILL THE TOP PART  EDMA 3, $F00, $4F, $51000  RETURN'---------.INCROFFS'---------  FOR K = 0 TO ԯ    XOFFS(K) = XOFFS(K) + OFFSAMOUNT(K)  NEXT K  RETURN'---------.DECROFFS'---------  FOR K = 0 TO ԯ    XOFFS(K) = XOFFS(K) - OFFSAMOUNT(K)  NEXT K  RETURN'----------.DRAWBOXES'----------  PTR = DATAADDR + ͯԯ&)ū,ħ &''().*/+/,/. / 010 12 **-/.//011..//0'1'2' 3 465786544 456,7'8'99/:/;<'; <=>??@@? = >?@/A,BBA/C ABAB'CDE/GHHIJJ FEFFG'H K LKLJ'KL/M,MLKJIHGFEDCBA@?>=<;:98,7/77789</<<;::;<]=>?@/A/C/DEFGHIJJJJ/GFEDDE/FGHHGFDCBA@?>===?@ACC,B@?><;':9'86 6543210-,	J%1: 131 8 B$(13) 154: 125 8  #9 ?I%,J%,K%:I%(I%24)2:J%(J%50)2: 59 B$:B$"X" E9  132: 154 Y9 K%128L%. j9 L%128: 165 w9 M%1 9  124:B8.: 9 :: 125: 9  9 L%128K%.L%. 9  155 : 	M%.:A.91:C%BD%(A)8:D%BE%(A)8:E%BF%(A)8:F%BG%(A)8:G%C%E%:H%D%F% ?: C%I%I%G%D%J%J%H% L: P%B:BA X: B5 f:  80:BP% {: :ՋB6: 82 : :ՋB7: 88: : M%1: 11:A91: : A: : .:>$: : 25	5,0,0 : 254,0,0 : 252,0,0 : 248,0,0 ; 252,0,0 ; 238,0,0 ; 199,0,0 ,; 131,128,0 9; 1,192,0 F; 0,224,0 S; 0,112,0 _; 0,56,0 k; 0,28,0 w; 0,14,0 ; 0,7,0 ; 0,3,128 ; 0,1,0 ; 0,0,0 ; 0,0,0 ; 0,0,0 ; 0,0,0                                                                                                                                                                                                                                                                 	    C(10): A$(4): B$(4): C$(4): D$(4): D(32): E(32): F(32): G(32): H(32): I(32):Q0: F$(2):R0:F$(.)"PRESENTS..."   F$(1)"A TRIBUTE TO THE LATE OLIVIA NEWTON JOHN...":S0:X272140: Z(64):AA0: AD(4,100): AF(3):AL0: ;!  175: 160:	 145: 12: 144:!.,768,268251392,294912:!3,768,.,268251392 T! (53280).<2: 6 t! AK42: 59::"BIGSPRITE": ! Y(X) ! XX1:AAY:Z(AA)X ! XX2:AB(X) !	 XX1:AC(X) !
 XX1 ! XXABAC2:AAAA1:: "  148: 149:4:;.:	<.:(147);: 6 2"  70:AW1:ATTI:AU:AV1:AV8 F" (TIAT)AU U" AV2 58 r" AV:BC.:AV0G$,AY,AZ " AV2G$,BA " AV1 50 " AV3AW:AR.:AS. " AV4AX: 69 " AV5G$,BB,BA: 65 " AV6""; " AV7AK: 59 	# AV8 # ATTI:AU: %# AV0 51 4# AV2 54 C# AV5 66 V#  200: 30:: c# AW1 z# AL.(TIBD)AL #  AL.:AEAD(AW,AR):ARAR1:AJ.:AE1AJ1:AF(1)AR #! AE2AJ1:AF(2)AR #" AE3AJ1:AF(3)AR ## AE10 .$$ 		AJ1:AG(AD(AW,AR)):ARAR1:AHAD(AW,AR):ARAR1:AI. ;$% AS. M$& AH1ASAH c$' ARAF(AG):AI1: u$( AI.AS. $) ASAS1:AS.AI1 $* AI.ARAF(AG) $+ AI1: $,  $- AE999 $. AJ1:AW1: $/ AJ. %0 AKAE: 59:ALA	
D(AW,AR):ARAR1:BDTI: %1  *%2 !3,80,32,2048: 7%3 BC1 y%4 .05:AAYBC,AZ:"";(G$,1BC,1);:BCBC1:BC(G$)BC1 %5  %6 BC1 %7 .05:AY(80(G$))27:AZ1:AAYBC,AZ:"";(G$,1BC,1);:BCBC1:BC(G$)BC1 &8 (BC,2)	.AK10:AK11 &9  59: %&: A.,1:(27);"Q";: 9&; XZ(AK):AM(X) K&< XX1:AN(X) ]&= XX1:AB(X) o&> XX1:AC(X) &? XX1:AOAMAB1:APANAC1:BF2048AMAN80:BG129024AMAN80:AQXABAC:BEANAP:!.,AB,X,BF:!.,AB,AQ,BG '@ XXAB:AQAQ	AB:BFBF80:BGBG80:BE: 9'A "";:AK0: 59:AK19: 59:AK20: 59: c'B BCBC1:.1:(BC,2).AK21:AK24 }'C  59:BC10AV2:BC. 'D  'E "";:AK38: 59:AK39AX1: 59: 'F BI.:BJ.::BH:BH1000 'G AD(BI,BJ)BH:BJBJ1:BH999BI	BI1:BJ. (H : (I 0,.3,1,.3,2,.3,3,.3 "(J -1 ;(K 4,.5,3,.5,4,.5,3,.5 X(L 9,.,4,.5,3,.5,4,.5,3,.5 c(M 11,.2 r(N -10,-1,-1 |(O -999 (P 10,.,5,1 (Q 11,.2,6,.2,7,.2,8,.2,12,.2,13,.2 (R -1 (S 11,.1 (T -2 (U 14,.1,15,.1 (V -10,-2,5 (W	 9,.5 (X -3 )Y 14,.1,15,.1 )Z -10,-3,5 *)[ -10,-1,-1 4)\ -999 i)] 13,.25,12,.25,16,.5,17,.25,18,.25,19,.25,20,.25 q)^ -1 )_ 22,.1,23,.1,-10,-1,5 )` -999 )a 26,.2,27,.1,28,.1,29,.1,30,.1,31,.1,32,.1,33,.1,34,.1,35,.1,36,.1,37,.1 )b -999	 )c -1000 *d .,3,0 !*e 2,0,"HERE'S SONNY...",4,. J*f 1.5,0,"A STRUGGLING ARTIST...",22,. y*g 1.7,0,"SEARCHING FOR INSPIRATION...",47,. *h 2,1 *i .5,2,"HMM... WHAT TO DRAW TODAY...",3 *j 2,3,1 *k 1.5,2,"I KNOW!",2 *l 1,1 *m 3,3,2 *n 4	,4,1 +o 2,5,"BLECH!",1,2 +p 2,3,3 +q 1.5,6 >+r .,0,"TRY AGAIN SONNY...",34,12 G+s 2,6 R+t .,3,0 ]+u 2,3,1 q+v 1.5,2,"AHA!",2 z+w 1,1 +x 3,3,2 +y 4,4,2 +z 2,5,"YUCK!",1,2 +{ 2,3,3 +| 1.5,6 +} .,0,"DON'T GIVE UP SONNY!",32,12 +~ 2	,6 + .,3,0  , 2,3,1 , 1.5,2,"I GOT IT!",2 ", 1,1 -, 3,3,2 8, 4,4,3 L, 2,5,"EWW!",1,2 W, 2,3,3 e, 1.5,7,25 , .,0,"AWW... POOR SONNY...",32,. , 2,1 , .1,2,"GUYS LIKE ME SHOULDN'T DREAM ANYWAY...",3.5 , 3.5,7,25 , 1,6 /- 	.5,0,"...AND WITH THAT, SONNY'S DREAMS BLEW AWAY WITH THE WIND...",10,12 :- 3.5,6 C- 1,8 Y-  148: 149:4: - (147);:;.:<.:!3,4000,.,267911168:!3,4000,160,294912: 159: 147 -  150: 151: - 128:-N53341,7:53297,232: - 128:	53297,224: . 128:53344,2048:53346,.: @. 128:-N53341,7:53344,32768:53346,4: M. S.196 Z. S79 i. TS79:U. w. S117 . W80(S117):W1W. . ::W80: . ::T.:U79S:WS1: 	/ V.49:!.,W,266240V118T,267911168V80U:V:.02: 200:S: i/ BK266144:L.31:53504L,(BK):BKBK1:53760L,(BK):BKBK1:54016L,(BK):BKBK1:L: /  200: 172: 171: 174: 161: 173: / M.324: 169: 200: 162:.04:M: / M40 / R1:Q.:!3,80,3"IEENERGY = 18    LAGBENERGY = 0    BJUMP = 0    RETURN  BEND  IF BADDIESTATE = ӯ THEN BEGIN    GOSUB CONSIDERNEXTBADDIEFRAME    IF BADDIEENERGY = 0 THEN BADDIESTATE = ӯ: BADDIEDEADTIME=50    RETURN  BEND  IF BADDIESTA	B CLEARREDTRIANGLE      LAGBENERGY = LAGBENERGY - 1      RETURN    BEND  BEND  RETURN'------------------.DRAWBLUETRIANGLE'------------------  CURSOR 1 + K * 2, 48:PRINT "";  CURSOR 1 + K * 2, 49:PRINT "";  RETURN'--------------	-----.CLEARBLUETRIANGLE'-------------------  CURSOR 1 + K * 2, 48:PRINT " ";  CURSOR 1 + K * 2, 49:PRINT " ";  RETURN'-----------------.DRAWREDTRIANGLE'-----------------  CURSOR 78 - K * 2, 48:PRINT "";  CURSOR 78 - K * 2, 49:PRINT "	";  RETURN'------------------.CLEARREDTRIANGLE'------------------  CURSOR 78 - K * 2, 48:PRINT " ";  CURSOR 78 - K * 2, 49:PRINT " ";  RETURN'------------.DRAWSPRITES'------------  IF BADDIESTATE = ӯ OR BADDIESTATE = ӯ 	THEN BEGIN    GOSUB DRAWBADDIE  BEND  GOSUB DRAWPLAYER  RETURN'----------.GAMELOGIC'----------  GOSUB CONSIDERNEXTPLAYERFRAME  GOSUB ASSESSBADDIESTATE  RETURN'-------------------.ASSESSBADDIESTATE'-------------------  IF BADDIE	$  
	    !!!!!  	.
 !"#$%&'()*+,'-..--,+'+*)((()**)(+'&%$.#	 $D020, $02  BEND:ELSE BEGIN    GROUPFLAG& = 0    LDATA&(DIDX%) = $FE    POKE $D020, $00  BEND  DIDX% = DIDX% + 1  RETURN'---------.LOADFILE'---------  INPUT "LOAD NAME: ";FNAME$  IF FNAME$ = "" THEN RETURN  GOSUB INIT  DOPEN #2,(FNAME$	),R,U8  DO    GET #2, VAL&    IF ST THEN EXIT    LDATA&(DIDX%) = VAL&    DIDX% = DIDX% + 1  LOOP  DCLOSE #2  GOSUB PLAYDATA  RETURN'---------.SAVEFILE'---------  INPUT "SAVE NAME: ";FNAME$  IF FNAME$ = "" THEN RETURN  DELETE (FNAME$)	  DOPEN #2,(FNAME$),W,U8  FOR X = 0 TO DIDX%    PRINT #2, CHR$(LDATA&(X));  NEXT X    DCLOSE #2  RETURN'---------.SAVECHAR'---------  IF OLDX=X AND OLDY=Y THEN BEGIN    ' REPLACE PREVIOUS CHAR    LDATA&(DIDX%-3) = X + REVFLAG& * $80    	LDATA&(DIDX%-1) = ASC(A$)  BEND:ELSE:BEGIN    ' WRITE NEW CHAR    LDATA&(DIDX%) = X + REVFLAG& * $80 : DIDX% = DIDX% + 1    LDATA&(DIDX%) = Y : DIDX% = DIDX% + 1    LDATA&(DIDX%) = ASC(A$) : DIDX% = DIDX% + 1        OLDX=X : OLDY=Y  BEND  RETU	 RN  '------------  .RESTORECHAR'------------  IF MODIFIED% THEN BEGIN    LOC = $FF80000 + X + 80 * Y    POKE LOC, PEEK(LOC) XOR 32    MODIFIED% = 0    T0 = TI  BEND  RETURN'-----------.SHOWCURSOR'-----------  IF TI > T0 THEN T0 = TI 	!STATE = ӯ THEN BEGIN    ' CONSIDER WHEN TO SPAWN NEXT BADDIE    NEXTBADDIETIME = NEXTBADDIETIME - 1    IF NEXTBADDIETIME = 0 THEN BADDIESTATE = ӯ    RETURN  BEND  IF BADDIESTATE = ӯ THEN BEGIN    BADDIEFORM = ͯ t+ .5:ELSE RETURN  LOC = $FF80000 + X + 80 * Y  POKE LOC, PEEK(LOC) XOR 32  MODIFIED% = MODIFIED% XOR 1  RETURN                                                                                                                                           	    IF BADDIEDATFIXED = ԯ2 THEN BEGIN      BADDIEDATFIXED = ԯ3    BEND: ELSE BEGIN      BADDIEDATFIXED = ԯ2    BEND    BADDIEDATIDX = BADDIEDATFIXED    BADDIESTATE = ӯ    BX = 60 : BY = 23    BADD	#  
	    !!!!!  	.
 !"#$%&'()*+,'-..--,+'+*)((()**)(+'&%$.#	%!/ /Ϛ  .= ! " # $ % & ''''&%$#"! ֟  !"#ɤ #$'%'&''', ') * +*,%!/ /Ϛ  .= ! " # $ % & ''''&%$#"! ֟  !"#ɤ #$'%'&''', ') * +*,	&)ū,ħ &''().*/+/,/. / 010 12 **-/.//011..//0'1'2' 3 465786544 456,7'8'99/:/;<	'; <=>??@@? = >?@/A,BBA/C ABAB'CDE/GHHIJJ FEFFG'H K LKLJ'KL/M,MLKJIHGFEDCBA @?>=<;:98,7/77789</<<;::;<]=>?@/A/C/DEFGHIJJJJ/GFEDDE/FGHHGFDCBA@?>===?@ACC,B@?><;':9'86 6543210-,
V1$( 0)="T2O5 QGP6 IAG IDFQD"V2$( 0)=""V1$( 1)="O5P6M1 WG QR FSFGIF QE IESFEIE O4P9GP6Q#AHI#A"V2$( 1)="T2O2WGG C"V1$( 2)="T2O5P6M1 QRP0SCP6DCD P0CP6ID SR IDP3#F P6 O4Q.G O5P8IF P6QO4SP9#AA#A#B P6Q#A"V2$( 2)="O2WCC"V1$( 3)="T2O5QRSCI.D SCI.D SP9C
DFG P8O4H.GQR O5QGIAG IDFQD"V2$( 3)="O2WCGG"V1$( 4)="P6T2O5 Q.GSAG QF O4.#AIR O5SP0DP3#DD#D O4P8IG#AO5CD"V2$( 4)="O2WGG"V1$( 5)="T2O4 Q.G SP5GA IFP2G QF R P6FAO5C O4Q.A IG SP2FEFE P6QG R IGA SP3FEFE QD WG"V2$( 5)="O2WGG DCG"V1$( 6)="T2O5 P0QGP6I
AG DFQD .GSAG QAQ.A IRQ #A#A SO6P8CO5#AO6CD"V2$( 6)="O2WG GF"V1$( 7)="T2O5 Q.GSAG QFQ.F IR QA IAO6C CD O5P8Q.DIC QD HA IAO6CCD O5P0DP6F WG"V2$( 7)="O2W#D F D #D G"V1$( 8)="T2O5P6QFIFGSFGFGO4IP0#AO5P8DO4Q.GSAGQF.GIRO5QDIDFQD.DICO4S#AG#AGO5SCP3#CC#CQ
C"V2$( 8)="O2WGG#A#AO3C"V1$( 9)="T2O5P6QCO4#AO5 SCO4#AO5CD O4Q.GSAG QF.FIR QAIA QO5CSCO4#AO5CDCO4#AO5CD O4WG"V2$( 9)="O3H.C O2WG F G"V1$( 10)=""V2$( 10)=""V3$( 10)=""V4$( 10)=""V5$( 10)=""V6$( 10)=""V1$( 11)=""V2$( 11)=""V3$( 11)=""V4$( 1
1)=""V5$( 11)=""V6$( 11)=""V1$( 12)=""V2$( 12)=""V3$( 12)=""V4$( 12)=""V5$( 12)=""V6$( 12)=""V1$( 13)=""V2$( 13)=""V3$( 13)=""V4$( 13)=""V5$( 13)=""V6$( 13)=""V1$( 14)=""V2$( 14)=""V3$( 14)=""V4$( 14)=""V5$( 14)=""V6$( 14)=""V1$(
 15)=""V2$( 15)=""V3$( 15)=""V4$( 15)=""V5$( 15)=""V6$( 15)=""V1$( 16)=""V2$( 16)=""V3$( 16)=""V4$( 16)=""V5$( 16)=""V6$( 16)=""V1$( 17)=""V2$( 17)=""V3$( 17)=""V4$( 17)=""V5$( 17)=""V6$( 17)=""V1$( 18)=""V2$( 18)=""V3$( 18)=""V4$ k( 18)=""V5$( 18)=""V6$( 18)=""V1$( 19)=""V2$( 19)=""V3$( 19)=""V4$( 19)=""V5$( 19)=""V6$( 19)=""                                                                                                                                                    
   B1:N%1:O%1:P%1: U%(20):AE%4:AF%0:AW%0: AX%(250): AY%(250): AZ%(12000):AZ%(.)("V"):AZ%(1)("E"):AZ%(2)("C"):BA%3: !  BB%(1000): BD%(9): BE%(9): BF%(9): BG%(9): BH%(9): BI%(9): C$(9):BD%(.).:BE%(.).:BF%(.).:BG%(.).:
	BH%(.)0:BI%(.).:C$(.)"LINE" ! BD%(1).:BE%(1).:BF%(1).:BG%(1).:BH%(1)0:BI%(1).:C$(1)"CIRCLE":BD%(2).:BE%(2).:BF%(2).:BG%(2).:BH%(2)0:BI%(2).:C$(2)"ELLIPSE":BD%(3).:BE%(3). X" BF%(3).:BG%(3).:BH%(3)0:BI%(3).:C$(3)"BOX":BD%(4).:B
E%(4).:BF%(4).:BG%(4).:BH%(4)0:BI%(4).:C$(4)"POLY":BD%(5).:BE%(5).:BF%(5).:BG%(5). " BH%(5)1:BI%(5).:C$(5)"FILL":BD%(6).:BE%(6).:BF%(6).:BG%(6).:BH%(6)0:BI%(6).:C$(6)"SAVE":BD%(7).:BE%(7).:BF%(7).:BG%(7).:BH%(7)0:BI%(7). H# C
3$( 9)=""V4$( 9)=""V5$( 9)=""V6$( 9)=""V1$( 10)=""V2$( 10)=""V3$( 10)=""V4$( 10)=""V5$( 10)=""V6$( 10)=""V1$( 11)=""V2$( 11)=""V3$( 11)=""V4$( 11)=""V5$( 11)=""V6$( 11)=""V1$( 12)=""V2$( 12)=""V3$( 12)=""V4$( 12)=""V5$( 12)=""V6$(
 12)=""V1$( 13)=""V2$( 13)=""V3$( 13)=""V4$( 13)=""V5$( 13)=""V6$( 13)=""V1$( 14)=""V2$( 14)=""V3$( 14)=""V4$( 14)=""V5$( 14)=""V6$( 14)=""V1$( 15)=""V2$( 15)=""V3$( 15)=""V4$( 15)=""V5$( 15)=""V6$( 15)=""V1$( 16)=""V2$( 16)=""V3
$( 16)=""V4$( 16)=""V5$( 16)=""V6$( 16)=""V1$( 17)=""V2$( 17)=""V3$( 17)=""V4$( 17)=""V5$( 17)=""V6$( 17)=""V1$( 18)=""V2$( 18)=""V3$( 18)=""V4$( 18)=""V5$( 18)=""V6$( 18)=""V1$( 19)=""V2$( 19)=""V3$( 19)=""V4$( 19)=""V5$( 19)=""V 6$( 19)=""                                                                                                                                                                                                                                                  
$(7)"LOAD":BD%(8).:BE%(8).:BF%(8).:BG%(8).:BH%(8)0:BI%(8).:C$(8)"EXIT" # BF%(.)(C$(.))2:BG%(.)3:A191:BD%(A)BD%(A1)BF%(A1):BF%(A)(C$(A))2:BG%(A)3:A #  9: 11: 155: 174:  $	 ..,640,400,4:A.62:C%:1536A,C%:A:>,1,.:
.,1,1: +$
 A.7:!3,6402,.,262144A16384:A: {$  10:3.,1:A.91:C%BD%(A):D%BE%(A):E%(C%BF%(A)):F%(D%BG%(A)):3.,1 $ BABH%(A)1 $ C%8,D%8,E%8,F%8,1:3.,. $ ::C%8,D%8,E%8,F%8 $ BH%(A)1BI%(A). % 3.,
3:C%8,D%8,E%8,F%8,1:3.,.: %  V% C%1,D%84,2,1,2,C$(A):3.,1:A:3.,O%:.,1,O%: e% N%O% % AZ%(BA%)63:BA%BA%1:AZ%(BA%)O%:BA%BA%1:N%O%: %  % A.BC%:AZ%(BA%)BB%(A):BA%BA%1:A: W& BB%(.)064BI%(5):BB%(1)AH%2
RMW * 2    CLRADDR = CLRADDR + 80    NEXT YY  RETURN'--------.GAMEPLAY'--------  GOSUB GETUSERINPUT  GOSUB DRAWBACKGROUND  GOSUB DRAWSPRITES  GOSUB PAGEFLIP  GOSUB GAMELOGIC  GOSUB DRAWENERGYBARS  RET% = 0  DO WHILE RET% = 0    
GOSUB PARSECURRENTSEQPTR  LOOP  GOTO GAMEPLAY  RETURN'----------------.DRAWENERGYBARS'----------------  IF PLAYERENERGY <> LAGPENERGY THEN BEGIN    IF LAGPENERGY < PLAYERENERGY THEN BEGIN      LAGPENERGY = LAGPENERGY + 1      K = LA
GPENERGY      GOSUB DRAWBLUETRIANGLE      RETURN    BEND    IF LAGPENERGY > PLAYERENERGY THEN BEGIN      K = LAGPENERGY      GOSUB CLEARBLUETRIANGLE      LAGPENERGY = LAGPENERGY - 1      RETURN    BEND  BEND  IF BADDIEENERGY <> LAG	BENERGY THEN BEGIN    IF LAGBENERGY < BADDIEENERGY THEN BEGIN      LAGBENERGY = LAGBENERGY + 1      K = LAGBENERGY      GOSUB DRAWREDTRIANGLE      RETURN    BEND    IF LAGBENERGY > BADDIEENERGY THEN BEGIN      K = LAGBENERGY      GOSU
55:BB%(2)AH%S8:BB%(3)AI%255:BB%(4)AI%S8:BB%(5)I%255:BB%(6)I%S8:BB%(7)J%255:BB%(8)J%S8 h& BC%8: 22: v& AG%. &  19:AH%I%:AI%J%:LI%,J%:AG%1 & :ՋAG%1:AH%,AI%,I%,J%: 23:AG%.: &  K' BB%(.)164BI%(5):BB%(1)AK%
255:BB%(2)AK%S8:BB%(3)AL%255:BB%(4)AL%S8:BB%(5)AM%255:BB%(6)AM%S8:BC%6: 22: Y' AJ%. v'  19:AK%I%:AL%J%:AJ%1 '  :ՋAJ%1:AM%((I%AK%)2(J%AL%)2):AK%,AL%,AM%,BI%(5): 29:AJ%.: '!  X(" BB%(.)264BI%(5):BB%(1)AO%
255:BB%(2)AO%S8:BB%(3)AP%255:BB%(4)AP%S8:BB%(5)AQ%255:BB%(6)AQ%S8:BB%(7)AR%255:BB%(8)AR%S8 i(# BC%8: 22: w($ AN%. (%  19:AO%I%:AP%J%:AN%1 (& :ՋAN%1:AQ%(I%AO%):AR%(J%AP%):0AO%,AP%,AQ%,AR%,BI%(5): 34:AN%.: (' 
 v)( BB%(.)364BI%(5):BB%(1)AT%255:BB%(2)AT%S8:BB%(3)AU%255:BB%(4)AU%S8:BB%(5)I%255:BB%(6)I%S8:BB%(7)J%255:BB%(8)J%S8 )) BC%8: 22: )* AS%. )+  19:AT%I%:AU%J%:AS%1 ), :ՋAS%1:AT%,AU%,I%,J%,BI%(5): 40:AS%.: )-
  )*. Q%AY%(.):R%AY%(.):S%.AW%1:AY%(S%)Q%Q%AY%(S%) D*/ AY%(S%)R%R%AY%(S%) N*0 S%: *1 M%.:V%.:W%AY%(S%1):X%AY%(S%):W%X%AA%W%:W%X%:X%AA%:V%1 *2 W%D%D%X%M%1 *3  *4  49:M%. *5 Y%AX%(S%1):Z%AX%(S%):V%1AA%Y
%:Y%Z%:Z%AA% +6 Y%Z%C%Y%:M%1: C+7 C(X%W%)(Z%Y%):DW%CY%:C%(D%D)C:M%1: +8 T%.:AX%(AW%)AX%(.):AY%(AW%)AY%(.):S%1AW%: 52:M%1U%(T%)C%:T%T%1 +9 S%: +: AB%.T%2:AD%.:AC%.T%AB%2 +; U%(AC%)U%(AC%1) ,< AA%U%
(AC%):U%(AC%)U%(AC%1):U%(AC%1)AA%:AD%1: -,= AC%:AD%.AB%T% 8,> AB%: p,?  56: 58:S%.T%12:U%(S%),D%,U%(S%1),D%:S%: ,@  46:D%Q%R%: 63:D%: "-A BB%(.)464BI%(5):BB%(1)AW%:BC%1:A.AW%1:I%AX%(A):J%AY%(A):BC%BC%1:BB%(BC
%)I%255:BC%BC%1:BB%(BC%)I%S8:BC%BC%1:BB%(BC%)J%255 I-B BC%BC%1:BB%(BC%)J%S8:A: 22: W-C AV%. o-D  19:AV%1:AW%.: }-E AW%. -F AX%(AW%1)I%AY%(AW%1)J% -G I%,J%,AX%(.),AY%(.): 65:AV%.:BI%(5)1 64 -H  -I  -
J  .K AX%(AW%)I%:AY%(AW%)J% .L AW%. .M LI%,J% I.N ::AX%(AW%1),AY%(AW%1),I%,J%: Y.O AW%AW%1: z.P BI%(5).BI%(5)1:BI%(5). .Q  .R <3: #2,"@TEST.V",W,U8:A.BA%1:2,(AZ%(A));:A:#2: .S <2:AE%4: .T M%.:A("
V") /U #2,A:A;:A("E") /V #2,A:A;:A("C") 5/W M%1:BA%3:AE%1: l/X AE%4: #2,"TEST.V",R,U8::#2,A:"RD=";A;:ST {/Y AE%4 /Z "CHECKVEC ";: 84 /[ M%. 83::Չ 123 /\  /] AE%1 /^ "NEWCMD ";:AF%(A64)64
 :BI%(5)AF%:AA63:AE%A: 
0_ AE%63 f0` "COLOUR ";:#2,A:A;:3.,A:AZ%(BA%)63:BA%BA%1:AZ%(BA%)A:BA%BA%1:N%A:O%A:AE%1 s0a  123: 0b AE%0 0c "LINE ";:#2,A%:A%A%255:A%;:#2,B%:B%B%255:B%;:AH%A%(B%R8):#2,A%:A%A%255:A
!%;:#2,B%:B%B%255:B%; o1d AI%A%(B%R8):#2,A%:A%A%255:A%;:#2,B%:B%B%255:B%;:I%A%(B%R8):#2,A%:A%A%255:A%;:#2,B%:B%B%255:B%; 1e J%A%(B%R8):AH%,AI%,I%,J%: 23:AE%1 1f  123: 1g AE%1 .2h "CIRCLE ";:#2,A%:A%A%255:A%
";:#2,B%:B%B%255:B%;:AK%A%(B%R8):#2,A%:A%A%255:A%;:#2,B%:B%B%255:B%; 2i AL%A%(B%R8):#2,A%:A%A%255:A%;:#2,B%:B%B%255:B%;:AM%A%(B%R8):AK%,AL%,AM%,BI%(5): 29:AE%1 2j  123: 2k AE%2 /3l "ELLIPSE ";:#2,A%:A%A%255:
#A%;:#2,B%:B%B%255:B%;:AO%A%(B%R8):#2,A%:A%A%255:A%;:#2,B%:B%B%255:B%; 3m AP%A%(B%R8):#2,A%:A%A%255:A%;:#2,B%:B%B%255:B%;:AQ%A%(B%R8):#2,A%:A%A%255:A%;:#2,B%:B%B%255:B%; 3n AR%A%(B%R8):0AO%,AP%,AQ%,AR%,BI%(5): 
$34:AE%1 3o  123: 3p AE%3 p4q "BOX ";:#2,A%:A%A%255:A%;:#2,B%:B%B%255:B%;:AT%A%(B%R8):#2,A%:A%A%255:A%;:#2,B%:B%B%255:B%; 4r AU%A%(B%R8):#2,A%:A%A%255:A%;:#2,B%:B%B%255:B%;:I%A%(B%R8):#2,A%:A%A%255:A%;:#
%2,B%:B%B%255:B%; 5s J%A%(B%R8):AT%,AU%,I%,J%,BI%(5): 40:AE%1 *5t  123: 85u AE%4 5v "POLY ";:#2,A:AA255:AW%A:A.AW%1:#2,A%:A%A%255:A%;:#2,B%:B%B%255:B%;:AX%(A)A%(B%R8) 6w #2,A%:A%A%255:A%;:#2,B%:B%B%255:B%;:
&AY%(A)A%(B%R8):(A.)AX%(A1),AY%(A1),AX%(A),AY%(A) H6x A:AX%(AW%1),AY%(AW%1),AX%(.),AY%(.):BI%(5)1 64 X6y  65:AE%1 e6z  123: r6{ :#2: 6| AE%4:AF%.:AG%.:AJ%.:AN%.:AS%.:AV%.: 6} B0 25 6~ B1 30 6 B2 36 6 
'B3 42 6 B4 67 6  6 .,I%,J%: 7 B$(144)O%. %7 B$(5)O%1 87 B$(28)O%2 L7 B$(159)O%3 `7 B$(156)O%4 s7 B$(30)O%5 7 B$(31)O%6 7 B$(158)O%7 7 B$(129)O%8 7 B$(149)O%9 7 B$(150	 )O%10 7 B$(151)O%11 8 B$(152)O%12 8 B$(153)O%13 +8 B$(154)O%14 @8 B$(155)O%15 8 3.,O%:.,1,O%:I%(.,.):J%(.,1):B$(157)I%I%1: 131 8 B$(29)I%I%1: 131 8 B$(145)J%J%1: 131 8 B$(17)J% Y#OUTPUT "HELLO"#DECLARE NAME$.MAIN  INPUT "WHAT NAME";NAME$  PRINT "HELLO ";NAME$                                                                                                                                                                      ̯) - 1    BEND:ELSE BEGIN      PLAYERANIM = FORMANIM(PLAYERFORM, ͯ)      PLAYERFRAME = 0    BEND  BEND  IF PX > (BX + 5) THEN PLAYERMIRROR = 1  IF BX > (PX + 5) THEN PLAYERMIRROR = 0  RETURN'--------------------------.CONSIDERNEXTBADDIEFRAME'--------------------------  IF BADDIESTATE = ӯ THEN BEGIN    IF BX > (PX + 5) THEN BADDIEMIRROR = 1    IF PX > (BX + 5) THEN BADDIEMIRROR = 0  BEND  IF BADDIEANIM <> ͯ THEN BEGIN    BADDIEFRAME = BA ' #  "WHAT NAME?";A$:"HELLO ";A$                                                                                                                                                                                                                           
DDIEFRAME + 1  BEND  IF BADDIEFRAME >= MAXFRAME(BADDIEFORM, BADDIEANIM) THEN BEGIN    IF BADDIEANIM = ͯ THEN BEGIN      IF BADDIEENERGY > 0 THEN BEGIN        BADDIEANIM = ̯ͯ        BADDIEFRAME = 0      BEND:ELSE BEGINV1$( 0)="O6M5T2 W.C HO5G W.#F HD WF HB O6D W.C HR"V2$( 0)="O5M5T2 W.C HO4G W.#F HD WF HB O5D W.C HR"V3$( 0)=""V4$( 0)=""V5$( 0)=""V6$( 0)=""V1$( 1)="T6M0IO1#AO2CO1CC #AO2#CO1#C#C O2CEO1CC O2EFO1FF"V2$( 1)="T6M0IO1#AO2CO2CC #AO2#CO2#C#C O2CE1O2CC O2EFO2FF"V3$( 1)="T3Q O2CR O4GR O2CR O4GR"V4$( 1)=""V5$( 1)=""V6$( 1)=""V1$( 2)="TO6 QRCCC CCC SC#DD#D O5WBR QR #G#G#G FF B O6SC#DD#D WCR"V2$( 2)="T6M0O1ICCRRCCRRCCRRCCRR GGRRGGRRGGRRGGRR FFRRFFRRFFRRFFRR CCRRCCRRCCRRCCRR"V3$( 2)="T3Q O2CR O4GR O2CR O4GR O2CR O4GR O2CR O4GR   O2CR O4GR O2CR O4GR O2CR O4GR O2CR O4GR"V4$( 2)=""V5$( 2)=""V6$( 2)=""V1$( 3)="TO6 QRGGG GGG SG#AA#A W#FR QRFFF SF#DFG #DD#DF DCD#D CO5#GG#G WCR"V2$( 3)="T6M0O1ICCRRCCRRCCRRCCRR #F#FRR#F#FRR#F#FRR#F#FRR FFRRFFRRFFRRFF	RR CCRRCCRRCCRRCCRR"V3$( 3)="T3Q O2CR O4GR O2CR O4GR O2CR O4GR O2CR O4GR  O2CR O4GR O2CR O4GR O2CR O4GR O2CR O4GR"V4$( 3)=""V5$( 3)=""V6$( 3)=""V1$( 4)=""V2$( 4)=""V3$( 4)=""V4$( 4)=""V5$( 4)=""V6$( 4)=""V1$( 5)=""V2$( 5)=""V3$( 5)=""V4$(

 5)=""V5$( 5)=""V6$( 5)=""V1$( 6)=""V2$( 6)=""V3$( 6)=""V4$( 6)=""V5$( 6)=""V6$( 6)=""V1$( 7)=""V2$( 7)=""V3$( 7)=""V4$( 7)=""V5$( 7)=""V6$( 7)=""V1$( 8)=""V2$( 8)=""V3$( 8)=""V4$( 8)=""V5$( 8)=""V6$( 8)=""V1$( 9)=""V2$( 9)=""V        BADDIEFRAME = MAXFRAME(BADDIEFORM, BADDIEANIM) - 1      BEND      RETURN    BEND    IF BADDIEKNEELFLAG = 1 AND BADDIEANIM <> ̯ͯ THEN BEGIN      BADDIEANIM = ̯ͯ      BADDIEFRAME = MAXFRAME(ͯ, ͯURSORGOTO MAIN'----.INIT'----  ' SWITCH BACK TO UPPER-CASE  ' POKE $D018, PEEK($D018) AND $FD  OLDX = -1 : OLDY = -1  DIDX% = 0  GROUPFLAG& = 0 : REVFLAG& = 0  PRINT "";  POKE $D020, 0  POKE $D021, 0  RETURN'-----------.CHECKINPUT'̯) - 1    BEND:ELSE BEGIN      BADDIEANIM = FORMANIM(BADDIEFORM, ͯ)      BADDIEFRAME = 0    BEND    RETURN  BEND  IF BADDIEFRAME = ͯ THEN RETURN  GOSUB IFPLAYERFARWALKCLOSER  IF RET% = 1 THEN RETURN  GOSUB I-----------  GET A$  IF A$<>"" THEN GOSUB DRAWINFO  IF A$="" AND X>0 THEN GOSUB RESTORECHAR : X=X-1 : RETURN  IF A$="" AND X<79 THEN GOSUB RESTORECHAR : X=X+1 : RETURN  IF A$="" AND Y>0 THEN GOSUB RESTORECHAR : Y=Y-1 : RETURN            IF AFPLAYERNEARERWALKCAUTIOUS  IF RET% = 1 THEN RETURN  GOSUB IFPLAYERHITTABLETRYHITTING  IF RET% = 1 THEN RETURN  ' IF PLAYER IS TRYING TO HIT ME, CONSIDER FLEEING  RETURN'------------------------------.IFPLAYERHITTABLETRYHITTING'---$="" AND Y<49 THEN GOSUB RESTORECHAR : Y=Y+1 : RETURN  IF A$="" THEN GOSUB LOADFILE : RETURN ' F1  IF A$="" THEN GOSUB SAVEFILE : RETURN ' F3  IF A$="" THEN GOSUB SETGROUPFLAG : RETURN ' F7  IF A$="" THEN GOSUB PLAYDATA : RETURN ' F5  IF ---------------------------  RET% = 0  ' IF PLAYER IS WITHIN HITTING DISTANCE, CONSIDER HITTING  IF ABS(PX-BX) >= 8 AND BADDIEANIM = ͯ THEN BEGIN    RET% = 1    K = INT(RND(1)*8)    IF K = 1 THEN BEGIN      BADDIEANIM = ͯ         A$(11): B$(11): C$(11): D$(11): E$(11): F$(11):A%3: B%(4): C%(4):B%(.)15:C%(.)10:B%(1)15:C%(1)10:B%(2)35:C%(2)10:B%(3)15   C%(3)10:B%(4)15:C%(4)10   :B%(A%):B.:1,100,1:2,100,1 8! A$(.)"T2O5 O5QGP6 IAG IDFQD":B$(.)  BADDIEFRAME=0      SOUND 1 + BADDIEMIRROR * 3, 4000, 5, 1, 100, 1000, 3    BEND    IF K = 2 THEN BEGIN      BADDIEANIM = ͯ      BADDIEFRAME=0      SOUND 1 + BADDIEMIRROR * 3, 2000, 5, 1, 100, 1000, 3    BEND  BEND  RETURN'----A$="" THEN REVFLAG& = 1 : RETURN  IF A$="" THEN REVFLAG& = 0 : RETURN  IF A$<>"" THEN CURSOR X, Y : GOSUB RESTORECHAR : GOSUB CHKREV : PRINT A$; : GOSUB SAVECHAR  RETURN'---------.DRAWINFO'---------  PRINT "";CHR$(27);"QFNAME=";FNAME$;"--------------------------.IFPLAYERNEARERWALKCAUTIOUS'------------------------------  RET% = 0  ' IF PLAYER IS NEARER, WALK AHEAD MORE CAUTIOUSLY  IF ABS(PX-BX) > 8 THEN BEGIN    IF INT(RND(1)*4) >= 3 THEN GOSUB MOVEBADDIECLOSER    RET% = 1  DIDX%=";DIDX%;  RETURN'-------.CHKREV'-------  IF REVFLAG& = 1 THEN PRINT "";:ELSE PRINT "";  RETURN'---------.PLAYDATA'---------  PRINT "";  PIDX% = 0  DO WHILE PIDX% < DIDX%    VAL& = LDATA&(PIDX%) : PIDX% = PIDX% + 1    IF VA  BEND  RETURN'-------------------------.IFPLAYERFARWALKCLOSER'-------------------------  RET% = 0  ' IF PLAYER IS A LONG DISTANCE AWAY, COMMIT TO WALKING CLOSER  IF ABS(PX-BX) > 20 THEN BEGIN    GOSUB MOVEBADDIECLOSER    RET% = 1  BENDL& = $FF THEN GROUPFLAG& = 1 : GOTO PDENDLOOP    IF VAL& = $FE THEN GROUPFLAG& = 0 : SLEEP .02 : GOTO PDENDLOOP    X = VAL&    IF X >= $80 THEN X=X-$80 : PRINT ""; : ELSE PRINT "";    Y = LDATA&(PIDX%) : PIDX% = PIDX% + 1    A$ = CHR$(LDATA&(P  RETURN'------------------.MOVEBADDIECLOSER'------------------  BADDIEANIM = ͯ  BADDIEFRAME = BADDIEFRAME + 1  IF BADDIEFRAME >= MAXFRAME(BADDIEFORM, BADDIEANIM) THEN BADDIEFRAME = 0  IF BX > PX THEN BEGIN    BX = BX - 1  	IDX%)) : PIDX% = PIDX% + 1    CURSOR X, Y: PRINT A$;    IF GROUPFLAG& = 0 THEN SLEEP .02.PDENDLOOP  LOOP  RETURN'--------------.SETGROUPFLAG'--------------  IF GROUPFLAG& = 0 THEN BEGIN    GROUPFLAG& = 1    LDATA&(DIDX%) = $FF    POKE"":A$(1)"O5P6M1 WG QR FSFGIF QE IESFEIE O4P9GP6Q#AHI#AR" ! A$(1)A$(1)"T2O5P6M1 QRP0SCP6DCD P0CP6ID SR IDP3#F P6 O4Q.G O5P8IF P6QO4SP9#AA#A#B P6Q#A":B$(1)"T1O2WGG C   O2WCC":C$(1)"T1O3WDD O2G O2WGG" e" A$(2)"T2O5QRSCI.D SCI.D SP9CDFG P8O4H.GQR O5QGIAG IDFQD":A$(2)A$(2)"P6T2O5 Q.GSAG QF O4.#AIR O5SP0DP3#DD#D O4P8IG#AO5CD":B$(2)"O2WCGF   O2WGO1#A" " C$(2)"O2WGO3DC O3WDO2F":A$(3)"T2O4 Q.G SP5GA IFP2G QF R P6FAO5C O4Q.A IG SP2FEFE P6QG R IGA SP3FEFE QD WG" ^# A$(3)A$(3)"T2O5 P0QGP6IAG DFQD .GSAG QAQ.A IRQ #A#A SO6P8CO5#AO6CD":B$(3)"O2WGF DCG      O2WF GF":C$(3)"O3WDC O2AGO3D  O3WC DC" # A$(4)"T2O5 Q.GSAG QFQ.F IR QA IAO6C CD O5P8Q.DIC QD HA IAO6CCD O5P0DP6F WG":B$(4)"O2W#DFD#DG":C$(4)"O2W#AO3CO2A#AO3D" :$	 A$(5)"T2O5P6QFIFG SFGFG O4IP0#AO5P8D O4Q.GSAG QF.GIR O5QDIDFQD.DICO4S#AG#AGO5SCP3#CC#CQC" $
 A$(5)A$(5)"T2O5P6HQCO4#AO5 SCO4#AO5CD O4Q.GSAG QF.FIR QAIA QO5CSCO4#AO5CDCO4#AO5CD O4H.G":B$(5)"O2WFG#A#AO3C O2WG F G":C$(5)"O3WCDFFO3G O3WD C D" $ C(1) $  14 $  12 $  _(1) K% AB:A$(A),B$(A),C$(A):.05:,,,D$(A),E$(A),F$(A):BB1:BC%(A%)B. Q%                                                                                                                                                                     BEND:ELSE BEGIN    BX = BX + 1  BEND  RETURN'------------------.DRAWPETSCIIFRAME'------------------  POKE $4000B, $04  ' ASSURE SOURCE BANK 4 (FOR ORIGINAL FRAME DATA)  IF MIRROR = 1 THEN SETBIT $40006, 5:ELSE CLRBIT $40006, 5  DATAADDR = FR!AMEADDR(DATIDX, FRAMEIDX)  FRMX = PEEK(DATAADDR + ͯԯ)  FRMY = PEEK(DATAADDR + ͯԯ)  FRMW = PEEK(DATAADDR + ͯԯ)  FRMH = PEEK(DATAADDR + ͯԯ)  FRMX = FX ' OVERRIDE POSITION  FRMY = FY  FRMX1=FRMX+FRMW-1"  FRMY1=FRMY+FRMH-1  CLRADDR = $51000 + FRMX + FRMY * 80  IF MIRROR = 1 THEN CLRADDR = CLRADDR + FRMW - 1  CDATAADDR = DATAADDR + ͯԯ  FOR YY=FRMY TO FRMY1    ' DRAW CHARS    ' ----------    SRCADDR = CDATAADDR    DESTADDR = #CLRADDR    LENGTH = FRMW    TRANSP = $FF    GOSUB TRANSPARENTDMA    CDATAADDR = CDATAADDR + FRMW    CLRADDR = CLRADDR + 80    NEXT YY  IF  THEN GOSUB DRAWBOXES  GOSUB CHECKIFHITOPPONENT  RETURN'------------------.DRAWPETSCII$LAYER'------------------  CLRBIT $40006, 5  DATAADDR = FRAMEADDR(ԯ, FRAMEIDX)  FRMX = PEEK(DATAADDR + ͯԯ)  FRMY = PEEK(DATAADDR + ͯԯ)  FRMW = PEEK(DATAADDR + ͯԯ)  FRMH = PEEK(DATAADDR + ͯԯ) % FRMX1=FRMX+FRMW-1  FRMY1=FRMY+FRMH-1  CLRADDR = $51000 + FRMX + FRMY * 80  CDATAADDR = DATAADDR + ͯԯ + FRMW * FRMH  XOFFS(FRAMEIDX) = MOD(XOFFS(FRAMEIDX) + 80, 80)  XOFFS = INT(XOFFS(FRAMEIDX))  CDATAADDR = FRAMEDBLUPADDR(FRAM
EIDX)  FOR YY=FRMY TO FRMY1    ' DRAW CHARS FROM OFFSET TO END    ' -----------------------------    SRCADDR = CDATAADDR + XOFFS    DESTADDR = CLRADDR    LENGTH = FRMW    TRANSP = $FF    GOSUB TRANSPARENTDMA    CDATAADDR = CDATAADDR + F' 0      BEND    BEND  BEND  IF PLAYERFRAME >= MAXFRAME(PLAYERFORM, PLAYERANIM) THEN BEGIN    IF PLAYERANIM = ͯ THEN BEGIN      IF PLAYERENERGY > 0 THEN BEGIN        PLAYERANIM = ̯ͯ        PLAYERFRAME = 0      BEND:ELSE BEGIN        PLAYERFRAME = MAXFRAME(PLAYERFORM, PLAYERANIM) - 1      BEND      RETURN    BEND    IF KNEELFLAG = 1 AND PLAYERANIM <> ̯ͯ THEN BEGIN      PLAYERANIM = ̯ͯ      PLAYERFRAME = MAXFRAME(ͯ,  IFP2G QF R P6FAO5C O4Q.A IG SP2FEFE P6QG R IGA SP3FEFE QD WG"V2$(3, 5)=""V3$(3, 5)=""V4$(3, 5)=""V5$(3, 5)=""V6$(3, 5)=""V1$(3, 6)="T2O5 P0QGP6IAG DFQD .GSAG QAQ.A IRQ #A#A SO6P8CO5#AO6CD"V2$(3, 6)=""V3$(3, 6)=""V4$(3, 6)=""V5$(3, 6)=""V6$(3, 6)=""V1$(3, 7)="T2O5 Q.GSAG QFQ.F IR QA IAO6C CD O5P8Q.DIC QD HA IAO6CCD O5P0DP6F WG"V2$(3, 7)=""V3$(3, 7)=""V4$(3, 7)=""V5$(3, 7)=""V6$(3, 7)=""V1$(3, 8)="T2O5P6QFIFG SFGFG O4IP0#AO5P8D O4Q.GSAG QF.GIR O5QDIDFQD.DICO4S#AG#AGO5SCP3#CC#CQC"V2$(3, 8)=""V3$(3, 8)=""V4$(3, 8)=""V5$(3, 8)=""V6$(3, 8)=""V1$(3, 9)="T2O5P6RQCO4#AO5 SCO4#AO5CD O4Q.GSAG QF.FIR QAIA QO5CSCO4#AO5CDCO4#AO5CD O4WG"V2$(3, 9)=""V3$(3, 9)=""V4$(3, 9)=""V5$(3, 9)=""V6$(3, 9)=""#DECLARE FF = FRE(1).LOOPGOSUB POLLPLAYGOTO LOOP'---------.POLLPLAY'---------  IF RPLAY(1) THEN RETURN  MUSICCHUNKINDEX=BARINDEX ' MAPBARTOCHUNK(BARINDEX)    PLAY V1$(S%,MUSICCHUNKINDEX),V2$(S%,MUSICCHUNKINDEX),V3$(S%,MUSICCHUNKINDEX)  SLEEP .05  PLAY ,,,V4$(V4$( 7)=""V5$( 7)=""V6$( 7)=""V1$( 8)=""V2$( 8)=""V3$( 8)=""V4$( 8)=""V5$( 8)=""V6$( 8)=""V1$( 9)=""V2$( 9)=""V3$( 9)=""V4$( 9)=""V5$( 9)=""V6$( 9)=""V1$( 10)=""V2$( 10)=""V3$( 10)=""V4$( 10)=""V5$( 10)=""V6$( 10)=""V1$( 11)=""V2$( 11)=""V3$( 11)=""V4$( 11)=""V5$( 11)=""V6$( 11)=""V1$( 12)=""V2$( 12)=""V3$( 12)=""V4$( 12)=""V5$( 12)=""V6$( 12)=""V1$( 13)=""V2$( 13)=""V3$( 13)=""V4$( 13)=""V5$( 13)=""V6$( 13)=""V1$( 14)=""V2$( 14)=""V3$( 14)=""V4$( 14)=""V5$( 14)=""V6$( 14)=""V1$( 15)=""V2$( 15)=""V3$( 15)=""V4$( 15)=""V5$( 15)=""V6$( 15)=""V1$( 16)=""V2$( 16)=""V3$( 16)=""V4$( 16)=""V5$( 16)=""V6$( 16)=""V1$( 17)=""V2$( 17)=""V3$( 17)=""V4$( 17)=""V5$( 17)=""V6$( 17)=""V1$( 18)=" "V2$( 18)=""V3$( 18)=""V4$( 18)=""V5$( 18)=""V6$( 18)=""V1$( 19)=""V2$( 19)=""V3$( 19)=""V4$( 19)=""V5$( 19)=""V6$( 19)=""                                                                                                                       S%,MUSICCHUNKINDEX),V5$(S%,MUSICCHUNKINDEX),V6$(S%,MUSICCHUNKINDEX)  BARINDEX=BARINDEX+1  IF BARINDEX=SONGSBARS%(S%) THEN BARINDEX=0  RETURN                                                                                                  
IP0O4GP3AO4P0#AO5P3C SO4P0#AO5P3CO4P0#AO5P3C QO4P0A"V2$( 2)="O2T5 QCRGR O1GRGGR"V3$( 2)="O2T3 O2QC SCRCR O4QG SGRGR O2QC SCRCR O4QGG SGRGR"V1$(2)=V1$(2)+V1$(2)V2$(2)=V2$(2)+V2$(2)V3$(2)=V3$(2)+V3$(2)V1$( 3)="O5T6 IRP0#DDP4C O4P0#AO5P3CP0QD R IP0O4GP3A O4P0#AO5P3C SO4P0#AO5P3CO4P0#AO5P3C QO4A"V2$( 3)="O2T5 QCRGR O1GRGGR"V3$( 3)="O2T3 O2QC SCRCR O4QG SGRGR O2QC SCRCR O4QGG SGRGR"V1$(3)=V1$(3)+V1$(3)V2$(3)=V2$(3)+V2$(3)V3$(3)=V3$(3)+V3$(3)V1$( 4)="O4T6 Q.A IG QGG WG QR"V2$( 4)="O2T5 QCRGR O1GRO2DDD"V3$( 4)="O2T3 O2QC SCRCR O4QG SGRGR O2QC SCRCR O4QGG SGRGR"V1$( 5)="O5T7 P7 QRR GG P0SFIP3.GP0QG SFIP3.GP0QGG"V2$( 5)="O1T5 QGRO2DR O1GRO2DRD"V3$( 5)="O2T3 O2QC SCRCR O4QG SGRGR O2QC SCRCR O4QGG SGRGR"V1$( 6)="O5T7QP0FIEP3FP0SDP3#DP0DP3#DP0QCICO4P3#AP0O5QC SO4#AP3O5CP0O4#AP3O5C QO4AR"V2$( 6)="O1T5 QFRO2CR CRGRG"V3$( 6)="O2T3 O2QC SCRCR O4QG SGRGR O2QC SCRCR O4QGG SGRGR"V1$(5)=V1$(5)+V1$(6)V2$(5)=V2$(5)+V2$(6)V3$(5)=V3$(5)+V3$(6)V1$( 7)="O5T7P0 I#A#AQ#A SP0AP3I.#A SP0AP3I.#A QAA HG QR"V2$( 7)="O1T5 P0QFRO2CR O1GRO2DRD"V3$( 7)="O2T3 O2QC SCRCR O4QG SGRGR O2QC SCRCR O4QGG SGRGR"V1$(7)=V1$(7)+V1$(6)V2$(7)=V2$(7)+V2$(6)V3$(7)=V3$(7)+V3$(6)V1$( 8)="O4T7 IP0#AP3O5QC ICQCC P0O4I#AP3A P0#AO5P3C O4P0AP3#A P0GP3A QP0F"V2$( 8)="O2T5 QCRGR O1GRO2DRD"V3$( 8)="O2T3 O2QC SCRCR O4QG SGRGR O2QC SCRCR O4QGG SGRGR"V1$( 9)="O4T7QRIP0#AP3AP0#AO5P3C P0O4QA SA#AA#A QGHGQR"V2$( 9)="O1T5 QFRO2CR O1GRO2DRD"V3$( 9)="O2T3 O2QC SCRCR O4QG SGRGR O2QC SCRCR O4QGG SGRGR"V1$(8)=V1$(8)+V1$(9)V2$(8)= ,V2$(8)+V2$(9)V3$(8)=V3$(8)+V3$(9)RETURN                                                                                                                                                                                                                    EDCGFEFEDADSBAAAAAA                                                                                                                   W .R                  .R           .R           O3T4.GWM1T5 O1.A            .A           .A           QR WO3T4.BHM3T9 O2A O4C O3B     O2A O4C O3B  O2A O4C O3B  HR WO4T4.GQM3T9 RH O3A O3A O4C   O3A O3A O4C  O3G O3G R   WO4T4.BWM1T5 O1.A            .A           .A           Q.R WO2T4.DW.R                   .R           .R           IR WO2T4.AW .R                .R             .R           O3T4.GWM1T5 O1.A          .A             .A           QR WO3T4.BHM3T9 O2A O3B O3A   O2A O3B O3A    O2A O4C O3B  HR WO4T4.GQM3T9 RH O3F O2A O3F  O3F O2A O3F   O3G O2A R   WO4T4.BWM1T5 O1.A          .A             .A           Q.R WO2T4.DW.R                 .R             .R           IR WO2T4.A 0 16                                                                                                                                                                                                                 FORMANIM(PLAYERFORM, ͯ)    PLAYERFRAME = 0  BEND  RETURN'--------------.KEYBOARDINPUT'--------------  GET A$  IF A$="," AND PALIDX>0 THEN PALIDX=PALIDX-1:GOSUB SETPALETTE  IF A$="." AND PALIDX<11 THEN PALIDX=PALIDX+1:GOSUB SETPALETTE  IF A$="1" THEN BEGIN    =MOD(+1,2)    EDMA 3, $F00, 160, $50000    EDMA 3, $F00, 160, $40800  BEND  ' D = TOGGLE BETWEEN HUMAN AND DUCK  IF A$="D" THEN BEGIN    IF PLAYERFORM = ͯ THEN BEGIN      PLAYERFORM =       PLAYERDATIDX = ԯ    BEND:ELSE BEGIN      PLAYERFORM = ͯ      PLAYERDATIDX = PLAYERDATFIXED    BEND    PLAYERANIM = FORMANIM(PLAYERFORM, ͯ)    PLAYERFRAME = 0    KNEELFLAG = 0  BEND  IF A$="<" AND PLAYERDATFIXED > ԯ1 THEN BEGIN    PLAYERDATFIXED = PLAYERDATFIXED - 1    PLAYERDATIDX = PLAYERDATFIXED  BEND  IF A$=">" AND PLAYERDATFIXED < ԯ4 THEN BEGIN    PLAYERDATFIXED = PLAYERDATFIXED + 1    PLAYERDATIDX = PLAYERDATFIXED  BEND  RETURN'--------------.JOYSTICKINPUT'--------------  JDIRRAW = JOY(2)  JFIRE = JDIRRAW AND 128  JDIR = JDIRRAW AND $7F  IF JDIR > 8 THEN JDIR = 0  ' HIDE ANY NONSENSICALS  ' HANDLE NO JOYSTICK INPUT CASES  ' ------------------------------  IF JDIRRAW=0 AND PLAYERANIM = ̯ͯ THEN BEGIN    IF PLAYERFRAME >= MAXFRAME(ͯ, ̯ͯ)-1 THEN BEGIN    KNEELFLAG = 0    PLAYERANIM = ̯ͯ    PLAYERFRAME = 0    BEND  BEND  IF JDIRRAW = 0 THEN RETURN  ' HANDLE CASES WITH SOME JOYSTICK INPUT  ' -------------------------------------  ' NO FIRE BUTTON MOVES  ' --------------------  IF JFIRE=0 THEN BEGIN    IF JDIR=ʯ AND PJUMP=0 THEN GOSUB MOVERIGHT    IF JDIR=ʯ AND PJUMP=0 THEN GOSUB MOVELEFT    IF JDIR=ʯ AND PLAYERANIM = ͯ THEN BEGIN      PLAYERANIM = ̯ͯ      PLAYERFRAME = 0    BEND    IF JDIR=ʯ AND PJUMP=0 THEN BEGIN      PLAYERANIM = ͯ      PJUMP = 1      PLAYERFRAME = 0    BEND  BEND  ' FIRE BUTTON MOVES  ' -----------------  IF JFIRE = 128 AND PJUMP=0 THEN BEGIN    IF JD(PLAYERMIRROR, JDIR)=įЯ AND PLAYERANIM = FORMANIM(PLAYERFORM, ͯ) THEN BEGIN      PLAYERANIM = FORMANIM(PLAYERFORM, ͯ)      SOUND 1 + PLAYERMIRROR * 3, 4000, 5, 1, 100, 1000, 3      IF KNEELFLAG = 1 THEN PLAYERANIM = ͯ      PLAYERFRAME = 0    BEND    IF JD(PLAYERMIRROR, JDIR)=įί AND PLAYERANIM = ͯ  THEN BEGIN      PLAYERANIM = ͯ      SOUND 1 + PLAYERMIRROR * 3, 2000, 5, 1, 100, 1000, 3      IF KNEELFLAG = 1 THEN PLAYERANIM = ͯ      PLAYERFRAME = 0    BEND  BEND  RETURN'-----------.DRAWPLAYER'-----------  CHARA!CTER =   FRAMEIDX = ANIMORDER(PLAYERFORM, PLAYERANIM, PLAYERFRAME)  FX=PX : FY=PY  MIRROR = PLAYERMIRROR  FORM = PLAYERFORM  DATIDX = PLAYERDATIDX  GOSUB DRAWPETSCIIFRAME  RETURN'-----------.DRAWBADDIE'-----------  CHARACT"ER =   FRAMEIDX = ANIMORDER(BADDIEFORM, BADDIEANIM, BADDIEFRAME)  FX=BX : FY=BY  MIRROR = BADDIEMIRROR  FORM = BADDIEFORM  DATIDX = BADDIEDATIDX  GOSUB DRAWPETSCIIFRAME  RETURN'--------------------------.CONSIDERNEXTPLAYERF#RAME'--------------------------  IF PLAYERANIM = FORMANIM(PLAYERFORM, ͯ) AND (JDIR=ʯ OR JDIR=ʯ) THEN BEGIN    PLAYERFRAME = PLAYERFRAME + 1  BEND  IF PLAYERANIM <> FORMANIM(PLAYERFORM, ͯ) THEN BEGIN    PLAYERFR$AME = PLAYERFRAME + 1  BEND  IF PLAYERANIM = ̯ͯ AND JDIR=ʯ THEN BEGIN    IF PLAYERFRAME >= MAXFRAME(ͯ, ̯ͯ) THEN BEGIN      PLAYERFRAME = MAXFRAME(ͯ, ̯ͯ) - 1      KNEELFLAG = 1    BE%ND    RETURN  BEND  IF PLAYERANIM = ͯ THEN BEGIN    IF PLAYERFRAME >= MAXFRAME(ͯ, ͯ) THEN BEGIN      PLAYERFRAME = MAXFRAME(ͯ, ͯ) - 1    BEND  BEND  IF PJUMP > 0 THEN BEGIN    IF PJUMP = 1 THEN& BEGIN      PY = PY - 2      IF PY <= 0 THEN PJUMP = 2    BEND    IF PJUMP = 2 THEN BEGIN      PY = PY + 2      IF PY >= 23 THEN BEGIN        PY = 23        PJUMP = 0        PLAYERANIM = FORMANIM(PLAYERFORM, ͯ)        PLAYERFRAME ='"V3$( 1)=""V4$( 1)=""V5$( 1)=""V6$( 1)=""V1$( 2)="O5IFED Q.C RIE Q.G R IO4GO5CCCQCIE QGIEQGIE"V2$( 2)="T0O2Q.R .C IGGG O1Q.G O2IDDD Q.C IGGG O1Q.G O2IDDD"V3$( 2)=""V4$( 2)=""V5$( 2)=""V6$( 2)=""V1$( 3)=""V2$( 3)=""V3$( 3)=""V4$( 3)=""V5$( 3)=""V6$( 3)=""V1$( 4)=""V2$( 4)=""V3$( 4)=""V4$( 4)=""V5$( 4)=""V6$( 4)=""V1$( 5)=""V2$( 5)=""V3$( 5)=""V4$( 5)=""V5$( 5)=""V6$( 5)=""V1$( 6)=""V2$( 6)=""V3$( 6)=""V4$( 6)=""V5$( 6)=""V6$( 6)=""V1$( 7)=""V2$( 7)=""V3$( 7)=""	SDP3#P0DP3D#D QC R IO4P0GP3A#AO5C SO4P0#AO5P3CO4P0#AO5P3C O4QA"V2$( 1)="O2T5 QCRGR O1GRGGR"V3$( 1)="O2T3 O2QC SCRCR O4QG SGRGR O2QC SCRCR O4QGG SGRGR"V1$(1)=V1$(1)+V1$(1)V2$(1)=V2$(1)+V2$(1)V3$(1)=V3$(1)+V3$(1)V1$( 2)="O5T6QRIP0CO4P3#AO5CO4#AO5QCR  ' MUSIC RELATED VARS  ' ------------------  #DECLARE MUSICCHUNKINDEX     ' OLD T  #DECLARE BARINDEX             ' OLD TT  ' #DECLARE MAPBARTOCHUNK(11)  ' OLD M()  #DECLARE V1$(4,11), V2$(4,11), V3$(4,11), V4$(4,11), V5$(4,11), V6$(4,11)#DEFINE =0#DEFINE =1#DEFINE =2#DEFINE =3#DEFINE =4#DECLARE S%#STRUCT  TMPO%, BARS%S% =  SONGS(4) = [ _  [ 15, 10 ], _  [ 15, 10 ], _  [ 35, 10 ], _  [ 15, 10 ], _  [ 15, 10 ]  _]'==========.INITMUSIC'==========  PLAY  TEMPO SONGSTMPO%(S%)  BARINDEX=0  'MAPBARTOCHUNK(0)=0  'MAPBARTOCHUNK(1)=1  'MAPBARTOCHUNK(2)=2  'MAPBARTOCHUNK(3)=3  'MAPBARTOCHUNK(4)=4  'MAPBARTOCHUNK(5)=5  'MAPBARTOCHUNK(6)=6  'MAPBARTOCHUNK(7)=7  'MAPBARTOCHUNK(8)=8  'MAPBARTOCHUNK(9)=9  'MAPBARTOCHUNK(10)=10  'MAPBARTOCHUNK(11)=11  FILTER 1,100,1  FILTER 2,100,1  'ENVELOPE 2,3,3,3,10,0  'ENVELOPE 4,9,4,9,8  'ENVELOPE 7,0,9,9,0,2,1100  'ENVELOPE 8,0,12,3,5,2,1100  'ENVELOPE 9,0,10,3,5,2,1100.THAISONG'---------V1$(2, 0)="T6M1O4HCCCC ICCCC CCCC O3GGGG GGGG"V2$(2, 0)="T1O3W CCCC"V3$(2, 0)="T1O3W EEEE"V4$(2, 0)="T6M1O5HCCCC SRICCCC CCCC O4GGGG GGGG"V5$(2, 0)="T1O3W GGGG"V6$(2, 0)="T1O4W CCCC"V1$(2, 1)="T6O3I AAAAAAAA GGGGGGGG O4CCCCCCCC O3GGGG GGGG"V2$(2, 1)="T1O3W CCCC"V3$(2, 1)="T1O3W FFEE"V4$(2, 1)="T6O4S RIAAAAAAAA GGGGGGGG O5CCCCCCCC O4GGGG GGGG"V5$(2, 1)="T1O3W AAGG"V6$(2, 1)="T1O4W CCCC"V1$(2, 2)="T6O3I AAAAAAAA O4CCCCCCCCC DDDDDDDD EEEEEEEE"V2$(2, 2)="T1O3W CCCC"V3$(2, 2)="T1O3W FFEE"V4$(2, 2)="T6O4S RIAAAAAAAA O5CCCCCCCCC DDDDDDDD EEEEEEEE"V5$(2, 2)="T1O3W AAGG"V6$(2, 2)="T1O4W CCCC"V1$(2, 3)="T6O4 IDDDD GGGG EEER  EEER EEEEEEEE EEEEEEEE"V2$(2, 3)="T1O3W DDCC"V3$(2, 3)="T1O3W GGEE"V4$(2, 3)="T6O5SR IDDDD GGGG EEER  EEER EEEEEEEE EEEEEEEE"V5$(2, 3)="T1O3W BBGG"V6$(2, 3)="T1O4W DDCC"V1$(2, 4)="T6O4I EEEE GGGG EEEE DDDD CCCCCCCC DDDDDDDD"V2$(2, 4)="T1O3W CCCC"V3$(2, 4)="T1O3W EEFF"V4$(2, 4)="T6O5SR IEEEE GGGG
 0  1 CLR:DIM I$(10):DIM E(16):DIM A%(1000):DIM K$(1000):DIM F(4):DIM L$(4,200):DIM M$(200):DIM N$(200):DIM G(200):H=0:DIM O$(32):DIM P$(30):DIM Q$(30): 2 DIM R$(30):I=0: 3 B$="11.PARSE":H$="@~":A$=CHR$(34):B=34:C=39:KEYON:PRINT" PREPROCESSOR V0.6.0":PRINT:KEY7,"SCRATCH"+A$+B$+A$+":DSAVE"+A$+B$+A$+":DVERIFY"+A$+B$ 4 C$="                                                                               ":D$=C$+C$+C$:C$="" 5 I$(.)=" PRINT INPUT IF THEN ELSE DO LOOP WHILE UNTIL GOSUB GOTO OPEN CLO 0  1 CLR:DIM I$(10):DIM E(16):DIM A%(1000):DIM K$(1000):DIM F(4):DIM L$(4,200):DIM M$(200):DIM N$(200):DIM G(200):H=0:DIM O$(32):DIM P$(30):DIM Q$(30): 2 DIM R$(30):I=0: 3 B$="11.PARSE":H$="@~":A$=CHR$(34):B=34:C=39:KEYON:PRINT" PREPROCESSOR V 0  1 CLR:DIM I$(10):DIM E(16):DIM A%(1000):DIM K$(1000):DIM F(4):DIM L$(4,200):DIM M$(200):DIM N$(200):DIM G(200):H=0:DIM O$(32):DIM P$(30):DIM Q$(30): 2 DIM R$(30):I=0: 3 B$="11.PARSE":H$="@~":A$=CHR$(34):B=34:C=39:KEYON:PRINT" PREPROCESSOR V0.6.0":PRINT:KEY7,"SCRATCH"+A$+B$+A$+":DSAVE"+A$+B$+A$+":DVERIFY"+A$+B$ 4 C$="                                                                               ":D$=C$+C$+C$:C$="" 5 I$(.)=" PRINT INPUT IF THEN ELSE DO LOOP WHILE UNTIL GOSUB GOTO OPEN CLOSE DOPEN DCLOSE FOR NEXT GETKEY HEX$ DIM PEEK POKE WAIT DEC CHR$ ASC SGN SQR STR$" 6 I$(.)=I$(.)+" GRAPHIC CLR SCREEN DEF BEGIN BEND LEN MID$ RIGHT$ LEFT$ INSTR FOR NEXT STEP TRAP BORDER AND FOREGROUND " 7 I$(1)=" BACKGROUND SET ABS SIN COS TAN LOG FRELIDX)       GOSUB DRAWPETSCIILAYER      'BEND  NEXT LIDX  RETURN'----------.MOVERIGHT'----------  IF PX < 25 THEN BEGIN    PX = PX + 1  BEND:ELSE BEGIN    IF BX > 0 AND (BADDIESTATE = ӯ OR BADDIESTATE = ӯ) THEN BEGIN      GOSUB INCROFFS      BX = BX - 1    BEND    IF BADDIESTATE = ӯ THEN BEGIN      GOSUB INCROFFS    BEND  BEND  KNEELFLAG = 0  RETURN'---------.MOVELEFT'---------  IF PX > 0 THEN BEGIN    PX = PX - 1  BEND:ELSE BEGIN    IF BX < 60 THEN BEGIN      GOSUB DECROFFS      BX = BX + 1    BEND  BEND  KNEELFLAG = 0  RETURN'--------------.GETUSERINPUT'--------------  GOSUB KEYBOARDINPUT  GOSUB JOYSTICKINPUT  IF A$="X" THEN BEGIN    KNEELFLAG = 0    PLAYERANIM = EEEE DDDD CCCCCCCC DDDDDDDD"V5$(2, 4)="T1O3W GGAA"V6$(2, 4)="T1O4W CCCC"V1$(2, 5)="T6O4I EEEEEEEE DDDDDDDR DDDDDDDD DDDDDDRR"V2$(2, 5)="T1O3W CCDD"V3$(2, 5)="T1O3W EEGG"V4$(2, 5)="T6O5SR IEEEEEEEE DDDDDDDR DDDDDDDD DDDDDDRR"V5$(2, 5)="T1O3W GGBB"V6$(2, 5)="T1O4W CCDD"V1$(2, 6)="T6O3I GGGGGGGG WR IAAAAAAAA WR IO4CCCCCCCC HR QO3FG"V2$(2, 6)="T1O3W CCCC DD"V3$(2, 6)="T1O3W FFEE FF"V4$(2, 6)="T7O4SR IGGGGGGGG WR IAAAAAAAA WR IO5CCCCCCCC Q.R QO4FG"V5$(2, 6)="T1O3W AAGG AA"V6$(2, 6)="T1O4W CCCC DD"V1$(2, 7)="T6O3H AO4CED ICCCCCCCC O3HAG HO4 CCCC ICCCCCCCR CCCCCCCR"V2$(2, 7)="T1O3W DD CC CC CC"V3$(2, 7)="T1O3W GG EE EE FF"V4$(2, 7)="T6O4H AO5CEDSR ICCCCCCCSC O4HAG HO5 CCCCSR ICCCCCCCR CCCCCCCR"V5$(2, 7)="T1O3W BB GG GG AA"V6$(2, 7)="T1O4W DD CC CC CC"V1$(2, 8)="T6O3H RGA O4CDC O3BA IGGGGGGGG QRRED HCDEF I GGGGGGGG GGGGGGGG GGGGGGGG GGGGGGGR"V2$(2, 8)="T1O3W CC CC CC DD CC CC"V3$(2, 8)="T1O3W EE FF EE GG EE FF"V4$(2, 8)="T6O4H RGA O5CDC O4BASR IGGGGGGGSG QRRED HCDEFSR I GGGGGGGG GGGGGGGG GGGGGGGG GGGGGGGR"V5$(2, 8)="T1O3W GG AA GG BB GG AA"V6$(2, 8)="T1O4W CC CC CC DD CC CC"V1$(2, 9)="T6O3H GGGG IGGGGGGGR GGGGGGGR GGGGGGGG GGGGGGGR"V2$(2, 9)="T1O3W CC DD CC"V3$(2, 9)="T1O3W EE GG EE"V4$(2, 9)="T6O4H GGGGSR IGGGGGGGR GGGGGGGR GGGGGGGG GGGGGGGR"V5$(2, 9)="T1O3W GG BB GG"V6$(2, 9)="T1L4W CC DD CC".VIETSONG'---------V1$(3, 0)="T2O5 O5QGP6 IAG IDFQD"V2$(3, 0)=""V3$(3, 0)=""V4$(3, 0)=""V5$(3, 0)=""V6$(3, 0)=""V1$(3, 1)="O5P6M1 WG QR FSFGIF QE IESFEIE O4P9GP6Q#AHI#A"V2$(3, 1)=""V3$(3, 1)=""V4$(3, 1)=""V5$(3, 1)=""V6$(3, 1)=""V1$(3, 2)="T2O5P6M1 QRP0SCP6DCD P0CP6ID SR IDP3#F P6 O4Q.G O5P8IF P6QO4SP9#AA#A#B P6Q#A"V2$(3, 2)=""V3$(3, 2)=""V4$(3, 2)=""V5$(3, 2)=""V6$(3, 2)=""V1$(3, 3)="T2O5QRSCI.D SCI.D  SP9CDFG P8O4H.GQR O5QGIAG IDFQD"V2$(3, 3)=""V3$(3, 3)=""V4$(3, 3)=""V5$(3, 3)=""V6$(3, 3)=""V1$(3, 4)="P6T2O5 Q.GSAG QF O4.#AIR O5SP0DP3#DD#D O4P8IG#AO5CD"V2$(3, 4)=""V3$(3, 4)=""V4$(3, 4)=""V5$(3, 4)=""V6$(3, 4)=""V1$(3, 5)="T2O4 Q.G SP5GA&V1$( 0)="O5IFED Q.C RIE Q.G R IO4GO5CCCQCIE QGIEQGIE"V2$( 0)="T0O2Q.R .C IGGG O1Q.G O2IDDD Q.C IGGG O1Q.G O2IDDD"V3$( 0)=""V4$( 0)=""V5$( 0)=""V6$( 0)=""V1$( 1)="O5QFIEQDIF QEIDQCIE QDICO4QBIA Q.G"V2$( 1)="T0O2Q.F IAAA Q.C IGGG O1Q.GO2 IDDD O1Q.GAO6CCD O5P0DP6F WG"V2$(4)="O2W#DFD#DG"V3$(4)="O2W#AO3CO2A#AO3D"V1$(5)="T2O5P6QFIFG SFGFG O4IP0#AO5P8D O4Q.GSAG QF.GIR O5QDIDFQD.DICO4S#AG#AGO5SCP3#CC#CQC"V1$(5)=V1$(5)+"T2O5P6HQCO4#AO5 SCO4#AO5CD O4Q.GSAG QF.FIR QAIA QO5CSCO4#AO5CDCO4#AO5CD O4H.G"V2$(5)="O2WFG#A#AO3C O2WG F G"V3$(5)="O3WCDFFO3G O3WD C D"#DECLARE FF = FRE(1).LOOPGOSUB POLLPLAYGOTO LOOP'---------.POLLPLAY'---------  IF RPLAY(1) THEN RETURN  MUSICCHUNKINDEX=BARINDEX ' MAPBARTOCHUNK(BARINDEX)    PLAY V1$(MUS ICCHUNKINDEX),V2$(MUSICCHUNKINDEX),V3$(MUSICCHUNKINDEX)  SLEEP .05  PLAY ,,,V4$(MUSICCHUNKINDEX),V5$(MUSICCHUNKINDEX),V6$(MUSICCHUNKINDEX)  BARINDEX=BARINDEX+1  IF BARINDEX=SONGSBARS%(S%) THEN BARINDEX=0  RETURNDCO4#AO5CD O4H.G"V$( 7)="M0T0O2Q.C IAAA Q.C IAAA Q.C IGGG Q.C IGGG"V1$( 8)="O5QQF.DID Q.EICO4BO5D CO4GO5CO4EGEQ.C"V2$( 8)="T0O1Q.G O2IDDD O1Q.G O2IDDD O2Q.C IGGG O2Q.C"RETURN.GERMANSONG'-----------V1$( 0)="O6M5T2 W.C HO5G W.#F HD WF HB O6D W.C HR"V2$( 0)="O5M5T2  W.C HO4G W.#F HD WF HB O5D W.C HR"V3$(0)=""V1$( 1)="T6M0IO1#AO2CO1CC #AO2#CO1#C#C O2CEO1CC O2EFO1FF"V2$( 1)="T6M0IO1#AO2CO2CC #AO2#CO2#C#C O2CE1O2CC O2EFO2FF"V3$( 1)="M0T3Q O2CR O4GR O2CR O4GR"V1$(1)=V1$(1)+V1$(1)V2$(1)=V2$(1)+V2$(1)V3$(1)=V3$(1!)+V3$(1)V1$(1)=V1$(1)+V1$(1)V2$(1)=V2$(1)+V2$(1)V3$(1)=V3$(1)+V3$(1)V1$( 2)="TO6 QRCCC CCC SC#DD#D O5WBR QR #G#G#G FF B O6SC#DD#D WCR"V2$( 2)="T6M0O1ICCRRCCRRCCRRCCRR GGRRGGRRGGRRGGRR FFRRFFRRFFRRFFRR CCRRCCRRCCRRCCRR"V3$( 2)="T3Q O2CR O4GR O2CR O"4GR O2CR O4GR O2CR O4GR   O2CR O4GR O2CR O4GR O2CR O4GR O2CR O4GR"V1$( 3)="TO6 QRGGG GGG SG#AA#A W#FR QRFFF SF#DFG #DD#DF DCD#D CO5#GG#G WCR"V2$( 3)="T6M0O1ICCRRCCRRCCRRCCRR #F#FRR#F#FRR#F#FRR#F#FRR FFRRFFRRFFRRFFRR CCRRCCRRCCRRCCRR"V3$( 3)="T3Q O2CR# O4GR O2CR O4GR O2CR O4GR O2CR O4GR  O2CR O4GR O2CR O4GR O2CR O4GR O2CR O4GR"V1$(4) = V1$(1)V2$(4) = V2$(1)V3$(4) = V3$(1)V1$(5) = V1$(0)V2$(5) = V2$(3)V3$(5) = V3$(3)RETURN.VIETSONG'---------V1$(0)="T2O5 O5QGP6 IAG IDFQD"V2$(0)=""V1$(1$)="O5P6M1 WG QR FSFGIF QE IESFEIE O4P9GP6Q#AHI#AR"V1$(1)=V1$(1)+"T2O5P6M1 QRP0SCP6DCD P0CP6ID SR IDP3#F P6 O4Q.G O5P8IF P6QO4SP9#AA#A#B P6Q#A"V2$(1)="T1O2WGG C   O2WCC"V3$(1)="T1O3WDD O2G O2WGG"V1$(2)="T2O5QRSCI.D SCI.D SP9CDFG P8O4H.GQR O5QGIAG ID%FQD"V1$(2)=V1$(2)+"P6T2O5 Q.GSAG QF O4.#AIR O5SP0DP3#DD#D O4P8IG#AO5CD"V2$(2)="O2WCGF   O2WGO1#A"V3$(2)="O2WGO3DC O3WDO2F"V1$(3)="T2O4 Q.G SP5GA IFP2G QF R P6FAO5C O4Q.A IG SP2FEFE P6QG R IGA SP3FEFE QD WG"V1$(3)=V1$(3)+"T2O5 P0QGP6IAG DFQD .GSAG &QAQ.A IRQ #A#A SO6P8CO5#AO6CD"V2$(3)="O2WGF DCG      O2WF GF"V3$(3)="O3WDC O2AGO3D  O3WC DC"V1$(4)="T2O5 Q.GSAG QFQ.F IR QA IAO6C CD O5P8Q.DIC QD HA IAO6CCD O5P0DP6F WG"V2$(4)="O2W#DFD#DG"V3$(4)="O2W#AO3CO2A#AO3D"V1$(5)="T2O5P6QFIFG SFGFG O4IP0#A'O5P8D O4Q.GSAG QF.GIR O5QDIDFQD.DICO4S#AG#AGO5SCP3#CC#CQC"V1$(5)=V1$(5)+"T2O5P6HQCO4#AO5 SCO4#AO5CD O4Q.GSAG QF.FIR QAIA QO5CSCO4#AO5CDCO4#AO5CD O4H.G"V2$(5)="O2WFG#A#AO3C O2WG F G"V3$(5)="O3WCDFFO3G O3WD C D"RETURN.TURKSONG'---------V1$( 0)="O 5T6 IP0FP3EP0FP3GP0FP3GP0EP3F P0SDP3#DD#D P0IDC DP3S#DR QP0DR"V2$( 0)="O2T5 P0O2QCRGR O1GR GGR"V3$( 0)="O2T3 O2QC SCRCR O4QG SGRGR O2QC SCRCR O4 QGG SGRGR"V1$(0)=V1$(0)+V1$(0)V2$(0)=V2$(0)+V2$(0)V3$(0)=V3$(0)+V3$(0)V1$( 1)="O5T6 IP0CP3O4#A P0O5QC IGGGGGGGG WR IAAAAAAAA WR IO5CCCCCCCC Q.R QO4FG"V5$( 6)="T1O3W AAGG AA"V6$( 6)="T1O4W CCCC DD"V1$( 7)="T6O3H AO4CED ICCCCCCCC O3HAG HO4 CCCC ICCCCCCCR CCCCCCCR"V2$( 7)="T1O3W DD CC CC CC"V3$( 7)="T1O3W GG EE EE FF"V4$( 7)="T6O4H AO5CEDSR ICCCCCCCSC O4HAG HO5 CCCCSR ICCCCCCCR CCCCCCCR"V5$( 7)="T1O3W BB GG GG AA"V6$( 7)="T1O4W DD CC CC CC"V1$( 8)="T6O3H RGA O4CDC O3BA IGGGGGGGG QRRED HCDEF I GGGGGGGG GGGGGGGG GGGGGGGG GGGGGGGR"V2$( 8)="T1O3W CC CC CC DD CC CC"V3$( 8)="T1O3W EE FF EE GG EE FF"V4$( 8)="T6O4H RGA O5CDC O4BASR IGGGGGGGSG QRRED HCDEFSR I GGGGGGGG GGGGGGGG GGGGGGGG GGGGGGGR"V5$( 8)="T1O3W GG AA GG BB GG AA"V6$( 8)="T1O4W CC CC CC DD CC CC"V1$( 9)="T6O3H GGGG IGGGGGGGR GGGGGGGR GGGGGGGG GGGGGGGR"V2$( 9)="T1O3W CC DD CC"V3$( 9)="T1O3W EE GG EE"V4$( 9)="T6O4H GGGGSR IGGGGGGGR GGGGGGGR GGGGGGGG GGGGGGGR"V5$( 9)="T1O3W GG BB GG"V6$( 9)="T1O4W CC DD CC"RETURN.AUSSONG'--------V1$( 0)="O5IFED Q.C RIE Q.G R IO4GO5CCCQCIE QGIEQGIE"V2$( 0)="T0O2Q.R .C IGGG O1Q.G O2IDDD Q.C IGGG O1Q.G O2IDDD"V1$( 1)="O5QFIEQDIF QEIDQCIE QDICO4QBIA Q.G"V2$( 1)="T0O2Q.F IAAA Q.C IGGG O1Q.GO2 IDDD O1Q.G"V1$( 2)="O5IFED Q.C RIE Q.G R IO4GO5CCCQCIE QGIEQGIE"V2$( 2)="T0O2Q.R .C IGGG O1Q.G O2IDDD Q.C IGGG O1Q.G O2IDDD"V1$( 3)="O5QFIEQDIF Q	EIDQCIE QDIEQ#FIA GFD O4BGD"V2$( 3)="T0O2Q.F IAAA Q.C IGGG O2Q.D IAAA O1Q.G"V1$( 4)="O5IBGDBGD A#FDA#FD GECGEC QDIEQ#FIA BGDBGD A#FDA#FD O6QCO5IBO6QCIEQ.D.#F"V2$( 4)="M0T0O2Q.D IGGG Q.D IAAA Q.C IGGG Q.D IAAA Q.D IGGG Q.D IAAA Q.C IGGG H.D"V1$( 5)=VEC?D     @   $ 6$  " ?D     ,   V     8 6: ~: v  &  $    ?D    L   <   D\ N : &   
 ? @ L @L ^ ?D : ": L< |< t D    b ?D F F J  J ?D J J N  N ?D N N R  R ?D R R V  V ?D V V Z  Z ?C*J XL C P dR C&V XX C ^ ` C `  d D  8  

    ?Dp t     v r ? Dz    ?Dn p     t r ?Dr t   ?D        D   < < DF F d f DN N V V ^ ` h j ?D          D  f h f h f h \ V D D             D

?D 
  J  J ?D J J "O5QAFIO4M1CDEDCGFE O5QGE O4ICDEDCO3BAG"V2$( 5)="M0T0O2Q.C IAAA Q.C IAAA Q.C IGGG Q.C IGGG"V1$( 6)="O5QF.DID Q.E#FIA Q.G IFGF EFE DED"V2$( 6)="T0O1Q.G O2IDDD O1Q.G O2IDDD O1Q.G O2IDDD O1Q.G O2IDDD"V1$( 7)="O5QAFIO4M1CDEDCGFE O5QGE O4ICDEDCO3BAG"V2ͯ)  PX = 0 : PY = 23  BX = 60 : BY = 23  PLAYERENERGY = 18  LAGPENERGY = 0  BADDIEENERGY = 0  LAGBENERGY = 0  PJUMP = 0  PLAYERMIRROR = 0  BADDIEMIRROR = 1  BJUMP = 0  NEXTBADDIETIME = 50  BADDIEDEADTIME = 50  BADDIESTATE = ӯ  RETURN'-------------------.INITPETSCIIFRAMES'-------------------  TMP = PTR  MAXFRAMES(FORM) = PEEK(PTR + ԯͯ)  'PRINT  'PRINT "PTR=";HEX$(PTR + ԯͯ)  PTR = PTR + ԯ0  'PRINT  'PRINT "FORM=";FORM;" - MXFRM=";MAXFRAMES(FORM);": ";  FRMIDX = 0  DO WHILE FRMIDX < MAXFRAMES(FORM)    'PRINT FRMIDX;    FRAMEADDR(DATIDX, FRMIDX) = PTR    FRMW = PEEK(PTR + ͯԯ)    FRMH = PEEK(PTR + ͯԯ)        'PRINT "PTR=";HEXV1$( 0)="T7O4HCCCC SCRCRCRCR CRCRCRCR O3GRGRGRGR GRGRGRGR"V2$( 0)="T8 O2WCGEG"V3$( 0)="O3T3 W C R B HBB"V4$( 0)="T7O5HCCCC SRCRCRCRC RCRCRCRC O4RGRGRGRG RGRGRGRG"V5$( 0)="T8 O2WCGEG"V6$( 0)="O3T3 W C R B HBB"V1$( 1)="T7O3S ARARARARARARARAR GRGRGRGRGRGRGR O4CRCRCRCRCRCRCRCR O3GRGRGRGR GRGRGRGR"V2$( 1)="O2W DG"V3$( 1)="O3T3 W C R B HBB"V4$( 1)="T7O4S RARARARARARARARA RGRGRGRGRGRGRG O5RCRCRCRCRCRCRCRC O4RGRGRGRG RGRGRGRG"V5$( 1)="O2W DG"V6$( 1)=""V1$( 2)=""V2$( 2)=""V3$( 2)=""V4$( 2)=""V5$( 2)=""V6$( 2)=""V1$( 3)=""V2$( 3)=""V3$( 3)=""V4$( 3)=""V5$( 3)=""V6$( 3)=""V1$( 4)=""V2$( 4)=""V3$( 4)=""V4$( 4)=""V5$( 4)=""V6$( 4)=""V1$( 5)=""V2$( 5)=""V3$( 5)=""V4$( 5)=""V5$( 5)=""V6$( 5)=""V1$( 6)=""V2$( 6)=""V3$( 6)=""V4$( 6)=""V5$( 6)=""V6$( 6)=""V1$( 7)=""V2$( 7)=""V3$( 7)=""V4$( 7)=""V5$( 7)=""V6$( 7)=""V1$( 8)=""V2$( 8)=""V3$( 8)=""V4$( 8)=""V5$( 8)=""V6$( 8)=""V1$( 9)=""V2$( 9)=""V3$( 9)=""V4$( 9)=""V5$( 9)=""V6$( 9)=""V1$( 10)=""V2$( 10)=""V3$( 10)=""V4$( 10)=""V5$( 10)=""V6$( 10)=""V1$( 11)=""V2$( 11)=""V3$( 11)=""V4$( 11)=""V5$( 11)=""V6$( 11)=""V1$( 12)=""V2$( 12)=""V3$( 12)=""V4$( 12)=""V5$( 12)=""V6$( 12)=""V1$( 13)=""V2$( 13)=""V3$( 13)=""V4$( 13)=""V5$( 13)=""V6$( 13)=""V1$( 14)=""V2$( 14)=""V3$( 14)=""V4$( 14)=""V5$( 14)=""V6$( 14)=""V1$( 15)=""V2$( 15)=""V3$( 15)=""V4$( 15)=""V5$( 15)=""V6$( 15)=""V1$( 16)=""V2$( 16)=""V3$( 16)=""V4$( 16)=""V5$( 16)=""V6$( 16)=""V1$( 17)=""V2$ ( 17)=""V3$( 17)=""V4$( 17)=""V5$( 17)=""V6$( 17)=""V1$( 18)=""V2$( 18)=""V3$( 18)=""V4$( 18)=""V5$( 18)=""V6$( 18)=""V1$( 19)=""V2$( 19)=""V3$( 19)=""V4$( 19)=""V5$( 19)=""V6$( 19)=""                                                    ' MUSIC RELATED VARS  ' ------------------  #DECLARE MUSICCHUNKINDEX     ' OLD T  #DECLARE BARINDEX             ' OLD TT  ' #DECLARE MAPBARTOCHUNK(11)  ' OLD M()  #DECLARE V1$(11), V2$(11), V3$(11), V4$(11), V5$(11), V6$(11)#DEFINE =0#DEFINE =1#DEFINE =2#DEFINE =3#DEFINE =4#DECLARE S%#STRUCT  TMPO%, BARS%S% =  SONGS(4) = [ _  [ 15, 10 ], _  [ 15, 10 ], _  [ 35, 10 ], _  [ 15, 10 ], _  [ 15, 10 ]  _]'==========.INITMUSIC'==========  PLAY  TEMPO SONGSTMPO%(S%)  BARINDEX=0  'MAPBARTOCHUNK(0)=0  'MAPBARTOCHUNK(1)=1  'MAPBARTOCHUNK(2)=2  'MAPBARTOCHUNK(3)=3  'MAPBARTOCHUNK(4)=4  'MAPBARTOCHUNK(5)=5  'MAPBARTOCHUNK(6)=6  'MAPBARTOCHUNK(7)=7  'MAPBARTOCHUNK(8)=8  'MAPBARTOCHUNK(9)=9  'MAPBARTOCHUNK(10)=10  'MAPBARTOCHUNK(11)=11  FILTER 1,100,1  FILTER 2,100,1  'ENVELOPE 2,3,3,3,10,0  'ENVELOPE 4,9,4,9,8  'ENVELOPE 7,0,9,9,0,2,1100  'ENVELOPE 8,0,12,3,5,2,1100  'ENVELOPE 9,0,10,3,5,2,1100.VIETSONG'---------V1$(0)="T2O5 O5QGP6 IAG IDFQD"V2$(0)=""V1$(1)="O5P6M1 WG QR FSFGIF QE IESFEIE O4P9GP6Q#AHI#AR"V1$(1)=V1$(1)+"T2O5P6M1 QRP0SCP6DCD P0CP6ID SR IDP3#F P6 O4Q.G O5P8IF P6QO4SP9#AA#A#B P6Q#A"V2$(1)="T1O2WGG C   O2WCC"V3$(1)="T1O3WDD O2G O2WGG"V1$(2)="T2O5QRSCI.D SCI.D SP9CDFG P8O4H.GQR O5QGIAG IDFQD"V1$(2)=V1$(2)+"P6T2O5 Q.GSAG QF O4.#AIR O5SP0DP3#DD#D O4P8IG#AO5CD"V2$(2)="O2WCGF   O2WGO1#A"V3$(2)="O2WGO3DC O3WDO2F"V1$(3)="T2O4 Q.G SP5GA IFP2G QF R P6FAO5C O4Q.A IG SP2FEFE P6QG R IGA SP3FEFE QD WG"V1$(3)=V1$(3)+"T2O5 P0QGP6IAG DFQD .GSAG QAQ.A IRQ #A#A SO6P8CO5#AO6CD"V2$(3)="O2WGF DCG      O2WF GF"V3$(3)="O3WDC O2AGO3D  O3WC DC"V1$(4)="T2O5 Q.GSAG QFQ.F IR QA IAO6C CD O5P8Q.DIC QD HA I$(PTR);", IDX=";FRMIDX;", W=";FRMW;", H=";FRMH    PTR = PTR + ͯԯ + FRMW * FRMH    ':PRINT CHR$(147);"FRMIDX=";FRMIDX    FRMIDX = FRMIDX + 1  LOOP  PTR = TMP  RETURN'-------------------------.PREPAREDOUBLECOPYLAYER'-------------------------  DBLUPADDR = $52000  FOR FRAMEIDX = 0 TO MAXFRAMES(ͯ)-1    PTR = FRAMEADDR(ԯ, FRAMEIDX)    FRMX = PEEK(PTR + ͯԯ)    FRMY = PEEK(PTR + ͯԯ)    FRMW = PEEK(PTR + ͯԯ)    FRMH = PEEK(PTR + ͯԯ)    FRMX1=FRMX+FRMW-1    FRMY1=FRMY+FRMH-1    FRAMEDBLUPADDR(FRAMEIDX) = DBLUPADDR    '   FOR EACH ROW TWICE INTO SOME LOCATION IN DBLUPADDR    FOR Y = FRMY TO FRMY1      FOR K = 0 TO 1          ' COPY IT TO SOME PLACE IN $5.2000          EDMA 0, FRMW, (PTR + ͯԯ), DBLUPADDR          DBLUPADDR = DBLUPADDR + FRMW      NEXT K      PTR = PTR + FRMW    NEXT Y  NEXT FRAMEIDX  RETURN'---------------.DRAWBACKGROUND'---------------   '   FRAMEIDX = ǯ   '   GOSUB DRAWPETSCIILAYER    '   RETURN  POKE $4000B, $05  ' ASSURE SOURCE BANK 5 (FOR DOUBLED-UP LAYERS)  FOR LIDX = 0 TO MAXFRAMES(ͯ)-1     ' IF LAYERVISIBLE[LIDX] = 1 THEN BEGIN       FRAMEIDX = DRAWORDER(!HEN GOSUB VIETSONG    IF S% = 4 THEN GOSUB AUSSONG  BEND  RETURN.POLLPLAY'---------  IF RPLAY(1) THEN RETURN  MUSICCHUNKINDEX=BARINDEX ' MAPBARTOCHUNK(BARINDEX)  IF S% =  THEN MUSICCHUNKINDEX=MAP(BARINDEX)    IF SONGSCPY%"(S%)=1 THEN BEGIN    PLAY V1$(MUSICCHUNKINDEX),V2$(MUSICCHUNKINDEX),V3$(MUSICCHUNKINDEX)    SLEEP .05    PLAY ,,,V1$(MUSICCHUNKINDEX),V2$(MUSICCHUNKINDEX),V3$(MUSICCHUNKINDEX)  BEND:ELSE BEGIN    PLAY V1$(MUSICCHUNKINDEX),V2$(MUSICCHU#NKINDEX),V3$(MUSICCHUNKINDEX)    SLEEP .05    PLAY ,,,V4$(MUSICCHUNKINDEX),V5$(MUSICCHUNKINDEX),V6$(MUSICCHUNKINDEX)  BEND  BARINDEX=BARINDEX+1  IF BARINDEX=SONGSBARS%(S%) THEN BARINDEX=0  RETURN.THAISONG'---------V1$( 0)="T6M1O$4HCCCC ICCCC CCCC O3GGGG GGGG"V2$( 0)="T1O3W CCCC"V3$( 0)="T1O3W EEEE"V4$( 0)="T6M1O5HCCCC SRICCCC CCCC O4GGGG GGGG"V5$( 0)="T1O3W GGGG"V6$( 0)="T1O4W CCCC"V1$( 1)="T6O3I AAAAAAAA GGGGGGGG O4CCCCCCCC O3GGGG GGGG"V2$( 1)="T1O3W CCCC"V3$( 1)="T1O3%W FFEE"V4$( 1)="T6O4S RIAAAAAAAA GGGGGGGG O5CCCCCCCC O4GGGG GGGG"V5$( 1)="T1O3W AAGG"V6$( 1)="T1O4W CCCC"V1$( 2)="T6O3I AAAAAAAA O4CCCCCCCCC DDDDDDDD EEEEEEEE"V2$( 2)="T1O3W CCCC"V3$( 2)="T1O3W FFEE"V4$( 2)="T6O4S RIAAAAAAAA O5CCCCCCCCC DDDDDDDD &EEEEEEEE"V5$( 2)="T1O3W AAGG"V6$( 2)="T1O4W CCCC"V1$( 3)="T6O4 IDDDD GGGG EEER  EEER EEEEEEEE EEEEEEEE"V2$( 3)="T1O3W DDCC"V3$( 3)="T1O3W GGEE"V4$( 3)="T6O5SR IDDDD GGGG EEER  EEER EEEEEEEE EEEEEEEE"V5$( 3)="T1O3W BBGG"V6$( 3)="T1O4W DDCC"V1$(' 4)="T6O4I EEEE GGGG EEEE DDDD CCCCCCCC DDDDDDDD"V2$( 4)="T1O3W CCCC"V3$( 4)="T1O3W EEFF"V4$( 4)="T6O5SR IEEEE GGGG EEEE DDDD CCCCCCCC DDDDDDDD"V5$( 4)="T1O3W GGAA"V6$( 4)="T1O4W CCCC"V1$( 5)="T6O4I EEEEEEEE DDDDDDDR DDDDDDDD DDDDDDRR"V2$( 5)="T1 O3W CCDD"V3$( 5)="T1O3W EEGG"V4$( 5)="T6O5SR IEEEEEEEE DDDDDDDR DDDDDDDD DDDDDDRR"V5$( 5)="T1O3W GGBB"V6$( 5)="T1O4W CCDD"V1$( 6)="T6O3I GGGGGGGG WR IAAAAAAAA WR IO4CCCCCCCC HR QO3FG"V2$( 6)="T1O3W CCCC DD"V3$( 6)="T1O3W FFEE FF"V4$( 6)="T7O4SR S://YOUTU.BE/VïQUUO"  PRINT  PRINT "IS LAST-RELEASED VERSION OF THE GAME NO LONGER WORKS WITH LATEST 65 :"  PRINT "- HTTPS://TINYURL.COM/EFOC-ORIG"  PRINT  PRINT "'VE MADE SOME REPAIRS/ENHANCEMENTS SO THAT IT RUNS ON LATEST 65  HERE:"  PRINT "- HTTPS://TINYURL.COM/EFOC-NEW"  GOSUB PRESSAKEY  RETURN.LOADERROR'----------  BORDER 2  LOADSTATE% = -4  PRINT "ERROR LOADING FILE..."  STOP  RETURN.FINDYMINYMAX'--------------  YMIN% = POLYY%(0)  YMAX% = POLYY%(0)  FOR IDX% = 0 TO POLYIDX%-1    IF POLYY%(IDX%) < YMIN% THEN YMIN% = POLYY%(IDX%)    IF POLYY%(IDX%) > YMAX% THEN YMAX% = POLYY%(IDX%)  NEXT IDX%  RETURN .ISYINLINEYRANGE'-------------------  RET% = 0: REV% = 0  Y0% = POLYY%(IDX%-1)  Y1% = POLYY%(IDX%)  IF Y0% > Y1% THEN TMP%=Y0%:Y0% = Y1%:Y1% = TMP%:REV%=1  IF Y0% <= Y% AND Y% < Y1% THEN RET% = 1  RETURN.CHECKLINEINTERSECT'--------------------  GOSUB ISYINLINEYRANGE  IF RET% = 0 THEN RETURN  X0% = POLYX%(IDX%-1)  X1% = POLYX%(IDX%)  IF REV%=1 THEN TMP%=X0%:X0% = X1%:X1% = TMP%  IF X0% = X1% THEN X% =X0%:RET% = 1:RETURN  M = (Y1%-Y0%) / (X1% - X0%)  C = Y0% - M * X0%    X% = (Y% - C) / M  RET% = 1  RETURN.FINDINTERSECTS'---------------  PIDX% = 0  ' CHECK LAST-POINT TO FIRST  POLYX%(POLYIDX%) = POLYX%(0)  POLYY%(POLYIDX%) = POLYY%(0)  FOR IDX% = 1 TO POLYIDX%    GOSUB CHECKLINEINTERSECT    IF RET% = 1 THEN PX%(PIDX%)=X% : PIDX% = PIDX% + 1  NEXT IDX%  RETURN.SORTINTERSECTS'---------------  ' BUBBLE SORT ALGORITHM FROM: GEEKSFORGEEKS.ORG/BUBBLE-SORT  #IFDEF ǯ  GOSUB CLEARMENU  CHAR 0,0,1,1,2,STR$(PIDX%-1)  FOR I%=0 TO PIDX%-1    CHAR 4+I%*4,0,1,1,2,STR$(PX%(I%))  NEXT I%#ENDIF  FOR I% = 0 TO PIDX%-2    SWAPPED% = 0    FOR J% = 0 TO PIDX%-I%-2      IF PX%(J%) > PX%(J%+1) THEN BEGIN        TMP%=PX%(J%)        PX%(J%) = PX%(J%+1)        PX%(J%+1) = TMP%        SWAPPED% = 1      BEND    NEXT J%    IF SWAPPED% = 0 THEN I% = PIDX%  ' EXIT EARLY	  NEXT I%#IFDEF ǯ  FOR I%=0 TO PIDX%-1    CHAR 4+I%*4,10,1,1,2,STR$(PX%(I%))  NEXT I%  GETKEY A$#ENDIF  RETURN.DRAWHORIZONTALINTERSECTS'--------------------------  GOSUB FINDINTERSECTS  GOSUB SORTINTERSECTS  FOR IDX%=0 TO PID
X%-1 STEP 2    LINE PX%(IDX%),Y%,PX%(IDX%+1),Y%  NEXT IDX%  RETURN.FILLPOLY'---------  POLLCNT%=0  GOSUB FINDYMINYMAX  FOR Y%=YMIN% TO YMAX%    GOSUB DRAWHORIZONTALINTERSECTS    POLLCNT%=POLLCNT%+1    IF POLLCNT%=5 THEN GOSUB POLLPLAY:POLLCNT%=0  NEXT Y%  RETURN.CHECKVECHEADER'----------------  RET% = 0  IF K<>ASC("V") THEN RETURN  GET#2, K:PRINT K;  IF K<>ASC("E") THEN RETURN  GET#2, K:PRINT K;  IF K<>ASC("C") THEN RETURN  RET% = 1  VECSIZE% = 3  LOADSTATE%=-1  RETURN.LOADFROMCACHE'---------------  IF HASATTICRAM% THEN BEGIN    'Z = $8000000 + $20000*CURRENTROOM%    'FOR K = 0 TO 7    'OFFS = K * $4000    'EDMA 0, $3E80, Z+OFFS, $40000+OFFS    'NEXT K    EDMA 0, 0, $8000000 + $20000*CURRENTROOM%, $40000    EDMA 0, 0, $8000000 + $20000*CURRENTROOM% + $10000, $50000  BEND  'PALETTE RESTORE  RETURN.BOXFILL'-------  POLLCNT%=0  K=1  IF BY0% > MY% THEN K=-1  FOR Y% = BY0% TO MY% STEP K    LINE BX0%, Y%, MX%, Y%    POLLCNT%=POLLCNT%+1    IF POLLCNT%=5 THEN GOSUB POLLPLAY:POLLCNT%=0  NEXT Y%  RETURN.LOAD'----  ' FOR NOW, JUST LOAD FROM A SINGLE HARD-CODED FILE  LOADSTATE% = -4  IF ONION% = 1 THEN BEGIN    DOPEN #2,(ONION$),R,U8    OFFSET%=20  BEND:ELSE BEGIN    DOPEN #2,(ROOMSVART$(CURRENTROOM%)),R,U8  BEND  DO    GET#2, K:PRINT "RD=";K;    IF ST THEN EXIT    IF LOADSTATE% = -4 THEN BEGIN      PRINT "CHECKVEC ";      GOSUB CHECKVECHEADER      IF RET% = 0 THEN GOSUB LOADERROR:EXIT:ELSE GOTO NXTLP    BEND    IF LOADSTATE% = -1 THEN BEGIN      PRINT "NEWCMD ";      FILLSTATE% = (K AND 64)/64      K = K AND 63      LOADSTATE% = K    BEND    IF LOADSTATE% =  THEN BEGIN      PRINT "COLOUR ";      GET#2,K:PRINT K;      PEN 0, K      VECDATA%(VECSIZE%) =       VECSIZE% = VECSIZE% +1      VECDATA%(VECSIZE%) = K      VECSIZE% = VECSIZE% +1      LASTCOLOUR% = K      SELECTEDCOLOUR% = K      LOADSTATE% = -1      GOTO NXTLP    BEND    IF LOADSTATE% =  THEN BEGIN      PRINT "LINE ";      GET#2,M0% : M0% = M0% AND 255      GET#2,M1% : M1% = M1% AND 255      LX0% = M0% + (M1% << 8)      GET#2,M0% : M0% = M0% AND 255      GET#2,M1% : M1% = M1% AND 255      LY0% = M0% + (M1% << 8) + OFFSET%:IF LY0%<0 THEN BEGIN:LY0%=0:BEND      GET#2,M0% : M0% = M0% AND 255      GET#2,M1% : M1% = M1% AND 255      MX% = M0% + (M1% << 8)      GET#2,M0% : M0% = M0% AND 255      GET#2,M1% : M1% = M1% AND 255      MY% = M0% + (M1% << 8) + OFFSET%:IF MY%<0 THEN BEGIN:MY%=0:BEND      LINE LX0%, LY0%, MX%, MY%      LOADSTATE% = -1      GOTO NXTLP    BEND    IF LOADSTATE% =  THEN BEGIN      PRINT "CIRCLE ";      GET#2,M0% : M0% = M0% AND 255      GET#2,M1% : M1% = M1% AND 255      CX0% = M0% + (M1% << 8)      GET#2,M0% : M0% = (M0% AND 255)      GET#2,M1% : M1% = (M1% AND 255)      CY0% = M0% + (M1% << 8) + OFFSET%:IF CY0%<0 THEN BEGIN:CY0%=0:BEND      GET#2,M0% : M0% = (M0% AND 255)      GET#2,M1% : M1% = (M1% AND 255)      RADIUS% = M0% + (M1% << 8)      CIRCLE CX0%, CY0%, RADIUS%, FILLSTATE%      LOADSTATE% = -1      GOTO NXTLP    BEND    IF LOADSTATE% =  THEN BEGIN      PRINT "ELLIPSE ";      GET#2,M0% : M0% = M0% AND 255      GET#2,M1% : M1% = M1% AND 255      EX0% = M0% + (M1% << 8)      GET#2,M0% : M0% = M0% AND 255      GET#2,M1% : M1% = M1% AND 255      EY0% = M0% + (M1% << 8) + OFFSET%:IF EY0%<0 THEN BEGIN:EY0%=0:BEND      GET#2,M0% : M0% = M0% AND 255      GET#2,M1% : M1% = M1% AND 255      XRADIUS% = M0% + (M1% << 8)      GET#2,M0% : M0% = M0% AND 255      GET#2,M1% : M1% = M1% AND 255      YRADIUS% = M0% + (M1% << 8)      ELLIPSE EX0%, EY0%, XRADIUS%, YRADIUS%, FILLSTATE%      LOADSTATE% = -1      GOTO NXTLP    BEND    IF LOADSTATE% =  THEN BEGIN      PRINT "BOX ";      GET#2,M0% : M0% = M0% AND 255      GET#2,M1% : M1% = M1% AND 255      BX0% = M0% + (M1% << 8)      GET#2,M0% : M0% = M0% AND 255      GET#2,M1% : M1% = M1% AND 255      BY0% = M0% + (M1% << 8) + OFFSET% : IF BY0%<0 THEN BEGIN:BY0%=0:BEND      GET#2,M0% : M0% = M0% AND 255      GET#2,M1% : M1% = M1% AND 255      MX% = M0% + (M1% << 8)      GET#2,M0% : M0% = M0% AND 255      GET#2,M1% : M1% = M1% AND 255      MY% = M0% + (M1% << 8) + OFFSET% : IF MY%<0 THEN BEGIN:MY%=0:BEND      IF FILLSTATE%<>0 THEN GOSUB BOXFILL:ELSE BOX BX0%, BY0%, MX%, MY%      LOADSTATE% = -1      GOTO NXTLP    BEND    IF LOADSTATE% =  THEN BEGIN      PRINT "POLY ";      GET#2,K:K = K AND 255      POLYIDX% = K      FOR K = 0 TO POLYIDX%-1        GET#2,M0% : M0% = M0% AND 255        GET#2,M1% : M1% = M1% AND 255        POLYX%(K) = M0% + (M1% << 8)        GET#2,M0% : M0% = M0% AND 255        GET#2,M1% : M1% = M1% AND 255        POLYY%(K) = M0% + (M1% << 8) + OFFSET%        IF POLYY%(K)<0 THEN BEGIN:POLYY%(K)=0:BEND        IF (K>0) THEN LINE POLYX%(K-1), POLYY%(K-1), POLYX%(K), POLYY%(K)      NEXT K      LINE POLYX%(POLYIDX%-1),POLYY%(POLYIDX%-1),POLYX%(0),POLYY%(0)      IF FILLSTATE% = 1 THEN GOSUB FILLPOLY      LOADSTATE% = -1      GOTO NXTLP    BEND.NXTLP  ' GOSUB POLLPLAY  LOOP  DCLOSE #2  IF HASATTICRAM% AND ONION%=0 THEN BEGIN    EDMA 0, 0, $40000, $8000000 + $20000*CURRENTROOM%    EDMA 0, 0, $50000, $8000000 + $20000*CURRENTROOM% + $10000    CACHED%(CURRENTROOM%) = 1  BEND  ONION% = 0  RETURN.INITMUSIC'==========  IF S% <> CURRENTROOM% THEN BEGIN    S% = CURRENTROOM%    PLAY:PLAY "","","","","",""    FOR K = 0 TO 10     V1$(K) ="":V2$(K)="":V3$(K)="":V4$(K)="":V5$(K)="":V6$(K)=""    NEXT K    TEMPO SONGSTMPO%(S%)    BARINDEX=0    S% = CURRENTROOM%    IF S% = 0 THEN GOSUB GERMANSONG    IF S% = 1 THEN GOSUB TURKSONG    IF S% = 2 THEN GOSUB THAISONG    IF S% = 3 T!ILL BE CACHED AFTER 1ST DRAW ATTEMPT COMPLETES."  PRINT  PRINT "YPE SIMPLE   STRINGS TO INTERACT WITH THE GAME."  PRINT "  - .G.  65"  PRINT  PRINT "OU CAN ABBREVIATE ANY WORD TO THE FIRST 3 LETTERS."  PRINT "  - .G.  "  "PRINT  PRINT ": URRENT 65 CORE HAS PROBLEMS IN 640X400 16 COLOUR MODE"  PRINT "- ERFORMS BETTER IN EMU RIGHT NOW"  GOSUB PRESSAKEY  PRINT CHR$(147);  PRINT "AME OCABULARY"  PRINT "---------------"  PRINT "- , , ,    (TO GO ORT#H, OUTH, AST, EST)"  PRINT "- /"  PRINT "- /"  PRINT "- / <OBJECT>"  PRINT "-  <OBJECT>"  PRINT "-  <OBJECT>"  PRINT "-  <OBJECT>"  PRINT "- /"  GOSUB PRESSAKEY  RETURN.CREDITS'-------  PRINT CHR$$(147);  PRINT "REDITS"  PRINT "======="  PRINT "ODING AND USIC SEQUENCING BY URCE SIKYILDIZ"  PRINT "RTWORK BY YCA SIKYILDIZ"  PRINT "- OU'RE WELCOME TO DONATE TO THE ARTIST TO ENCOURAGE HER TO CONTRIBUTE MORE"  PRINT "  OF HER ARTWORK TO% FUTURE 65 GAMES!"  PRINT "  - HTTPS://TINYURL.COM/AYCA-DONATE"  PRINT  PRINT "ONG CREDITS"  PRINT "------------"  PRINT "USTRALIA - ";CHR$(34);"OCKY THE LONED OCKATOO";CHR$(34);" - URCE"  PRINT "ERMANY - ";CHR$(34);"HE NGEL'S NGLED &NKLE";CHR$(34);" - URCE"  PRINT "HAILAND - ";CHR$(34);"HLEUN RATHOP ANG";CHR$(34)  PRINT "    (AVES CRASH TO THE SHORE) - ING RAJADHIPOK"  PRINT "URKEY - ";CHR$(34);"ATCAM IKMIS UL ALINA";CHR$(34)  PRINT "    (Y ATCHE CAME OUT ON THE 'OSE RANCH) - NKNOWN"  PRINT "IETNAM - ";CHR$(34);"ON HUONG AU ANG OC AU E";CHR$(34)  PRINT "    (TILL OVE THE ITTER ERB THAT ROWS AFTER UMMER) - AC ON"  GOSUB PRESSAKEY  PRINT CHR$(147);  PRINT "HANKS TO RAADII"  PRINT "---- --------------"  PRINT "INALLY, A WORD OF THANKS TO RAADII FOR HIS AWESOME YOUTUBE VIDEOS:"  PRINT "- HTTPS://TINYURL.COM/MRZAADII-PLAYLIST"  PRINT  PRINT "HE INSPIRATION FOR THIS GAME CAME FROM HIS 'SCAPE FROM NION AKE' GAME:"  PRINT "- HTTPTHERE ARE HUNGRY"        CR=1:DC=14:GOSUB DRAWTEXT        S$="DINOSAURS TO FEED?!"        CR=1:DC=14:GOSUB DRAWTEXT        RETURN      BEND    BEND    S$="OU CANNOT USE THAT!"    CR=1:DC=14:GOSUB DRAWTEXT  BEND  RETURN.INVENTORY'---------  S$="OU ARE CARRYING:"  CR=1:DC=14:GOSUB DRAWTEXT  IF INVCOUNT% = 0 THEN BEGIN    S$="  - NOTHING..."    CR=1:DC=12:GOSUB DRAWTEXT  BEND:ELSE BEGIN    FOR K=0 TO INVCOUNT%-1      S$="  - "      CR=0:DC=14:GOSUB DRAWTEXT      S$=INVENTORY$(K)      CR=1:DC=3:GOSUB DRAWTEXT    NEXT K  BEND  RETURN.EXTRACTTOKEN'-------------  K = INSTR(A$," ")  TOK$=LEFT$(A$,3)  IF K>0 THEN BEGIN    A$=MID$(A$,K+1)  BEND:ELSE BEGIN    A$=""  BEND  RETURN.DRAWCURSOR'-----------  PEN 0,1  DC=1  FOR DL=0 TO 15    LINE CURX%*8,320+CURY%*16+DL,CURX%*8+7,320+CURY%*16+DL  NEXT DL  RETURN.HIDECURSOR'-----------  PEN 0,0  FOR DL=0 TO 15    LINE CURX%*8,320+CURY%*16+DL,CURX%*8+7,320+CURY%*16+DL  NEXT DL  RETURN.SAFECURYINC'-------------  CURY%=CURY% + 1  IF CURY% => 5 THEN BEGIN    GOSUB SCROLLTEXTUP    SLEEP .1  BEND  RETURN.GETINPUTTOA$'---------------  GOSUB DRAWCURSOR  LINE$=""  DO.KEYLOOP    GET A$    GOSUB POLLPLAY    IF A$="" THEN GOTO KEYLOOV3$( 14)=""V4$( 14)=""V5$( 14)=""V6$( 14)=""V1$( 15)=""V2$( 15)=""V3$( 15)=""V4$( 15)=""V5$( 15)=""V6$( 15)=""V1$( 16)=""V2$( 16)=""V3$( 16)=""V4$( 16)=""V5$( 16)=""V6$( 16)=""V1$( 17)=""V2$( 17)=""V3$( 17)=""V4$( 17)=""V5$( 17)="" V6$( 17)=""V1$( 18)=""V2$( 18)=""V3$( 18)=""V4$( 18)=""V5$( 18)=""V6$( 18)=""V1$( 19)=""V2$( 19)=""V3$( 19)=""V4$( 19)=""V5$( 19)=""V6$( 19)=""                                                                                              P    A=ASC(A$)    VALID%=1    IF (A<32 OR A>127) AND A<>13 AND NOT (A=20 AND LEN(LINE$)>0) THEN VALID%=0    IF VALID% = 1 THEN BEGIN      IF A=13 THEN BEGIN ' CARRIAGE-RETURN?        A$=LINE$        GOSUB HIDECURSOR        CURX%=0        GOSUB	 SAFECURYINC        RETURN      BEND      IF A=20 THEN BEGIN ' INST-DEL        LINE$=LEFT$(LINE$,LEN(LINE$)-1)        GOSUB HIDECURSOR        CURX%=CURX%-1        GOSUB DRAWCURSOR      BEND      IF A<>13 AND A<>20 THEN BEGIN ' ANY OTHER KEY?
        LINE$=LINE$+A$        GOSUB HIDECURSOR        S$=A$:CR=0:GOSUB DRAWTEXT        GOSUB DRAWCURSOR      BEND    BEND  LOOP  RETURN.USERINPUT'----------  GOSUB GETINPUTTOA$  IF A$="N" AND NORTH%<>-1 THEN CURRENTROOM%=NORTH%:RETURN  IF A$="S" AND SOUTH%<>-1 THEN CURRENTROOM%=SOUTH%:RETURN  IF A$="E" AND EAST%<>-1 THEN CURRENTROOM%=EAST%:RETURN  IF A$="W" AND WEST%<>-1 THEN CURRENTROOM%=WEST%:RETURN  IF A$="I" THEN GOSUB INVENTORY:RETURN  IF A$="L" THEN GOSUB SHOWROOMTEXT:RETURN  IF A$="QUIT" OR A$="EXIT" THEN GAMEOVER%=1:RETURN  GOSUB EXTRACTTOKEN  IF TOK$="LOO" THEN GOSUB SHOWROOMTEXT:RETURN  IF TOK$="TAK" OR TOK$="GET" THEN GOSUB TAKE:RETURN  IF TOK$="INV" THEN GOSUB INVENTORY:RETURN  IF TOK$="HIT" THEN GOSUB HIT:RETURN  IF TOK$="GIV" THEN GOSUB GIVE:RETURN  IF TOK$="USE" THEN GOSUB USE:RETURN  S$="ORRY,  DON'T UNDERSTAND THAT COMMAND" : CR=1 : DC=14 : GOSUB DRAWTEXT  RETURN.SHOWOBJECTS'------------  RES%=0  FOR K=0 TO 1    A$ = MAPLOCTOOBJS$(CURRENTROOM%, K)    B$ = LEFT$(A$,1)    C$ = "AEIOU"    IF A$<>"" THEN BEGIN      IF RES%=0 THEN BEGIN        S$="OU SEE A" : CR=0 : DC=14 : GOSUB DRAWTEXT        RES%=1      BEND : ELSE BEGIN        S$=" AND A" : CR=0 : DC=14 : GOSUB DRAWTEXT      BEND      IF INSTR(C$,B$)<>0 THEN BEGIN        S$="N" : CR=0 : DC=14 : GOSUB DRAWTEXT      BEND      S$ = " " + A$ : CR=0 : DC= 3 : GOSUB DRAWTEXT    BEND  NEXT K    IF RES%<>0 THEN BEGIN    S$=" HERE.":CR=1:DC=14:GOSUB DRAWTEXT  BEND  RETURN.SCROLLTEXTUP'--------------  FOR SK=0 TO 7    EDMA 0, 640*4, $40000+640*21+SK*$4000, $40000+640*20+SK*$4000  NEXT SK  FOR SK=0 TO 7    EDMA 3, 640, 0, $40000+640*24+SK*$4000  NEXT SK  CURY%=CURY%-1  RETURN.DRAWTEXT'---------  PEN 0,DC  IF LEN(S$) > 0 THEN BEGIN    FOR DK = 0 TO LEN(S$)-1      CHAR CURX%, 320+CURY%*16,2,1,2,MID$(S$,DK+1,1)      CURX% = CURX% + 1      IF CURX% = 80 THEN BEGIN        CURX% = 0        GOSUB SAFECURYINC      BEND    NEXT DK  BEND  IF CR=1 THEN BEGIN    CURX% = 0    GOSUB SAFECURYINC  BEND  RETURN.SHOWROOMTEXT'--------------  S$=ROOMSDESC$(CURRENTROOM%):CR=1:DC=14:GOSUB DRAWTEXT  GOSUB SHOWOBJECTS  NORTH%=-1:SOUTH%=-1:EAST%=-1:WEST%=-1  S$="XITS: ":CR=0:DC=14:GOSUB DRAWTEXT  A$ = ROOMSEXITS$(CURRENTROOM%)  IF LEN(A$) > 0 THEN BEGIN    FOR K=1 TO LEN(A$)      B$=MID$(A$,K,1)      C$=MID$(ROOMSLOCS$(CURRENTROOM%),K,1)      S$=B$:CR=0:DC=7:GOSUB DRAWTEXT      IF K<>LEN(A$) THEN S$= ", ":CR=0:DC=14:GOSUB DRAWTEXT      IF B$="" THEN NORTH%=VAL(C$)      IF B$="" THEN SOUTH%=VAL(C$)      IF B$="" THEN EAST%=VAL(C$)      IF B$="" THEN WEST%=VAL(C$)    NEXT K  BEND  IF LEN(A$)=0 THEN S$="NONE...":CR=0:DC=12:GOSUB DRAWTEXT  S$="":CR=1:GOSUB DRAWTEXT  RETURN.SHOWROOMGRAPHIC'-----------------  CURX% = 0  CURY% = 0  SCREEN CLR 0  GOSUB INITMUSIC  ': REMOVE  'RETURN  IF HASATTICRAM%=1 AND CACHED%(CURRENTROOM%)=1 THEN BEGIN    GOSUB LOADFROMCACHE    RETURN  BEND  OFFSET% = ROOMSOFFSET%(CURRENTROOM%)  GOSUB LOAD  RETURN.MAINGAME'---------  IF =1 THEN BEGIN    GOSUB CAPTUREDBYONIONCAKE  BEND  GOSUB SHOWROOMGRAPHIC  GOSUB SHOWROOMTEXT.NEXTINPUT  GOSUB USERINPUT  IF GAMEOVER%=1 THEN BEGIN    S$="":CR=1:DC=14:GOSUB DRAWTEXT    S$=" "    CR=1:DC=5:GOSUB DRAWTEXT    DELAY=2:GOSUB PAUSE    SCREEN CLOSE    RETURN  BEND  IF CURRENTROOM%<>PREVIOUSROOM% THEN PREVIOUSROOM%=CURRENTROOM%:GOTO MAINGAME  GOTO NEXTINPUT  RETURN.INITGAME'---------  PRINT CHR$(147);  CURRENTROOM% =   PREVIOUSROOM% = CURRENTROOM%  INVCOUNT% = 0  FEDDINOCOUNT% = 0  MISSING% = 0  GAMEOVER% = 0  FINISHEDLINES% = 0  ONION%=0  S%=-1  MAPLOCTOOBJS$(,0) = "RICE-PLANT"  MAPLOCTOOBJS$(,0) = "CARNIVOROUS-MITE"  MAPLOCTOOBJS$(,0) = "EGGPLANT"  MAPLOCTOOBJS$(,0) = "TIGER"  MAPLOCTOOBJS$(,1) = ""  MAPLOCTOOBJS$(,1) = ""  MAPLOCTOOBJS$(,1) = ""  MAPLOCTOOBJS$(,1) = ""  SCREEN 0, 640, 400, 4  RETURN.MAIN'----  GOSUB SHOWTITLEPAGE  GOSUB INITGAME  GOSUB MAINGAME  GOTO MAIN  END.PRESSAKEY'-----------  PRINT  PRINT "[RESS ANY KEY TO CONTINUE]"  GET KEY A$  RETURN.SHOWTITLEPAGE'---------------  PRINT CHR$(147);  PLAY:PLAY "","","","","",""  PRINT "NION AKE AND THE UNGRY INOSAURS"  PRINT "==================================="  PRINT "  ODING & USIC SEQUENCING BY URCE SIKYILDIZ"  PRINT "  RTWORK BY YCA SIKYILDIZ"  PRINT  PRINT " )NSTRUCTIONS"  PRINT " )REDITS"  PRINT  PRINT " RESS   TO BEGIN"  GET A$  GET KEY A$  IF A$="I" THEN GOSUB INSTRUCTIONS:GOTO SHOWTITLEPAGE  IF A$="C" THEN GOSUB CREDITS:GOTO SHOWTITLEPAGE  IF A$<>" " THEN GOTO SHOWTITLEPAGE  RETURN.INSTRUCTIONS'------------  PRINT CHR$(147);  PRINT "NSTRUCTIONS (PAGE 1 OF 2)"  PRINT "============"  PRINT "HE DINOSAURS ARE HUNGRY..."  PRINT  PRINT "...GO AND FIND THEM THE FOOD THAT THEY LIKE!"  PRINT  PRINT "HEN YOU GIVE THEM ALL THE RIGHT FOOD, THEY WILL REWARD YOU WITH A "  PRINT "NEW RETRO COMPUTER!"  PRINT  PRINT "...BUT BEWARE OF DIRTY OLD NION AKE..."  PRINT  PRINT "...HE IS ANGRY DUE TO SOMEBODY STEALING HIS FAVOURITE RETRO COMPUTER..."  PRINT  PRINT "AYBE YOU CAN APPEASE HIS ANGER BY RETURNING IT TO HIM..."  GOSUB PRESSAKEY    PRINT CHR$(147);  PRINT "NSTRUCTIONS (PAGE 2 OF 2)"  PRINT "============"  PRINT "HIS IS A SIMPLE TEXT ADVENTURE GAME ACCOMPANIE D BY VECTOR ART DRAWN "  PRINT "(SLOWLY) VIA  65 :)"  PRINT  PRINT "S  65 DIDN'T COME WITH A ROUTINE TO DRAW FILLED IRREGULAR POLYGONS,"  PRINT " HAD TO WRITE MY OWN (IN !), THAT MADE THINGS EVEN SLOWER :)"  PRINT  PRINT "RTWORK W!2>0D B@ > < 6 2, ( 0 . B > 8 6 : < . * "  
            J   ? D   
$
00($D0("   $ * ", .,46 : @ B@@&>0D   $    D " & 6 2 : 2 , * , $             ?D             j        ?D       #         
                 ? D	                  ?D              ?D"       x  p        ~  t  j  d  `  \  \  `  f  x  ~                        ?D
 p  h  b  ^  Z  X  Z ^ d n D p z t n ?D p x z  r ?D	 |  x               ? D            D                                     %"'MPRESSIVE!'"  CR=0:DC=2:GOSUB DRAWTEXT  S$=", NION AKE SAYS WITH ADMIRATION!"  CR=1:DC=14:GOSUB DRAWTEXT  DELAY=1:GOSUB PAUSE  S$="'OU HAVE PROVEN YOURSELF WORTHY TO KEEP ALIVE!  HEREBY RELEASE YOU!"  CR=1:DC=2:GOSUB DRAWTEXT  DELAY=2:G&OSUB PAUSE  S$="EMEMBER YOUR PROMISE, OTHERWISE  WILL FIND YOU AND SHOOT YOU!'"  CR=1:DC=2:GOSUB DRAWTEXT  DELAY=2:GOSUB PAUSE  S$="OU ARE FREE AGAIN! ONGRATULATIONS, YOU WON THE GAME!"  CR=1:DC=7:GOSUB DRAWTEXT  GAMEOVER%=1  DELAY=1.5:GO'SUB PAUSE  RETURN       .USE'---  GOSUB EXTRACTTOKEN  GOSUB FINDININVENTORY  IF RES%=0 THEN BEGIN    S$="OU ARE NOT CARRYING THAT!"    CR=1:DC=14:GOSUB DRAWTEXT    RETURN  BEND  IF LEFT$(B$,3) = TOK$ THEN BEGIN    IF TOK$="WHI" THEN GOS UB CAPTUREDBYONIONCAKE:RETURN    IF TOK$="MEG" THEN BEGIN      IF CURRENTROOM%= THEN BEGIN        GOSUB STARTMEGA65        GAMEOVER%=1        RETURN      BEND:ELSE BEGIN        S$="OW COULD YOU THINK OF PLAYING WITH YOUR 65 WHEN #OUTPUT "LINE"#DECLARE A$, LOC#DECLARE X=0, Y=0#DECLARE T0=0#DECLARE MODIFIED%=0#DECLARE OLDX, OLDY#DECLARE FNAME$#DECLARE LDATA&(8192), DIDX%=0, PIDX%=0#DECLARE GROUPFLAG&, VAL&, REVFLAG& = 0GOSUB INIT.MAINGOSUB CHECKINPUTGOSUB SHOWCV1$( 0)="T6 O4 I P0GP2F P0GP2A P0FP2G P0EP2G P0FP1E P0FP2G P0FP2G P0EP2F P0DR"V2$( 0)=""V3$( 0)="T5 O2 P0 HG O3D O2D QAGF"V4$( 0)="T5 O1 P0 HG O2D O1D QAGF"V5$( 0)="T9 O5 I P0GP2F P0GP2A P0FP2G P0EP2G P0FP1E P0FP2G P0FP2G P0EP2F P0DR"V6$( 0)=""V1$( 1)=""V2$( 1)=""V3$( 1)=""V4$( 1)=""V5$( 1)=""V6$( 1)=""V1$( 2)=""V2$( 2)=""V3$( 2)=""V4$( 2)=""V5$( 2)=""V6$( 2)=""V1$( 3)=""V2$( 3)=""V3$( 3)=""V4$( 3)=""V5$( 3)=""V6$( 3)=""V1$( 4)=""V2$( 4)=""V3$( 4)=""V4$( 4)=""V5$( 4)=""V6$( 4)=""V1$( 5)=""V2$( 5)=""V3$( 5)=""V4$( 5)=""V5$( 5)=""V6$( 5)=""V1$( 6)=""V2$( 6)=""V3$( 6)=""V4$( 6)=""V5$( 6)=""V6$( 6)=""V1$( 7)=""V2$( 7)=""V3$( 7)=""V4$( 7)=""V5$( 7)=""V6$( 7)=""V1$( 8)=""V2$( 8)=""V3$( 8)=""V4$( 8)=""V5$( 8)=""V6$( 8)=""V1$( 9)=""V2$( 9)=""V3$( 9)=""V4$( 9)=""V5$( 9)=""V6$( 9)=""V1$( 10)=""V2$( 10)=""V3$( 10)=""V4$( 10)=""V5$( 10)=""V6$( 10)=""V1$( 11)=""V2$( 11)=""V3$( 11)=""V4$( 11)=""V5$( 11)=""V6$( 11)=""V1$( 12)=""V2$( 12)=""V3$( 12)=""V4$( 12)=""V5$( 12)=""V6$( 12)=""V1$( 13)=""V2$( 13)=""V3$( 13)=""V4$( 13)=""V5$( 13)=""V6$( 13)=""V1$( 14)=""V2$( 14)=""V3$( 14)=""V4$( 14)=""V5$( 14)=""V6$( 14)=""V1$( 15)=""V2$( 15)=""V3$( 15)=""V4$( 15)=""V5$( 15)=""V6$( 15)=""V1$( 16)=""V2$( 16)=""V3$( 16)=""V4$( 16)=""V5$( 16)=""V6$( 16)=""V1$( 17)=""V2$( 17)=""V3$( 17)=""V4$( 17)=""V5$( 17)=""V6$( 17)=""V1$( 18)=""V2$( 18)=""V3$( 18)=""V4$( 18)=""V5$( 18)=""V6$( 18)=""V1$( 19)=""V =2$( 19)=""V3$( 19)=""V4$( 19)=""V5$( 19)=""V6$( 19)=""                                                                                                                                                                                                  -   BEND    IF SM = 0 AND S$ <> "[" THEN BEGIN      PRINT "ERROR: EXPECTED ["      SLEEP 1      STOP    BEND    IF SM = 0 AND S$ = "[" THEN BEGIN      SM = 1      GOTO CFCOSOSKIP    BEND    IF SM = 1 AND S$ <> "[" AND S$ <> "]" THEN BEGIN   Z#OUTPUT "HELLO"#DECLARE NAME$.MAIN  INPUT "WHAT NAME?";NAME$  PRINT "HELLO ";NAME$                                                                                                                                                                     V1$( 0)="O5T6 IP0FP3EP0FP3GP0FP3GP0EP3F P0SDP3#DD#D P0IDC DP3S#DR IP0DR"V2$( 0)="O2T5 P0O2QCRGR O1GR GGR"V3$( 0)="O2T3 O2QC SCRCR O4QG SGRGR O2QC SCRCR O4 QGG SGRGR"V4$( 0)=""V5$( 0)=""V6$( 0)=""V1$( 1)="O5T6 IP0CP3O4#A P0O5QC SDP3#P0DP3D#D QC R IO4P0GP3A#AO5C SO4P0#AO5P3CO4P0#AO5P3C O4QA"V2$( 1)="O2T5 QCRGR O1GRGGR"V3$( 1)="O2T3 O2QC SCRCR O4QG SGRGR O2QC SCRCR O4QGG SGRGR"V4$( 1)=""V5$( 1)=""V6$( 1)=""V1$( 2)="O5T6QRIP0CO4P3#AO5CO4#AO5QCRIP0O4GP3AO4P0#AO5P3C SO4P0#AO5P3CO4P0#AO5P3C QO4P0#A"V2$( 2)="O2T5 QCRGR O1GRGGR"V3$( 2)="O2T3 O2QC SCRCR O4QG SGRGR O2QC SCRCR O4QGG SGRGR"V4$( 2)=""V5$( 2)=""V6$( 2)=""V1$( 3)="O5T6 IRP0#DDP4C O4P0#AO5P3CP0QD R IP0O4GP3A O4P0#AO5P3C SO4P0#AO5P3CO4P0#AO5P3C QO4A"V2$( 3)="O2T5 QCRGR O1GRGGR"V3$( VEC?DN   P f b   D        D   (  ,D^  z  zP | b D      D<  < ^ X  C   ~
C  Z ~~                                                                                                                        OLDING YOU"  CR=1:DC=14:GOSUB DRAWTEXT  S$="AT GUNPOINT, AND FORCEFULLY ESCORTING YOU TO HIS DUNGEON IN ERMANY..."  CR=1:DC=14:GOSUB DRAWTEXT  CURRENTROOM% =   GOSUB INITMUSIC  IF =0 THEN BEGIN    ONION% = 1 : ONION$="ONION.V" : GOSUB LOAD  BEND:ELSE BEGIN    INVENTORY$(0)="MEGA65"    INVCOUNT%=1  BEND  IF =0 THEN BEGIN    DELAY=2:GOSUB PAUSE  BEND  GOSUB SHOWROOMGRAPHIC  IF =0 THEN BEGIN    S$="' FINALLY CAUGHT THE THIEF THAT STOLE MY 65!'"    CR=0:DC=2:GOSUB DRAWTEXT    S$=", NION AKE EXCLAIMS!"    CR=1:DC=14:GOSUB DRAWTEXT    S$="":CR=1:GOSUB DRAWTEXT    DELAY=1.5:GOSUB PAUSE    S$="'F YOU SHOW ME YOUR PROGRAMMING SKILLS  WILL RELEASE YOU!'"    CR=0:DC=2:GOSUB DRAWTEXT    S$="VEC?	D#F @ : 8 0 $* .$ :" B F L X h r v& ~* ~ z v >     $ "     
 ~ p b X  N H ? D  ~ z t p j f ` \  ^ ` h t | 
  ?D
` Z V T Z ` h b 
` ` ?D\ V  P L L R V ` Z 
T V  \ ?D^( d" l  r  v( r0 n6 h8 h0 d. `, ? D@> H< P8 J@ DB @B ?
 &, .&  .. 2*  8& >"  <* D$  D  L  N  V  V$ ^  x0 |4  t6 |:  t> zB  vH |L  hF rP  `H hR  `P dZ  XP ^Z  TV Z^  f` nh  p` xf  vV ~X  lV v\  Zd `j  Rj Vp  Zl `t  hh nr  vp ~t  r~ x  jx n  h f  p v   r &x  $l ,r  .j 0t  ,x .~  .^ 6d  (V .Z  0P 4Z  <R FX  <Z B^ ? & .  0 6  6 :  < @  @| F  ( .  2 8  8 >  @ D  H L  , 4  F J  N R  T V ?  d* h$  j* n&  n2 p* ? j l  r v  x ~  f j  n t  x ~  v z  | ~ ? :j >r  @f Bn  Hf Lp  Hx P~  Rx X~  T X  ^ b  P T  Z ^  d h  F >  N D  T "N  J $D  $< *4  .< 46  2F 6B  <J FP  HF NJ  \6 `4  T2 X,  N, J4  D0 @4 ? F B  > H  V h  v ~  ~ x  ^ D  B B DD B < < B H V  d r ~ ~ x d L ?D. * & 0 , T p z x r V > 4 2 0 ?D2. 0 4 N f t x x | ~ v \ @ 8 42?	D@ DD @0~0~ z t ^ J D ? ?D.      r
*FRFRFRFRFRFRFRFR T8O2 Q.BIBQBB" fF$(14)"T3I O1GR O2GR O1GG O2GR O1GR O2GR O1GG O2GR O1GR O2GR O1GG O2GR BRR BBRBR" VgA$(15)"T7M5O5P0 QBB P3O6H.#C O5QBQ.BIR QP0BB P3H.O6#CP1O5QBQ.BIR QP0BB P3H.O6#CP1O5QBQ.BIR QP0BB T1O6HC" gB$(15)"SO2AO3AO2AO3AO2AO3AO2AO3A O2AO3AO2AO3AO2AO3AO2AO3A O2Q.E IEQEE":B$(15)"T7P0M1O2QEE"B$(15)B$(15)B$(15)"P1T1HF" LhC$(15)"T3I O2BRBR O1GR O2GR O1GG O2GR BRRB BRBR O1GR O2GR O1GG O2GR BRRB BRBR O1GR O2GR O1GG O2GR BRRB BRBR O1HG" hD$(15)"P0T7O5Q#G#G P2H.A Q#GQ.#GIR Q#G#G H.A Q#GQ.#GIR Q#G#G H.A Q#GQ.#GIR Q#G#G T1 P1SFHO2F"  iE$(15)"QT6O4EE O5IP0AE#CO4A O5IP0AE#CO4A O5B#GEO4B O5B#GEO4B O5IP0AE#CO4A O5IP0AE#CO4A O5B#GEO4B O5B#GEO4B" viE$(15)E$(15)"O5SP0AE#CEAE#CE AE#CEAE#CE B#GE#GB#GE#G B#GE#GB#GE#G O5T 1SEP1O2HE" iF$(15)"T3I O2BRBR O1GR O2GR O1GG O2GR BRRB BRBR O1GR O2GR O1GG O2GR BRRB BRBR O1GR O2GR O1GG O2GR BRRB BRBR O1HG": i(1) j B22 Lj!AC(B):A$(A),B$(A),C$(A):.02:,,,D$(A),E$(A),F$(A):BB1:   (15)"P0T7O5Q#G#G P2H.A Q#G HE OFFERS."    CR=1:DC=14:GOSUB DRAWTEXT    S$="":CR=1:GOSUB DRAWTEXT    DELAY=2:GOSUB PAUSE    S$="'F NOT,  WILL SHOOT YOU!'"    CR=1:DC=2:GOSUB DRAWTEXT    DELAY=2:GOSUB PAUSE    GOSUB CHECKWEHAVEALLCOMPUTERITEMS  BEND:ELSE BEGIN    RETURN  BEND  IF RES%=0 THEN GAMEOVER%=1:RETURN  RETURN.TYPELINE'---------  GOSUB GETINPUTTOA$  RETURN.ASSESSLINE'-----------  IF A$=PROG$(FINISHEDLINES%) THEN BEGIN    FINISHEDLINES% = FINISHEDLINES% + 1    IF FINISHEDLINES%=4 THEN BEGIN      S$="'ELL DONE, YOU COMPLETED THE PROGRAM!'"      CR=1:DC=2:GOSUB DRAWTEXT    BEND:ELSE BEGIN      S$="'OOD, NOW FOR THE NEXT LINE!'"      CR=1:DC=2:GOSUB DRAWTEXT    BEND  BEND:ELSE BEGIN    S$="'O NO! OU MADE MISTAKES ON THIS LINE!'"    CR=0:DC=2:GOSUB DRAWTEXT    S$=", NION AKE ROARS"    CR=1:DC=14:GOSUB DRAWTEXT    S$="'YPE IT AGAIN PROPERLY, OTHERWISE  WILL SHOOT YOU!'"    CR=1:DC=2:GOSUB DRAWTEXT  BEND  RETURN.STARTMEGA65'------------  ' DRAWMEGA$65LISTING  ONION% = 1 : ONION$="MEGA65.V" : GOSUB LOAD  DO WHILE FINISHEDLINES% < 4    S$="YPE: "    CR=0:DC=11:GOSUB DRAWTEXT    S$=PROG$(FINISHEDLINES%)    CR=1:DC=12:GOSUB DRAWTEXT    GOSUB TYPELINE    GOSUB ASSESSLINE  LOOP  S$=! NEXT Z  IF MISSING%=1 THEN BEGIN    RES%=0    S$="":CR=1:GOSUB DRAWTEXT    S$="' AM AFRAID THIS MEANS THAT  NEED TO SHOOT YOU NOW!'"    CR=1:DC=2:GOSUB DRAWTEXT    DELAY=1.5:GOSUB PAUSE    S$="":CR=1:GOSUB DRAWTEXT    S$="!"    CR=1:"DC=10:GOSUB DRAWTEXT    DELAY=1.5:GOSUB PAUSE    RETURN  BEND  S$="'OOKS LIKE YOU'VE GOT IT ALL...'"  CR=1:DC=2:GOSUB DRAWTEXT  DELAY=1:GOSUB PAUSE  S$="'OW, DEMONSTRATE YOUR 65 CODING SKILLS TO ME, OTHERWISE...'"  CR=1:DC=2:GOSUB DRAWTEXT  DELAY=2:GOSUB PAUSE  RES% = 1  RETURN.PAUSE  T1=TI.PAUSELP  GOSUB POLLPLAY  IF (TI-T1) < DELAY THEN GOTO PAUSELP  RETURN.CAPTUREDBYONIONCAKE'----------------------  S$="PON HEARING YOUR MELODIOUS WHISTLING, NION AKE ARRIVES, H$ 3)="O2T3 O2QC SCRCR O4QG SGRGR O2QC SCRCR O4QGG SGRGR"V4$( 3)=""V5$( 3)=""V6$( 3)=""V1$( 4)="O4T6 Q.A IG QGG WG QR"V2$( 4)="O2T5 QCRGR O1GRO2DDD"V3$( 4)="O2T3 O2QC SCRCR O4QG SGRGR O2QC SCRCR O4QGG SGRGR"V4$( 4)=""V5$( 4)=""V6$( 4)=""V1$( 5)%="O5T7 P7 QRR GG P0SFIP3.GP0QG SFIP3.GP0GQG"V2$( 5)="O1T5 QGRO2DR O1GRO2DRD"V3$( 5)="O2T3 O2QC SCRCR O4QG SGRGR O2QC SCRCR O4QGG SGRGR"V4$( 5)=""V5$( 5)=""V6$( 5)=""V1$( 6)="O5T7QP0FIEP3FP0SDP3#DP0DP3#DP0QCICO4P3#AP0O5QC SO4#AP3O5CP0O4#AP3O5C QO4A&R"V2$( 6)="O1T5 QFRO2CR CRGRG"V3$( 6)="O2T3 O2QC SCRCR O4QG SGRGR O2QC SCRCR O4QGG SGRGR"V4$( 6)=""V5$( 6)=""V6$( 6)=""V1$( 7)="O5T7P0 I#A#AQ#A SP0AP3I.#A SP0AP3I.#A QAA HG R"V2$( 7)="O1T5 P0QFRO2CR O1GRO2DRD"V3$( 7)="O2T3 O2QC SCRCR O4QG SGRGR 'O2QC SCRCR O4QGG SGRGR"V4$( 7)=""V5$( 7)=""V6$( 7)=""V1$( 8)=""V2$( 8)=""V3$( 8)=""V4$( 8)=""V5$( 8)=""V6$( 8)=""V1$( 9)=""V2$( 9)=""V3$( 9)=""V4$( 9)=""V5$( 9)=""V6$( 9)=""V1$( 10)=""V2$( 10)=""V3$( 10)=""V4$( 10)=""V5$( 10)=""V6$( 10)=""V1$( 11)=""V2$( 11)=""V3$( 11)=""V4$( 11)=""V5$( 11)=""V6$( 11)=""V1$( 12)=""V2$( 12)=""V3$( 12)=""V4$( 12)=""V5$( 12)=""V6$( 12)=""V1$( 13)=""V2$( 13)=""V3$( 13)=""V4$( 13)=""V5$( 13)=""V6$( 13)=""V1$( 14)=""V2$( 14)=""     @V X @X \ @X ^ @^ d @d j @j h @h l @l p @p r @^ ` @` d @d ` @` d @d h @h j @j l @l n| @l lz @lz pt @rr xl @xl ~h @~h d @b f| @f| ht @vv zp @zp l @l f @x z~ @z~ |z @|z |v @|v r @n f @p h @ ~ @~ | @~ | @| z @ t @  @ | @r n @n h @ z @  @x t @t n @n j @j h @| v @v p @~ z @z t @ z @x t @~ z @z x @p r @r v @  @  @  @  @  @  @  @| x @x t @t p @x r @r n @p l @n l @z t @x t @~ z @~  z @ v t @ | @| z @  @  @  @  @  @ | @( & @J J @H J @D B @B > @: 8 @> > @> < @8 6 @6 4 @4 0 ?D",J *T ,d 0l 2p 4x 8| F P~ Lx Nn Rb TV RD L@ F< >: 8< :@ 8B <D :H >J <N @R @T BX <Z :V 6V 8R 4R 4N 0P D!8| 0~ &           & 0 B N X ` h r |    ~ z r l d \ T~ L| D  
  
 
  
   $ DX ^ f h b`bdfhllf
hl r r l d ` Dt z | |
xph&`,V2N6F8B<<BBBH>R8^4l.z,&    x n l ? @DH LN @JF FR ?
D<Z >` >d >l <r <x >z @| Dx Hp Hh F` B\ @X ? @( ( @( . @. 2 @2 6 @6 6 @6 4 @4 2 @2 0 @0 . @. . @. 0 @0 , @, , @, ( @( * @* * @* ( @( " @b X @X R @R N @N L @L L @L N @N P @P V @V T @T V @V T @T R @R X @X \ @\ ` @b f @` d ?DTL \H DbH DjL DlT DbR D^R DXV RZ TR TL DTL ZH `H jL lN nV hT bR ZT TX VR DR` Xb ^^ Xf Rj Nj Rd DNv Rt Xp Vx R| N| DX ^| dv d| b	 ^ Dj p t t r p l Dv z    | z D      D   D     |   D       D     D

D &(& Dz,
z0x4~0(~*?	D: 4 0 2 8 62
0,488:< F L LL
NNVRP N R P B ?D-& ( , 4 < @ B @ > D J P V Z V R L H F L P R N N P V V X ^ b ? ^ Z V R N N P P N J F @ 8 2 ,                                                                                                                                                                                                 C=14:GOSUB DRAWTEXT      MAPLOCTOOBJS$(CURRENTROOM%,MAPIDX%)="CRYING-TIGER"    BEND  BEND:ELSE BEGIN    S$="OU CAN'T SEE THAT HERE!"    CR=1:DC=14:GOSUB DRAWTEXT  BEND  RETURN.FINDININVENTORY'-----------------  RES% = 0 : INVIDX% = -1  IF INVCOUNT%=0 THEN RETURN  FOR K=0 TO INVCOUNT%-1    IF LEFT$(INVENTORY$(K),3) = TOK$ THEN RES% = 1:INVIDX% = K:B$=INVENTORY$(K)  NEXT K  RETURN.REMOVEFROMINVENTORY'---------------------  IF INVIDX%=INVCOUNT%-1 THEN INVCOUNT%=INVCOUNT%-1:RETURN  FOR K=INVIDX%+1 TO INVCOUNT%-1    INVENTORY$(K-1) = INVENTORY$(K)  NEXT K  INVCOUNT% = INVCOUNT% - 1  RETURN.DROPPRESENT'-----------  IF MAPLOCTOOBJS$(CURRENTROOM%,0) = "" THEN BEGIN    MAPLOCTOOBJS$(CURRENTROOM%,0) = PRESENT$(FEDDINOCOUNT%)  BEND:ELSE BEGIN    MAPLOCTOOBJS$(CURRENTROOM%,1) = PRESENT$(FEDDINOCOUNT%)  BEND  RETURN.GIVE'----  GOSUB EXTRACTTOKEN  GOSUB FINDININVENTORY  IF RES%=0 THEN BEGIN    S$="OU ARE NOT CARRYING THAT!"    CR=1:DC=14:GOSUB DRAWTEXT    RETURN  BEND  IF LEFT$(B$,3) = TOK$ THEN BEGIN    ALLOW%=0    IF TOK$="RIC" AND CURRENTROOM%= THEN ALLOW%=1    IF TOK$="VEG" AND CURRENTROOM%= THEN ALLOW%=1    IF TOK$="CRY" AND CURRENTROOM%= O2GR O1GG O2GR O1GR O2GR BRBR O1GR O2GR O1GG O2GR O1GR O2GR O1GG O2GR" B`A$(12)"T8M5O5P0 H.#FIRS#F#F Q.GSGGIGSRIGSRIG":A$(12)A$(12)A$(12)A$(12):A$(12)A$(12)"H.#FIRS#F#F Q.GSGGIFSRIFSRIF" `	B$(12)"T8O3H.DIRSDD Q.DSDDO2IASRIASRIA O3H.DIRSDD Q.DSDDIDSRIDSRID H.DIRSDD Q.DSDDO2IASRIASRIA H.DIRSDD Q.DSDD O2I#GSRI#GSRI#G" `a
C$(12)"T3O2 QBRRIRSBB Q.BSBBIDSRIDSRID QBRRIRSBB Q.BSBBIDSRIDSRID O1GR O2GR O1GG O2GR O1GR O2GR O1GG O2GR O1GR O2GR O1GG O2GR O1GR O2GR IDSRIDSRID" aD$(12)"M0P0T7O1H.DIRSDD Q.DSDDIDSRIDSRID":D$(12)D$(12)D$(12)D$(12):D$(12)D$(12)"H.DIRSDD Q.DSDD I#GSRI#GSRI#G" VbE$(12)"T8O3H.AIRSAA Q.ASAAIDSRIDSRID H.AIRSAA Q.ASAAIASRIASRIA H.AIRSAA Q.ASAAIDSRIDSRID H.AIRSAA Q.ASAA I#CSRI#CSRI#C" bF$(12)"T3O2 QBRRIRSBB Q.BSBBIDSRIDSRID QBRRIRSBB Q.BSBBIDSRIDSRID O1GR O2GR O1GG O2GR O1GR O2GR O1GG O2GR O1GR O2GR O1GG O2GR O1GR O2GR IDSRIDSRID" 5cA$(13)"O5T8W.E QO6IDP5SRI#CSR O5IB H.A IRB WB WE O6H#C O5A WG R" cB$(13)"T6O2 IAAAAAAAA AAAAAAAA EEEEEEEE EEEE T8QGB T6IAAAAAAAA AAAAAAAA EEEEEEEE EEEE T8QGB" 
dC$(13)"T3O2I O1GR O2GR O1GG O2GR O1GR O2GR O1GG O2GR O1GR O2GR O1GG O2GR O1GR O2GR BRBR":C$(13)C$(13)C$(13) PdD$(13)"O4T8W.E QO5IDP5SRI#CSR O4IB H.A IRB WB WE O5H#C O4A WG R" dE$(13)"T6O3 IEEEEEEEE EEEEEEEE O2BBBBBBBB BBBBO3 T8QD#F T6IO3EEEEEEEE EEEEEEEE O2BBBBBBBB BBBBO3 T8QD#F" \eF$(13)"T3O2I O1GR O2GR O1GG O2GR O1GR O2GR O1GG O2GR O1GR O2GR O1GG O2GR O1GR O2GR BRBR":F$(13)F$(13)F$(13):A$(14)"O6T8W.#C Q#CIO5BO6#C HD IREF HEIR" eB$(14)"T7M0O2 SARARARARARARARAR ARARARARARARARAR #AR#AR#AR#AR#AR#AR#AR#AR T8Q.EIEQEE" 9fC$(14)"T3I O1GR O2GR O1GG O2GR O1GR O2GR O1GG O2GR O1GR O2GR O1GG O2GR BRR BBRBR":D$(14)"O5T8W.#C Q#CIO4BO5#C HD IREF HEIR" fE$(14)"T7M0P0O3 SERERERERERERERER ERERERERERERERER THEN ALLOW%=1    IF TOK$="FAI" AND CURRENTROOM%= THEN ALLOW%=1    IF CURRENTROOM%= THEN BEGIN      IF TOK$="MEG" THEN BEGIN        S$="'OT YET, SHOW ME THAT YOU KNOW HOW TO USE THIS BEAUTIFUL MACHINE, OR ELSE...'"        CR=1:DC=2:GOSUB DRAWTEXT      BEND:ELSE BEGIN        S$="NION AKE GLARES AT YOU, "        CR=0:DC=14:GOSUB DRAWTEXT        S$="'TOP WASTING TIME AND PROVE YOUR SKILLS TO ME!'"        CR=1:DC=2:GOSUB DRAWTEXT      BEND      RETURN    BEND    IF ALLOW% = 0 THEN BEGIN      S$="HE DINOSAUR APPRECIATES YOUR KIND GESTURE, BUT THAT ISN'T THE FOOD IT LIKES"      CR=1:DC=14:GOSUB DRAWTEXT    BEND    IF ALLOW% = 1 THEN BEGIN      GOSUB REMOVEFROMINVENTORY      IF CURRENTROOM% =  THEN BEGIN        S$="HE IETNAMESE DINOSAUR DEVOURS THE TASTY RICE-PAPER ROLL..."        CR=1:DC=14:GOSUB DRAWTEXT      BEND      IF CURRENTROOM% =  THEN BEGIN        S$="HE USTRALIAN DINOSAUR CHOMPS DOWN THE SCRUMPTIOUS MITE AND THEN"        CR=1:DC=14:GOSUB DRAWTEXT        S$="FALLS BACK ASLEEP..."        CR=1:DC=14:GOSUB DRAWTEXT      BEND      IF CURRENTROOM% =  THEN BEGIN        S$="HE HAI DINOSAUR GRACEFULLY DINES ON THE CRYING-TIGER, AND "        CR=1:DC=14:GOSUB DRAWTEXT        S$="THEN RAISES ITS CLASPED PAWS TO ITS FOREHEAD TO WAI IN THANKS."        CR=1:DC=14:GOSUB DRAWTEXT      BEND      IF CURRENTROOM% =  THEN BEGIN        S$="HE URKISH DINOSAUR ENTHUSIASTICALLY RIPS INTO THE TASTY FAINTED-EGGPLANT!"        CR=1:DC=14:GOSUB DRAWTEXT      BEND      S$="T DROPS A PRESENT FOR YOU TO SHOW ITS GRATITUDE..."      CR=1:DC=14:GOSUB DRAWTEXT            GOSUB DROPPRESENT      FEDDINOCOUNT% = FEDDINOCOUNT% + 1    BEND  BEND  RETURN.CHECKWEHAVEALLCOMPUTERITEMS'--------------------------------  S$="NION CAKE LOOKS OVER YOUR INVENTORY..."  CR=1:DC=14:GOSUB DRAWTEXT  DELAY=1:GOSUB PAUSE  MISSING%=0  FOR Z = 0 TO 3    TOK$ = LEFT$(PRESENT$(Z), 3)    GOSUB FINDININVENTORY     IF RES%=0 THEN BEGIN      S$="'MM... OU SEEM TO BE MISSING A "      CR=0:DC=2:GOSUB DRAWTEXT      S$=PRESENT$(Z)      CR=0:DC=3:GOSUB DRAWTEXT      S$="...'"      CR=1:DC=2:GOSUB DRAWTEXT      MISSING%=1      DELAY=1:GOSUB PAUSE    BEND !BRBR O1GR O2GR O1GG O2GR O1GR O2GR" IY D$(9)"T7M5O6QP0GP9S#FD#FG QERIR T0O6P0#FP8#G QAIAQA#G#F H#F S#FE#F#G#F#G HEIR":E$(9)"T7P0M1O3QDA EEIEQEIA O3Q#C#CI#CQ#CI#F O2 QAAIAQAIO3#C O2QBB" Y F$(9)"T3O2 IBRBR O1GR O2GR O1GG O2GR O1GR O2GR BRBR O1GR O2GR# O1GG O2GR O1GR O2GR" -Z A$(10)"T7M5O5QP0IEP5SDEIDS#CO5D Q#CIO5DQD T2P0I#FP5A#G QRR T7M5O5P0IEP5SDEIDS#CD Q#CIO5DQD T2P0I#FP5A#G Q.R P0T7IF P7SFEF#F#G#F#GAHAR" Z B$(10)"T7P0M1O3QEO2#G QBB IO3#FD#FQEIEEE O3QEO2#G QBB IO3#FD#FQEIEEE #F#F#G#G Q.#FI#F#F   MAPLOCTOOBJS$(CURRENTROOM%,MAPIDX%)="VEGAN-MITE"    BEND    IF TOK$="TIG" THEN BEGIN      S$=" THINK YOU HURT ITS FEELINGS, IT IS NOW A "      CR=0:DC=14:GOSUB DRAWTEXT      S$="CRYING-TIGER":CR=0:DC=3:GOSUB DRAWTEXT      S$="...":CR=1:D$#F#F#F" [ C$(10)"T3O2 IBRBR O1GR O2GR O1GG O2GR O1GR O2GR BRBR O1GR O2GR O1GG O2GR O1GR O2GR O1GR O2GR O1GG O2GR O1GG O2GR" [ D$(10)"T0M4O4P0IEP8SDEIDS#CD Q#CIO4DQD O5T2P0IAP5O6#CO5B QRR T0M4O4P0IEP8SDEIDS#CD Q#CIO4DQD O5T2P0IAP5O6#CO5B Q.R O4P0T0I%FP9SFEF#F#G#F#GAHAR" [ E$(10)"T7P0M1O3QBE #F#F IA#FA Q#G I#G#G#G QBE #F#F IA#FA Q#G I#G#G#G AABB QO4.#C I#C#C#C#C#C" v\ F$(10)"T3O2 IBRBR O1GR O2GR O1GG O2GR O1GR O2GR BRBR O1GR O2GR O1GG O2GR O1GR O2GR O1GR O2GR O1GG O2GR O1GG O2GR" \A$(11)"T7M&5O5P0QBB P3HO6#C O5IBO6#CDH#CIR O5QBB P3HO6#C O5IBO6#CDH#CIR O5QBB HO6#C O5IBO6#CDH#CIR SP9O5BABO6#CO5BO6#CO5AB" ]B$(11)"T7P0M1O3QEE SAEAEAEAE #GE#GE#GE#GE #FE#FE#FE#FE EBEBEBEB SAEAEAEAE#GE#GE#GE#GE#FE#FE#FE#FE EBEBEBEB SAEAEAEAE#GE#GE#GE#GE#FE#FE#F'E#FE EBEBEBEB" ^C$(11)"T3O2 IBRBR O1GR O2GR O1GG O2GR O1GR O2GR BRBR O1GR O2GR O1GG O2GR O1GR O2GR BRBR O1GR O2GR O1GG O2GR O1GR O2GR O1GG O2GR" x^D$(11)"T7M5O5P0Q#G#G P3HA I#GABHAIR Q#G#GHA I#GABHAIR Q#G#GHA I#GABHAIR P9S#G#F#GA#F#GE#F" ^E$(11)"QT6O4EE O5IP0AE#CO4A O5BE#CO4A O6#CO5E#CO4A O6EO5B#GE O5IP0AE#CO4A O5BE#CO4A O6#CO5E#CO4A O6EO5B#GE" @_E$(11)E$(11)"O5SP0AE#CEAE#CE BE#CEBE#CE O6#CO5E#CEO6#CO5E#CE O6EO5B#GBO6EO5B#GB" _F$(11)"T3O2 IBRBR O1GR O2GR O1GG O2GR O1GR O2GR BRBR O1GR Y1:AE.:AF31:Z.: 38:AL. =  > JAA:UAS(AG):AEU:AFU: 180:AAAAAB:AA16AB2 3> AA.AB2:ZZ1 K> Z3AA14AB2 o> YY1:Z.:4:J.: 171: 38: u>  > KJ16:UAEAF:53504U,D(U)(15D(U))K:53760U,E(U)(15E(U))K:54016U,F(U)(15F(U))K:U: X? M(53504AE):N(53760AE):O(54016AE):UAEAF:53504U,(53504U1):53760U,(53760U1):54016U,(54016U1):U ? 53504AF,M:53760AF,N:54016AF,O: ?  ?  185: 191: 195: @ 53275,.:128:-NBC,7:53297,232:AX,32768:AY,4:AU,255:AV,255:AW,64:BB,4128:BA,.:!3,768,.,268251392 @ !3,4000,160,294912:!3,4000,6,267911168:T286784:R.31:BE(T):TT1:BF(T):TT1:BG(T):TT1:53504R,BE:53760R,BF A 54016R,BG:R:U.7:U,.#.:U:BH30:BI25:.,1,BH:.,.BI,50:1,1,BH:1,85BI,50:2,1,BH:2,171BI,50 tA 3,1,BH:3,256BI,50:4,1,BH:4,.BI8,180:5,1,BH:5,85BI8,180:6,1,BH:6,171BI,180:7,1,BH A 7,256BI,180:4:U.142:U,40978(3U):U:;6:<14:R.:OI0:OD0:Z.: A  B 4:U.7:U2,40978(R6U):U: 196: 287:.3:RR1:R6R. !B ZZ1 1B Z30 191 7B  |B R.7:R,.:R:128:53297,224:AX,2048:AY,.:4::"";: B  OI0  LO$460A0 B  OI0  LO$500004000(OI1) C T289952:! 0,4000,LO,$FF80000: OD  0  OI  OI  1: OI  8  OD  1:OI8 4C  OD  1  OI  OI  1: OI  1  OD  0 :C  C :17:B.:C(.).:C(1).:C(2)1:C(3)2:C(4)2:C(5)3:C(6)4:C(7)2:C(8)2:C(9)3:C(10)4:C(11)5:C(12)6:C(13)7:C(14)8:C(15)9:C(16)9:C(17)10 8D C(18)11:C(19)12:C(20)13:C(21)14:C(22)15:
8,.,12,3,7:
1,.,9,9,12,2,2048:A$(.)"O5T4M9WFFFHF" D B$(.)"O3T5M0SP0CP1O5RCRCRCRCRCRCRCR P0O5CRP1O3CRCRCRCRCRCRCR P0O4GR P1O2GRGRGRGRGRGRGR P0O4ER P1O2ERERER" D C$(.)"M1P0T6O1IFE#DEFD#DEFE#DEFE#DEFE#DEFE#DEFE#DE":D$(.)"O5T4M9W#F#F#FH#F" E E$(.)"O3T5M0SP0#CP1O5R#CR#CR#CR#CR#CR#CR#CR P0O5#CRP1O3#CR#CR#CR#CR#CR#CR#CR P0O4#GR P1O2#GR#GR#GR#GR#GR#GR#GR P0O4#ER P1O2#ER#ER#ER" E F$(.)"M1T9O6SEGEG#D#F#D#FDFDF#CE#CE FAFAE#	GE#G#DG#DGD#FD#F GBGB#F#A#F#AFAFAE#GE#G FA#F#AFA#F#A" pF A$(1)"T7P0M1O2QFO3C O2IGGGGGGGGGGGG O2QFO3C O2IGGGGGGGGGGGG":B$(1)"T9 P0O6 QFE SGR P2O2GRGRGRGRGRGRGRGRGRGRGR":B$(1)B$(1)B$(1) F C$(1)"T3O2 IBRBR O1GR O2GR O1GG O2GR O1GR O2GR BRBR O1GR O2G
R O1GG O2GR O1GR O2GR":D$(1)"T7P0M1QO3CG IDDDDDDDDDDDD QO3CG IDDDDDDDDDDDD" G E$(1)"T9 P0O5QAG SBR P1O1BRBRBRBRBRBRBRBRBRBRBR":E$(1)E$(1)E$(1):F$(1)"T3O2 IBRBR O1GR O2GR O1GG O2GR O1GR O2GR BRBR O1GR O2GR O1GG O2GR O1GR O2GR" H A$(2)"T7M5O5QP0GG GRIRP7 E#F QGIGQG#FE HE SEDE#FE#F HDIR":B$(2)"T7P0M1O2QFO3C O2QGGIGQGIO3C O2QEEIEQEIA QCCICQCIE QDD" H C$(2)"T3O2 IBRBR O1GR O2GR O1GG O2GR O1GR O2GR BRBR O1GR O2GR O1GG O2GR O1GR O2GR":D$(2)"T7M5O6QP0FP9SEDEF QDRIR T0O6P0EP8#F QGIGQG#FE HE SEDE#FE#F HDIR" KI E$(2)"T7P0M1O3QCG DDIDQDIG O2QBBIBQBO3IE O2 QGGIGQGIB QAA":F$(2)"T3O2 IBRBR O1GR O2GR O1GG O2GR O1GR O2GR BRBR O1GR O2GR O1GG O2GR O1GR O2GR" I A$(3)"T7M5O5QP0IDP5SCDICSO4BO5C QO4BIO5CQC T2P0IEP5G#F QRR T7M5O5P0IDP5SCDICSO4BO5C QO4BIO5CQC T2P0IEP5G#F Q.R P0T7I#D P7S#DD#DE#FE#FGHGR" 2J B$(3)"T7P0M1O3QDO2#F QAA IO3ECEQDIDDD O3QDO2#F QAA IO3ECEQDIDDD EE#F#F Q.EIEEEEE" J C$(3)"T3O2 IBRBR O1GR O2GR O1GG O2GR O1GR O2GR BRBR O1GR O2GR O1GG O2GR O1GR O2GR O1GR O2GR O1GG O2GR O1GG O2GR" :K D$(3)"T0M4O4P0IDP8SCDICSO3BO4C QO3BIO4CQC O5T2P0IGP5BA QRR T0M4O4P0IDP8SCDICSO3BO4C QO3BIO4CQC O5T2P0IGP5BA Q.R O4P0T0I#DP9S#DD#DE#FE#FGHGR" K E$(3)"T7P0M1O3QAD EE IGEG Q#F I#F#F#F QAD EE IGEG Q#F I#F#F#F GGAA Q.B IBBBBB" L F$(3)"T3O2 IBRBR O1GR O2GR O1GG O2GR O1GR O2GR BRBR O1GR O2GR O1GG O2GR O1GR O2GR O1GR O2GR O1GG O2GR O1GG O2GR" tL A$(4)"T7M5O5P0QAA P3H.BP1QAQ.AIR QP0AA P3H.BP1QAQ.AIR":B$(4)"T7P0M1O3QDDIGGGGGGGG DDDDDDDD GGGGGGGG DDDD" M C$(4)"T3O2 IBRBR O1GR O2GR O1GG O2GR O1GR O2GR BRBR O1GR O2GR O1GG O2GR O1GR O2GR O1GR O2GR O1GG O2GR O1GG O2GR":D$(4)"T7M5O6P0QDDWDQDR DDWDQDR" NM E$(4)"T7P0M1O3QAA O4IDDDDDDDD O3IAAAAAAAA O4DDDDDDDD O3IAAAA" M F$(4)"T3O2 IBRBR O1GR O2GR O1GG O2GR O1GR O2GR BRBR O1GR O2GR O1GG O2GR O1GR O2GR O1GR O2GR O1GG O2GR O1GG O2GR" N A$(5)"T7M5O5P0QAA HBIAB O6CO5HBIRSAP9GABABGA W.G":B$(5)"T7P0M1O3QDD GG#F#FEEDDW.C" N C$(5)"T3O2 IBRBR O1GR GR O2 GR O1 GR GR GR O2 GR O1 GR T0O2P0S#CR O5P1 #CR#CR#CR#CR#CR#CR#CR#CR#CR#CR#CR" N D$(5)"T7M5O5P0Q#F#F HGI#FGAHGIRS#FP9E#FG#FGE#F W.C":E$(5)"T7P0M1O3QAA O4DDCCO3BBAAW.G" LO F$(5)"T3O2 IBRBR O1GR GR O2 GR O1 GR GR GR O2 GR O1 GR T0O2P0SCR O5P1 CRCRCRCRCRCRCRCRCRCRCR" O A$(6)"T7M5P5O5 QRR R Q.G IED O4QB IO5DEG P0SDO4BO5DEDO4BIP9G O4IEGGEQGIE QBO5IDDO4BO5QDE P9O5R Q.GIEDQESGEGEIGBO6DO5SP0BAIG" P A$(6)A$(6)"O5QP9IBP0SGBO6IDO5SBO6D SP0G#FDO5B O6#FDO5BG P9IBO6CDO5IB" P B$(6)"T7P0M1O2QFO3C O2QGGIGQGIO3C O2QEEIEQEIA O1QAAIAQAIO2E QDD  FO3C O2QGGIGQGIO3C O2QEEIEQEIA O1QAAIAQAIO2E QDD" P C$(6)"P0T3O2 IBRBR O1GR O2GR O1GG O2GR O1GR O2GR BRBR O1GR O2GR O1GG O2GR O1GR O2GR":C$(6)C$(6)C$(6) }Q D$(6)"QRRT2P0SO6B#F#AFAE#G#DGD#F#CFCEO5BO6#DO5#AO6DO5AO6#CO5#GO6CO5GB#F#AFAE#GDO3SCRP2T7O6CRCRCRCRCRCRCRCRCRCRCRCRCRGRGR" Q D$(6)D$(6)"T6O6P0SDP6O5CO3P9CO2CO5P0SBP6O5CO3P9CO2CO5P0SGP6O5CO3P9O1CCO5P0SGP6O5CO3P9O1CC" 0R D$(6)D$(6)"O4P0GRP1O2CRCRCRCRCRCRCRT0O5P0SEGEGF#GF#G#FA#FAGBGBT7O6SGP3O2WC" R E$(6)"T7P0M1O3QCG DDIDQDIG O2QBBIBQBO3IE QEEIEQEIG Q#F#F  CG DDIDQDIG O2QBBIBQBO3IE QEEIEQEIG Q#F#F" S F$(6)"P0T3O2 IBRBR O1GR O2GR O1GG O2GR O1GR O2GR BRBR O1GR O2GR O1GG O2GR O1GR O2GR":F$(6)F$(6)F$(6) S A$(7)"T7M5O5QP0IDP5SCDICSO4BO5C QO4BIO5CQC T2P0IEP5G#F QRR T7M5O5P0IDP5SCDICSO4BO5C QO4BIO5CQC T2P0IEP5G#F Q.R P0T7I#D P7S#DD#DE#FE#FGHG" S B$(7)"T7P0M1O3QDO2#F QAA IO3ECEQDIDDD O3QDO2#F QAA IO3ECEQDIDDD EE#F#F Q.EIEEEEE" bT C$(7)"T3O2 IBRBR O1GR O2GR O1GG O2GR O1GR O2GR BRBR O1GR O2GR O1GG O2GR O1GR O2GR O1GR O2GR O1GG O2GR O1GG O2GR" T D$(7)"T0M4O4P0IDP8SCDICSO3BO4C QO3BIO4CQC O5T2P0IGP5BA QRR T0M4O4P0IDP8SCDICSO3BO4C QO3BIO4CQC O5T2P0IGP5BA Q.R O4P0T0I#DP9S#DD#DE#FE#FGHGR" HU E$(7)"T7P0M1O3QAD EE IGEG Q#F I#F#F#F QAD EE IGEG Q#F I#F#F#F GGAA Q.B IBBBBB" U F$(7)"T3O2 IBRBR O1GR O2GR O1GG O2GR O1GR O2GR BRBR O1GR O2GR O1GG O2GR O1GR O2GR O1GR O2GR O1GG O2GR O1GG O2GR" 
V A$(8)"T7M5O5P0QAA P3HB QBBO6H.#C O51QBQ.BIR QP0BB P3H.O6#CP1O5QBQ.BIR" eV B$(8)"T7P0M1O3QDDHG QEE SARARARARARARARAR ERERERERERERERER ARARARARARARARAR ERERERER" V C$(8)"T3O2 IBRBR BRRR BRBR O1S GRGRGRGRGRGRGRGRGRGRGRGRGRGRGRGR GRGRGRGRGRGRGRGRGRGRGRGR" W D$(8)"T7M5O6P0QDD HD QEE RO5EP9O6EID#CO5HB P0O6QEE RO5EP9O6EID#CO5HB" vW E$(8)"T7P0M1O3QAAO4HD O3QBB O4SERERERERERERERER O3BRBRBRBRBRBRBRBR O4ERERERERERERERER O3BRBRBRBR" X F$(8)"T3O2 IBRBR BRR R BRBR O1S GRGRGRGRGRGRGRGRGRGRGRGRGRGRGRGR GRGRGRGRGRGRGRGRGRGRGRGR":A$(9)"T7M5O5QP0AA ARIRP7 #F#G QAIAQA#G#F H#F S#FE#F#G#F#G HEIR" X B$(9)"T7P0M1O2QGO3D O2QAAIAQAIO3D O2Q#F#FI#FQ#FIB QDDIDQDI#F QEE":C$(9)"T3O2 IBRBR O1GR O2GR O1GG O2GR O1GR O2GR AH3 5a AI16  6b H$I$(AI):(AI,2)1AJ10(H$)2:AJ70(H$)2 N6c AK((AI1)2)33: 87:Z1ZZ1: 87 U6d  h6e Z1AI16 ~6f AIAI1:AI16 6g AH4:AL3:Z.:4: 38::AH2: 6h  6i AG1AG4 111 6j AG5AG6 129 6k AG7 146 6l AH4AH8 7m AE16:AF31: 181: 7n  57o AH4Z10AH5:Z. B7p AH5 x7q H$J$(.):AJ40(H$)2:AK.: 87:Z1ZZ1: 87 7r Z1AH6:AT1(AG1)4:AIAT 7s  7t AH6Z5 7u AH7:Z.: 7v AH7 7w AIAT4 8x H$J$(AI):AJ40(H$)2:AK(AIAT)33:AK6AKAK11 48y  87:Z1ZZ1: 87 ;8z  P8{ Z1AIAT4 k8| AIAI1:AIAT41 8} AH4:AG4AH8 8~ AL3:Z.:4: 38::AH6: 8  8  8 AH8Z10AH9:Z. 8 AH9 	9 H$K$(.):AJ40(H$)2:AK.: 87:Z1ZZ1: 87 .9 Z1AH10:AT1(AG5)30:AIAT 59  G9 AH10Z5 c9 AH11:Z.:AIAT30 x9 AH12:AG5AH8 9 AL3:Z.:4: 38: 9  9  9 AH11 9 AIAT30 9 H$K$(AI): U1(H$):(AI,2)1AJ10(H$)2:AJ70(H$)2 &: AK((AIAT)2)5: 87:ZZ1:U: ?: AIAI1:AH10:Z.: E:  _: AH12Z10AH13:Z. m: AH13 : H$L$(.):AJ40(H$)2:AK.: 87:Z1ZZ1: 87 : Z1AH14:AI1 :  : AH14!Z5 : AH15:Z.: : AH15 : AI14 8; H$L$(AI):AJ40(H$)2:AK(AI1)33:AK6AKAK11 R;  87:Z1ZZ1: 87 Y;  m; Z1AI14 ; AIAI1:AI141 ; AH16:AL3:Z.:4: 38::AH14: ;  ;  ; AOAO"1:AO5 K< AO.:4:AM2,40978(AN6AG):.,(AM2):128:AM,150,120:.,150,120:AM,AQ#1:AQ(AQ10,360):AM,1,AR(.) < .,1,1:AP(AM)1:AM(AM5,7)1:AN(AN1,6): < U17:AP(U). < AP(U)AP(U)1:JAP(U)10:J3 < U, 1,AR(J)::U,.:AP(U).: < U: 4= U.7:U,.:U,160,80:U:AU,255:AV,255:AW,64:BB,4128:BA,.: n= ! 0, $7D0, $800, $48000:! 0, $7D0, $1F800, $49000: = ! 0, $7D0, $48000, $800:! 0, $7D0, $49000, $1F800: = JZ: 34:ZZ1:Z16Y$   @    @    @    @    @    @    @    @    @    D     |  z   D            D                @ r  l @ v  r @ p  j @ z  t @ t  l @   z @ z  v @ v  p @ v  n @ n % j @ x  r @ r  l @    @    @   z @ z  t @    @    @    @   | @ |  x @    @    @    @    @    @    @   | @ |  v @ v  t @ t n @    @    @   | @   ~ @ ~  x @ x  t @ t &p @    @    @ | v @v p @    @    @    @    @    @    @    @    @   @ | @| 
v @  @  @t  l @ l (h @"r (l @(l .f @.d 4b @ "| @"| $x @$x ,p @,p 4j @4j <b @( ,x '@,x 2r @2r 8n @:l Bf @Bf H` @6 8~ @8~ :v @:v Bp @Fl Lh @Lh Tb @Nb Hf @Hf Dj @Dj >n @>n 6t @J H @H D @D B @B B~ @P L @L P @P P @P N| @N| Rx @L H @H F| @F| Fx @Fx Jt @Jt Pn @Pn Rj @X h `b @T V~ @V~ Zx @\v `r @`r ^p @Zp \l @\l `h @dl hh @hh nd @tj vf @vf xb D: > D: @ D D D B Dt p l j n l j p r v t r t t D
   
       D	    VEC?C   ~  ?C   ~8D       .  @  Z  p   |  x  r  p  p r 0v B| ^   " ` ?D%j  Z  ^  l               : X f r h ^ ` b Z R F 6 &                  v  p  l  l  @t    @    @ |  x @ v  t @ t x @$x D @N \ D'<  8  ,  ,  4  @  N  b  ~             . D X f v    v b N .          z  f  T  H  @  <  :  @ $ @$ > @> X @X p @p  @  @  @  @  @  @ z @>  H  @H  T  @T  f  @  @  D           @  @  @  @  @  @  D   
  $ 6 L 6 $      @L ` @` p @  @  @  @ & @& 8 @8 P @P ^ @^ n D      D#  
    . H Z l    *P t&,288*$R  
~ v n 
b 
D <  .  "        DG        $  2  @  L  Z ` h p z                8 DZlz
*66*
   z ` H > ,                     ~  v  l b P  @  *        D      & &6 ,D 2b 6@6.2. , *l (Z &>    D  & .& 6  6?
D
, > xT T N H @ 8 0 . ?D0 P P D4 J L D4 F D D4 < > ?	D* ~< zL zT |T B 8 D	* , 0 4 6 8 4 2 0 D|V T P J D > 8 8 < @ F L N R R ?
DT N H B N V ` h l p t n l l r t z | ~| zx xp ~h b Z V P D                 D	  ~ z ~     D    , > N Z d f h d Z J : . $  ?D3    ~ v p l h d d j x       ,      	                           ? DR T Z X @j p @p t @t |x ?Dv p j f d f p ~    , (  
  x l h h j n r ?A
  2 = @X    @N $  : @D B j f @* R 6 z @
 b                                                                                                                                                                                                                +CHR$(34)+"I PROMISE TO ONION CAKE THAT I WILL"+CHR$(34)PROG$(1)="20 PRINT "+CHR$(34)+"- ALWAYS WRITE BEAUTIFUL MEGA65 PROGRAMS"+CHR$(34)PROG$(2)="30 PRINT "+CHR$(34)+"- MAKE USE OF DELICIOUS PETSCII CHARACTERS"+CHR$(34)PROG$(3)="40 PRINT "+CHR$(34)+",5). 2/  32:JJ1:J16YY1:J.: 38:Z. 20   21 ZZ1: ,22 Y1 K23 JAA:AE.:AF15:Z3AF31 j24  33:AAAAAB:AA16AB1 25 AA.AB1:ZZ1 26 Z6AA15AB1YY1:Z. 27  28 Y2 29 QQP:Q1 2: QQ1:ZZ1:AE16:AF31: 181:Z162PP.93 3; Z1631Y3:4:Z.:AA.:AB2 !3<  (3=  73> Y3 175 F3? Y4 173 U3@ Y5 173 j3A Y5AG8AL. x3B Y6 68 3C  39 3D AL. 3E  170:AL1:Z.:"";: 3F  3G AL1 3H JZ: 33:Z16Z.:AL- MAKE BEAUTIFUL SID MUSIC WITH THE 'PLAY' COMMAND"+CHR$(34)BORDER 0:BACKGROUND 0:PRINT CHR$(14);CHR$(30);GOSUB ATTICRAMCHECKGOTO MAIN.ATTICRAMCHECK'---------------  PRINT CHR$(147);  POKE $8000000, 35  IF PEEK($8000000) <> 35 THEN BEGIN    HASATTICRAM% = 0    PRINT "O ATTIC RAM DETECTED (WILL NOT CACHE ART)"    SLEEP 1    PRINT CHR$(147);    RETURN  BEND  POKE $8000000, 36  IF PEEK($8000000) <> 36 THEN BEGIN    HASATTICRAM% = 0    PRINT "O ATTIC RAM DETECTED (WILL NOT CACHE ART)"    SLEEP 1    PRINT CHR$(147);    RETURN  BEND    HASATTICRAM%=1  PRINT "TTIC RAM DETECTED (WILL CACHE ART)"  SLEEP 1  RETURN.REMOVEFROMLOC'---------------  IF MAPIDX%=1 THEN BEGIN    MAPLOCTOOBJS$(CURRENTROOM%,1) = ""  BEND:ELSE IF MAPIDX%=0 THEN BEGIN    MAPLOCTOOBJS$(CURRENTROOM%,0) = ""    IF MAPLOCTOOBJS$(CURRENTROOM%,1) <> "" THEN BEGIN      MAPLOCTOOBJS$(CURRENTROOM%,0) = MAPLOCTOOBJS$(CURRENTROOM%,1)      MAPLOCTOOBJS$(CURRENTROOM%,1) = ""    BEND  BEND  RETURN.TAKE'----  GOSUB EXTRACTTOKEN  MAPIDX% = -1  B$=""  FOR K = 0 TO 1    C$ = MAPLOCTOOBJS$(CURRENTROOM%,K)    IF TOK$ = LEFT$(C$,3) THEN B$ = C$:MAPIDX% = K  NEXT K  IF LEFT$(B$,3) = TOK$ THEN BEGIN    ALLOW% = 1    IF TOK$="EGG" THEN BEGIN      S$="HE EGGPLANT STUBBORNLY RESISTS YOUR ATTEMPT TO TAKE IT!"      CR=1:DC=14:GOSUB DRAWTEXT      ALLOW%=0    BEND    IF B$="RICE-PLANT" THEN BEGIN      S$="HE RICE-PLANT REFUSES TO RELENT TO YOUR WILL!"      CR=1:DC=14:GOSUB DRAWTEXT      ALLOW%=0    BEND    IF TOK$="CAR" THEN BEGIN      S$="HE CARNIVOROUS-MITE GNASHES ITS TEETH AT YOU, FORCING YOU TO BACK DOWN!"      CR=1:DC=14:GOSUB DRAWTEXT      ALLOW%=0    BEND    IF TOK$="TIG" THEN BEGIN      S$="HE TIGER UNLEASHES A FEROCIOUS GROWL, MAKING YOU SHIVER IN YOUR BOOTS!"      CR=1:DC=14:GOSUB DRAWTEXT      ALLOW%=0    BEND    IF ALLOW%=1 THEN BEGIN      INVENTORY$(INVCOUNT%) = B$      INVCOUNT% = INVCOUNT% + 1      GOSUB REMOVEFROMLOC      S$="OU TAKE THE ":CR=0:DC=14:GOSUB DRAWTEXT      S$=B$:CR=0:DC=3:GOSUB DRAWTEXT      S$="...":CR=1:DC=14:GOSUB DRAWTEXT    BEND  BEND:ELSE BEGIN    S$="OU CAN'T SEE THAT HERE!"    CR=1:DC=14:GOSUB DRAWTEXT  BEND  RETURN.HIT'---  GOSUB EXTRACTTOKEN  MAPIDX% = -1  B$=""  FOR K = 0 TO 1    C$ = MAPLOCTOOBJS$(CURRENTROOM%,K)    IF TOK$ = LEFT$(C$,3) THEN B$ = C$:MAPIDX% = K  NEXT K  IF LEFT$(B$,3) = TOK$ THEN BEGIN    IF TOK$="EGG" THEN BEGIN      S$="HE IMPACT OF YOUR FIST CAUSES IT TO BECOME A "      CR=0:DC=14:GOSUB DRAWTEXT      S$="FAINTED-EGGPLANT":CR=0:DC=3:GOSUB DRAWTEXT      S$=".":CR=1:GOSUB DRAWTEXT      MAPLOCTOOBJS$(CURRENTROOM%,MAPIDX%)="FAINTED-EGGPLANT"    BEND    IF TOK$="RIC" THEN BEGIN      S$="OU FLATTEN THE RICE WITH YOUR FIST, FORMING A TASTY "      CR=0:DC=14:GOSUB DRAWTEXT      S$="RICE-PAPER-ROLL":CR=0:DC=3:GOSUB DRAWTEXT      S$=".":CR=1:DC=14:GOSUB DRAWTEXT      MAPLOCTOOBJS$(CURRENTROOM%,MAPIDX%)="RIC2 3I  3J AL2 89 3K AL3 #4L JZ:AE.:AF31: 34:Z16Z.:AL4 *4M  74N AL4 x4O U.7:U,.:AP(U).:U:128: 172:AGAG1:AL5: 38:Z.: 4P AL5 4Q JZ:AE.:AF31: 33:Z16 4R AL6:Z.:Y2:Q.:P1: 4S  4T AL.AL4Y6 4U  163: 4V ZZ1: /5W AAJZ,AK:(Z,16)16:(H$,1Z,1);:Z(H$)Z1 55X  W5Y 53275,255:AH.Z5AH1:Z. d5Z AH1 5[ H$I$(.):AJ1:AK.: 87:Z1ZZ1: 87 5\ Z1AH2:AI1 5]  5^ AH2Z5 5_ AH3:Z.: 5` R",P($1F800),R:BD1: E. U.31:D(U)(294912U):E(U)(295168U):F(U)(295424U):U:BD1 .  "MURAL.BIN",P($48000),R: "MURAL.CLR",P($49000),R: .  /  K(16J)16:U.31:L(D(U)E(U)F(U))3:53504U,(L(G(U)L)K):53760U,(L(H(U)L)K):54016U,(L(I(U)L)K):U: r/! KJ16:UAEAF:53504U,G(U)(D(U)G(U))K:53760U,H(U)(E(U)H(U))K:54016U,I(U)(F(U)I(U))K:U: /" K(16J)16:UAEAF:53504U,G(U)K:53760U,H(U)K:54016U,I(U)K:U: /#  36: 39: 183: L0$  "PAPER.DAT",P($47C40),R: "MUSE.DAT",P($40040),R: "OLI.DAT",P($50000),R:AU,.:AV,.:BB,4128:BA,.:U.7 0% V(U)((1)13):W(U)3040U:X(U)((1)5)5:U,1,15:U,.#.:U,W(U),X(U):(262144U2),4593V(U):U:J.:  1& U.31:G(U)(53504U):H(U)(53760U):I(U)(54016U):U: 1' Y4AL. ,1( U.7:((1)3). F1) V(U)(V(U)1,13): W1* X(U)247 1+ X(U)X(U)((1)3):W(U)W(U)((1)5)2:U,W(U),X(U):(262144U2),4593V(U): 1, U: 1-  287:.025:Y. 1. (Z"E-PAPER-ROLL"    BEND    IF TOK$="CAR" THEN BEGIN      S$="OUR VIOLENT ACTIONS HAVE MADE THE MITE RETHINK LIFE, IT IS NOW A "      CR=0:DC=14:GOSUB DRAWTEXT      S$="VEGAN-MITE":CR=0:DC=3:GOSUB DRAWTEXT      S$=".":CR=1:DC=14:GOSUB DRAWTEXT   !VEC?C   ~  ?C   ~L??D4           (  .  8  F  N  X  b | h | r z  v  r  n  j  h  h l 
j f  b (b @` \^ d` b f h h j l n r v z "| ,~ 4 > B H N V ` d l t z ~ ?	D     "           Dp  h  d  `  Z  X  T  P  L  H  F  F  H  J  L  P  T  X  Z  ^  d  j  D v     ~  ~     | DE                                                       #                                                                    |  x  |           D*"r x z ~  
                           $                            
    | x Drj jn dr bt ^z \| X T P P N H D @ < 8 8 6 8 : > @ B H N R V Z \ `| dt D/l t z         %    x r n h f b ^                |  | v p z   | t D      Dn v ~      | v r z ~  | t D    &~ z     ~    | 
x             D D             
  
                
    @8  .  @.  (  @*  $  '@$     @     @    @    @    @    @    @    @$  .  @.  0  @.  4  @6  <  @8  @  @D  H  @H  L  @L  R  @R  X  @X  \  @\  `  @`  h  @h  n  @n  z ~ @F  H  @H  F  @F  D  @p  x  @x    @r  v  @v#  |  @b  Z  @Z  T  @Z  \  @`  b  @f  j  @j  n  @n  t  @t  z  @z    @   z @|    @j  r  @r  x  @|    @    @    @    @    @    @    @    @    @    @    @    @    @    @ B INITPETSCIIFRAMES  GOSUB INCREMENTPTRTONEXTFREE  FORM = ͯ  DATIDX = ԯ2  BLOAD "PLAYER2.DAT",P(PTR)  GOSUB INITPETSCIIFRAMES  GOSUB INCREMENTPTRTONEXTFREE  FORM = ͯ  DATIDX = ԯ3  BLOAD "PLAYER3.DAT",P(PTR)  GOSUB INITPETSCIIFRAMES  GOSUB INCREMENTPTRTONEXTFREE  FORM = ͯ  DATIDX = ԯ4  BLOAD "PLAYER4.DAT",P(PTR)  GOSUB INITPETSCIIFRAMES  GOSUB INCREMENTPTRTONEXTFREE  FORM = ͯ  DATIDX = ԯ  BLOAD "DUCK.DAT",P(PTR)  GOSUB INITPETSCIIFRAMES  GOSUB INCREMENTPTRTONEXTFREE  BLOAD "PAL.BIN",P($40100),R  RETURN'---------------------------.INCREMENTPTRTONEXTFREE'---------------------------  PTR = TMP  SZ = WPEEK(PTR + ԯ)  'PRINT  'PRINT "INC SZ = ";SZ  'PRINT "PTR = ";HEX$(PTR + ԯ)  PTR = PTR + SZ  'GET KEY A$  RETURN'-----------.SETPALETTE'----------- (PALIDX)  PTR = $40100 + PALIDX * 16 * 3  FOR K = 0 TO 15    ' RED    POKE $D100 + K + 16, PEEK(PTR)    PTR = PTR + 1    ' GREEN    POKE $D200 + K + 16, PEEK(PTR)    PTR = PTR + 1    ' BLUE    POKE $D300 + K + 16, PEEK(PTR)    PTR = PTR + 1  NEXT K  RETURN'---------.INITVARS'---------  ' CLEAR DMA LIST AREA  FOR K = 0 TO 20    POKE $40000+K, 0  NEXT K  POKE $40000, $81 ' OPT = DEST ADDR  SELECTOR  POKE $40001, $00 ' DEFAULT TO 1ST MEGABYTE  POKE $40002, $07 ' OPT = ENABLE TRANSPARENCY  POKE $40003, $86 ' OPT = SET TRANSPARENCY  POKE $40004, $20 ' TRANSPARENCY VALUE  POKE $40005, $00 ' END OF OPTIONS  POKE $40006, $00 '  LSB =   WPOKE $40007, $0000 ' LENGTH  WPOKE $40009, $1000 ' SOURCE ADDR  POKE $4000B, $05    ' SOURCE BANK  WPOKE $4000C, $1000 ' DEST ADDR  POKE $4000E, $05    ' DEST BANK  POKE $4000F, $00    '  MSB (IGNORE)  WPOKE $40010, $0000 ' MODULO (IGNORE)  ' CLEAR THE OFFSCREEN BUFFER  EDMA 3, $F00, 160, $50000  EDMA 3, $A0, $20, $50F00  EDMA 3, $FA0, $4F, $51000  KNEELFLAG = 0  PLAYERFORM = ͯ
  PLAYERDATFIXED = ԯ4  PLAYERDATIDX = PLAYERDATFIXED  BADDIEKNEELFLAG = 0  BADDIEFORM = ͯ  BADDIEDATFIXED = ԯ2  BADDIEDATIDX = BADDIEDATFIXED  PLAYERFRAME = 0  PLAYERANIM = FORMANIM(PLAYERFORM, NE ү = 2#DEFINE ү  = 3#DEFINE Ư = 0#DEFINE Ư  = 1#DECLARE FSROW = 0, FSEL = -1#STRUCT  NAME$, FREQ, LP, BP, HP, RES, DIR, MIN, SWEEP FILT(10) = [ _  [ "LOWPUP",    1000, Ư,  Ư, Ư, 15, ү,   1VEC? Z @  Z ?  P  ~ ?  ~   ?     ?   ?   F2
R $ ?	\  7 ?  ' ?Af x  ?AT  ?
Bpj  . f   ? 4     ?C> V ?	C & ?CN  C?D
` R *b H P B . $ ,r 4n "?D   %& T48V,(P,,                                                                                                                                                                                                                           VEC?C   ~  ?C   ~D?
Dt                                                          r  z                                            |  |  x                   ~  z  x  t  l  l  t  z                             t f $Z ,H 0Z 0j .         " . : > @ @ > < 6 "    ?D     v  n  n  n  v  z           ?D v  n  j  j  n  v  ~        ~  x  p ?D	 r  n  h  h  j  n  v  z  v ?D r  n  j  h  l  p ?D f  n  l  d D h  b  `  f ?D b  b  j  j ?D	 d  f  ^  X  R  Z  ^  h  h D Z  ^  d  \ ?D Z  `  ^ D ^  X  R  T  Z  X D Z  T  Z ?D N  N  R  V ?D L  R  T ?D J  N  F  F ?Dz >  F  F  @ ?Dz > ~ > v 4 r 4 z : ?Dl * n ( v 4 t 4 ?           ?D                                          ?D        D                                                              ?D        ?Bt V " B h " Bn b $ ? PA^. A @   @0 0 @H T @Z  p @,p   @F : @^ d @pt x                                                                                                                                                                                000000, %00000000DATA %11111100, %00000000, %00000000DATA %11111000, %00000000, %00000000DATA %11111100, %00000000, %00000000DATA %11101110, %00000000, %00000000DATA %11000111, %00000000, %00000000DATA %10000011, %10000000, %00000000DATA %0000000_  [ 18, 6, 1 ], _  [ 25, 14, 1 ], _  [ 35, 10, 0 ], _  [ 15, 6, 1 ], _  [ 20, 9, 1 ]  _]#DECLARE CURX%,CURY%, S$, CR, DC, DK, DL, OFFSET%, LINE$, A, VALID%, SK#DECLARE =0#DECLARE LOADSTATE%#DECLARE RET%, FILLSTATE%#DEFINE  = 6     #2,"TEST.V",R,U8                                                                                                                                                                                                                                      3#DECLARE VECDATA%(12000)#DECLARE VECSIZE% = 3#DECLARE SELECTEDCOLOUR% = 1#DECLARE LASTCOLOUR% = -1#DEFINE     = 0#DEFINE   = 1#DEFINE  = 2#DEFINE      = 3#DEFINE     = 4#DECLARE M0%, M1%, LX0%, LY0%, MX%, MY%, CX0%, CY0%, EX0%, EY0%#DECLARE RADIUS%, XRADIUS%, YRADIUS%, BX0%, BY0%, POLYIDX%#DECLARE POLYX%(250), POLYY%(250), YMIN%, YMAX%#DECLARE IDX%, REV%, Y0%, Y1%, TMP%, Y%#DECLARE X0%, X1%, X%, Y%, M, C, PIDX%, PX%(20), I%, SWAPPED%, J%#DECLARE PRESENT$(4%), MISSING% = 0, GAMEOVER% = 0PRESENT$(0) = "WHISTLE"PRESENT$(1) = "FLOPPY-DISK"PRESENT$(2) = "MEGA65"PRESENT$(3) = "PROGRAM-LISTING"#DECLARE MAPLOCTOOBJS$(4,2)#DECLARE MAPIDX%#DECLARE ONION% = 0, ONION$#DEFINE =0#DEFINE =11, %11000000, %00000000DATA %00000000, %11100000, %00000000DATA %00000000, %01110000, %00000000DATA %00000000, %00111000, %00000000DATA %00000000, %00011100, %00000000DATA %00000000, %00001110, %00000000DATA %00000000, %00000111, %00000000DATA %00 000000, %00000011, %10000000DATA %00000000, %00000001, %00000000DATA %00000000, %00000000, %00000000DATA %00000000, %00000000, %00000000DATA %00000000, %00000000, %00000000DATA %00000000, %00000000, %00000000                                       00, 10 ], _  [ "LOWPDOWN",  1000, Ư,  Ư, Ư, 15, ү, 100, 10 ], _  [ "LOWPOSC",   1000, Ư,  Ư, Ư, 15, ү,  100, 10 ], __  [ "BANDPUP",   1000, Ư, Ư,  Ư, 15, ү,   100, 10 ], _  [ "BANDPDOWN", 1000, Ư, Ư,  Ư, 15, ү, 100, 10 ], _  [ "BANDPOSC",  1000, Ư, Ư,  Ư, 15, ү,  100, 10 ], __  [ "HIGHPUP",   1000, Ư, Ư, Ư,  15, ү,   100, 10 ], _  [ "HIGHPDOWN", 1000, Ư, Ư, Ư,  15, ү, 100, 10 ], _  [ "HIGHPOSC",  1000, Ư, Ư, Ư,  15, ү,  100, 10 ], __  [ "SPARE1",    0,    Ư, Ư, Ư, 0,  ү, 0,   0  ], _  [ "SPARE2",    0,    Ư, Ư, Ư, 0,  ү, 0,   0  ], __]#DECLARE SEQCNT#DECLARE SEQCHUNK(200), SEQEXTRA(200)#DECLARE PLYPTR, PLYFLAG#DEFINE į = -1#DEFINE į = -2#DEFINE į = -3#DEFINE įϯ1 = -4   ' ECHO MELODY: VOICE 1 ON VOICE 4#DEFINE įϯ2 = -5   ' ECHO MELODY: VOICE 1 ON VOICE 2 + 4 + 5#DEFINE įϯ  = -6   ' ECHO BASS:   VOICE 3 ON VOICE 6#DEFINE įϯ = -7#DEFINE įϯ = -8#DEFINE į = -9#DEFINE į = -10#DEFINE į = 11#DECLARE PJUMP, BJUMP#DEFINE ӯ = 0#DEFINE ӯ = 1#DE FINE ӯ = 2#DEFINE ӯ = 3#DECLARE NEXTBADDIETIME = 50, BADDIEDEADTIME = 50, BADDIESTATE'----.MAIN'----PRINT CHR$(27)+"5"PRINT CHR$(147);BORDER 0BACKGROUND 0GOSUB LOADDATAPALIDX = 0GOSUB SETPALETTESONG$ = "CHABI.P"GOSUB !LOADSONG.LOOP0  GOSUB INITVARS  GOSUB SHOWTITLE  GOSUB GAMEPLAY  ' GOSUB GAMEOVER  GOTO LOOP0'---------------.TRANSPARENTDMA'---------------  WPOKE $40009, SRCADDR  WPOKE $4000C, DESTADDR  WPOKE $40007, LENGTH  POKE  $40004, TRANSP " POKE $D702, 4 ' DMA LIST IN BANK 4  POKE $D701, $00 ' DMA LIST MSB  POKE $D705, $00 ' DMA LIST LSB  RETURN'----------.SHOWTITLE'----------  PRINT CHR$(147);  PRINT CHR$(14);  ' LOWER-CASE  PRINT "AY OF THE MPLODING OOT"  PRINT "========#================="  PRINT " GAME MADE BY THE 65 COMMUNITY!"  GET KEY A$  A$=""  ' ALL REVERSE-CHAR SPACES FOR MOST OF SCREEN  EDMA 3, $F00, 160, $40800  PRINT CHR$(142);  ' UPPERCASE  RETURN'---------.LOADDATA'---------  PTR = $42000     FORM = ͯ  DATIDX = ԯ  BLOAD "LEVEL1-BG.DAT",P(PTR)  GOSUB INITPETSCIIFRAMES  GOSUB PREPAREDOUBLECOPYLAYER  GOSUB INCREMENTPTRTONEXTFREE  FORM = ͯ  DATIDX = ԯ1  BLOAD "PLAYER.DAT",P(PTR)  GOSURN  BEND  GOSUB READNEXTTOKEN  SZ=0  SR=0  SM=0  ' READ NEXT TOKEN FROM CURSRCLINE$ INTO S$  DO WHILE S$ <> ""    IF S$ = "_" THEN BEGIN      SRCLINENO = SRCLINENO + 1      GOSUB READNEXTLINE      GOTO CFCOSOSKIP  ' READ NEXT LINE &#DEFINE =2#DEFINE =3#DEFINE =4#DEFINE د=5#STRUCT  DESC$, EXITS$, LOCS$, VART$, OFFSET% ROOMS(د) = [ _ [ "OU ARE TRAPPED IN NION AKE'S DIRTY SMELLY PRISON!", _     "", "", "GERMAN.V", 0 ], _ [ "' URKISH DINOSAUR IS BATHING IN THE THERMAL WATERS.", _     "", "2", "TURK.V", 0 ], _ [ " HAI DINOSAUR IS PERFORMING A TRADITIONAL DANCE.", _     "", "13", "THAI.V", -9 ], _  [ " IETNAMESE DINOSAUR IS TENDING TO THE RICE TERRACES.", _     "
", "24", "VIET.V", 0 ], _ [ "N INEBRIATED USTRALIAN DINOSAUR RESTS PEACEFULLY.", _     "", "3", "AUS.V", -16 ] _]S% = #DECLARE HASATTICRAM%=0#DECLARE CACHED%(د),OFFS#DECLARE PROG$(7), FINISHEDLINES%=0PROG$(0)="10 PRINT "= .05, CHUNKRPT, ECHODELAY#DECLARE V$(5,CHUNKMAX), V#DECLARE SONG$#DECLARE V1$, V2$, V3$, V4$, V5$, V6$#DECLARE CURRFREQ, CURRDIR#STRUCT  NAME$, ATTACK, DECAY, SUSTAIN, RELEASE, WAVEFORM, PW ENVS(9) = [ _  [ "IANO",       0, VEC? b h     l   ?     ?    ? p 6 ? *? 
N    0 0 D  D       r 0  r 0 N ? : ?A V & ?	An   A|  ?A T  ?
Az 
 Ap   ?B   ?B    ?  $ $   2 2 ?B   @   @  @ 0 >@ >b@.0H@
8@  ?Bz    ?z 0  ?x H , B 
 $ ?D8 dR z. > * < 
T , ?C ( C F C 6 C
,?C(.J?
D@  4 X > V b Z @| :~ 
h .T P  ?	nDHVVvvZpdp  'DEBUG STUFF  'A$ = STR$(MX%) + ", " + STR$(MY%) + ", " + STR$(MB%)  'PEN 0, 0  'BOX 0, 64, 150, 80, 1  'PEN 0, 1  'CHAR 0, 64, ү, ү, үү, A$  GOTO CHECKINPUT.CHECKBUTTONHIT'----------------  RET%=0  FOR K = 0 TO د-1    X%=BTNSX%(K)*8    Y%=BTNSY%(K)*8    W%=BTNSW%(K)*8    H%=BTNSH%(K)*8    X2%=X%+W%    Y2%=Y%+H%    IF X%<=MX% AND MX%<=X2% AND Y%<=MY% AND MY%<=Y2% THEN BEGIN      OLDMENUSELECTION% = MENUSELECTION      MENUSELECTION = K  9,  0,  0,  2, 1536 ], _  [ "CCORDION",  12,  0, 12,  0,  1,    0 ], _  [ "ALLIOPE",    0,  0, 15,  0,  0,    0 ], _  [ "RUM",        0,  5,  5,  0,  3,    0 ], _  [ "LUTE",       9,  4,  4,  0,  0,    0 ], _  [ "UITAR",      0,  9,  2,  1,  1     IF MENUSELECTION =  THEN BEGIN        GOSUB ONCLICKFILL        MENUSELECTION = OLDMENUSELECTION%      BEND: ELSE IF MENUSELECTION =  THEN BEGIN        GOSUB ONCLICKSAVE      BEND: ELSE IF MENUSELECTION =  THEN BEGIN        GOSUB ONCLICKLOAD      BEND      RET%=1      GOSUB DRAWMENUSYSTEM      K=د-1    BEND  NEXT K  RETURN  .ENDER'-----  SCREEN CLOSE  MOUSE OFF  RETURN.DATA'MOUSE POINTERDATA %11111111, %00000000, %00000000DATA %11111110, %00	,    0 ], _  [ "ARPSICRD",   0,  9,  0,  0,  2,  512 ], _  [ "RGAN",       0,  9,  9,  0,  2, 2048 ], _  [ "RUMPET",     8,  9,  4,  1,  2,  512 ], _  [ "YLOPHONE",   0,  9,  0,  0,  0,    0 ]  _]#DEFINE ү = 0#DEFINE ү   = 1#DEFI
#OUTPUT "HUNGRYDINOSAURS"'------------------------.DECLARES'--------#DECLARE K, Z, NORTH%, SOUTH%, EAST%, WEST%, ALLOW%, RES%#DECLARE A$,B$,C$,TOK$#DECLARE CURRENTROOM%, PREVIOUSROOM%#DECLARE INVENTORY$(10),INVCOUNT%=0,INVIDX%=0#DECLARE FEDDINOCOUNT% = 0#DECLARE POLLCNT%=0#DECLARE T1, DELAY  ' MUSIC RELATED VARS  ' ------------------  #DECLARE MUSICCHUNKINDEX     ' OLD T  #DECLARE BARINDEX             ' OLD TT  ' #DECLARE MAPBARTOCHUNK(11)  ' OLD M()  #DECLARE V1$(11), V2$(11), V3$(11), V4$(11), V5$(11), V6$(11)#DECLARE MAP(14)MAP(0)=0:MAP(1)=1:MAP(2)=2:MAP(3)=3MAP(4)=2:MAP(5)=4:MAP(6)=5:MAP(7)=7MAP(8)=8:MAP(9)=8:MAP(10)=5:MAP(11)=7MAP(12)=8:MAP(13)=8#DECLARE S%#STRUCT  TMPO%, BARS%, CPY% SONGS(4) = [  PD<                                                                                                                                                                                                                                                       C(25): A$(15): B$(15): C$(15): D$(15): E$(15): F$(15): D(32): E(32): F(32): G(32): H(32): I(32):P1:Q0:G$"":R0:   S0: V(8): W(8): X(8):Y0:Z0:AA0:AB1:AC0:AD1:AG0:AH0:AI0: I$(15): r! I$(.)"A BIG THANK YOU TO THE CORE MEGA65 TEAM FOR ALL THEIR EFFORTS OVER THE YEARS!":I$(1)"HIGHLANDER":I$(2)"DEFT":I$(3)"SERIOUSLY":I$(4)"ADTBM" " I$(5)"FALK/BLUEWAYWS":I$(6)"ANTTI-BRAIN":I$(7)"DOUBLEFLASH":I$(8)"BIT SHIFTER":I$(9)"LGB":I$(10)"SY2002":I$(11)"TAYGER":I$(12)"LYDON":I$(13)"M3WP" " I$(14)"FERALCHILD":I$(15)"INDIOCOLIFA": J$(16):J$(.)"EXTRA SHOUT OUTS TO:":J$(1)"TRENZ ELECTRONICS AND THE MOULDS TEAM!" # J$(2)"DEATHY FOR ALL YOUR PASSION AND DEDICATION TO THE MEGA65!":J$(3)"BIT SHIFTER FOR ALL THE GREAT BASIC 65 ENHANCEMENTS!" # J$(4)"LYDON FOR ALL YOUR EFFORTS PREPARING BATCH#2!":J$(5)"SY2002, MJOERGEN AND LYDON FOR ALL THE ADDITIONAL CORES!" *$ J$(6)"DDDAAANNN FOR ALL YOUR DOCUMENTATION, TOOLING AND COMMUNITY-BUILDING!":J$(7)"TAYGER FOR MEGA65CONNECT AND THE 'FILES.MEGA65.ORG' FILEHOST!" $	 J$(8)"IMPAKT FOR THE DETERMINED AND THOROUGH MANUAL PROOF-READING!":J$(9)"THECHIEF FOR YOUR EFFORTS SUPPORTING THE NEXYS BOARD!" 4%
 J$(10)"HOJO FOR THE AWESOME NEW FRONT COVERS YOU MADE FOR ALL OUR MANUALS!":J$(11)"AMOK FOR ALL YOUR DOCUMENTATION EFFORTS!" % J$(12)"UBIK FOR THE AWESOME ELEVEN IDE!":J$(13)"MAURICE FOR TESTING EVERY SINGLE BASIC 65 EXAMPLE IN THE MANUAL!" /& J$(14)"RETROCOMBS, PERIFRACTIC AND RB-JEFFREY FOR YOUR AWESOME YOUTUBE VIDS!":J$(15)"MINDRAIL FOR THE MACGUYVER-JTAG VIDEO!" & J$(16)"DEFT AND ADTBM FOR ALL YOUR 'HELLO MEGA65 COMMUNITY' VIDEOS!": K$(60): ' K$(.)"THANKS TO ALL THE 1ST GEN DEVELOPERS THAT MADE DEMOS, UTILITIES AND GAMES!":K$(1)"ADTBM":K$(2)"AIRJURI":K$(3)"AKMAFIN":K$(4)"AMOK" ' K$(5)"DDDAAANNN":K$(6)"DEATHY":K$(7)"DEFT":K$(8)"DEXTROUS":K$(9)"DILLOF":K$(10)"DIRK":K$(11)"DOCSTER":K$(12)"EGONOLSEN71":K$(13)"ELCH" =( K$(14)"ENDURION":K$(15)"FERALCHILD":K$(16)"FREDRIKR":K$(17)"GEEHAF":K$(18)"GEIRS":K$(19)"GRIM-FANDANGO":K$(20)"GRUBI":K$(21)"HEATH-MAN" ( K$(22)"HERNANDP":K$(23)"HSTAMPFL":K$(24)"JAMES":K$(25)"JESPERGRAVGAARD":K$(26)"JOHAN":K$(27)"JOHNWAYNER":K$(28)"KIDRA":K$(29)"KITHKANAN" k) K$(30)"KRYAN1":K$(31)"LAK132":K$(32)"LIQUIDDREAM":K$(33)"LYDON":K$(34)"M3WP":K$(35)"MAJIKEYRIC":K$(36)"MAURICE":K$(37)"MAXICE":K$(38)"MC64" * K$(39)"MIGHTYAXLE":K$(40)"MR.TOAST":K$(41)"MTEUFEL":K$(42)"N1K0M0":K$(43)"NEOMAN":K$(44)"OZIPHANTOM":K$(45)"RETROCOMBS":K$(46)"SHALLAN50K" * K$(47)"SNOOPY":K$(48)"STEPZ":K$(49)"STIGODUMP":K$(50)"SY2002":K$(51)"TAYGER":K$(52)"THECHIEF":K$(53)"UBIK":K$(54)"URBANL":K$(55)"WAULOK" + K$(56)"WOMBAT":K$(57)"ZEHA":K$(58)"ZZSILA":K$(59)"":K$(60)"": L$(10):L$(.)"...AND SOME FINAL THANK YOUS TO:" + L$(1)"OLIVIA NEWTOWN JOHN, ELO AND JOHN FARRAR, FOR THE WONDERFUL MUSICAL MEMORIES!":L$(2)"SYNTAX PARTY ORGANISERS FOR HOSTING THIS LOVELY EVENT!" H, L$(3)"MY WIFE, TRAM, AND BUBBY MOANA FOR THEIR LOVE AND SACRIFICE!":L$(4)"...AND THANK YOU MUM TOO, FOR ALWAYS BEING THERE FOR ME!":AL0:AM1:AN0:AO0: ,  AP(8):AQ0: AR(3):AR(.)15:AR(1)12:AR(2)11: AS(9):AS(.)20:AS(1)18:AS(2)29:AS(3)26:AS(4)22:AS(5)28:AS(6)16:AS(7)31:AS(8)25:AU53335: ,- AV53333:AW53334:AX53344:AY53346:AZ53358:BA53356:BB53358:BC53341: P- 54844,15: 27: 201: 35: 184 u- BD0:(53280).(53280)2 - <.:53272,(53272)253:!.,768,268251392,294912:!3,768,.,268251392: "MURAL.BIN",P($800),R: "MURAL.CL      GET#2,M0% : M0% = M0% AND 255 : PRINT M0%;      GET#2,M1% : M1% = M1% AND 255 : PRINT M1%;      MY% = M0% + (M1% << 8)      BOX BX0%, BY0%, MX%, MY%, BTNSSTATE%()      GOSUB STOREBOX      LOADSTATE% = -1      GOTO NXTLP    BEND    IF LOADSTATE% =  THEN BEGIN      PRINT "POLY ";      GET#2,K:K = K AND 255      POLYIDX% = K      FOR K = 0 TO POLYIDX%-1        GET#2,M0% : M0% = M0% AND 255 : PRINT M0%;        GET#2,M1% : M1% = M1% AND 255 : PRINT M1%;        POLYX%(K) = M0% + (M1% << 8)        GET#2,M0% : M0% = M0% AND 255 : PRINT M0%;        GET#2,M1% : M1% = M1% AND 255 : PRINT M1%;        POLYY%(K) = M0% + (M1% << 8)        IF (K>0) THEN LINE POLYX%(K-1), POLYY%(K-1), POLYX%(K), POLYY%(K)      NEXT K      LINE POLYX%(POLYIDX%-1),POLYY%(POLYIDX%-1),POLYX%(0),POLYY%(0)      IF BTNSSTATE%() = 1 THEN GOSUB FILLPOLY      GOSUB STOREPOLY      LOADSTATE% = -1      GOTO NXTLP    BEND.NXTLP  LOOP  DCLOSE #2  RETURN.RESETALL ARTSTATES'--------------------  LOADSTATE% = -4  FILLSTATE% = 0  LINESTATE% = 0  CIRCLESTATE% = 0  ELLIPSESTATE% = 0  BOXSTATE% = 0  POLYSTATE% = 0  RETURN.CHECKACTIONCLICK'------------------  IF MENUSELECTION =  THEN GOSUB ON!CLICKLINE  IF MENUSELECTION =  THEN GOSUB ONCLICKCIRCLE  IF MENUSELECTION =  THEN GOSUB ONCLICKELLIPSE  IF MENUSELECTION =  THEN GOSUB ONCLICKBOX  IF MENUSELECTION =  THEN GOSUB ONCLICKPOLY  RETURN.REPOSITIONMOUS"E'----------------  MOVSPR 0, MX%, MY%  RETURN.CHECKKEYPRESS'---------------------  IF A$=CHR$(144) THEN SELECTEDCOLOUR% = 0  IF A$=CHR$(5)   THEN SELECTEDCOLOUR% = 1  IF A$=CHR$(28)  THEN SELECTEDCOLOUR% = 2  IF A$=CHR$(159) THEN SELECTED#COLOUR% = 3  IF A$=CHR$(156) THEN SELECTEDCOLOUR% = 4  IF A$=CHR$(30)  THEN SELECTEDCOLOUR% = 5  IF A$=CHR$(31)  THEN SELECTEDCOLOUR% = 6  IF A$=CHR$(158) THEN SELECTEDCOLOUR% = 7  IF A$=CHR$(129) THEN SELECTEDCOLOUR% = 8  IF A$=CHR$(149) THEN$ SELECTEDCOLOUR% = 9  IF A$=CHR$(150) THEN SELECTEDCOLOUR% = 10  IF A$=CHR$(151) THEN SELECTEDCOLOUR% = 11  IF A$=CHR$(152) THEN SELECTEDCOLOUR% = 12  IF A$=CHR$(153) THEN SELECTEDCOLOUR% = 13  IF A$=CHR$(154) THEN SELECTEDCOLOUR% = 14  IF A$%=CHR$(155) THEN SELECTEDCOLOUR% = 15  PEN 0,SELECTEDCOLOUR% : SPRITE 0,1,SELECTEDCOLOUR%  MX%=RSPPOS(0,0)  MY%=RSPPOS(0,1)  ' LEFT  IF A$=CHR$(157) THEN MX%=MX%-1:GOSUB REPOSITIONMOUSE  ' RIGHT  IF A$=CHR$(29) THEN MX%=MX%+1:GOSUB REPOSITIO&NMOUSE  ' UP  IF A$=CHR$(145) THEN MY%=MY%-1:GOSUB REPOSITIONMOUSE  ' DOWN  IF A$=CHR$(17) THEN MY%=MY%+1:GOSUB REPOSITIONMOUSE  ' RETURN/ENTER  IF A$=CHR$(13) THEN GOSUB READSCALEDMOUSE : GOSUB CHECKACTIONCLICK  RETURN.READSCALEDMOUSE''-----------------  RMOUSE MX%, MY%, MB%  MX%=(MX%-24)*2  MY%=(MY%-50)*2  RETURN.CHECKINPUT'-----------  GET A$  IF A$="X" THEN RETURN  GOSUB CHECKKEYPRESS  GOSUB READSCALEDMOUSE  IF MB%=128 AND MBOLD%=0 THEN BEGIN    MBOLD%=128    GOSUB CHECKBUTTONHIT        IF RET%=1 THEN BEGIN      GOSUB RESETALLARTSTATES      IF MENUSELECTION =  THEN SCREEN CLOSE:END    BEND:ELSE BEGIN      GOSUB CHECKACTIONCLICK    BEND  BEND  IF MBOLD%=128 AND MB%=0 THEN MBOLD% = 0, 0) = ǯ1ANIMORDER(ͯ, ̯ͯ, 1) = ǯ2ANIMORDER(ͯ, ̯ͯ, 2) = ǯ3ANIMORDER(ͯ, ̯ͯ, 0) = ǯ2ANIMORDER(ͯ, ̯ͯ, 1) = ǯ1ANIMORDER(ͯ, ͯ, 0) = ǯ1ANIMORDER(ͯ, ͯ, 1) = ǯ2ANIMORDER(ͯ, ͯ, 2) = ǯ3ANIMORDER(ͯ, ͯ, 3) = ǯ2ANIMORDER(ͯ, ͯ, 4) = ǯ1ANIMORDER(ͯ, ͯ, 0) = ǯ1ANIMORDER(ͯ, ͯ, 1) = ǯ2ANIMORDER(ͯ, ͯ, 2) = ǯ3ANIMORDER(ͯ, ͯ, 3) = ǯ2ANIMORDER(ͯ, ͯ, 4) = ǯ1ANIMORDER(ͯ, ͯ, 0) = ǯ1ANIMORDER(ͯ, ͯ, 1) = ǯ2ANIMORDER(ͯ, ͯ, 2) = ǯ3ANIMORDER(ͯ, ͯ, 3) = ǯ4ANIMORDER(ͯ, ͯ, 4) = ǯ5ANIMORDER(ͯ, ͯ, 5) = ǯ5ANIMORDER(ͯ, ͯ, 6) = ǯ5ANIMORDER(ͯ, ͯ, 7) = ǯ5ANIMORDER(ͯ, ͯ, 8) = ǯ5ANIMORDER(ͯ, ͯ, 0) = ǯ1ANIMORDER(ͯ, ͯ, 1) = ǯ2ANIMORDER(ͯ, ͯ, 0) = ǯ1ANIMORDER(ͯ, ͯ, 1) = ǯ2ANIMORDER(ͯ, ͯ, 2) = ǯ3ANIMORDER(ͯ, ͯ, 3) = ǯ2ANIMORDER(ͯ, ͯ, 0) = ǯ1ANIMORDER(ͯ, ͯ, 1) = ǯ2ANIMORDER(ͯ, ͯ, 2) = ǯ3ANIMORDER(ͯ, ͯ, 3) = ǯ2ANIMORDER(ͯ, ͯ, 4) = ǯ1ANIMORDER(ͯ, ͯ, 0) = ǯ1ANIMORDER(ͯ, ͯ, 1) = ǯ2ANIMORDER(ͯ, ͯ, 2) = ǯ3ANIMORDER(ͯ, ͯ, 3) = ǯ4ANIMORDER(ͯ, ͯ, 4) = 	5ANIMORDER(ͯ, ͯ, 5) = ǯ5ANIMORDER(ͯ, ͯ, 6) = ǯ5ANIMORDER(ͯ, ͯ, 7) = ǯ5ANIMORDER(ͯ, ͯ, 8) = ǯ5#DECLARE MAXFRAME(ͯ, ͯ)MAXFRAME(
, ͯ) = 4MAXFRAME(ͯ, ͯ) = 5MAXFRAME(ͯ, ͯ) = 5MAXFRAME(ͯ, ̯ͯ) = 3MAXFRAME(ͯ, ̯ͯ) = 2MAXFRAME(ͯ, ͯ) = 5MAXFRAME(ͯ, ͯ) = 5MAXFRAME(ͯ, ͯ) = 9MAXFRAME(ͯ, ͯ) = 2MAXFRAME(ͯ, ͯ) = 4MAXFRAME(ͯ, ͯ) = 5MAXFRAME(ͯ, ͯ) = 9.FANIM#DECLARE PLAYERFORM = 1 ' #DECLARE BADDIEFORM = 1#DEFINE ͯ = 0#DEFINE ͯ = 1#DEFINE ͯ = 2#DEFINE ̯ͯ = 3#DEFINE ̯ͯ = 4#DEFINE ͯ = 5#DEFINE ͯ = 6#DEFINE ͯ = 7#DEFINE ͯ = 8#DEFINE ͯ = 9#DECLARE FORMANIM(ͯ, ͯ)FORMANIM(ͯ, ͯ) = ͯFORMANIM(ͯ, ͯ) = ͯFORMANIM(ͯ, ͯ) = ͯFORMANIM(ͯ, ̯ͯ) = ̯ͯFORMANIM(ͯ, ̯ͯ) = ̯ͯFORMANIM(ͯ, ͯ) = ͯFORMANIM(ͯ, ͯ) = ͯFORMANIM(ͯ, ͯ) = ͯFORMANIM(ͯ, ͯ) = ͯFORMANIM(ͯ, ͯ) = ͯFORMANIM(ͯ, ͯ) = ͯFORMANIM(ͯ, ͯ) = ͯFORMANIM(ͯ, ͯ) = ͯ#DECLARE PLAYERFRAME = 0#DECLARE PLAYERANIM = 0 ' ͯ#DECLARE BADDIEFRAME = 0#DECLARE BADDIEANIM = 0 ' ͯ.OFFSETS#DEFINE ԯ  = 0#DEFINE ԯͯ = 2#DEFINE ԯ0     = 3#DEFINE ͯԯ          = 0#DEFINE ͯԯ          = 1#DEFINE ͯԯ          = 2#DEFINE ͯ2 THEN BEGIN    GOSUB SETOUTPUTFILE  BEND  IF INSTR(CURSRCLINE$,"STRUCT")=2 THEN BEGIN    GOSUB READINSTRUCTDETAILS    DELETELINEFLAG = 1  BEND  RETURN'-----------------------------------.CHECKFORCREATIONOFSTRUCTOBJECT'-----------------------------------  CO$ = S$  CURSRCLINE$ = S$  FOUNDIDX = -1  ' PRESERVE ORIGINAL STRING  GOSUB READNEXTTOKEN  ' READ NEXT TOKEN FROM CURSRCLINE$ INTO S$  FOR RIDX = 0 TO STRUCTCNT - 1    IF S$=STRUCTNAME$(RIDX) THEN BEGIN      FOUNDIDX = RIDX      RIDX = STRUCTCNT - 1    BEND  NEXT RIDX  IF FOUNDIDX = -1 THEN BEGIN    CURSRCLINE$ = CO$    S$ = CO$    RETURN  BEND  GOSUB READNEXTTOKEN  SK$ = S$  ' GET STRUCT OBJECT NAME  BL = INSTR(SK$, "(")  ' *** FOUND IT, SO MAKE DIM'S FOR EACH MEMBER VAR  S$ = STRUCTVARS$(FOUNDIDX)  GOSUB PARSEARGUMENTS  ' PARSE ARGS INTO ARGS$(), ARGCNT  FOUNDIDX = 1  SZ = 0  FOR RIDX = 0 TO ARGCNT    IF ARGS$(RIDX) <> "" THEN BEGIN      PRINT "ARGS$(";RIDX;")=";ARGS$(RIDX)      IF BL = 0 THEN BEGIN        S$ = SK$ + "" + ARGS$(RIDX)        PRINT "STRUCT: "; S$        VARNAME$ = S$        GOSUB PARSEDECLAREDVAR       BEND      IF BL <> 0 THEN BEGIN        S$ = LEFT$(SK$, BL - 1) + "" + ARGS$(RIDX) + MID$(SK$, BL)        PRINT "STRUCT: ";S$        VARNAME$ = S$        GOSUB PARSEDECLAREDVAR        STRUCTFIELDS$(SZ) = VARNAME$        SZ = SZ + 1      ' IF NEXTLINE$<>"" THEN DELETELINEFLAG=0:CURSRCLINE$="^^"+NEXTLINE$:ELSE DELETELIN$EFLAG=1    BEND  NEXT RIDX  S$ = NEXTLINE$  GOSUB SAFEADDTOCURRENTORNEXTLINE  NEXTLINE$ = ""  ' SAFE ADD CURDESTLINE$+S$ TO CURRENT DESTLINE$(DESTLINENO)  GOSUB READNEXTTOKEN  IF S$ <> "=" THEN BEGIN    CURSRCLINE$=""    RETU PRINT M1%;      EX0% = M0% + (M1% << 8)      GET#2,M0% : M0% = M0% AND 255 : PRINT M0%;      GET#2,M1% : M1% = M1% AND 255 : PRINT M1%;      EY0% = M0% + (M1% << 8)      GET#2,M0% : M0% = M0% AND 255 : PRINT M0%;      GET#2,M1% : M1% = M1% AND 255 : PRINT M1%;      XRADIUS% = M0% + (M1% << 8)      GET#2,M0% : M0% = M0% AND 255 : PRINT M0%;      GET#2,M1% : M1% = M1% AND 255 : PRINT M1%;      YRADIUS% = M0% + (M1% << 8)      ELLIPSE EX0%, EY0%, XRADIUS%, YRADIUS%, BTNSSTATE%()      GOSUB STOREELLIPSE      LOADSTATE% = -1      GOTO NXTLP    BEND    IF LOADSTATE% =  THEN BEGIN      PRINT "BOX ";      GET#2,M0% : M0% = M0% AND 255 : PRINT M0%;      GET#2,M1% : M1% = M1% AND 255 : PRINT M1%;      BX0% = M0% + (M1% << 8)      GET#2,M0% : M0% = M0% AND 255 : PRINT M0%;      GET#2,M1% : M1% = M1% AND 255 : PRINT M1%;      BY0% = M0% + (M1% << 8)      GET#2,M0% : M0% = M0% AND 255 : PRINT M0%;      GET#2,M1% : M1% = M1% AND 255 : PRINT M1%;      MX% = M0% + (M1% << 8)' 255 : PRINT M0%;      GET#2,M1% : M1% = M1% AND 255 : PRINT M1%;      CY0% = M0% + (M1% << 8)      GET#2,M0% : M0% = M0% AND 255 : PRINT M0%;      GET#2,M1% : M1% = M1% AND 255 : PRINT M1%;      RADIUS% = M0% + (M1% << 8)      CIRCLE CX0%, CY0%, ԯ          = 3#DEFINE ͯԯ   = 4#DEFINE ͯԯ¯    = 4#DEFINE ͯԯ¯   = 8#DEFINE ͯԯ¯    = 12#DEFINE ͯԯ¯  = 16#DEFINE ͯԯ       = 20#DECLARE BXOFFS(3)BXOFF S(0) = ͯԯ¯BXOFFS(1) = ͯԯ¯BXOFFS(2) = ͯԯ¯BXOFFS(3) = ͯԯ¯.MUSICVARS'----------#DEFINE CHUNKMAX = 50#DECLARE CHUNKCNT, CHUNKIDX, VIDX, TMPO%, ROW#DECLARE ECHOM, ECHOB, ECHOSZ EFINE ǯ1 = 9#DEFINE ǯ2 = 10#DEFINE ǯ3 = 11#DEFINE ǯ1 = 12#DEFINE ǯ2 = 13#DEFINE ǯ3 = 14#DEFINE ǯ1 = 15#DEFINE ǯ2 = 16#DEFINE ǯ3 = 17#DEFINE ǯ1 = 18#DEFIN E ǯ2 = 19#DEFINE ǯ3 = 20#DEFINE ǯ4 = 21#DEFINE ǯ5 = 22#DEFINE ǯ1 = 0#DEFINE ǯ2 = 1#DEFINE ǯ3 = 2#DEFINE ǯ1 = 3#DEFINE ǯ2 = 4#DEFINE ǯ3 = 5#DEFINE ǯ1 = 6#DEF!INE ǯ2 = 7#DEFINE ǯ3 = 8#DEFINE ǯ4 = 9#DEFINE ǯ5 = 10#DEFINE ԯ = 7#DECLARE FX, FY#DECLARE XOFFS(ԯ) ' OFFSET INTO CYCLING OF GRAPHIC#DECLARE DRAWORDER(ԯ)DRAWORDER(0) = ǯ"DRAWORDER(1) = ǯDRAWORDER(2) = ǯDRAWORDER(3) = ǯԯDRAWORDER(4) = ǯ˯DRAWORDER(5) = ǯDRAWORDER(6) = ǯɯDRAWORDER(7) = ǯϯ#DECLARE OFFSAMOUNT(ԯ)OFFSAMOUNT(0) = .7OF#FSAMOUNT(1) = 0OFFSAMOUNT(2) = .1OFFSAMOUNT(3) = .5OFFSAMOUNT(4) = 1OFFSAMOUNT(5) = 1.5OFFSAMOUNT(6) = 2#DECLARE PALIDX, PTR.ANIMS'-----#DEFINE ͯ = 0#DEFINE ͯ = 1#DEFINE ͯ = 2#DEFINE ̯ͯ = 3#DEF$INE ̯ͯ = 4#DEFINE ͯ = 5#DEFINE ͯ = 6#DEFINE ͯ = 7#DEFINE ͯ = 8#DEFINE ͯ = 0#DEFINE ͯ = 1#DEFINE ͯ = 2#DEFINE ͯ = 10#DECLARE ANIMORDER(ͯ, ͯ, 10)%ANIMORDER(ͯ, ͯ, 0) = ǯ1ANIMORDER(ͯ, ͯ, 1) = ǯ2ANIMORDER(ͯ, ͯ, 2) = ǯ3ANIMORDER(ͯ, ͯ, 3) = ǯ2ANIMORDER(ͯ, ͯ, 0) = ǯ&1ANIMORDER(ͯ, ͯ, 1) = ǯ2ANIMORDER(ͯ, ͯ, 2) = ǯ3ANIMORDER(ͯ, ͯ, 3) = ǯ2ANIMORDER(ͯ, ͯ, 4) = ǯ1ANIMORDER(ͯ, ͯ, 0 ) = ǯ1ANIMORDER(ͯ, ͯ, 1) = ǯ2ANIMORDER(ͯ, ͯ, 2) = ǯ3ANIMORDER(ͯ, ͯ, 3) = ǯ2ANIMORDER(ͯ, ͯ, 4) = ǯ1ANIMORDER(ͯ, ͯRADIUS%, BTNSSTATE%()      GOSUB STORECIRCLE      LOADSTATE% = -1      GOTO NXTLP    BEND    IF LOADSTATE% =  THEN BEGIN      PRINT "ELLIPSE ";      GET#2,M0% : M0% = M0% AND 255 : PRINT M0%;      GET#2,M1% : M1% = M1% AND 255 :  FOR R = 1 TO 16    POKE BA + 8 + R - 1, ASC(MID$(A$, R, 1))  NEXT R  F$ = A$  RETURN'-------------.SAVEFILENAME'-------------  AD = $FF30  BANK 4  FOR R = 0 TO 16    POKE AD + R, 0  NEXT R  IF OF$ <> "" THEN BEGIN    TF$ = OF$  BEND : ELSE BEGIN    TF$="ELEVEN.OUT"  BEND  FOR R = 1 TO LEN(TF$)    POKE AD + R - 1, ASC(MID$(TF$, R, 1))  NEXT R  RETURN'------------.CHAINEDITOR'------------  GET A$  IF A$ <> "" THEN BEGIN    INPUT ZZ    IF ZZ=1 THEN STOP  BEND  PRINT "EDMA 0,$D400,$8000000,$2001:NEW RESTORE"  PRINT "RUN";  ' LOAD '11.EDIT' FROM CACHE  BANK 128  POKE 208, 2      ' NO# OF CHARS IN KEYBOARD BUFFER  POKE 688, 13, 13 ' RETURN CHARS  END'-------------.ISS$DEFINED'-------------  INSIDEIFDEF = 1  FOR K = 0 TO ELEMENTCNT(Я)    IF VARTABLE$(Я, K) = S$ THEN BEGIN      INSIDEIFDEF = 0    BEND  NEXT K  RETURN'----------------------.READINSTRUCTDETAILS'----------------------  CURSRCLINE$ = MID$(CURSRCLINE$, 9)  GOSUB READNEXTTOKEN  ' GET NEXT TOKEN IN S$  IF S$ = "" THEN BEGIN    PRINT "ERROR: NO STRUCT NAME FOUND"    SLEEP 1    RETURN  BEND  STRUCTNAME$(STRUCTCNT) = S$  STRUCTVARS$(STRUCTCNT) = CURSRCLINE$  STRUCTCNT = STRUCTCNT + 1  RETURN'---------------.READNEXTTOKEN'---------------  ' READ NEXT TOKEN FROM CURSRCLINE$ INTO S$  S$ = CURSRCLINE$  GOSUB STRIPTR$FROMBEGINNING  GOSUB STRIPTR$FROMEND  CURSRCLINE$ = S$  SF$ = " "  SF = 0  IF LEFT$(S$, 1) = DBLQUOTE$ THEN BEGIN    SF$ = DBLQUOTE$ + ", "    SF = 2  BEND  A = INSTR(CURSRCLINE$, SF$)  IF A <> 0 THEN BEGIN    S$ = MID$(CURSRCLINE$, 1, INSTR(CURSRCLINE$, SF$) + SF - 1)    CURSRCLINE$ = MID$(CURSRCLINE$, INSTR(CURSRCLINE$, SF$) + SF + 1)  BEND  IF A = 0 THEN BEGIN    S$ = CURSRCLINE$    CURSRCLINE$ = ""  BEND  RETURN'--------------.READNEXTLINE'--------------  ' READ NEXT LINE INTO CURSRCLINE$  BANK 0  CURLINELEN = PEEK(CURATTICADDR)  CURSRC	LINE$ = LEFT$(BLANKLINE$, CURLINELEN)  SRCLINEPTR = POINTER(CURSRCLINE$)  SRCLINEBUFFPTR = $10000 + WPEEK(SRCLINEPTR + 1)  CURATTICADDR = CURATTICADDR + 1  IF CURLINELEN <> 0 THEN BEGIN    EDMA 0, CURLINELEN, CURATTICADDR, SRC
LINEBUFFPTR    CURATTICADDR = CURATTICADDR + CURLINELEN  BEND  CURSRCLINENO = CURSRCLINENO + 1  TR$ = WHITESPACE$  S$ = CURSRCLINE$  GOSUB STRIPTR$FROMBEGINNING  CURSRCLINE$ = S$  QUOTEFLAG = 0    ' QUOTES ON  CUTTAILIDX = 0  ' CUT CHARS FROM TAIL  BANK 1  RETURN'-------------------------.SINGLEQUOTECOMMENTTRIM'-------------------------  CUTTAILIDX = INSTR(CURSRCLINE$, "'")  ' SINGLE QUOTE  IF CUTTAILIDX <> 0 THEN BEGIN    IF INSTR(CURSRCLINE$, DBLQUOTE$) <> 0 THEN BEGIN  ' DOUBLE QUOTE      CUTTAILIDX = 0      BANK 0      CURLINELENMINUSONE = PEEK(SRCLINEPTR) - 1      CURLINEBUFFADDR = WPEEK(SRCLINEPTR + 1)      BANK 1      FOR R = 0 TO CURLINELENMINUSONE        CHR = PEEK(CURLINEBUFFADDR + R)        IF CHR = DBLQUOTECHAR THEN BEGIN          QUOTEFLAG = ABS(QUOTEFLAG - 1)        BEND : ELSE BEGIN          IF CHR = SNGLQUOTECHAR AND QUOTEFLAG=0 THEN BEGIN            CUTTAILIDX = R + 1            R = 999          BEND        BEND      NEXT    BEND    IF CUTTAILIDX THEN BEGIN      CURSRCLINE$ = LEFT$(CURSRCLINE$, CUTTAILIDX - 1)    BEND  BEND  RETURN'----------------------------.PARSEPREPROCESSORDIRECTIVE'----------------------------  IF INSTR(CURSRCLINE$, "IFDEF") = 2 THEN BEGIN    S$ = MID$(CURSRCLINE$, 8)    GOSUB ISS$DEFINED    DELETELINEFLAG = 1  BEND  IF INSTR(CURSRCLINE$, "ENDIF") = 2 THEN BEGIN    INSIDEIFDEF = 0    DELETELINEFLAG = 1  BEND  IF INSTR(CURSRCLINE$, "DEFINE") = 2 THEN BEGIN    DEFINEFLAG = 1    GOSUB DECLARES$VAR    DEFINEFLAG = 0  BEND  IF INSTR(CURSRCLINE$, "DECLARE") = 2 THEN BEGIN    DEFINEFLAG = 0    GOSUB DECLARES$VAR   BEND  IF INSTR(CURSRCLINE$,"OUTPUT")=STATE%()=0  RETURN.ONCLICKSAVE'-------------  BORDER 3  ' FOR NOW, JUST SAVE TO A SINGLE HARD-CODED FILE  ^^DOPEN #2,"@TEST.V",W,U8  FOR K = 0 TO VECSIZE%-1    PRINT #2, CHR$(VECDATA%(K));  NEXT K  DCLOSE #2  RETURN.LOADERROR'----------  BORDER 2  LOADSTATE% = -4  RETURN.CHECKVECHEADER'----------------  RET% = 0  IF K<>ASC("V") THEN RETURN  GET#2, K:PRINT K;  IF K<>ASC("E") THEN RETURN  GET#2, K:PRINT K;  IF K<>ASC("C") THEN RETURN  RET% = 1  VECSIZE% = 3  LOADSTATE%=-1  RETURN.ONCLICKLOAD'-------------  ' FOR NOW, JUST LOAD FROM A SINGLE HARD-CODED FILE  LOADSTATE% = -4  ^^DOPEN #2,"TEST.V",R,U8  DO    GET#2, K:PRINT "RD=";K;    IF ST THEN EXIT    IF LOADSTATE% = -4 THEN BEGIN      PRINT "CHECKVEC ";      GOSUB CHECKVECHEADER      IF RET% = 0 THEN GOSUB LOADERROR:EXIT:ELSE GOTO NXTLP    BEND    IF LOADSTATE% = -1 THEN BEGIN      PRINT "NEWCMD ";      FILLSTATE% = (K AND 64)/64      BTNSSTATE%() = FILLSTATE%      K = K AND 63      LOADSTATE% = K    BEND    IF LOADSTATE% =  THEN BEGIN      PRINT "COLOUR ";      GET#2,K:PRINT K;      PEN 0, K      VECDATA%(VECSIZE%) =       VECSIZE% = VECSIZE% +1      VECDATA%(VECSIZE%) = K      VECSIZE #OUTPUT "TESTDEF"#DECLARE TMP1#DEFINE (VAL) TMP1 = VAL : GOSUB FUNC.MAIN  (1)  END.FUNC  PRINT TMP1  RETURN                                                                                                                            % = VECSIZE% +1      LASTCOLOUR% = K      SELECTEDCOLOUR% = K      LOADSTATE% = -1      GOTO NXTLP    BEND    IF LOADSTATE% =  THEN BEGIN      PRINT "LINE ";      GET#2,M0% : M0% = M0% AND 255 : PRINT M0%;      GET#2,M1% : M1% = M1%  "    :  FUNC(1):   A:                                                                                                                                                                                                                                AND 255 : PRINT M1%;      LX0% = M0% + (M1% << 8)      GET#2,M0% : M0% = M0% AND 255 : PRINT M0%;      GET#2,M1% : M1% = M1% AND 255 : PRINT M1%;      LY0% = M0% + (M1% << 8)      GET#2,M0% : M0% = M0% AND 255 : PRINT M0%;      GET#2,M1% : M1% = M1% AND 255 : PRINT M1%;      MX% = M0% + (M1% << 8)      GET#2,M0% : M0% = M0% AND 255 : PRINT M0%;      GET#2,M1% : M1% = M1% AND 255 : PRINT M1%;      MY% = M0% + (M1% << 8)      LINE LX0%, LY0%, MX%, MY%      GOSUB STORELINE      LOADSTATE% = -1      GOTO NXTLP    BEND    IF LOADSTATE% =  THEN BEGIN      PRINT "CIRCLE ";      GET#2,M0% : M0% = M0% AND 255 : PRINT M0%;      GET#2,M1% : M1% = M1% AND 255 : PRINT M1%;      CX0% = M0% + (M1% << 8)      GET#2,M0% : M0% = M0% ANDJD(0, ʯί) = įίJD(0, ʯ) = įJD(0, ʯЯ) = įЯJD(1, ʯ) = įJD(1, ʯЯ) = įЯJD(1, ʯ) = įJD(1, ʯί) = įίJD(1, ʯ) = įJD(1, ʯί) = įίJD(1, ʯ) = įJD(1, ʯЯ) = įЯ.IMGS'----#DEFINE ǯ = 0#DEFINE ǯ = 1#DEFINE ǯԯ = 2#DEFINE ǯ˯ = 3#DEFINE ǯ = 4#DEFINE ǯɯ = 5#DEFINE ǯϯ = 6#DEFINE ǯ = 7#DEFINE ǯ1 = 0#DEFINE ǯ2 = 1#DEFINE ǯ3 = 2#DEFINE ǯ1 = 3#DEFINE ǯ2 = 4#DEFINE ǯ3 = 5#DEFINE ǯ1 = 6#DEFINE ǯ2 = 7#DEFINE ǯ3 = 8#D  ' CHECK IF COMMAND TRIGGERS SHITTY SYNTAX MODE  ' TODO: COMPARE UBIK'S LOGIC HERE VERSUS MY OWN 4079 LC$="DOPEN" LOGIC  RETURN'-------------.MARKCURTOK$LABEL'-------------  CURTOK$ = MK$ + CURTOK$ + MK$  RETURN'----------------------- --------.SWAPOUTLABELINCURTOK$FORLINENO'-------------------------------  DIDREPLACEFLAG = 0  FOR ID = 0 TO LABELCNT - 1    IF CURTOK$ = LABELNAME$(ID) THEN BEGIN      CURTOK$ = STR$(LABELLINENO(ID))      ID = LABELCNT      DIDREPL!ACEFLAG = 1    BEND  NEXT ID  IF DIDREPLACEFLAG THEN RETURN  PARSERERROR$ = "?UNRESOLVED LABEL: '" + CURTOK$ + "' IN LINE" + STR$(MAPDESTTOSRCLINENO%(CURDESTLINENO - 1))  SLEEP 1  GOTO RETURNTOEDITORWITHERROR  RETURN'----------"--.CHECKBINARY'------------  BR = 0  ' RESULT  FOR B = 0 TO LEN(BI$) - 1    BC$ = MID$(BI$, LEN(BI$) - B, 1)    IF BC$ <> "1" AND BC$ <> "0" THEN BEGIN      BANK 4      POKE $FF08, 132      GOTO UNRESOLVEDCURTOK$    BEND    IF BC$="1" THEN# BR=BR+BINCONV(B)  NEXT B  RETURN'---------.CHECKHEX'---------  TRAP ILLEGALHEXHANDLER  VL = DEC(HX$)  TRAP  RETURN'-------------------.ILLEGALHEXHANDLER'-------------------  TRAP  BANK 4  POKE $FF08, 131  ' SET ILLEGAL HEX  GO$TO UNRESOLVEDCURTOK$  ' JUMP INTO ERROR HANDLER'----------------.GENERATEVARNAME'----------------  ' GENERATE VARNAME FROM INDEX  IF ID < 26 THEN BEGIN    GENVARNAME$ = CHR$(65 + ID)    RETURN  BEND  N2 = MOD(ID, 26)  N1 = INT(ID / 26) %- 1  GENVARNAME$ = CHR$(65 + N1) + CHR$(65 + N2)  ' AVOID ANY BASIC TERMS AS VAR NAMES  IF GENVARNAME$="DO" THEN GENVARNAME$="D1"  IF GENVARNAME$="GO" THEN GENVARNAME$="G1"  IF GENVARNAME$="TO" THEN GENVARNAME$="T1"  IF GENVARNAME$="DS" TH&EN GENVARNAME$="D2"  IF GENVARNAME$="DT" THEN GENVARNAME$="D3"  IF GENVARNAME$="EL" THEN GENVARNAME$="E1"  IF GENVARNAME$="ER" THEN GENVARNAME$="E2"  IF GENVARNAME$="FN" THEN GENVARNAME$="F1"  IF GENVARNAME$="IF" THEN GENVARNAME$="I1"  R'ETURN  STOP'------------.GETFILENAME'------------  BANK 4  BA = $FF00  IF PEEK(BA+0) = ASC("S") AND PEEK(BA+1) = ASC("K") THEN BEGIN    VERBOSE = PEEK($FF07) AND 8    F$ = ""    A = BA + $10    DO WHILE PEEK(A) <> 0      F$ = F$ + CHR$(PE EK(A))      A = A + 1    LOOP    IF PEEK($FF07) AND 1 THEN RETURN    PRINT "FILENAME? " + F$    PRINT "";  BEND  INPUT "FILENAME"; A$  IF A$ = "" THEN BEGIN    PRINT "NO FILENAME SET"    END  BEND  POKE BA, ASC("S")  POKE BA + 1, ASC("K") r#OUTPUT "DRAWSPRITE"GOSUB INITGOSUB MAINLOOPGOSUB ENDER.INIT  RETURN.MAINLOOP  RETURN.ENDER  RETURN                                                                                                                                             MP%=PX%(J%)        PX%(J%) = PX%(J%+1)        PX%(J%+1) = TMP%        SWAPPED% = 1      BEND    NEXT J%    IF SWAPPED% = 0 THEN I% = PIDX%  ' EXIT EARLY  NEXT I%#IFDEF ǯ  FOR I%=0 TO PIDX%-1    CHAR 4+I%*4,10,1,1,2,STR$(PX%(I%))  NEXT I%  GETKEY A$#ENDIF  RETURN.DRAWHORIZONTALINTERSECTS'--------------------------  GOSUB FINDINTERSECTS  GOSUB SORTINTERSECTS  FOR IDX%=0 TO PIDX%-1 STEP 2    LINE PX%(IDX%),Y%,PX%(IDX%+1),Y%  NEXT IDX%  RETURN.FILLPOLY'---------  GOSUB FINDYMINYMAX  FOR Y%=YMIN% TO YMAX%    GOSUB DRAWHORIZONTALINTERSECTS  NEXT Y%  RETURN.STOREPOLY'----------  STOR%(0) =  + 64 * BTNSSTATE%()  STOR%(1) = POLYIDX%  STORCNT% = 1  FOR K = 0 TO POLYIDX%-1    MX% = POLYX%(K)    MY% = POLYY%(K)    STORCNT%=STORCNT%+1 : STOR%(STORCNT%) = MX% AND 255    STORCNT%=STORCNT%+1 : STOR%(STORCNT%) = MX% >> 8    STORCNT%=STORCNT%+1 : STOR%(STORCNT%) = MY% AND 255    STORCNT%=STORCNT%+1 : STOR%(STORCNT%) = MY% >> 8  NEXT K  GOSUB STORE  RETURN.ONCLICKPOLY'-------------  IF POLYSTATE% = 0 THEN BEGIN    GOSUB STORECOLOUR    POLYSTATE% = 1    POLYIDX% = 0  BEND    IF POLYIDX% > 0 THEN BEGIN    IF POLYX%(POLYIDX%-1)=MX% AND POLYY%(POLYIDX%-1)=MY% THEN BEGIN      LINE MX%,MY%,POLYX%(0),POLYY%(0)      GOSUB STOREPOLY      POLYSTATE% = 0      IF BTNSSTATE%() = 1 THEN GOSUB FILLPOLY      RETURN    BEND  BEND  POLYX%(POLYIDX%) = MX%  POLYY%(POLYIDX%) = MY%  IF POLYIDX% = 0 THEN BEGIN    DOT MX%, MY%  BEND:ELSE BEGIN    LINE POLYX%(POLYIDX%-1), POLYY%(POLYIDX%-1), MX%, MY%  BEND  POLYIDX% = POLYIDX% + 1  RETURN.ONCLICKFILL'-------------  IF BTNSSTATE%() = 0 THEN BTNSSTATE%()=1:ELSE BTNS	 BEGIN        PEN 0,3        BOX X%*8, Y%*8, W%*8, H%*8, 1        PEN 0,0      BEND    BEND    CHAR X%+1, Y%*8+4, ү, ү, үү, BTNSTEXT$(K)    PEN 0, 1  NEXT K  PEN 0,SELECTEDCOLOUR% : SPRITE 0,1,SELECTEDCOLOUR%  RE
TURN.STORECOLOUR'------------  IF LASTCOLOUR% <> SELECTEDCOLOUR% THEN BEGIN    VECDATA%(VECSIZE%) =  : VECSIZE% = VECSIZE% + 1    VECDATA%(VECSIZE%) = SELECTEDCOLOUR% : VECSIZE% = VECSIZE% + 1    LASTCOLOUR% = SELECTEDCOLOUR%  BEND  RETURN.STORE'-----  FOR K = 0 TO STORCNT%    VECDATA%(VECSIZE%) = STOR%(K)    VECSIZE% = VECSIZE% + 1  NEXT K  RETURN.STORELINE'----------  STOR%(0) =  + 64 * BTNSSTATE%()  STOR%(1) = LX0% AND 255 : STOR%(2) = LX0% >>  _X),V4$(MUSICCHUNKINDEX)  BARINDEX=BARINDEX+1  IF BARINDEX=5 THEN BARINDEX=1  RETURN                                                                                                                                                                8  STOR%(3) = LY0% AND 255 : STOR%(4) = LY0% >> 8  STOR%(5) = MX% AND 255 : STOR%(6) = MX% >> 8  STOR%(7) = MY% AND 255 : STOR%(8) = MY% >> 8  STORCNT% = 8 : GOSUB STORE  RETURN.ONCLICKLINE'-------------  IF LINESTATE% = 0 THEN BEGIN    GOSUB STORECOLOUR    LX0%=MX%    LY0%=MY%    DOT MX%,MY%    LINESTATE%=1  BEND:ELSE IF LINESTATE% = 1 THEN BEGIN    LINE LX0%, LY0%, MX%, MY%    GOSUB STORELINE    LINESTATE% = 0  BEND  RETURN.STORECIRCLE'------------  STOR%(0) =  + 64 * BTNSSTATE%()  STOR%(1) = CX0% AND 255 : STOR%(2) = CX0% >> 8  STOR%(3) = CY0% AND 255 : STOR%(4) = CY0% >> 8  STOR%(5) = RADIUS% AND 255 : STOR%(6) = RADIUS% >> 8  STORCNT% = 6 : GOSUB STORE  RETURN.ONCLICKCIRCLE'--------------  FOR ID = 0 TO ELEMENTCNT(TY)    IF CURTOK$ = VARTABLE$(TY, ID) THEN BEGIN      GOSUB GENERATEVARNAME      CURTOK$ = GENVARNAME$ + TYPEIDENT$(TY)      ID = ELEMENTCNT(TY)      DIDREPLACEFLAG = 1    BEND  NEXT ID  IF DIDREPLACEFLAG = 1 THEN RETURN  ' CHECK DEFINES TABLE TOO  ' - - - - - - - - - - - -  FOR ID = 0 TO ELEMENTCNT(Я)    IF CURTOK$ = VARTABLE$(Я, ID) THEN BEGIN      CURTOK$ = DEFINEVAL$(ID)      RETURN    BEND  NEXT ID  ' CHECK FOR STRUCT NAMES  ' ----------------------  FOUNDSTRUCTIDX = -1  FOR ID = 0 TO STRUCTCNT - 1  ' CHECK STRUCT NAMES    IF CURTOK$ = STRUCTNAME$(ID) THEN BEGIN      GOSUB CHECKFORCREATIONOFSTRUCTOBJECT      FOUNDSTRUCTIDX = ID      ID = STRUCT-  IF CIRCLESTATE% = 0 THEN BEGIN    GOSUB STORECOLOUR    CX0%=MX%    CY0%=MY%    CIRCLESTATE%=1  BEND:ELSE IF CIRCLESTATE% = 1 THEN BEGIN    RADIUS% = SQR( (MX%-CX0%)^2 + (MY%-CY0%)^2 )    CIRCLE CX0%, CY0%, RADIUS%, BTNSSTATE%()    GOSUB STORECIRCLE    CIRCLESTATE% = 0  BEND  RETURN.STOREELLIPSE'-------------  STOR%(0) =  + 64 * BTNSSTATE%()  STOR%(1) = EX0% AND 255 : STOR%(2) = EX0% >> 8  STOR%(3) = EY0% AND 255 : STOR%(4) = EY0% >> 8  STOR%(5) = XRADIUS% AND 255 : STOR%(6) = XRADIUS% >> 8  STOR%(7) = YRADIUS% AND 255 : STOR%(8) = YRADIUS% >> 8  STORCNT% = 8 : GOSUB STORE  RETURN.ONCLICKELLIPSE'----------------  IF ELLIPSESTATE% = 0 THEN BEGIN    GOSUB STORECOLOUR    EX0%=MX%    EY0%=MY%CNT - 1  ' CREATE NEW STRUCT OBJECT    BEND  NEXT ID  IF FOUNDSTRUCTIDX <> -1 THEN BEGIN    RETURN  BEND  '  TOKEN CHECK  ' - - - - - - -  IF ASC(CURTOK$) = 222 THEN RETURN  ' CHECK FOR DUMB COMMANDS  ' - - - - - - - - - - - -  ' :  THINK LC$ BELOW SHOULD BE REPLACED WITH TOKNAME$  ' ----  IF INSTR(DUMBCMDS$, LC$) <> 0 AND _    (CURTOK$ = "R" OR CURTOK$ = "P"      OR CURTOK$ = "U8" OR CURTOK$ = "W") THEN BEGIN    RETURN  BEND.UNRESOLVEDCURTOK$  PARSERERROR$ = "?UNRESOLVED IDENTIFIER: '" + CURTOK$ + "' IN LINE " + STR$(SRCLINENO)  SLEEP 1  GOTO RETURNTOEDITORWITHERROR  RETURN'---------------------------------------.CHECKIFCOMMANDTRIGGERSSHITTYSYNTAX'---------------------------------------F EXPECTINGLABEL AND DONTMARKLABEL = 0 THEN BEGIN    GOSUB MARKCURTOK$LABEL    EXPECTINGLABEL = 0    RETURN  ' REPLACE LABEL  BEND  IF CURTOK$ = "GOTO" THEN NEXTLINEFLAG = 1  ' ARE WE EXPECTING A LABEL NEXT?  ' - - - - - - - - - - - - - - -  IF CURTOK$ = "GOTO" OR CURTOK$ = "GOSUB" OR CURTOK$ = "TRAP" THEN BEGIN    EXPECTINGLABEL = 1  BEND  ' CHECK HEX VALUE  ' - - - - - - - -  IF LEFT$(CURTOK$, 1) = "$" THEN BEGIN    HX$ = MID$(CURTOK$, 2)    GOSUB CHECKHEX    RETDIF  RETURN'---------.POLLPLAY'---------  IF RPLAY(1) THEN RETURN  IF BARINDEX>22 THEN RETURN  MUSICCHUNKINDEX=MAPBARTOCHUNK(BARINDEX)    PLAY V1$(MUSICCHUNKINDEX),V2$(MUSICCHUNKINDEX),V3$(MUSICCHUNKINDEX)  SLEEP .02  PLAY ,,,VURN   BEND  ' CHECK BINARY VALUE  ' - - - - - - - - -  IF LEFT$(CURTOK$, 1) = "%" THEN BEGIN    BI$ = MID$(CURTOK$, 2)    GOSUB CHECKBINARY    RETURN  BEND  TOKNAME$ = " " + CURTOK$ + " "  ' IGNORE EXISTING VOCABULARY OF FUNCTIONS/COMMANDS  ' - - - - - - - - - - - - - - - - - - - - - - - -   FOR T = 0 TO 6    IF INSTR(TOKENS$(T), TOKNAME$) <> 0 THEN BEGIN      LC$ = CURTOK$      GOSUB CHECKIFCOMMANDTRIGGERSSHITTYSYNTAX      RETURN    BEND  NEXT  ' CHECK TO SWAP OUT VARIABLES WITH SHORT NAMES  ' - - - - - - - - - - - - - - - - - - - - - -  DIDREPLACEFLAG = 0  ' DID REPLACE FLAG  T$ = RIGHT$(CURTOK$, 1)  TY = Я  IF T$ = "%" THEN TY = Я  IF T$ = "$" THEN TY = Я  IF T$ = "&" THEN TY =  g4$(MUSICCHUNKINDEX),V5$(MUSICCHUNKINDEX),V6$(MUSICCHUNKINDEX)  BARINDEX=BARINDEX+1  RETURN                                                                                                                                                             ELLIPSESTATE%=1    BEND:ELSE IF ELLIPSESTATE% = 1 THEN BEGIN    XRADIUS% = ABS(MX%-EX0%)    YRADIUS% = ABS(MY%-EY0%)    ELLIPSE EX0%, EY0%, XRADIUS%, YRADIUS%, BTNSSTATE%()    GOSUB STOREELLIPSE    ELLIPSESTATE% = 0  BEND  RETUR!N.STOREBOX'---------    STOR%(0) =  + 64 * BTNSSTATE%()    STOR%(1) = BX0% AND 255 : STOR%(2) = BX0% >> 8    STOR%(3) = BY0% AND 255 : STOR%(4) = BY0% >> 8    STOR%(5) = MX% AND 255 : STOR%(6) = MX% >> 8    STOR%(7) = MY% AND 255 : STOR%"(8) = MY% >> 8    STORCNT% = 8 : GOSUB STORE    RETURN.ONCLICKBOX'------------  IF BOXSTATE% = 0 THEN BEGIN    GOSUB STORECOLOUR    BX0%=MX%    BY0%=MY%        BOXSTATE%=1  BEND: ELSE IF BOXSTATE% = 1 THEN BEGIN    BOX BX0%, BY0%, M#X%, MY%, BTNSSTATE%()    GOSUB STOREBOX    BOXSTATE% = 0  BEND  RETURN.FINDYMINYMAX'--------------  YMIN% = POLYY%(0)  YMAX% = POLYY%(0)  FOR IDX% = 0 TO POLYIDX%-1    IF POLYY%(IDX%) < YMIN% THEN YMIN% = POLYY%(IDX%)    IF PO$LYY%(IDX%) > YMAX% THEN YMAX% = POLYY%(IDX%)  NEXT IDX%  RETURN .ISYINLINEYRANGE'-------------------  RET% = 0: REV% = 0  Y0% = POLYY%(IDX%-1)  Y1% = POLYY%(IDX%)  IF Y0% > Y1% THEN TMP%=Y0%:Y0% = Y1%:Y1% = TMP%:REV%=1  IF Y0% <= Y% AND% Y% < Y1% THEN RET% = 1  RETURN.CHECKLINEINTERSECT'--------------------  GOSUB ISYINLINEYRANGE  IF RET% = 0 THEN RETURN  X0% = POLYX%(IDX%-1)  X1% = POLYX%(IDX%)  IF REV%=1 THEN TMP%=X0%:X0% = X1%:X1% = TMP%  IF X0% = X1% THEN X% =X0%&:RET% = 1:RETURN  M = (Y1%-Y0%) / (X1% - X0%)  C = Y0% - M * X0%    X% = (Y% - C) / M  RET% = 1  RETURN  .FINDINTERSECTS'---------------  PIDX% = 0  ' CHECK LAST-POINT TO FIRST  POLYX%(POLYIDX%) = POLYX%(0)  POLYY%(POLYIDX%) = POLYY'%(0)  FOR IDX% = 1 TO POLYIDX%    GOSUB CHECKLINEINTERSECT    IF RET% = 1 THEN PX%(PIDX%)=X% : PIDX% = PIDX% + 1  NEXT IDX%  RETURN.SORTINTERSECTS'---------------  ' BUBBLE SORT ALGORITHM FROM: GEEKSFORGEEKS.ORG/BUBBLE-SORT  #IFDEF   GOSUB CLEARMENU  CHAR 0,0,1,1,2,STR$(PIDX%-1)  FOR I%=0 TO PIDX%-1    CHAR 4+I%*4,0,1,1,2,STR$(PX%(I%))  NEXT I%#ENDIF  FOR I% = 0 TO PIDX%-2    SWAPPED% = 0    FOR J% = 0 TO PIDX%-I%-2      IF PX%(J%) > PX%(J%+1) THEN BEGIN        T 7,0,9,9,0,2,1100  ENVELOPE 8,0,12,3,5,2,1100  ENVELOPE 9,0,10,3,5,2,1100  ' *** VOICE1 - GUITAR1 ***  ' ------------------------  V1$(0)="T2O6M2 QDIR QC.R QDIR QC.R QDIR QC.R QDIR QC.R"  V1$(1)="T2O6M2 QDIR QC.R QDIR QC.R P9A IR QAIR P0IDP9O5A O5IAO6DA Q.G IDO5A IBO6DG Q.A IGD O5BO6EG Q.A IGE O5IBO6DG Q.A IGD  O5BO6EGQA IG#FE "  V1$(2)="T2O6M2 QDIR QC.R QDIR QC.R  IDDFQ.DIFD O5Q.#AHO6CIR O5#AQ#AO6HCIR IDDFHDIR  DDFQ.DIFD O5Q.#AHO6CIR O5#AQ#AO6HCIR O5Q.A O6HE IR  V1$(3)="T2O6M2 IGG#GHGIR O5Q.G O6HD IR AA#AHA IR A O6D #F QE I#F QD  Q.#F.EDO6.G.#FE O5G I#A O6 QE O5I#A O6QE QDIR QC.R QDIR QC.R  V1$(3)=V1$(3)+"O6Q.G.#FE O5G I#A O6QE O5I#A O6QE QDIR QC.R QDIR QC.R QDIR QC.R QDIR QC.R"  ' *** VOICE2 - GUITAR2 ***  ' ------------------------  V2$(0)="T2O5M4 QAIR Q#G.R QAIR Q#G.R QAIR Q#G.R QAIR Q#G.R"  V2$(1)="T2O5M4 QAIR Q#G.R QAIR Q#G.R  O5 Q.#C .D O6I#FD O5D#FAO6Q.D IO5A#F  EGBO6Q.E O5IBG EAO6#CQ.E I#CO5A EGBO6Q.E O5IBG EAO6#CQE ID#CD"  V2$(2)="T2O5M4 QAIR Q#G.R QAIR Q#G.R  IAAO6CO5Q.AIGA Q.FHG IR IFQF HG IR IAAO6CO5HA IR  AAO6CO5Q.AIGA Q.FHG IRFQF HG IR Q.E .A O6E "  V2$(3)="T2O5M4 IGG#G HG IR Q.D HG IR DDGHD IR DDAQGIAQD Q.A.G#F .#A .A G  O5QEIGQ#AIG#AO6C QAIR Q#G.R QAIR Q#G.R Q.#A .A G O5QEIGQ#AIG#AO6C"  V2$(3)=V2$(3)+"QAIR Q#G.R QAIR Q#G.R QAIR Q#G.R QAIR Q#G.R"  ' *** VOICE3 - BASS ***  ' ---------------------  V3$(0)="X1T7O2M1 ID QR P1 ICD QR ICD SF#F QD IR O1AO2CO1A   O2ID QR P1 ICD QR ICD SF#F QD IR O1AO2CO1A"  V3$(1)="X1T7O2M1 ID QR P1 ICD QR ICD SF#F QD QR IR O1A T8 O2Q.#CQD IDE#F Q.#F O1A IA O2Q#C O1Q.E E IEBG Q.A A IA O2QC Q.E E IE O1 QB Q.A A O2IE QA"  V3$(2)="X1T7O2M1 ID QR P1 ICD QR ICD SF#F QD IR O1AO2CO1A"  V3$(2)=V3$(2)+"T9O2IDDDDDDDD O1#A#A#A#A#A#A#A#A #A#A#A#A#A#A#A#A O2DDFQDIDDDDDDDDDDD O1#A#A#A#A#A#A#A#A #A#A#A T8O2QCICCC O1Q.AAIAAA"  V3$(3)="O2Q.DDIDDD O1Q.GGI#AA#A Q.#A#AI#AQ#A Q.AAIAQA O2Q.DDIO1GO2QD Q.EEIEQE O1Q.AAIAQA T7O2 ID QR P1 ICD QR ICD SF#F QD IR O1AO2CO1A"  V3$(3)=V3$(3)+"O2Q.EEIEQE O1Q.AAIAQA T7O2 ID QR P1 ICD QR ICD SF#F QD IR O1AO2CO1A  T	7O2 ID QR P1 ICD QR ICD SF#F QD IR O1AO2CO1A"  ' *** VOICE4 - MELODY ***  ' -----------------------  V4$(0)=""  V4$(1)="T4O5P0 QR M2ID M4QD P5 M1O4#G H.A IAQA   O5Q.E H#F IR #F#FA QG IG#F W M5 .G P9M2O4IA O5I.B.A SG#F AGABAB QG O4IAB O5H#F SG#F Q.E.
D"  V4$(2)="O5T4P7WDHRQ.RICP5O5IDDFQ.GIFDQ.FSEDHCIFFAQGIFDSCP2H.DP5I.RICDDFQ.GIFD Q.F SED HC IFFAQGIFD IGP1H.A P7IRA"  V4$(3)="T4 IO6DD#DQDICO5#AH.#AQ.R IAA#AQAIAGP1WAP7IR"  V4$(3)=V4$(3)+"HRI#FGAQ.GI#FG#FHERIR DHDRR IR#FGAQ.GI#FG#FHERIR DHD"  RETURN'---------.POLLPLAY'---------  IF RPLAY(1) THEN RETURN  MUSICCHUNKINDEX=MAPBARTOCHUNK(BARINDEX)    PLAY V1$(MUSICCHUNKINDEX),V3$(MUSICCHUNKINDEX),V4$(MUSICCHUNKINDEX)  SLEEP .05  PLAY ,,,V2$(MUSICCHUNKINDEX),V3$(MUSICCHUNKINDEGR O2GR BRBR O1GR O2GR O1GG O2GR O1GR O2GR O1GG O2GR"  ' *** FINAL INTERLUDE INTRO ***  V1$(12)="T8M5O5P0 H.#FIRS#F#F Q.GSGGIGSRIGSRIG":V1$(12)=V1$(12)+V1$(12)+V1$(12):V1$(12)=V1$(12)+"H.#FIRS#F#F Q.GSGGIFSRIFSRIF"  V2$(12)="T8O3H.DIRSDD Q.DSDDO2IASRIASRIA O3H.DIRSDD Q.DSDDIDSRIDSRID H.DIRSDD Q.DSDDO2IASRIASRIA H.DIRSDD Q.DSDD O2I#GSRI#GSRI#G"  V3$(12)="T3O2 QBRRIRSBB Q.BSBBIDSRIDSRID QBRRIRSBB Q.BSBBIDSRIDSRID O1GR O2GR O1GG O2GR O1GR O2GR O1GG O2GR O1GR O2GR O1GG O2GR O1GR O2GR IDSRIDSRID"  V4$(12)="M0P0T7O1H.DIRSDD Q.DSDDIDSRIDSRID":V4$(12)=V4$(12)+V4$(12)+V4$(12):V4$(12)=V4$(12)+"H.DIRSDD Q.DSDD I#GSRI#GSRI#G"  V5$(12)="T8O3H.AIRSAA Q.ASAAIDSRIDSRID H.AIRSAA Q.ASAAIASRIASRIA H.AIRSAA Q.ASAAIDSRIDSRID H.AIRSAA Q.ASAA I#CSRI#CSRI#C"  V6$(12)="T3O2 QBRRIRSBB Q.BSBBIDSRIDSRID QBRRIRSBB Q.BSBBIDSRIDSRID O1GR O2GR O1GG O2GR O1GR O2GR O1GG O2GR O1GR O2GR O1GG O2GR O1GR O2GR IDSRIDSRID"  ' *** FINAL INTERLUDE 1 ***  V1$(13)="O5T8W.E QO6IDP5SRI#CSR O5IB H.A IRB WB WE O6H#C O5A WG R"  V2$(13)="T6O2 IAAAAAAAA AAAAAAAA EEEEEEEE EEEE T8QGB T6IAAAAAAAA AAAAAAAA EEEEEEEE EEEE T8QGB"  V3$(13)="T3O2I O1GR O2GR O1GG O2GR O1GR O2GR O1GG O2GR O1GR O2GR O1GG O2GR O1GR O2GR BRBR":V3$(13)=V3$(13)+V3$(13)  V4$(13)="O4T8W.E QO5IDP5SRI#CSR O4IB H.A IRB WB WE O5H#C O4A WG R"  V5$(13)="T6O3 IEEEEEEEE EEEEEEEE O2BBBBBBBB BBBBO3 T8QD#F T6IO3EEEEEEEE EEEEEEEE O2BBBBBBBB BBBBO3 T8QD#F"  V6$(13)="T3O2I O1GR O2GR O1GG O2GR O1GR O2GR O1GG O2GR O1GR O2GR O1GG O2GR O1GR O2GR BRBR":V6$(13)=V6$(13)+V6$(13)  ' *** FINAL INTERLUDE 2 ***  V1$(14)="O6T8W.#C Q#CIO5BO6#C HD IREF HEIR"  V2$(14)="T7M0O2 SARARARARARARARAR ARARARARARARARAR #AR#AR#AR#AR#AR#AR#AR#AR T8Q.EIEQEE"  V3$(14)="T3I O1GR O2GR O1GG O2GR O1GR O2GR O1GG O2GR O1GR O2GR O1GG O2GR BRR BBRBR"  V4$(14)="O5T8W.#C Q#CIO4BO5#C HD IREF HEIR"  V5$(14)="T7M0P0O3 SERERERERERERERER ERERERERERERERER FRFRFRFRFRFRFRFR T8O2 Q.BIBQBB"  V6$(14)="T3I O1GR O2GR O1GG O2GR O1GR O2GR O1GG O2GR O1GR O2GR O1GG O2GR BRR BBRBR"  ' *** FINAL IM ALIVE CHORUS ***  V1$(15)="T7M5O5P0 QBB P3O6H.#C O5QBQ.BIR QP0BB P3H.O6#CP1O5QBQ.BIR QP0BB P3H.O6#CP1O5QBQ.BIR QP0BB T1O6HC"  V2$(15)="SO2AO3AO2AO3AO2AO3AO2AO3A O2AO3AO2AO3AO2AO3AO2AO3A O2Q.E IEQEE":V2$(15)="T7P0M1O2QEE"+V2$(15)+V2$(15)+V2$(15)+"P1T1HF"  V3$(15)="T3I O2BRBR O1GR O2GR O1GG O2GR BRRB BRBR O1GR O2GR O1GG O2GR BRRB BRBR O1GR O2GR O1GG O2GR BRRB BRBR O1HG"  V4$(15)="P0T7O5Q#G#G P2H.A Q#GQ.#GIR Q#G#G H.A Q#GQ.#GIR Q#G#G H.A Q#GQ.#GIR Q#G#G T1 P1SFHO2F"  V5$(15)="QT6O4EE O5IP0AE#CO4A O5IP0AE#CO4A O5B#GEO4B O5B#GEO4B O5IP0AE#CO4A O5IP0AE#CO4A O5B#GEO4B O5B#GEO4B"  V5$(15)=V5$(15)+"O5SP0AE#CEAE#CE AE#CEAE#CE B#GE#GB#GE#G B#GE#GB#GE#G O5T1SEP1O2HE"  V6$(15)="T3I O2BRBR O1GR O2GR O1GG O2GR BRRB BRBR O1GR O2GR O1GG O2GR BRRB BRBR O1GR O2GR O1GG O2GR BRRB BRBR O1HG"#EN1$(9)="T7M5O5QP0AA ARIRP7 #F#G QAIAQA#G#F H#F S#FE#F#G#F#G HEIR"  V2$(9)="T7P0M1O2QGO3D O2QAAIAQAIO3D O2Q#F#FI#FQ#FIB QDDIDQDI#F QEE"  V3$(9)="T3O2 IBRBR O1GR O2GR O1GG O2GR O1GR O2GR BRBR O1GR O2GR O1GG O2GR O1GR O2GR"  V4$(9)="T7M5O6QP0GP9S#FD#FG QERIR T0O6P0#FP8#G QAIAQA#G#F H#F S#FE#F#G#F#G HEIR"  V5$(9)="T7P0M1O3QDA EEIEQEIA O3Q#C#CI#CQ#CI#F O2 QAAIAQAIO3#C O2QBB"  V6$(9)="T3O2 IBRBR O1GR O2GR O1GG O2GR O1GR O2GR BRBR O1GR O2GR O1GG O2GR O1GR O2GR"  ' *** SEEMS LIKE FOREVER ***  V1$(10)="T7M5O5QP0IEP5SDEIDS#CO5D Q#CIO5DQD T2P0I#FP5A#G QRR T7M5O5P0IEP5SDEIDS#CD Q#CIO5DQD T2P0I#FP5A#G Q.R P0T7IF P7SFEF#F#G#F#GAHAR"  V2$(10)="T7P0M1O3QEO2#G QBB IO3#FD#FQEIEEE O3QEO2#G QBB IO3#FD#FQEIEEE #F#F#G#G Q.#FI#F#F#F#F#F"  V3$(10)="T3O2 IBRBR O1GR O2GR O1GG O2GR O1GR O2GR BRBR O1GR O2GR O1GG O2GR O1GR O2GR O1GR O2GR O1GG O2GR O1GG O2GR"  V4$(10)="T0M4O4P0IEP8SDEIDS#CD Q#CIO4DQD O5T2P0IAP5O6#CO5B QRR T0M4O4P0IEP8SDEIDS#CD Q#CIO4DQD O5T2P0IAP5O6#CO5B Q.R O4P0T0IFP9SFEF#F#G#F#GAHAR"  V5$(10)="T7P0M1O3QBE #F#F IA#FA Q#G I#G#G#G QBE #F#F IA#FA Q#G I#G#G#G AABB QO4.#C I#C#C#C#C#C"  V6$(10)="T3O2 IBRBR O1GR O2GR O1GG O2GR O1GR O2GR BRBR O1GR O2GR O1GG O2GR O1GR O2GR O1GR O2GR O1GG O2GR O1GG O2GR"  ' *** IM ALIVE CHORUS3 ***  V1$(11)="T7M5O5P0QBB P3HO6#C O5IBO6#CDH#CIR O5QBB P3HO6#C O5IBO6#CDH#CIR O5QBB HO6#C O5IBO6#CDH#CIR SP9O5BABO6#CO5BO6#CO5AB"  V2$(11)="T7P0M1O3QEE SAEAEAEAE #GE#GE#GE#GE #FE#FE#FE#FE EBEBEBEB SAEAEAEAE#GE#GE#GE#GE#FE#FE#FE#FE EBEBEBEB SAEAEAEAE#GE#GE#GE#GE#FE#FE#FE#FE EBEBEBEB"  V3$(11)="T3O2 IBRBR O1GR O2GR O1GG O2GR O1GR O2GR BRBR O1GR O2GR O1GG O2GR O1GR O2GR BRBR O1GR O2GR O1GG O2GR O1GR O2GR O1GG O2GR"  V4$(11)="T7M5O5P0Q#G#G P3HA I#GABHAIR Q#G#GHA I#GABHAIR Q#G#GHA I#GABHAIR P9S#G#F#GA#F#GE#F"  V5$(11)="QT6O4EE O5IP0AE#CO4A O5BE#CO4A O6#CO5E#CO4A O6EO5B#GE O5IP0AE#CO4A O5BE#CO4A O6#CO5E#CO4A O6EO5B#GE"  V5$(11)=V5$(11)+"O5SP0AE#CEAE#CE BE#CEBE#CE O6#CO5E#CEO6#CO5E#CE O6EO5B#GBO6EO5B#GB"  V6$(11)="T3O2 IBRBR O1GR O2GR O1GG O2GR O1GR O2GR BRBR O1GR O2GR O1GG O2GR O1ETOWHITE'-------------  FOR FADEVAL=0 TO 16    GOSUB FADECOLOURSTOWHITE    SLEEP .05  NEXT FADEVAL  RETURN.FADETOBLACK'-------------  GOSUB STORECURRCOLOURS  FOR FADEVAL=0 TO 16    GOSUB FADECOLOURSTOBLACK    SLEEP .05  NEXT FAD EVAL  RETURN.FADETODEFAULTS'----------------  GOSUB STORECURRCOLOURS  FOR FADEVAL=0 TO 16    GOSUB FADECOLOURSTODEFAULTS    SLEEP .05  NEXT FADEVAL  RETURN'====.INIT'====  ' SWITCH BACK TO UPPER-CASE  POKE $D018, PEEK($D018) AND $F!D  ^^BLOAD "INTRO.DAT",P($40000),R  ' $4,0000 +------------------+ .  '         !  LOGO CHARS   !  ' $4,070 +..................+  '         !  LOGO COLORS  !  ' $4,00 +..................+  '         ! 32 X   !  ' $4,1"000 +..................+  '         !  COLORS     !  ' $4,270 +..................+  '         !  FRAMES   !  ' $4,54 +------------------+  GOSUB INITMUSIC  GOSUB STOREDEFAULTCOLOURS  RETURN.STOREDEFAULTCOLOURS'------------#---------  FOR K = 0 TO 31    DEFAULTRED(K)=PEEK($D100+K)    DEFAULTGREEN(K)=PEEK($D200+K)    DEFAULTBLUE(K)=PEEK($D300+K)  NEXT K  RETURN.STORECURRCOLOURS'------------------  FOR K = 0 TO 31    CURRRED(K)=PEEK($D100+K)    CURRGREEN(K)$=PEEK($D200+K)    CURRBLUE(K)=PEEK($D300+K)  NEXT K  RETURN.FADECOLOURSTOWHITE'---------------------  ': FADEVAL=0 TO 16  TEMPVAL = FADEVAL / 16  FOR K = 0 TO 31    POKE $D100+K, DEFAULTRED(K) + (15 - DEFAULTRED(K)) * TEMPVAL    POK%E $D200+K, DEFAULTGREEN(K) + (15 - DEFAULTGREEN(K)) * TEMPVAL    POKE $D300+K, DEFAULTBLUE(K) + (15 - DEFAULTBLUE(K)) * TEMPVAL  NEXT K  RETURN.FADECOLOURSTODEFAULTS'------------------------  ': FADEVAL=0 TO 16  TEMPVAL = FADEVAL / 16&  FOR K = 0 TO 31    POKE $D100+K, CURRRED(K) + (DEFAULTRED(K)-CURRRED(K)) * TEMPVAL    POKE $D200+K, CURRGREEN(K) + (DEFAULTGREEN(K)-CURRGREEN(K)) * TEMPVAL    POKE $D300+K, CURRBLUE(K) + (DEFAULTBLUE(K)-CURRBLUE(K)) * TEMPVAL  NEXT K  RE'TURN.FADECOLOURSTOBLACK'---------------------  TEMPVAL = (16-FADEVAL) / 16  FOR K = 0 TO 31    POKE $D100+K, CURRRED(K) * TEMPVAL    POKE $D200+K, CURRGREEN(K) * TEMPVAL    POKE $D300+K, CURRBLUE(K) * TEMPVAL  NEXT K  RETURN'========== .INITMUSIC'==========  PLAY  BARINDEX=0  MAPBARTOCHUNK(0)=0  MAPBARTOCHUNK(1)=1  MAPBARTOCHUNK(2)=1  MAPBARTOCHUNK(3)=2  MAPBARTOCHUNK(4)=3  FILTER 1,100,1  FILTER 2,100,1  ENVELOPE 2,3,3,3,10,0  ENVELOPE 4,9,4,9,8  ENVELOPE1GR O2GR O1GG O2GR O1GG O2GR"  V4$(3)="T0M4O4P0IDP8SCDICSO3BO4C QO3BIO4CQC O5T2P0IGP5BA QRR T0M4O4P0IDP8SCDICSO3BO4C QO3BIO4CQC O5T2P0IGP5BA Q.R O4P0T0I#DP9S#DD#DE#FE#FGHGR"  V5$(3)="T7P0M1O3QAD EE IGEG Q#F I#F#F#F QAD EE IGEG Q#F I#F#F#F GGAA Q.B IBBBBB"  V6$(3)="T3O2 IBRBR O1GR O2GR O1GG O2GR O1GR O2GR BRBR O1GR O2GR O1GG O2GR O1GR O2GR O1GR O2GR O1GG O2GR O1GG O2GR"  ' *** IM ALIVE (CHORUS1) ***  ' --------------------------  V1$(4)="T7M5O5P0QAA P3H.BP1QAQ.AIR QP0AA P3H.BP1QAQ.AIR"  V2$(4)="T7P0M1O3QDDIGGGGGGGG DDDDDDDD GGGGGGGG DDDD"  V3$(4)="T3O2 IBRBR O1GR O2GR O1GG O2GR O1GR O2GR BRBR O1GR O2GR O1GG O2GR O1GR O2GR O1GR O2GR O1GG O2GR O1GG O2GR"  V4$(4)="T7M5O6P0QDDWDQDR DDWDQDR"  V5$(4)="T7P0M1O3QAA O4IDDDDDDDD O3IAAAAAAAA O4DDDDDDDD O3IAAAA"  V6$(4)="T3O2 IBRBR O1GR O2GR O1GG O2GR O1GR O2GR BRBR O1GR O2GR O1GG O2GR O1GR O2GR O1GR O2GR O1GG O2GR O1GG O2GR"  ' *** I'M ALIVECLOSE(CHORUS2 ENDING) ***  ' --------------------------------------  V1$(5)="T7M5O5P0QAA HBIAB O6CO5HBIRSAP9GABABGA W.G"  V2$(5)="T7P0M1O3QDD GG#F#FEEDDW.C"  V3$(5)="T3O2 IBRBR O1GR GR O2 GR O1 GR GR GR O2 GR O1 GR T0O2P0S#CR O5P1 #CR#CR#CR#CR#CR#CR#CR#CR#CR#CR#CR"  V4$(5)="T7M5O5P0Q#F#F HGI#FGAHGIRS#FP9E#FG#FGE#F W.C"  V5$(5)="T7P0M1O3QAA O4DDCCO3BBAAW.G"READ X%    POKE $0600+K, X%  NEXT K  MOUSE ON, 1, 0  SPRITE 0,1,1  RETURN#DEFINE ү = 2#DEFINE ү = 1#DEFINE үү = 1#DEFINE үү = 2#DEFINE үү = 4#DEFINE үү = 8.CLEARMENU'----------  FOR K=0 TO 7    EDMA 3, 640*2, 0, $40000+K*$4000  NEXT K  RETURN.DRAWMENUSYSTEM'----------------  GOSUB CLEARMENU  PEN 0,1  ' DRAW ITEMS  FOR K = 0 TO د-1    X%=BTNSX%(K)    Y%=BTNSY%(K)    W%=(X% + BTNSW%(K))    H%=(Y% + BTNSH%(K))    PEN 0, 1    IF MENUSELECTION=K AND BTNSTYPE%(K) <> ů THEN BEGIN      BOX X%*8, Y%*8, W%*8, H%*8, 1      PEN 0, 0    BEND:ELSE BEGIN      BOX X%*8, Y%*8, W%*8, H%*8      IF BTNSTYPE%(K) = ů AND BTNSSTATE%(K)<>0 THEN	TE RESTORE  RETURN'============.XANADUTITLE'============  PRINT CHR$(147);  BACKGROUND 0  BORDER 0  ' FILL SCREEN WITH BLACK INVERTED SPACES  EDMA 3,4000,0,$FF80000  EDMA 3,4000,160,$48000      GOSUB LOADPALETTE  GOSUB SWITCHTO80X50MO
DE  GOSUB SETSCREENPOINTER  GOSUB PANTITLE  RETURN.SWITCHTO80X50MODE'--------------------  BANK 128  SETBIT ǯ7, 7  POKE $D031, $E8 ' 640, , , 400  RETURN.SWITCHTO80X25MODE'--------------------  BANK 128  POKE $D031, $E0 ' 640, ,   RETURN.RESTORESCREENPOINTER'----------------------  ' TO BANK 0 - $0800  BANK 128  WPOKE , $0800  POKE , 0  RETURN.SETSCREENPOINTER'------------------  ' MOVE TO BANK4 - $8000  BANK 128  SETBIT ǯ7, 7  WPOKE , $8000  POKE , $04  RETURN.PANTITLE'---------  FOR PANIDX = 0 TO 196    IF PANIDX > 79 THEN BEGIN      PANSRCIDX = PANIDX - 79      PANDESTIDX = 0      IF PANIDX > 117 THEN BEGIN        PA  V6$(5)="T3O2 IBRBR O1GR GR O2 GR O1 GR GR GR O2 GR O1 GR T0O2P0SCR O5P1 CRCRCRCRCRCRCRCRCRCRCR"  ' *** INSTRUMENTAL ***  ' --------------------  V1$(6)="T7M5P5O5 QRR R Q.G IED O4QB IO5DEG P0SDO4BO5DEDO4BIP9G O4IEGGEQGIE QBO5IDDO4BO5QDE P9O5R Q.GIEDQESGEGEIGBO6DO5SP0BAIG"  V1$(6)=V1$(6)+"O5QP9IBP0SGBO6IDO5SBO6D SP0G#FDO5B O6#FDO5BG P9IBO6CDO5IB"  V2$(6)="T7P0M1O2QFO3C O2QGGIGQGIO3C O2QEEIEQEIA O1QAAIAQAIO2E QDD  FO3C O2QGGIGQGIO3C O2QEEIEQEIA O1QAAIAQAIO2E QDD"  V3$(6)="P0T3O2 IBRBR O1GR O2GR O1GG O2GR O1GR O2GR BRBR O1GR O2GR O1GG O2GR O1GR O2GR":V3$(6)=V3$(6)+V3$(6)  V4$(6)="QRRT2P0SO6B#F#AFAE#G#DGD#F#CFCEO5BO6#DO5#AO6DO5AO6#CO5#GO6CO5GB#F#AFAE#GDO3SCRP2T7O6CRCRCRCRCRCRCRCRCRCRCRCRCRGRGR"  V4$(6)=V4$(6)+"T6O6P0SDP6O5CO3P9CO2CO5P0SBP6O5CO3P9CO2CO5P0SGP6O5CO3P9O1CCO5P0SGP6O5CO3P9O1CC"  V4$(6)=V4$(6)+"O4P0GRP1O2CRCRCRCRCRCRCRT0O5P0SEGEGF#GF#G#FA#FAGBGBT7O6SGP3O2WC"  V5$(6)="T7P0M1O3QCG DDIDQDIG O2QBBIBQBO3IE QEEIEQEIG Q#F#F  CG DDIDQDIG O2QBBIBQBO3IE QEEIEQEIG Q#F#F"  V6$(6)="P0T3O2 IBRBR O1GR O2GR O1GG O2GR O1GR O2GR BRBR O1GR O2GR O1GG O2GR O1GR O2GR":V6$(6)=V6$(6)+V6$(6)  ' *** SUDDENLY CAME THE DAWN ***  ' ------------------------------  V1$(7)="T7M5O5QP0IDP5SCDICSO4BO5C QO4BIO5CQC T2P0IEP5G#F QRR T7M5O5P0IDP5SCDICSO4BO5C QO4BIO5CQC T2P0IEP5G#F Q.R P0T7I#D P7S#DD#DE#FE#FGHG"  V2$(7)="T7P0M1O3QDO2#F QAA IO3ECEQDIDDD O3QDO2#F QAA IO3ECEQDIDDD EE#F#F Q.EIEEEEE"  V3$(7)="T3O2 IBRBR O1GR O2GR O1GG O2GR O1GR O2GR BRBR O1GR O2GR O1GG O2GR O1GR O2GR O1GR O2GR O1GG O2GR O1GG O2GR"  V4$(7)="T0M4O4P0IDP8SCDICSO3BO4C QO3BIO4CQC O5T2P0IGP5BA QRR T0M4O4P0IDP8SCDICSO3BO4C QO3BIO4CQC O5T2P0IGP5BA Q.R O4P0T0I#DP9S#DD#DE#FE#FGHGR"  V5$(7)="T7P0M1O3QAD EE IGEG Q#F I#F#F#F QAD EE IGEG Q#F I#F#F#F GGAA Q.B IBBBBB"  V6$(7)="T3O2 IBRBR O1GR O2GR O1GG O2GR O1GR O2GR BRBR O1GR O2GR O1GG O2GR O1GR O2GR O1GR O2GR O1GG O2GR O1GG O2GR"  ' *** I'M ALIVE! CHORUS2 ***  ' -------------------------  V1$(8)="T7M5O5P0QAA P3HB QBBO6H.#C O51QBQ.BIR QP0BB P3H.O6#CP1O5QBQ.BIR"  V2$(8)="T7P0M1O3QDDHG QEE SARARARARARARARAR ERERERERERERERER ARARARARARARARAR ERERERER"  V3$(8)="T3O2 IBRBR BRRR BRBR O1S GRGRGRGRGRGRGRGRGRGRGRGRGRGRGRGR GRGRGRGRGRGRGRGRGRGRGRGR"  V4$(8)="T7M5O6P0QDD HD QEE RO5EP9O6EID#CO5HB P0O6QEE RO5EP9O6EID#CO5HB"  V5$(8)="T7P0M1O3QAAO4HD O3QBB O4SERERERERERERERER O3BRBRBRBRBRBRBRBR O4ERERERERERERERER O3BRBRBRBR"  V6$(8)="T3O2 IBRBR BRRR BRBR O1S GRGRGRGRGRGRGRGRGRGRGRGRGRGRGRGR GRGRGRGRGRGRGRGRGRGRGRGR"  ' *** IM ALIVE! VERSE PITCH SHIFT ***  ' -----------------------------------  VNLEN = 80 - (PANIDX - 117)        IF PANLEN < 1 THEN PANLEN = 0      BEND:ELSE BEGIN        PANLEN = 80      BEND    BEND:ELSE BEGIN      PANSRCIDX = 0      PANDESTIDX = 79 - PANIDX      PANLEN=PANIDX + 1    BEND    FOR PANY = 0 TO 49      EDMA 0,PANLEN,$41000+PANY*118+PANSRCIDX,$FF80000+PANY*80+PANDESTIDX    NEXT PANY    SLEEP .02    GOSUB POLLPLAY  NEXT PANIDX  RETURN.LOADPALETTE'------------  #DECLARE LOC=$40FA0  FOR K = 0 TO 31    POKE $D100+K,PEEK(LOC):LOC=LOC+1    POKE $D200+K,PEEK(LOC):LOC=LOC+1    POKE $D300+K,PEEK(LOC):LOC=LOC+1  NEXT K  RETURN'========.BASLOGO'========  GOSUB POLLPLAY  GOSUB FADETOWHITE  GOSUB DRAWLOGO  GOSUB FADETODEFAULTS  GOSUB CYCLEALTPALETTELOOP  GOSUB FADETOBLACK  RETURN.CYCLEALTPALETTELOOP'----------------------  FOR M = 0 TO 32*4    GOSUB CYCLEALTPALETTE    GOSUB POLLPLAY    GOSUB ANIMDRAWSUBTEXT    SLEEP .04  NEXT M  RETURN.ANIMDRAWSUBTEXT'-----------------  IF M = 40 THEN BEGIN    SUBTEXTIDX = 1    PLEN = 0    EDMA 3,80,32,$800+80*24  BEND  IF PLEN < LEN(SUBTEXT$(SUBTEXTIDX)) THEN BEGIN    PLEN = PLEN + 1    RAINBOWSTR$=LEFT$(SUBTEXT$(SUBTEXTIDX),PLEN)    IF SUBTEXTIDX = 0 THEN RAINBOWX = 36:ELSE RAINBOWX = 21    RAINBOWY = 24    GOSUB PRINTRAINBOWSTR  BEND  RETURN.PRINTRAINBOWSTR  #DECLARE RAINIDX  CURSOR RAINBOWX, RAINBOWY  FOR RAINIDX=1 TO LEN(RAINBOWSTR$)    FOREGROUND MOD(RAINIDX-1,16)+16    PRINT MID$(RAINBOWSTR$,RAINIDX,1);  NEXT RAINIDX  RETURN.CYCLEALTPALETTE'-----------------  #DECLARE TEMPR, TEMPG, TEMPB  TEMPR = PEEK($D100+16)  TEMPG = PEEK($D200+16)  TEMPB = PEEK($D300+16)  FOR K = 16 TO 30    POKE $D100+K, PEEK($D100+K+1)    POKE $D200+K, PEEK($D200+K+1)    POKE $D300+K, PEEK($D300+K+1)  NEXT K  POKE $D100+31, TEMPR  POKE $D200+31, TEMPG  POKE $D300+31, TEMPB  RETURN.DRAWLOGO'---------  BACKGROUND 1  BORDER 1  EDMA 0, 2000, $40000, $800  EDMA 0, 2000, $407D0, $FF80000  RETURN.FADGGGGGGG O2QFO3C O2IGGGGGGGGGGGG"  V2$(1)="T9 P0O6 QFE SGR P2O2GRGRGRGRGRGRGRGRGRGRGR":V2$(1)=V2$(1)+V2$(1)  V3$(1)="T3O2 IBRBR O1GR O2GR O1GG O2GR O1GR O2GR BRBR O1GR O2GR O1GG O2GR O1GR O2GR"  V4$(1)="T7P0M1QO3CG IDDDDDDDDDDDD QO3CG IDDDDDDDDDDDD"   V5$(1)="T9 P0O5QAG SBR P1O1BRBRBRBRBRBRBRBRBRBRBR":V5$(1)=V5$(1)+V5$(1)  V6$(1)="T3O2 IBRBR O1GR O2GR O1GG O2GR O1GR O2GR BRBR O1GR O2GR O1GG O2GR O1GR O2GR"  ' REM *** I'M ALIVE! ***  ' ---------------------  V1$(2)="T7M5O5QP0GG GRIRP7 E#F QGIGQG#F!E HE SEDE#FE#F HDIR"  V2$(2)="T7P0M1O2QFO3C O2QGGIGQGIO3C O2QEEIEQEIA QCCICQCIE QDD"  V3$(2)="T3O2 IBRBR O1GR O2GR O1GG O2GR O1GR O2GR BRBR O1GR O2GR O1GG O2GR O1GR O2GR"  V4$(2)="T7M5O6QP0FP9SEDEF QDRIR T0O6P0EP8#F QGIGQG#FE HE SEDE#FE#F HDIR"  V5$("2)="T7P0M1O3QCG DDIDQDIG O2QBBIBQBO3IE O2 QGGIGQGIB QAA"  V6$(2)="T3O2 IBRBR O1GR O2GR O1GG O2GR O1GR O2GR BRBR O1GR O2GR O1GG O2GR O1GR O2GR"#IFDEF   ' *** SEEMS LIKE FOREVER ***  V1$(3)="T7M5O5QP0IDP5SCDICSO4BO5C QO4BIO5CQC T2P0IEP5G#F QRR  T7M5O5P0IDP5SCDICSO4BO5C QO4BIO5CQC T2P0IEP5G#F Q.R P0T7I#D P7S#DD#DE#FE#FGHGR"  V2$(3)="T7P0M1O3QDO2#F QAA IO3ECEQDIDDD O3QDO2#F QAA IO3ECEQDIDDD EE#F#F Q.EIEEEEE"  V3$(3)="T3O2 IBRBR O1GR O2GR O1GG O2GR O1GR O2GR BRBR O1GR O2GR O1GG O2GR O1GR O2GR O$ ͯ  DATA 1.5,        DATA .,        ,     "DON'T GIVE UP SONNY!",           32, 12  DATA 2,          ' ONNY: ATTEMPT #3  DATA .,        ,        ͯ  DATA 2,        ,        ͯ  DATA 1.5,      ,   %  "I GOT IT!",                             2  DATA 1,          DATA 3,        ,        ͯ  DATA 4,        ,    3  DATA 2,        ,    "EWW!",                       1,     2  DATA 2,        ,        ͯ  DAT&A 1.5,      ,     ͯį  DATA .,        ,     "AWW... POOR SONNY...",           32, 0  DATA 2,          DATA .1,       ,     "GUYS LIKE ME SHOULDN'T DREAM ANYWAY...", 3.5  DATA 3.5,      ,     ͯį  DATA 1,          DATA .5,       ,     "...AND WITH THAT, SONNY'S DREAMS BLEW AWAY WITH THE WIND...", 10, 12  DATA 3.5,        DATA 1,       '=====.ENDER'=====  GOSUB SWITCHTO80X25MODE  GOSUB RESTORESCREENPOINTER  PALET BTNSX%(K) = BTNSX%(K-1) + BTNSW%(K-1)  BTNSW%(K) = LEN(BTNSTEXT$(K)) + 2  BTNSH%(K) = 3NEXT K.MAIN'----  GOSUB INIT     GOSUB DRAWMENUSYSTEM  GOSUB CHECKINPUT  GOSUB ENDER  END.INIT'----  SCREEN 0,640,400,4  FOR K = 0 TO 62    ǯ7, 7  POKE $D031, $E8 ' 1110 1000 = 640,,,400  ' MOVE  TO BANK4 - $8000  WPOKE , $8000  POKE ,$04  ' LET ALL SPRITES BE 64 BITS WIDE  POKE 64, 255  ' LET ALL SPRITES BE 64 BITS HIGH  POKE , 255  POKE , 64  ' $4,0000 +------------------+  '         !  (8 WORDS) !  ' $4,0040 +------------------+ <-- SPRPTR $1001  '         ! .         !  '         ! ========         !  '         ! #1 - FRAME 0 !  ' $4,0240 +..................+ <-- SPRPTR $1001 + 8  '         ! #1 FRAMES1-5 !  ' $4,040 +..................+ <-- SPRPTR $1001 + 8*6  '         ! #2 FRAMES0-5 !  ' $4,140 +..................+ <-- SPRPTR $1001 + 8*12  '         ! #3 TO #8    !  ' $4,6040 +..................+  '         ! 32 X   !  ' $4,60 +..................+  '         ! OLI - FRAME 0    !  ' $4,740 +------------------+  '         ! .        !  '         ! =========        !  '         !  - FRAME 0  !  ' $4,780 +..................+  '         !  - FRAME 1  !  ' $4,70 +..................+  '         !  FRM 2-12   !  ' $4,780 +------------------+  ' $4,8000 +------------------+  '         !   80X50 !  ' $4,80 +------------------+  ' $5,0000 +------------------+  '         ! .          !  ' $5,00 +------------------+  ' ENFORCE SPRITES INTO 4 AND 16 BIT TURNED ON  POKE , 4+128             WPOKE , 0  ' BLACK OUT PALETTE  EDMA 3, $300, 0, $FFD3100  ' CLEAR 80X50 CHARS AND COLOUR RAM  EDMA 3, 4000, 160, $48000  EDMA 3, 4000, 6, $FF80000  ' FOR IDX=0 TO 3999:POKE $48000+IDX,160:POKE $FF80000+IDX,6:NEXT IDX  ' SWITCH PALETTE  #DECLARE RED,GREEN,BLUE  LOC=$46040  FOR IDX=0 TO 31    RED=PEEK(LOC):LOC=LOC+1    GREEN=PEEK(LOC):LOC=LOC+1    BLUE=PEEK(LOC):LOC=LOC+1    ' PRINT "R=";RED;", G=";GREEN;", B=";BLUE    POKE $D100+IDX,RED    POKE $D200+IDX,GREEN    POKE $D300+IDX,BLUE  NEXT IDX  FOR K = 0 TO 7 	   MOVSPR K, 0#0  NEXT K          ' DISPLAY SPRITE  #DECLARE SPRCLR,OFFX  SPRCLR = 30  OFFX=25  SPRITE 0,1,SPRCLR  MOVSPR 0,0+OFFX,50  SPRITE 1,1,SPRCLR  MOVSPR 1,85+OFFX,50  SPRITE 2,1,SPRCLR  MOVSPR 2,171+OFFX,50  SPRITE 3,1,SPRCLR  MOVSP
R 3,256+OFFX,50  SPRITE 4,1,SPRCLR  MOVSPR 4,0+OFFX+8,180  SPRITE 5,1,SPRCLR  MOVSPR 5,85+OFFX+8,180  SPRITE 6,1,SPRCLR  MOVSPR 6,171+OFFX,180  SPRITE 7,1,SPRCLR  MOVSPR 7,256+OFFX,180  ' POINT SPRITE0 TO $4040  BANK 4  FOR K=0 TO 14 STEP 2    WPOKE K, $1001+8*(3*K)  NEXT K  ' SET BACKGROUND, BORDER  BACKGROUND 6  BORDER 14  IDX = 0  ^^OI=0:OD=0  COUNTER = 0  RETURN/----.P7LOOP'----  ' SELECT SPRITE FRAME  BANK 4  FOR K=0 TO 7    WPOKE K*2, $1001+8*(IDX+6*K)  NEXT K  GOSUB DRAWOLIVIA  GOSUB POLLPLAY  SLEEP .3  IDX=IDX+1  IF IDX=6 THEN IDX=0  COUNTER = COUNTER + 1  IF COUNTER < 30 THEN GOTO P7LOOP  RETURN'-----.P7ENDER'-----  FOR IDX = 0 TO 7    SPRITE IDX,0  NEXT IDX  ' SWITCH TO 80X25  BANK 128  POKE $D031, $E0 ' 1110 0000 = 640,,  ' RESTORE  TO BANK 0 - $0800  WPOKE , $0800  POKE , 0  PALETTE RESTORE  PLAY  PRINT "";  BOOT'----------.DRAWOLIVIA'----------  #DECLARE X,Y,Z,BVAL,OLIDX  ^^IF  ͯͯ1, .3, _       ͯͯ2, .3, _       ͯͯ3, .3    ' RAISE ARM TO CHIN  DATA 1  DATA ͯͯ4, .5, _       ͯͯ3, .5, _       ͯͯ4, .5, _       ͯͯ3, .5    ' SCRATCH CHIN  DATA ͯů, 0 , _       ͯͯ4,     .5, _       ͯͯ3,     .5, _       ͯͯ4,     .5, _       ͯͯ3,     .5    ' CLOSE EYES & SCRATCH CHIN  DATA ͯů, .2    ' NORMAL FACE  DATA , 1,   DATA į  ' ͯ  DATA ͯί, 0 , _       ͯͯ1, 1     ' GAPING MOUTH AND FINGER POINT UP  DATA ͯů,.2, _       ͯͯ2,  .2, _       ͯͯ3,  .2, _       ͯͯ4,  .2, _       ͯͯ1, .2, _       ͯͯ2, .2 ' GET BRUSH  DATA 1  DATA ͯů, .1  DATA 2  DATA ͯͯ3, .1, _       ͯͯ4, .1  DATA , 2,   5  DATA ͯů,  .5  DATA 3  DATA ͯͯ3, .1, _       ͯͯ4, .1  DATA , 3,   5  DATA , 1,   DATA į  ' ͯ  DATA ͯͯ2, .25, _       ͯͯ1, .25, _       ͯί, .5, _       ͯͯ5, .25, _       ͯͯ6, .25, _       ͯԯ1, .25, _       ͯԯ2, .25  DATA 1  DATA ͯů, .1, _       ͯӯ, .1, _       , 1, 5  DATA į  ' ͯ  DATA ͯͯ, .2, _       ͯ1, .1, _       ͯ2, .1, _       ͯ3, .1, _       ͯ4, .1, _       ͯ5, .1, _       ͯ6, .1, _       ͯ7, .1, _       ͯ8, .1, _       ͯ9, .1, _       ͯ10, .1, _       ͯ11, .1  DATA į  DATA ̯ӯ.STORYDATA'----------                  '      TIMEDELTA  ACTION       TEXT                            X   Y  DUR(SEC)  ' ONNY: ATTEMPT #1  DATA 0,        ,        ͯ  DATA 2,        ,     "HERE'S SONNY...",              4,  0  DATA 1.5,      ,     "A STRUGGLING ARTIST...",       22, 0  DATA 1.7,      ,     "SEARCHING FOR INSPIRATION...", 47, 0  DATA 2,          DATA .5,       ,     "HMM... WHAT TO DRAW TODAY...",        3  DATA 2,        ,         A$ + CURTOK$  RETURN  END'-----------------------.CHECKTOKENFORSUBBING'-----------------------  IF CURTOK$ = "" OR CURTOK$ = "_" THEN RETURN  ' DECIMAL NUMBER CHECK  ' - - - - - - - - - -  IF VAL(CURTOK$) <> 0 THEN BEGIN    EXPECTINGLABEL = 0    RETURN  ' NEVER CHANGE NUMBERS  BEND  IF CURTOK$ = "0" THEN BEGIN    CURTOK$="."    RETURN  ' STUPID MS BASIC OPTIMIZATION  BEND  ' CHECK IF WE SHOULD MARK THIS EXPECTED LABEL  ' - - - - - - - - - - - - - - - - - - - - - -  IOI=0 THEN LO=$460A0  ^^IF OI>0 THEN LO=$50000+4000*(OI-1)  LOC=$46CA0 ' FIRST OLIVIA FRAME  ^^EDMA 0,4000,LO,$FF80000  ^^IF OD = 0 THEN OI = OI + 1:IF OI > 8 THEN OD = 1:OI=8  ^^IF OD = 1 THEN OI = OI - 1:IF OI < 1 THEN OD = 0  RETURN'==========.INITMUSIC'==========  PLAY  TEMPO 17  BARINDEX=0  MAPBARTOCHUNK(0)=0  MAPBARTOCHUNK(1)=0  MAPBARTOCHUNK(2)=1  MAPBARTOCHUNK(3)=2  MAPBARTOCHUNK(4)=2  MAPBARTOCHUNK(5)=3  MAPBARTOCHUNK(6)=4  MAPBARTOCHUNK(7)=2  MAPBARTOCHUNK(8)=2  MAPBARTOCHUNK(9)=3  MAPBARTOCHUNK(10)=4  MAPBARTOCHUNK(11)=5  MAPBARTOCHUNK(12)=6  MAPBARTOCHUNK(13)=7  MAPBARTOCHUNK(14)=8  MAPBARTOCHUNK(15)=9  MAPBARTOCHUNK(16)=9  MAPBARTOCHUNK(17)=10  MAPBARTOCHUNK(18)=11  MAPBARTOCHUNK(19)=12  MAPBARTOCHUNK(20)=13  MAPBARTOCHUNK(21)=14  MAPBARTOCHUNK(22)=15  ENVELOPE 8,0,12,3,7  ENVELOPE 1,0,9,9,12,2,2048  ' *** INTRO WAILING ***  ' ---------------------  V1$(0)="O5T4M9WFFFHF"  V2$(0)="O3T5M0SP0CP1O5RCRCRCRCRCRCRCR P0O5CRP1O3CRCRCRCRCRCRCR P0O4GR P1O2GRGRGRGRGRGRGR P0O4ER P1O2ERERER"  V3$(0)="M1P0T6O1IFE#DEFD#DEFE#DEFE#DEFE#DEFE#DEFE#DE"  V4$(0)="O5T4M9W#F#F#FH#F"  V5$(0)="O3T5M0SP0#CP1O5R#CR#CR#CR#CR#CR#CR#CR P0O5#CRP1O3#CR#CR#CR#CR#CR#CR#CR P0O4#GR P1O2#GR#GR#GR#GR#GR#GR#GR P0O4#ER P1O2#ER#ER#ER"  V6$(0)="M1T9O6SEGEG#D#F#D#FDFDF#CE#CE FAFAE#GE#G#DG#DGD#FD#F GBGB#F#A#F#AFAFAE#GE#G FA#F#AFA#F#A"  ' *** FIRST RIFF ***  ' ------------------  V1$(1)="T7P0M1O2QFO3C O2IGGGGGͯ  DATA 1.5,      ,     "I KNOW!",                             2  DATA 1,          DATA 3,        ,        ͯ  DATA 4,        ,    1  DATA 2,        ,    "BLECH!",                       1,     2  DATA  2,        ,        ͯ  DATA 1.5,        DATA .,        ,     "TRY AGAIN SONNY...",           34, 12  DATA 2,        ' ONNY: ATTEMPT #2  DATA .,        ,        ͯ  DATA 2,        ,        ͯ  DATA 1.5#,      ,     "AHA!",                             2  DATA 1,          DATA 3,        ,        ͯ  DATA 4,        ,    2  DATA 2,        ,    "YUCK!",                       1,     2  DATA 2,        ,       #TER=0:GOSUB STORECURRCOLOURS:MUSESTATE=0  RETURN.HIGHLIGHTCURRMUSE'-------------------    FADEVAL = DEFCOLVAL    K = MUSECLR(CURRMUSE)    STARTCOL = K:ENDCOL = K    GOSUB FADECOLOURSTOWHITE    DEFCOLVAL = DEFCOLVAL + DEFCOLDIR    IF D    READ RVAL    ' PRINT RVAL;", ";    IF RVAL = ̯ӯ THEN EXIT    ANIMS(AIDX,VIDX) = RVAL    VIDX = VIDX + 1    IF RVAL = į THEN AIDX=AIDX+1:VIDX=0  LOOP  RETURN.ANIMS'-----  ' ͯ  DATA ͯ,   .3, _      $EFCOLVAL = 16 THEN DEFCOLDIR=-2    IF DEFCOLVAL = 0 THEN DEFCOLDIR=2:COUNTER=COUNTER+1    IF COUNTER = 3 AND DEFCOLVAL = 14 AND DEFCOLDIR=-2 THEN BEGIN      STATE=STATE+1      COUNTER=0      PALETTE RESTORE      FADEVAL=0      GOSUB SAVESCREEN  %    GOSUB STORECURRCOLOURS    BEND    RETURN.FADECOLOURSTOWHITE'---------------------  ': FADEVAL=0 TO 16  TEMPVAL = FADEVAL / 16  FOR K = STARTCOL TO ENDCOL    POKE $D100+K, DEFAULTRED(K) + (15 - DEFAULTRED(K)) * TEMPVAL    POKE $D&200+K, DEFAULTGREEN(K) + (15 - DEFAULTGREEN(K)) * TEMPVAL    POKE $D300+K, DEFAULTBLUE(K) + (15 - DEFAULTBLUE(K)) * TEMPVAL  NEXT K  RETURN  .CYCLECOLOURS'-------------  TEMPR = PEEK($D100+STARTCOL)  TEMPG = PEEK($D200+STARTCOL)  TEMPB = P'EEK($D300+STARTCOL)  FOR K = STARTCOL TO ENDCOL    POKE $D100+K, PEEK($D100+K+1)    POKE $D200+K, PEEK($D200+K+1)    POKE $D300+K, PEEK($D300+K+1)  NEXT K  POKE $D100+ENDCOL, TEMPR  POKE $D200+ENDCOL, TEMPG  POKE $D300+ENDCOL, TEMPB  RETURN .P1ENDER'--------  RETURN'==========================.P7BIGOLIVIAWITHSPRITES'==========================  GOSUB P7INIT  GOSUB P7LOOP  GOSUB P7ENDER  RETURN'----.P7INIT'----  POKE 53275,0  ' SWITCH TO 80X50  BANK 128  SETBIT  CURRMUSE <=4 THEN GOSUB THANKS2  ' 3RD PAGE OF THANKS  IF CURRMUSE >=5 AND CURRMUSE <=6 THEN GOSUB THANKS3  ' 4TH PAGE OF THANKS  IF CURRMUSE = 7 THEN GOSUB THANKS4  IF THANKSTATE<>4 AND THANKSTATE<>8 THEN BEGIN    STARTCOL=16:ENDCOL=31:GOSUB CYCLECOLOURS  BEND  RETURN.THANKS2'--------  IF THANKSTATE = 4 AND COUNTER > 10 THEN THANKSTATE = 5:COUNTER=0  IF THANKSTATE = 5 THEN BEGIN    S$=THANK2$(0):SX=40-LEN(S$)/2:SY=0:GOSUB DRAWCLRTEXT    IF COUNTER > -1 THEN COUNTER=COR 0,3:PRINT "ANIMIDX=";ANIMIDX;  AVAL = ANIMS(ACTANIM,ANIMIDX)  ANIMIDX = ANIMIDX + 1'PRINT "                     ANIMIDX=";ANIMIDX;  FOUND = 0  IF AVAL = 1 THEN FOUND=1:MARK(1)=ANIMIDX  IF AVAL = 2 THEN FOUND=1:MARK(2)=ANIMIDX  IF AVAL = 3 THEN FOUND=1:MARK(3)=ANIMIDX  IF AVAL =  THEN BEGIN    FOUND=1    ' GET MARK NUMBER (IN AVAL)    GMARKNUM = ABS(ANIMS(ACTANIM,ANIMIDX))    ANIMIDX = ANIMIDX + 1    GCOUNT = ANIMS(ACTANIM,ANIMIDX)    ANIMIDX = ANIMIDX + 1    BAIL=0    IF ANIMREPEATCOUNT = 0 THEN BEGIN      IF GCOUNT <> -1 THEN ANIMREPEATCOUNT = GCOUNT      ANIMIDX = MARK(GMARKNUM)      BAIL=1    BEND          IF BAIL=0 AND ANIMREPEATCOUNT > 0 THEN BEGIN      ANIMREPEATCOUNT = ANIMREPEATCOUNT -1      IF ANIMREPEATCOUNT = 0 THEN BAIL=1      IF BAIL=0 THEN ANIMIDX=MARK(GMARKNUM)      BAIL=1    BEND    'IF BAIL=0 AND ANIMREPEATCOUNT =  THEN BEGIN    '  ANIMIDX=MARK(GMARKNUM)    '  BAIL=1    'BEND  BEND  IF AVAL = į THEN BEGIN    FOUND = 1    ACTANIM = -1  BEND  'CURSOR 0,8:PRINT "FOUND = ";FOUND;  IF FOUND = 0 THEN BEGIN ' WE'RE DRAWING A PETSCII FRAME NOW?    FRAMEIDX = AVAL    'CURSOR 0,5:PRINT "DRAW FRAMEIDX=";FRAMEIDX;    'INPUT AVAL    GOSUB DRAWPETSCIIFRAME    FRAMEDUR = ANIMS(ACTANIM,ANIMIDX)    ANIMIDX = ANIMIDX + 1    FRAMESTART = TI  BEND  RETURN.CLEARTEXT'-----------  EDMA 3,80,32,$800  RETURN.DRAWTXTGREY'-------------  IF ACTTIMER = -1 THEN RETURN  SLEEP .05  CURSOR ACTX + ACT	TIMER, ACTY  PRINT "";MID$(ACTSTR$,1+ACTTIMER,1);  ACTTIMER = ACTTIMER + 1  IF ACTTIMER >= LEN(ACTSTR$) THEN ACTTIMER = -1  RETURN.DRAWTXTTALK'-------------  IF ACTTIMER = -1 THEN RETURN  SLEEP .05  ACTX=(80-LEN(ACTSTR$))/2+7  ACTY=1  CU
RSOR ACTX + ACTTIMER, ACTY  PRINT "";MID$(ACTSTR$,1+ACTTIMER,1);  ACTTIMER = ACTTIMER + 1  IF ACTTIMER >= LEN(ACTSTR$) THEN ACTTIMER = -1  IF MOD(ACTTIMER,2) = 0 THEN FRAMEIDX=ͯί:ELSE FRAMEIDX=ͯů  GOSUB DRAWPETSCIIFRAME  RETURN.CLEARTXTTALK'--------------  CURSOR 0,1:PRINT CHR$(27);"Q";  RETURN.DRAWPETSCIIFRAME'------------------  DATAADDR = FRAMEADDR(FRAMEIDX)  FRMX = PEEK(DATAADDR)  DATAADDR = DATAADDR + 1  FRMY = PEEK(DATAADDR)  DATAADDR = DATAADDR + 1  FRMW = PEEK(DATAADDR)  DATAADDR = DATAADDR + 1  FRMH = PEEK(DATAADDR)  DATAADDR = DATAADDR + 1  FRMX1=FRMX+FRMW-1  FRMY1=FRMY+FRMH-1  #DECLARE YY, SCRADDR,CLRADDR  SCRADDR = $800 + FRMX + FRMY * 80  CLRADDR = $1F800 + FRMX + FRMY * 80  CDATAADDR = DATAADDR + FRMW * FRMH  FOR YY=FRMY TO FRMY1    EDMA 0, FRMW, DATAADDR, SCRADDR    EDMA 0, FRMW, CDATAADDR, CLRADDR    DATAADDR = DATAADDR + FRMW    CDATAADDR = CDATAADDR + FRMW    SCRADDR = SCRADDR + 80    CLRADOUNTER+1:GOSUB DRAWCLRTEXT    IF COUNTER = -1 THEN THANKSTATE = 6:THANKSTARTIDX=1+(CURRMUSE-1)*4:THANKIDX=THANKSTARTIDX  BEND  ' PAUSE  IF THANKSTATE = 6 AND COUNTER > 5 THEN BEGIN    THANKSTATE = 7:COUNTER = 0  BEND#DEFINE دӯү = 4  ' DRAW NEXT SHOUT OUT  IF THANKSTATE = 7 THEN BEGIN    IF THANKIDX-THANKSTARTIDX < دӯү THEN BEGIN      S$=THANK2$(THANKIDX)      SX=40-LEN(S$)/2      SY=(THANKIDX - THANKSTARTIDX) * 3 + 3      IF SY > 6 THEN SY = SY + 11      GOSUB DRAWCLRTEXT      IF COUNTER > -1 THEN COUNTER=COUNTER+1:GOSUB DRAWCLRTEXT    BEND    IF COUNTER = -1 OR THANKIDX-THANKSTARTIDX=دӯү THEN BEGIN      THANKIDX = THANKIDX + 1      IF THANKIDX - THANKSTARTIDX >= دӯү+1 THEN BEGIN        THANKSTATE = 4        IF CURRMUSE = 4 THEN THANKSTATE = 8        MUSESTATE=3        COUNTER=0        PALETTE RESTORE        GOSUB STORECURRCOLOURS      BEND:ELSE THANKSTATE = 6    BEND  BEND  RETURN.THANKS3'--------  IF THANKSTATE = 8 AND COUNTER > 10 THEN THANKSTATE = 9:COUNTER=0  IF THANKSTATE = 9 THEN BEGIN    S$=THANK3$(0):SX=40-LEN(S$)/2:SY=0:GOSUB DRAWCLRTEXT    IF COUNTER > -1 THEN COUNTER=COUNTER+1:GOSUB DRAWCLRTEXT    IF COUNTER = -1 THEN THANKSTATE = 10:THANKSTARTIDX=1+(CURRMUSE-5)*30:THANKIDX=THANKSTARTIDX  BEND  ' PAUSE  IF THANKSTATE = 10 AND COUNTER > 5 THEN BEGIN    THANKSTATE = 11:COUNTER = 0    IF THANKIDX-THANKSTARTIDX >= 30 THEN BEGIN      THANKSTATE = 12      IF CURRMUSE = 5 THEN THANKSTATE = 8      MUSESTATE = 3      COUNTER = 0      PALETTE RESTORE      GOSUB STORECURRCOLOURS      RETURN    BEND  BEND  ' DRAW NEXT NAME  IF THANKSTATE = 11 THEN BEGIN    IF THANKIDX-THANKSTARTIDX < 30 THEN BEGIN      S$=THANK3$(THANKIDX)      FOR K = 1 TO LEN(S$)        IF MOD(THANKIDX,2) = 1 THEN SX=10-LEN(S$)/2:ELSE SX=70-LEN(S$)/2        SY = INT((THANKIDX-THANKSTARTIDX) / 2) + 5        GOSUB DRAWCLRTEXT        COUNTER = COUNTER + 1      NEXT K    BEND    THANKIDX = THANKIDX + 1    THANKSTATE = 10:COUNTER = 0  BEND  RETURN.THANKS4'--------  IF THANKSTATE = 12 AND COUNTER > 10 THEN THANKSTATE = 13:COUNTER=0  IF THANKSTATE = 13 THEN BEGIN    S$=THANK4$(0):SX=40-LEN(S$)/2:SY=0:GOSUB DRAWCLRTEXT    IF COUNTER > -1 THEN COUNTER=COUNTER+1:GOSUB DRAWCLRTEXT    IF COUNTER = -1 THEN THANKSTATE = 14:THANKIDX=1  BEND  ' PAUSE  IF THANKSTATE = 14 AND COUNTER > 5 THEN BEGIN    THANKSTATE = 15:COUNTER = 0  BEND  ' DRAW NEXT SHOUT OUT  IF THANKSTATE = 15 THEN BEGIN    IF THANKIDX-1 < دӯү THEN BEGIN      S$=THANK4$(THANKIDX)      SX=40-LEN(S$)/2      SY=(THANKIDX - 1) * 3 + 3      IF SY > 6 THEN SY = SY + 11      GOSUB DRAWCLRTEXT      IF COUNTER > -1 THEN COUNTER=COUNTER+1:GOSUB DRAWCLRTEXT    BEND    IF COUNTER = -1 OR THANKIDX-1=دӯү THEN BEGIN      THANKIDX = THANKIDX + 1      IF THANKIDX - 1 >= دӯү+1 THEN BEGIN        THANKSTATE = 16        MUSESTATE=3        COUNTER=0        PALETTE RESTORE        GOSUB STORECURRCOLOURS      BEND:ELSE THANKSTATE = 14    BEND  BEND  RETURN.ANIMMUSESPRITES'-----------------  NEXTCNT = NEXTCNT + 1  IF NEXTCNT = 5 THEN BEGIN    NEXTCNT = 0    BANK 4      WPOKE NEXTSPR*2,$1001+8*(NEXTFRM + 6 * CURRMUSE)      WPOKE 0,WPEEK(NEXTSPR*2)    BANK 128    MOVSPR NEXTSPR, 150, 120    MOVSPR 0, 150, 120    MOVSPR NEXTSPR, SPRANGLE#1    SPRANGLE=MOD(SPRANGLE+10,360)    SPRITE NEXTSPR, 1, GREYS(0)    SPRITE 0, 1, 1    SPRACTIVE(NEXTSPR) = 1    NEXTSPR = MOD(NEXTSPR+5, 7)+1    NEXTFRM = MOD(NEXTFRM+1, 6)  BEND  FOR K = 1 TO 7    IF SPRACTIVE(K)>0 THEN BEGIN      SPRACTIVE(K)=SPRACTIVE(K)+1      FADEVAL=SPRACTIVE(K)/10      IF FADEVAL < 3 THEN BEGIN        SPRITE K, 1, GREYS(FADEVAL)      BEND:ELSE SPRITE K, 0:SPRACTIVE(K)=0    BEND  NEXT K  RETURN.INITMUSESPRITES'-----------------  ' TURN OF ALL SPRITES  FOR K = 0 TO 7    SPRITE K, 0    MOVSPR K, 160, 80  NEXT K  POKE 64, 255  POKE , 255  POKE , 64  POKE , 4+128  WPOKE , 0  RETURN.SAVESCREEN  ^^EDMA 0, $7D0, $800, $48000  ^^EDMA 0, $7D0, $1F800, $49000  RETU!RN.RESTORESCREEN  ^^EDMA 0, $7D0, $48000, $800  ^^EDMA 0, $7D0, $49000, $1F800  RETURN.FADEOUT'--------  FADEVAL = COUNTER  GOSUB FADECOLOURSTOBLACK  COUNTER = COUNTER + 1  IF COUNTER > 16 THEN STATE = STATE + 1:STARTCOL=0:ENDCOL=31:COUN DR = CLRADDR + 80    NEXT YY  RETURN.INITREACTION'-------------  PRINT "";  FRAMEIDX = ͯ:GOSUB DRAWPETSCIIFRAME  FRAMEIDX = ͯԯ1:GOSUB DRAWPETSCIIFRAME  FRAMEIDX = ͯԯ2:GOSUB DRAWPETSCIIFRAME  RETURN.DRA!WREACTION'-------------  ACTTIMER = ACTTIMER + 1  SLEEP .1  IF MOD(ACTTIMER,2) = 0 THEN FRAMEIDX=ͯ˯:ELSE FRAMEIDX=ͯү  GOSUB DRAWPETSCIIFRAME  IF ACTTIMER > 10 THEN ACTION = :ACTTIMER = 0  RETURN.DRAWPAINTING"'-------------  PRINT "";  FRAMEIDX = ͯ  GOSUB DRAWPETSCIIFRAME  FRAMEIDX = ͯ1 + ACTPAINTING - 1  GOSUB DRAWPETSCIIFRAME  RETURN#DECLARE RVAL, AIDX, VIDX#DECLARE TEST$.INITANIMS'----------  AIDX = 0  VIDX = 0  DO#COL=0:ENDCOL=31:GOSUB FADECOLOURSTODEFAULTS    IF COUNTER=16 THEN BEGIN      MUSESTATE = 6      COUNTER = 0      STATE = 2:DIST = 0:VEL = 1    BEND  BEND  IF MUSESTATE > 0 AND MUSESTATE < 4 AND STATE=6 THEN BEGIN    GOSUB ANIMMUSESPRITES$  BEND    COUNTER = COUNTER + 1  RETURN.DRAWCLRTEXT'-------------  CURSOR SX+COUNTER,SY:COLOR MOD(COUNTER,16)+16:PRINT MID$(S$,1+COUNTER,1);  IF COUNTER = LEN(S$) THEN COUNTER = -1  RETURN.SHOWTHANKS'-----------  POKE 53275, 255  IF TH%ANKSTATE = 0 AND COUNTER > 5 THEN THANKSTATE = 1:COUNTER=0  IF THANKSTATE = 1 THEN BEGIN    S$=THANK1$(0):SX=1:SY=0:GOSUB DRAWCLRTEXT    IF COUNTER <> -1 THEN COUNTER=COUNTER+1:GOSUB DRAWCLRTEXT    IF COUNTER = -1 THEN THANKSTATE = 2:THANKID&X=1  BEND  ' PAUSE  IF THANKSTATE = 2 AND COUNTER > 5 THEN BEGIN    THANKSTATE = 3:COUNTER = 0  BEND  ' DRAW NEXT NAME  IF THANKSTATE = 3 THEN BEGIN    IF THANKIDX < 16 THEN BEGIN      S$=THANK1$(THANKIDX)      IF MOD(THANKIDX,2) = 1 THEN' SX=10-LEN(S$)/2:ELSE SX=70-LEN(S$)/2      SY = INT((THANKIDX-1) / 2)*3 + 3      GOSUB DRAWCLRTEXT      IF COUNTER <> -1 THEN COUNTER=COUNTER+1:GOSUB DRAWCLRTEXT    BEND    IF COUNTER = -1 OR THANKIDX=16 THEN BEGIN      THANKIDX = THANKIDX  + 1      IF THANKIDX > 16 THEN BEGIN        THANKSTATE = 4        MUSESTATE=3        COUNTER=0        PALETTE RESTORE        GOSUB STORECURRCOLOURS      BEND:ELSE THANKSTATE = 2    BEND  BEND  ' 2ND PAGE OF THANKS  IF CURRMUSE >= 1 ANDVAL=0 TO 16  TEMPVAL = (16-FADEVAL) / 16  FOR K = STARTCOL TO ENDCOL    POKE $D100+K, CURRRED(K) * TEMPVAL    POKE $D200+K, CURRGREEN(K) * TEMPVAL    POKE $D300+K, CURRBLUE(K) * TEMPVAL  NEXT K  RETURN'==============.P1DROPPAPERS'======== E   C0:D1:E2:F39:G24:TI:"";:<.:;.:	(2)80(27)"X";   "** FOREST FIRE **":"TREE GROWTH PROBABILITY (1-100)? 5";H:"FIRE PROBABILITY (1-100)? 1";I:HH100:II100:K(F,G):L(F,G) 7! A$(D)"T":A$(E)"F":A$(C)" ":"PRESS ANY KEY TO STOP..."::NTI:A1F1:B1G1:K(A,B)D 8 J! K(A,B)C 11 ]! K(A,B)E 14 ! ::A1F1:B1G1:K(A,B)L(A,B):AA,B:A$(K(A,B));:::OTIN:PP1:QQO:M10(QP):A.,24:"AVG SPS: ##.##";M; C" B$:B$"":A.,23:(27)"QAGA IN(Y/N)?";(27)(27);::B$:B$"Y"B$"N":B$"N""TSCHUESSN!": I"  {" J.:R11:S11:K(AR,BS)EJ1:R2:S2 "	 ::((3)IJ)L(A,B)E "
  " ((3)H) " L(A,B)D: "  " L(A,B)C:                                      ======  GOSUB P1INIT  GOSUB P1LOOP  GOSUB P1ENDER  RETURN.P1INIT'-------  ' LOAD 13 STANDARD SPRITES FOR PAPER  ^^BLOAD "PAPER.DAT",P($47C40),R  ' LOAD 64X64 SPRITE DATA  ^^BLOAD "MUSE.DAT",P($40040),R  ' LOAD OLI FRAMES TO BANK 5  ^^#OUTPUT "XANADU-BASIC65"'============.DECLARATIONS'============  ' MUSIC RELATED VARS  ' ------------------  #DECLARE MUSICCHUNKINDEX     ' OLD T  #DECLARE BARINDEX             ' OLD TT  #DECLARE MAPBARTOCHUNK(10)  ' OLD M()  #DECLARE V1$(4), V2$(4), V3$(4), V4$(4)  ' PALETTE  ' -------  #DECLARE DEFAULTRED(32)  #DECLARE DEFAULTGREEN(32)  #DECLARE DEFAULTBLUE(32)  #DECLARE CURRRED(32)  #DECLARE CURRGREEN(32)  #DECLARE CURRBLUE(32)  #DECLARE FADEVAL, TEMPVAL  ' /  ' ---  #DEFINE ǯ7 = $D05D  #DEFINE  = $D060  #DEFINE  = $D062  ' MISC  ' ----  #DECLARE K,M,N  #DECLARE RAINBOWSTR$  #DECLARE RAINBOWX, RAINBOWY  #DECLARE PLEN=0  #DECLARE SUBTEXT$(2)  #DECLARE SUBTEXTIDX = 0  SUBTE	XT$(0) = "PRESENTS..."  SUBTEXT$(1) = "A TRIBUTE TO THE LATE OLIVIA NEWTON JOHN..."  #DECLARE PANIDX = 0  #DECLARE PANSRCIDX  #DECLARE PANDESTIDX  #DECLARE PANY, PANLEN  ' PETSCII  ' -------  #DECLARE DATAADDR = $4270C  #DECLARE MAXFRA
MES  #DECLARE FRAMEADDR(64)  #DECLARE FRMIDX = 0  #DECLARE FRMW, FRMH#DECLARE ANIMS(4,100) ' ANIMIDX, ANIMDATA#DECLARE AVAL,MARK(3),GMARKNUM,GCOUNT,BAIL,FOUND,FRAMEIDX,FRAMEDUR=0#DECLARE FRMX, FRMY, FRMX1, FRMY1, CDATAADDR#DEFINE ͯ = 0#DEFINE ͯͯ1 = 1#DEFINE ͯͯ2 = 2#DEFINE ͯͯ3 = 3#DEFINE ͯͯ4 = 4#DEFINE ͯͯ1 = 5#DEFINE ͯͯ2 = 6#DEFINE ͯͯ3 = 7#DEFINE ͯͯ4 = 8#DEFINE ͯů = 9#DEFINE ͯί = 10#DEFINE ͯů = 11#DEFINE ͯͯ1 = 12#DEFINE ͯͯ2 = 13#DEFINE ͯͯ3 = 14#DEFINE ͯͯ4 = 15#DEFINE ͯί = 16#DEFINE ͯͯ5 = 17#DEFINE ͯͯ6 = 18#DEFINE ͯԯ1 = 19#DEFINE ͯԯ2 = 20#DEFINE ͯ˯ = 21#DEFINE ͯů = 22#DEFINE ͯӯ = 23#DEFINE ͯү = 24#DEFINE ͯį = 25#DEFINE ͯͯ = 26#DEFINE ͯ1 = 27#DEFINE ͯ2 = 28#DEFINE ͯ3 = 29#DEFINE ͯ4 = 30#DEFINE ͯ5 = 31#DEFINE ͯ6 = 32#DEFINE ͯ7 = 33#DEFINE ͯ8 = 34#DEFINE ͯ9 = 35#DEFINE ͯ10 = 36#DEFINE ͯ11 = 37#DEFINE ͯ = 38#DEFINE ͯ1 = 39#DEFINE ͯ2 = 40#DEFINE ͯ3 = 41#DEFINE ͯ = 42'====.MAIN'====  GOSUB INIT  GOSUB BASLOGO  GOSUB XANADUTITLE  GOSUB PETSCIISTORY  GOSUB ENDER  ' BACKUP PALETTE TO $48000  EDMA 0, $300, $FFD3100, $48000   ' SET ALL COLOURS TO BLACK  EDMA 3, $300, 0, $FFD3100   ': DELETE  IF PEEK($D020)<>0 THEN BORDER 2:GOSUB INITPETSCIIFRAMES  FRAMEIDX=ͯ  GOSUB DRAWPETSCIIFRAME  CLR  DLOAD "BIGSPRITE"  END' ACTION NAMES#DEFINE =0#DEFINE =1#DEFINE =2#DEFINE =3#DEFINE =4#DEFINE =5#DEFINE =6#DEFINE =7#DEFINE =8' ANIMATIONS#DEFINE ͯ=0#DEFINE ͯ=1#DEFINE ͯ=2#DEFINE ͯ=3.INITPETSCIIFRAMES'-------------------  MAXFRAMES = PEEK(DATAADDR)  DATAADDR = DATAADDR + 1  DO WHILE FRMIDX < MAXFRAMES    FRAMEADDR(FRMIDX) = DATAADDR    DATAADDR = DATAADDR + 2    FRMW = PEEK(DATAADDR)    DATAADDR = DATAADDR + 1    FRMH = PEEK(DATAADDR)    DATAADDR = DATAADDR + 1    DATAADDR = DATAADDR + FRMW * FRMH * 2    ':PRINT CHR$(147);"FRMIDX=";FRMIDX    'FRAMEIDX=FRMIDX    'GOSUB DRAWPETSCIIFRAME    'GETKEY TEST2$    FRMIDX = FRMIDX + 1  LOOP  RETURN#DECLARE ANIMIDX, ANIMREPEATCO"UNT'=============.PETSCIISTORY'=============  GOSUB SWITCHTO80X25MODE  GOSUB RESTORESCREENPOINTER  PALETTE RESTORE  BACKGROUND 0:BORDER 0  PRINT CHR$(147);  GOSUB INITPETSCIIFRAMES  GOSUB INITANIMS  #DECLARE TSTART, TIME, ACTION, ABLOAD "OLI.DAT",P($50000),R  ' DISABLE ANY 64-BIT WIDE SPRITES  POKE 64, 0  ' ALL SPRITES NORMAL HEIGHT  POKE , 0  ' ENFORCE SPRITES INTO 4 AND 16 BIT TURNED ON  POKE , 4+128  WPOKE , 0  ' PREPARE ALL SPRITE  FOR K = 0 TO 7    SPRITEFRAMEIDX(K) = INT(RND(1)*13)    SPRITEX(K) = 30+40*K    SPRITEY(K) = INT(RND(1)*5)*5    SPRITE K, 1, 15    MOVSPR K, 0#0    MOVSPR K, SPRITEX(K), SPRITEY(K)    WPOKE ($40000+K*2), $11F1 + SPRITEFRAMEIDX(K)  NEXT K  FADEVAL = 0  RETURN.STORECURRCOLOURS'------------------  FOR K = 0 TO 31    CURRRED(K)=PEEK($D100+K)    CURRGREEN(K)=PEEK($D200+K)    CURRBLUE(K)=PEEK($D300+K)  NEXT K  RETURN.P1LOOP'-------  ' DROP PAPER SPRITES DOWN  IF STATE < 4 AND MUSESTATE=0 THEN BEGIN    FOR K = 0 TO 7      IF INT(RND(1)*3) = 0 THEN BEGIN        SPRITEFRAMEIDX(K) = MOD(SPRITEFRAMEIDX(K)+1,13)      BEND      IF SPRITEY(K) < 247 THEN BEGIN        SPRITEY(K) = SPRITEY(K) + INT(RND(1)*3)        SPRITEX(K) = SPRITEX(K) + INT(RND(1)*5)-2        MOVSPR K, SPRITEX(K), SPRITEY(K)        WPOKE ($40000+K*2), $11F1 + SPRITEFRAMEIDX(K)      BEND    NEXT K  BEND  GOSUB POLLPLAY  SLEEP .025  ' FADE IN TO GREY  ' ---------------  IF STATE = 0 THEN BEGIN    IF MOD(COUNTER,5)=0 THEN BEGIN      GOSUB FADECOLOURSTOGREY      FADEVAL = FADEVAL + 1      IF FADEVAL > 16 THEN STATE = STATE + 1:FADEVAL = 0:GOSUB STORECURRCOLOURS:COUNTER=0    BEND    COUNTER = COUNTER + 1  BEND  ' EBB-FADE TO COLOURS FOR DEFAULT PALETTE  ' ---------------------------------------  IF STATE = 1 THEN BEGIN    FADEVAL = DEFCOLVAL    STARTCOL = 0:ENDCOL = 15    IF COUNTER > 3 THEN ENDCOL = 31    GOSUB FADECOLOURSTODEFAULTS    DEFCOLVAL = DEFCOLVAL + DEFCOLDIR    IF DEFCOLVAL = 16 THEN DEFCOLDIR=-1    IF DEFCOLVAL = 0 THEN DEFCOLDIR=1:COUNTER=COUNTER+1    IF COUNTER = 6 AND DEFCOLVAL = 15 AND DEFCOLDIR=-1 THEN STATE=STATE+1:COUNTER=0  BEND  ' COLOUR-CYCLE MUSES  ' ------------------  IF STATE = 2 THEN BEGIN    DIST = DIST + VEL    IF DIST >= 1 THEN BEGIN      DIST = DIST - 1      COUNTER = COUNTER + 1      STARTCOL = 16:ENDCOL = 31      GOSUB CYCLECOLOURS      IF COUNTER > 16*2 THEN VEL=VEL*.93      IF COUNTER = 16*3-1 THEN STATE = 3:PALETTE RESTORE:COUNTER=0:DEFCOLVAL=0:DEFCOLDIR=2    BEND  BEND  IF STATE = 3 THEN GOSUB HIGHLIGHTCURRMUSE  IF STATE = 4 THEN GOSUB FADEOUT  IF STATE = 5 THEN GOSUB FADEOUT  ' BAIL OUT TO OLIVIA?  IF STATE = 5 AND CURRMUSE = 8 AND MUSESTATE=0 THEN RETURN  IF STATE = 6 THEN GOSUB FOCUSMUSE  ' GET A$:IF A$="" THEN GOTO P1LOOP  GOTO P1LOOP.FOCUSMUSE'----------  IF MUSESTATE = 0 THEN BEGIN    GOSUB INITMUSESPRITES    MUSESTATE=1    COUNTER = 0    PRIN T "";    RETURN  BEND  IF MUSESTATE = 1 THEN BEGIN    FADEVAL=COUNTER    GOSUB FADECOLOURSTODEFAULTS    IF COUNTER=16 THEN COUNTER=0:MUSESTATE=2  BEND  IF MUSESTATE = 2 THEN GOSUB SHOWTHANKS  IF MUSESTATE = 3 THEN BEGIN    FADEVAL=CO!UNTER    'PRINT "";CHR$(27);"Q";FADEVAL;:GETKEY S$    STARTCOL=0:ENDCOL=31:GOSUB FADECOLOURSTOBLACK    IF COUNTER = 16 THEN COUNTER=0:MUSESTATE = 4  BEND  IF MUSESTATE = 4 THEN BEGIN    'PRINT "";CHR$(27);"Q MUSESTATE=4";FADEVAL;:GETKEY S$"    FOR K = 0 TO 7:SPRITE K,0:SPRACTIVE(K)=0:NEXT K    BANK 128    GOSUB RESTORESCREEN    CURRMUSE = CURRMUSE + 1    MUSESTATE = 5    GOSUB STORECURRCOLOURS    COUNTER = 0  BEND  IF MUSESTATE = 5 THEN BEGIN    FADEVAL=COUNTER    START#CTANIM=-1, ACTPAINTING  #DECLARE ACTSTR$, ACTX, ACTY, ACTDUR, ACTREACTION  #DECLARE ACTTIMER  TSTART = TI  READ TIME  ACTION = -1  DO WHILE ACTION <>     ' TIME TO SWITCH TO NEXT ACTION?    IF (TI-TSTART) >= TIME THEN BEGIN      IF ACTION$ =  THEN GOSUB CLEARTXTTALK      READ ACTION      ACTTIMER=0      IF ACTION =  THEN READ ACTSTR$, ACTX, ACTY      IF ACTION =  THEN READ ACTSTR$, ACTDUR      IF ACTION =  THEN GOSUB CLEARTEXT      IF ACTION =  %THEN READ ACTANIM:ANIMIDX=0:ANIMREPEATCOUNT=0      IF ACTION =  THEN READ ACTPAINTING:GOSUB DRAWPAINTING      IF ACTION =  THEN READ ACTSTR$, ACTREACTION, ACTDUR:GOSUB INITREACTION      IF ACTION =  THEN PRINT "";      IF ACTION& =  THEN READ FRAMEIDX:GOSUB DRAWPETSCIIFRAME      IF ACTION =  THEN EXIT      TSTART = TI      READ TIME ' TIME FOR NEXT ACTION    BEND    IF ACTION =  THEN GOSUB DRAWTXTGREY    IF ACTION =  THEN GOSUB DRAWTXTTALK'    IF ACTION =  THEN GOSUB DRAWREACTION    GOSUB POLLPLAY    GOSUB POLLANIM  LOOP    RETURN#DEFINE 1 = -1#DEFINE 2 = -2#DEFINE 3 = -3#DEFINE  = -10#DEFINE  = -1#DEFINE į = -999#DEFINE ̯ = -1000#DECLARE FRAMESTART.POLLANIM'---------  IF ACTANIM = -1 THEN RETURN  IF FRAMEDUR > 0 AND (TI - FRAMESTART) < FRAMEDUR THEN RETURN  FRAMEDUR = 0  'CURSOR 0,1:PRINT "POLLANIM";  'CURSOR 0,2:PRINT "ACTANIM=";ACTANIM;  'CURS20:  SAVE FILENAME IN MAILBOX RAM ALNS1 AV A`: Aj: Bt --- LOAD FILE B~5490 #BOF$CF$ 2B CH1  {B   "CURRENT FILE "CF$" NOT SAVED. REALLY PROCEED? (Y/N) "FO$; B  : T$:  ("YN",T$) B  5490 B   T$"N" 5540: B C5490: "LOAD FILE NAME ($ FOR DIRECTORY, RETURN TO CANCEL) "(27)"T"; CNF$"" ,C  "";NF$ [C NF$"$" 0,0,79,23:"";:9 FG::6350 lC"";:5490 C  NF$"" 5540:5150: C
CF$NF$: "LOADING "CF$"..."; C5010 C""FO$; C(5150:  REDRAW SCREEN D2 DE0 7720:  PERSIST FILENAME !D<5490:9 CO((DE0)) FDF "";R$((DE0));DE$;" ";:9 SB lDP DE0 "; READ ";NL; "LINES."; uDZNS1 {Dd Dn: Dx --- QUERY SAVE FILE NAME D5490: "SAVE FILE NAME (RETURN TO CANCEL) "(27)"T"; DNF$"" D  "";NF$ 	E"";:5490 ECF$NF$ E !E: IE --- MAKE LINE LY THE CURRENT LINE [ECTLY : YCLY qE CTCL CTCTCL {E6690 E CT0 CT0 E YC0 YC0 E YCNL YCNL : CTYCSL3 E CTCL CTCTCL :  CONTEXT LINES E CT0 CT0  F"5150 F, F6 --- QUERY LINE NO \F@5490: "JUMP TO LINE # (RETURN TO CANCEL) "(27)"T"; oFJNN$"":  NN$ FTNN(NN$):"";:5490 F^ NNNL  FhLYNN:CL8:6600 Fr5540 F| F --- HELP G"-- CURSOR MOVEMENT --",,"-- EDITOR FUNCTIONS --" /G"CURSOR KEYS   MOVE THE CURSOR" WG"ALT + UP      SCROLL UP 1 LINE" G"ALT + DOWN    SCROLL DOWN 1 LINE" G"ALT + LEFT   SCROLL LEFT 1 CHAR(*)" G"ALT + RIGHT   SCROLL RIGHT 1 CHAR(*)" H"SHIFT + CLR   GO TO TOP OF FILE" /H"ALT + CLR     GO TO END OF FILE" [H"ALT + DELETE  DELETE CURRENT LINE" H"ALT + RETURN  TO START OF NEXT LINE" H"*) ONLY IN LINES WITH >80 CHARACTERS" H"",,,," F1  LOAD FILE" H,,,," F2  NEW FILE" I,,,," F3  SAVE FILE" -I,,,," F4  SAVE FILE AS" NI&,,,," F5  COMPILE + RUN" mI0,,,," F6  JUST COMPILE" I:,,,," F7  GO TO LABEL" ID,,,," F9  GO TO LINE NR"	 IN,,,,"F11  TOGGLE CTRL MODE" IX,,,,"F14  UPDATE DEFAULTS" Jb,,,,"HELP THIS SCREEN" VJl5490:"EE CHEAT SHEET -- PRESS ANY KEY TO RETURN TO EDITOR"; nJv T$:5150:5540: J --- SET FILENAME FROM MAILBOX RAM J 4:T$((("
FF00")))((("FF01"))) J T$"SK" BO6:FG5:BG0:SB14:HL2:JL1: KJL1 :  JUMP LINE 5KAL(("FF07"))1 :  AUTOLOAD FLAG? GK AL0 7170 jKTF$"":I("FF10"):  (I)0 KTF$TF$((I)):II1: KCF$TF$ K (("FF07"))2  :  AUTOJUMP FLAG K ("FF07"),(("FF07"))(255  2) LJL(("FF09"))256(("FF0A")):EE(("FF08"))  L TLBO(("FF02")):BG(("FF03")):FG(("FF04")) xLHL(("FF05")):SB(("FF06")) LBU(("FF07"))4 :  BACKUP FLAG L  128 L* L4: L> ------ NEW LH CH  MR:  5490:"URRENT FILE WAS MODIFIED! EALLY START OVER (Y/N)? "; ?M\:  : T$:  T$"Y"  T$"N" \Mf:   T$"N" 5540:     cMp MzA0MX:LI$(A)"":A:LC0 MCF$"" M"":5150 M5540 MCH0:XC0:YC0:CT0 M5490:"** EW FILE **";:NS1 M M ------ NEW &N5490:"REALLY QUIT EE? "(27)"O"; FN: T$:  T$"Y"  T$"N" \N T$"N" 5540: wN 128:248,0: :4  N"TSCHUESSN...!" N N --- LABELS N 1 N5490:"OLLECTING LABELS..."; N$A072:MK$(A)"":MK(A)0:A:MN0 )O.A0NL:T$LI$(A):LB$"":(T$,1)"."7490 QO8MK$(MN)(T$,1,38):MK(MN)A:MNMN1 WOB aOL5490 OV MN0 "ABEL LIST. HOOSE LABEL WITH CURSOR KEYS + , ESCAPE WITH Ò"; O` MN0 "O LABELS FOUND"FO$;:NS1: Oj 0,0,79,23:"" PtA0MN 1P~A 40(A24),(A,24): MK$(A);: A :PMP0 @P kP  SX40(MP24): SY(MP,24):A 0,10 P  A SX,SY: "";MK$(MP);""; P   T$ P  A SX,SY: MK$(MP); P   T$"" MPMP1 P   T$"" MPMP24 P  T$"" MPMP1 Q  T$"" MPMP24 +Q  MPMN1 MPMN1 >Q   MP0 MP0 ZQ   T$(13)  T$(27) Q
 T$(13) LYMK(MP):6600:Ս5150 Q5540:  REDRAW STATUS BAR Q Q( --- SAVE FILENAME IN MAILBOX RAM Q2 9000 :  SAVE TO ATTIC R< I1  (CF$): $4FF10I1,((CF$,I,1)): I /RF $4FF10I1,0 JRP $4FF00,("S"),("K") cRZ $4FF07,($4FF07)1 oRd128: Rn --- COMPILE RxAB0 R CF$""  :  NOW FILENAME, NO CIGAR R CH1  R  5490: 9 HL S   "CURRENT FILE NOT SAVED - PRESS ANY KEY";: T$ )S  9 FG: 5540: AB1 0S >S AB1  TS""(27)"L"; {S GOSUB9000 : REM SAVE LINE BUFFER S"EDMA 0,$3FFF,$8005000,$2001:NEW RESTORE":"RUN"; S 128 S 208,2     :  NO OF CHARS IN KEYBOARD BUFFER T 688,13,13 :  2X RETURN T AT --- M/L HELPER FOR VIC-IV MODE QT128:7970 }T I0  12: A$: ("1600")I,(A$): I T" 78,A2,47,A0,53,8E,2F,D0,8C,2F,D0,58,60 T,V4("1600") T6 T@ ================ TJ FIND AND REPLACE UT ================ U^: -Uh5490: "FIND:"(27)"T"; pUrFS$"":RS$"":SD1 :  FIND STRING, REPLACE STRING, SEARCH DIR U|RA%0 :  REPLACE ALL U 1,0,0: 1,FS$: 1 U FR%0 8110 U  "";:5490:"REPLACE:"(27)"T"; U   1,0,0: 1,RS$: 1 V"";:5490 AV FS$""  FS$" " "FIND CANCELLED.";:NS1: JVSYC eV5490:"SEARCHING..."; zV  S0  SNL V  FP(LI$(S),FS$) :  FOUND POS V   FP0 8240 V     LYS:CL8: 6600 V      128 V       MARK FOUND LINE W       RV0  79 )W        I((YCCT)80)RV MW         2048I,(2048I)  128 ZW      RV xW       FLASH FOUND STRING W!       RV0  (FS$)1 W"        I((YCCT)80)FPRV1 W#         $D800I,($D800I)  16 W$       RV X&       FR%0 8310: Ս8390 X0   SSSD X:  OXD  FD$"Q" 5540: Ս5490:"END OF FOUND";:NS1 lXN A XC,YCCT: (27)"Q"; vXX 9 FG Xb A$LI$(YC):1:  REDRAW CURRENT Xl  Xv  --- FIND NEXT X  128 X 5490: "FIND N)EXT P)REV Q)UIT"; Y : FD$:  ("NPQ",FD$) Y  FD$"N" SD1 -Y  FD$"P" SD1 CY  FD$"Q" SNL1 IY  [Y  --- REPLACE fY  128 Y 5490: "R)EPLACE A)LL N)EXT P)REV Q)UIT"; Y : FD$:  ("RANPQ",FD$) Y  FD$"N" SD1 Y  FD$"P" SD1 Y! FD$"Q" SNL1 
Z! FD$"R" 8480 Z! Z !TS$LI$(S) LZ*!NS$(TS$,FP1)RS$(TS$,FP(FS$),255) [Z4!LI$(S)NS$ xZ>!A XC,YCCT: (27)"Q"; ZH!A$LI$(S):1 ZR!SS1 Z\! Zf! Zp! --- ERROR HANDLER Zz! ER30  Z! Z! 128:248,0: :4  [! (27)"Q"(27)"L";(ER),EL [! ;[(# --- COPY LINE BUFFER TO ATTIC RAM R[<#CB$8010000 : CCB ~[A# C,NL1 : CC2 :  STORE NO OF LINES [F# A0  NL [P#  P
(LI$(A)):L(LI$(A)):B$10000(P1) [Z#   C,L : CC1 [d#   L0 ! 0,L,B,C:CCL [n# [x# $\# --- COPY ATTIC RAM TO LINE BUFFER ;\#CB$8010000 : CCB N\#NL(C):CC2 W\#CL0 f\#  CLNL \#  L(C):LI$(CL)(BL$,L):P
(LI$(CL)) \#  B$10000(P1):CC1 \#   L0  ! 0,L,C,B : CCL \#  CLCL1 \# \# ]T$ "B65SUPPORT.BIN": $1600 +]^$A(0): SET ISSUE# TO ZERO V]h$L$"/FILE:"CF$: 9450: POST FILENAME e]r$#2,(CF$) o]|$L$"" z]$#2,C$ ]$L$L$C$ ]$ (L$)128   9450: POST CHUNK ]$ N$; ]$  ST  64  9350 ]$#2 ^$ (L$)0   9450: POST REMAINING CHUNK >^$ 9450: POST EMPTY CHUNK TO DECLARE WE'VE FINISHED X^$ "FINISHED POSTING!" ^^$ w^$ *** POST CHUNK *** ^$L$((L$)1)  L$: PREPEND THE LENGTH OF STRING+1 ^$A("/"L$) ^% "POSTING CHUNK..." ^%L$"" ^%  _!% MOVE TO NEXT WORD _&%  (CL$,XCXI,1)  " " +_0%   9600 :_:%   EF   @_D% ]_N%  (CL$,XCXI,1)  " " j_X%   9600 y_b%   EF   _l% _v% _% MOVE TO NEXT CHAR _%EF0:XCXC1 _% XC(CL$)   `%   YC NL  XC0:YCYC1:CL$LI$(YC): YCCT20   5250 `%  EF1 `% `% 5`% MOVE TO PREVIOUS WORD L`% 9800: PREV CHAR i`%  (CL$,XCXI,1)  " " v`%   9800 `&    EF   `& `&  (CL$,XCXI,1)  " " ` &   9800 `*&   EF   `4& `9& 9600: NEXT CHAR `>&  aH& MOVE TO PREV CHAR aR&EF0:XCXC1 !a\& XC0   baf&   YC0  YCYC1:CL$LI$(YC):XC(CL$)1: YCCT0  5330 vak&   XC0  XC0 ap&   EF1 az& a& EF1  (CL$)  YC0   9810 a& a& DELETE CURRENT CHAR a& XC(CL$)   a&  CH1 b&  CL$(CL$,XCXI1)(CL$,XCXI1) &b&  LI$(YC)CL$ -b& 3b&                                                                       '0, 0, ů, 0, "SAVE", ],    _  [ 0, 0, 0, 0, ů, 0, "LOAD", ],    _  [ 0, 0, 0, 0, ů, 0, "EXIT", ]     _] #DEFINE  = 63.INITBTNS'---------BTNSW%(0) = LEN(BTNSTEXT$(0))+2BTNSH%(0) = 3FOR K = 1 TO د-1 #TOK$ = ""      BEND : ELSE BEGIN        A$ = A$ + CURCH$        CURCH$ = ""      BEND    BEND    IF QUOTEFLAG = 1 THEN BEGIN      A$ = A$ + CURCH$      GOTO RVALSKIP    BEND    IF INSTR(DELIM$, CURCH$) <> 0 THEN BEGIN      GOSUB CHECKTOKENFORSUBBING      A$ = A$ + CURTOK$      CURTOK$ = ""      IF CURCH$ = " " THEN CURCH$ = ""      A$ = A$ + CURCH$    BEND : ELSE BEGIN      CURTOK$ = CURTOK$ + CURCH$    BEND.RVALSKIP  NEXT  GOSUB CHECKTOKENFORSUBBING   S$ =%REEN(K) = PEEK($48100+K)    DEFAULTBLUE(K) = PEEK($48200+K)  NEXT K  IF DEBUGFLAG=1 THEN BEGIN    ^^BLOAD "MURAL.BIN",P($48000),R    ^^BLOAD "MURAL.CLR",P($49000),R  BEND  RETURN.FADECOLOURSTOGREY'--------------------': FADEVAL = 0& TO 16  TEMPVAL = (16-FADEVAL) / 16  FOR K = 0 TO 31    GREY = (DEFAULTRED(K) + DEFAULTGREEN(K) + DEFAULTBLUE(K)) / 3    POKE $D100+K, INT(GREY + (CURRRED(K) - GREY) * TEMPVAL)    POKE $D200+K, INT(GREY + (CURRGREEN(K) - GREY) * TEMPVAL)    PO'KE $D300+K, INT(GREY + (CURRBLUE(K) - GREY) * TEMPVAL)  NEXT K  RETURN.FADECOLOURSTODEFAULTS'------------------------  ': FADEVAL=0 TO 16  TEMPVAL = FADEVAL / 16  FOR K = STARTCOL TO ENDCOL    POKE $D100+K, CURRRED(K) + (DEFAULTRED(K) -CURRRED(K)) * TEMPVAL    POKE $D200+K, CURRGREEN(K) + (DEFAULTGREEN(K)-CURRGREEN(K)) * TEMPVAL    POKE $D300+K, CURRBLUE(K) + (DEFAULTBLUE(K)-CURRBLUE(K)) * TEMPVAL  NEXT K  RETURN.FADECOLOURSTOBLACK'---------------------  ': FADE" ")" THEN BEGIN      DELIM$ = DEFAULTDELIM$ + "DPUB"    BEND    IF CURCH$ = DBLQUOTE$ THEN BEGIN      QUOTEFLAG = ABS(QUOTEFLAG - 1)      IF QUOTEFLAG = 1 THEN BEGIN        GOSUB CHECKTOKENFORSUBBING        A$ = A$ + CURTOK$        CUR!  _  [ 0, 0, 0, 0, ů, 0, "CIRCLE", ],  _  [ 0, 0, 0, 0, ů, 0, "ELLIPSE", ], _  [ 0, 0, 0, 0, ů, 0, "BOX", ],     _  [ 0, 0, 0, 0, ů, 0, "POLY", ],    _  [ 0, 0, 0, 0, ů, 0, "FILL", ],    _  [ 0, 0,   
   130 7  A$(A$,XI):B(A$):OB80:"";:OB79 k  P
(A$):0:M(P1)256(P2):CMB1:B05   1:AMC:A$((A));:   128:O9 HL:79);"$";:9 FG     d :  n  --- GENERAL INITIALIZATIONS ---  x :   8560 !  0,65              :  M65 FAST MODE /! 7940:  INSTALL M/L A! PF$"11.EDIT" !  7,"SCRATCH "(34)PF$(34)":DSAVE"(34)PF$(34)":DVERIFY"(34)PF$(34) !  	(2)80  (27)"X";: FORCE 80COLS MODE ! 7040: READ DEFAULTS " ; BG: < BO: 9 FG 12:GREYS(2)=11#DECLARE MUSECLR(9)MUSECLR(0)=20MUSECLR(1)=18MUSECLR(2)=29MUSECLR(3)=26MUSECLR(4)=22MUSECLR(5)=28MUSECLR(6)=16MUSECLR(7)=31MUSECLR(8)=25#DECLARE THANKSTARTIDX  #DECLARE 64 = $D057  #DECLARE  = $D055   #DECLARE    = $D056  #DECLARE  = $D060  #DECLARE  = $D062  #DECLARE 16 = $D06E  #DECLARE  = $D06C  #DECLARE  = $D06E  #DECLARE ǯ7 = $D05D'----.MAIN'----  POKE $D63C,$F ' SELECT 8580  SID  GOSUB INITDEFAULTCOLOURS  GOSUB INITMUSIC  GOSUB P1DROPPAPERS  GOSUB P7BIGOLIVIAWITHSPRITES.INITDEFAULTCOLOURS'--------------------#DECLARE DEBUGFLAG = 0  IF PEEK($D020)<>0 AND PEEK($D020)<>2 THEN BEGIN    BORDER 0    POKE $D$018, PEEK($D018) AND $FD    EDMA 0, $300, $FFD3100, $48000    EDMA 3, $300, 0, $FFD3100    ^^BLOAD "MURAL.BIN",P($800),R    ^^BLOAD "MURAL.CLR",P($1F800),R    DEBUGFLAG = 1  BEND  FOR K = 0 TO 31    DEFAULTRED(K) = PEEK($48000+K)    DEFAULTG 	 : ""(27)"M"; ," 5490:" EE V0.4.6"; Z"  $               :  ENABLE RAW FN KEYS `" : " MX2000               :  MAX NUMBER OF LINES " ES%0                 :  ESCAPE FLAG (# T$"                                                      
                          ":BL$T$T$T$:T$"" ]# Q$(34)           :  FAST ACCESS TO QUOTE CHAR #FO$(27)(27) :  ESCAPE FLASH ETC. #CC$""(22)(20)(148)(13) :  CTRL CHARS $HM$""(20)     :  HORIZONTAL MOVE MENT CHARACTERS @$"CH$(0)" ":CH$(1)"*" :  FOR FILE CHANGED INDICATOR ~$,CM$(0)"    ":        :  FOR CONTROL CHAR MODE INDICATOR $6CM$(1)"CTRL"FO$ $@R$(1)"SUCCESS: ":R$(0)"ERROR: " :  DISC OPERATION RESULT %JCO(1)SB:CO(0)HL                  :  DISC OPERATION RESULT COLORS Y%TDF$"11.DEFAULTS"                 :  DEFAULTS FILE NAME %^ LI$(MX)           :  LINE BUFFER %h MK$(72),MK(72)   :  MARKER TABLE %rEE$(0)"VARIABLE NOT DECLARED" %|EE$(1)"VARIABLE MISSING" &EE$(2 )"UNRESOLVED REFERENCE" ,&EE$(3)"ILLEGAL HEX NUMBER" O&EE$(4)"ILLEGAL BINARY NUMBER" U&: & --- BUILD CHAR TRANSLATION TABLE --- &: & A$(255)           :  CHAR TRANSLATION TABLE &A131:A$(A)""(64A)"":A$(128A)""(192A) "":A ('A32127:A$(A)(A):A$(A128)(A128):A ='A$(34)(34)FO$ j'A$(160)"" :  MAKE SHIFT+SPACE VISIBLE p': v': 'XI1 :  HORIZONTAL SCROLL INDEX IN CURRENT LINE ' 128 ' 248,(248)26    :  DISABLE SCREEN EDITOR LINE LI NKING 0(&XC0:YC0:SL23 :  CURSOR POS, NUMBER OF SCREEN LINES B(0 CF$""  k(5   ($4FF70)55  ($4FF71)77   z(6     9100 (7  :  (:    5010:  LOAD FILE IF SET (<     9000:  KEEP COPY OF FILE IN ATTIC RAM (?     $4FF70,5 5,77 8)D     DE0 CF$"" :  DELETE CURRENT FILENAME IF FILE NOT THERE A)I   H)N N)X: )b UNCOMMENT THIS FOR OUTPUT PERFORMANCE TEST )l TS=TI:FORTE=0TO10:GOSUB2080:NEXTTE:PRINT""TI-TS:STOP )v: )5150:  REDRAW SCREEN )5540:   BUILD STATUS BAR *: * ********************** <* ** MAIN EDITOR LOOP ** Y* ********************** _*: *128:V4 :  ENABLE VIC IV * JL1  *  LYJL:CL5:6600:  BRING LINE IN CONTEXT *    EE0  **    E$"" +4      EE128 E$EE$(EE128) : E$ER$(EE) G+>     E$"" 5490:"";E$" IN "(JL);"";:NS1 P+H   +R  JY1:CL0             :  CLEAR JUMP LINE +\ +f +p   YCCT0 CT0:YC0 +z   NS1 PO$"      "((XC),2)":"((YC),2):5 400 +  CL$LI$(YC) ,  A XC,YCCT 5,  9 SB:A :  T$ : A $:9 FG Z,   NS1 5540: 128:V4: NS0 ,   128:AK  (54801)  16 :  CHECK ALT KEY ,   T$(22)  (AK  T$"C") CM(CM1) : 2170 ,    CO((CC$,T$)  CM0)  AK  ,    CO  5-     T$"G" T$"" :  WORKAROUND FOR CHALLENGED KEYBOARDS N-     T$"S" T$"" -     T$(13) CH1: 5650:  INSERT RETURN -     (HM$,T$)0  XI1  -       XI1:A 0,YCCT:CL$LI$(YC):A$CL$:1 .	        T$( 13) A 0,YCCT1:A$LI$(YC1):1 .	     ?.	     T$""   9510: CTRL-W = NEXT WORD r.	     T$""   9700: CTRL-U = PREVIOUS WORD .	     T$""   9900: SHIFT-DEL = DELETE CURRENT CHAR .	     T$"P" 9300: POST CURRENT FILE TO PC  /	     T$"F" 8000:FR%0:  FIND 8/$	     T$"R" 8000:FR%1:  FIND AND REPLACE X/.	     T$"" 5990:  SAVE /8	     T$"" SA1:5990:  SAVE AS /B	     T$"" 6260:  LOAD /L	     T$"" 7360:  STOP /V	     T$"" 7230:  NEW  0`	     T$"" 7430:  LABELS &0j	     T$"" 6710:  GOTO LINE F0t	     T$"" 6790:  HELP r0~	     T$""            :  HOME/END 0	       AK0 LY0:6600: LYNL:6600 0	     0	     T$""  :  -------- CURSOR RIGHT 0	        AK  #1	          79XI(CL$) XIXI1:A0,YCCT:A$CL$:1 ;1	       : XCXC1 Q1	       XC79  {1	        XC79: XCXI(CL$) XIXI1 1	        A 0,YCCT:A$CL$:1 1	       1	     1	     T$""  2 
       XC0  XCXC1 : Ջ YC0 YCYC1:XC(LI$(YC)): XC79 XC79 2

     32
     T$""  [2
       AK LYYCSL:6600:YCYC1 2(
       YCCT20 5250:  YCCTSL YCYC1 22
     2<
     T$""  2F
       AK LYYCSL:6600:YCYC1 3P
        YCCT0 5330:  YCCT0 YCYC1 3Z
     :3d
     T$"" 7790:  --- F5 - COMPILE Z3n
     T$(20) : DELETE i3x
      CH1 3
       XC0  AK 5840: :  MERGE WITH LAST LINE 3
      CL$(CL$,XCXI2)(CL$,XCXI) 3
       LI$(YC)CL$ 4
      A 0,YCCT:A$CL$:1:(CL$)79" "; .4
       XC0 XCXC1 94
     B4
   q4
   T$""  :  --- F14 - SAVE DEFAULTS 4
    5490:"SAVING DEFAULTS..."; 4
     (DF$): (DF$),B(4),P(("FF00"))  P(("FF80")) 4 
    DEDS : DE$DS$ 5
    9 CO((DE0)) 05
    5490: "";R$((DE0));DE$;" ";:9 SB =5
    NS1 F5   z5: : T$(27)  :  -- CHECK ESCAPE FLAG 5  T$"": ES%0  ES%1: ES%0 5: : ES%1   :  -- CHECK ESCAPE CHARACTE RS 5   T$"K"  XC(CL$) 6   T$"J"  XC0 )6   T$"D"  AK1: 5840:CH1 56  ES%0 S6: :  -- INSERT CHAR `6    CH1 y6"     XC79 XIXI1 6,      (CL$)XC:CL$CL$" "::  FILL UP SPACES IF NEEDED 66    CL$(CL$,XCXI 1)T$(CL$,XCXI) 6@    LI$(YC)CL$ 7J    A 0,YCCT:A$CL$:1 67T    XCXC1 :  XC79 XC79 M7^  : ENDIF ES%=1 j7`  : ENDIF T$=CHR$(27) 7b  : ENDIF CO (CTRL-CHAR) 7h  QU1 7r 7|: 7 ==================== SUBROUTINES ===== ================ 7 --- READ IN F$ 8 1,1,5,CF$",S,R":DEDS:DE$DS$ 58 DE0 CF$OF$: 1: S8A0MX:LI$(A)"":A:LC0 k8NL0:CT0:YC0:XC0 q8 8  L$"": 1,L$ 8  LI$(NL)L$ 8  NLNL1 8  ST0 8NLNL1:CH0 8  1 8
   8: 8 ---  REDRAW SCREEN 9(9 FG :  ""; 92 CT0 CT0 "9< I0  SL /9F  A 0,I B9P  A$LI$(CTI) X9Z   (27)"Q";:1 `9d I f9n l9x: 9 --- SCROLL UP 9 CTSLNL1  9CTCT1 :  CURRENT TOP 9S$LI$(CTSL) 9A 0, !0: (27)"V"; 9A 0,SL:A$S$:1 9 9: : --- SCROLL DOWN  : CT0  ,:CTCT1 ;:S$LI$(CT) [:A0,0: (27)"W";:A$S$:1 a: g:: : --- DISPLAY STATUS IN ST$ :"9 SB :,"";:A 20,24:""PO$; :6A 75,24:CM$(CM); :@ "A 0,24:""CH$(CH)""; :J 0,0,79,SL :T9 FG ;^ ;h: >;r 3,80,160,0,3968,0 :   --- CLEAR STATUS BAR W;| 3,80,SB,0,65408,1 j;"";:A 0,24 t;9 SB z; ; --- CLEAR STATUS ; 3,80,160,0,3968,0 ; 3,80,SB,0,65408,1 ; #9 SB +<"";:A 18,24:"        F1LOAD F3SAVE F5COMPILE F7LBLS F9GO F11CMODE "; Z<A 2,24: CF$""  CF$;:ՙ "<UNTITLED>"; k< 0,0,79,SL u<9 FG {< <: < --- INSERT RETURN <YCYC1 <NLNL1 <& YCNL NLYC  $<0ANL1YC11:LI$(A)LI$(A1):A:LI$(YC)"" =:LI$(YC)(LI$(YC1),XCXI) 8=DLI$(YC1)(LI$(YC1),XCXI1) T=NXC0:SC1:PL$LI$(YC1) =X  (PL$,SC,1)" " :  --- AUTOINDENT =b   LI$(YC)"" LI$(YC)" "LI$(YC) =l  SCSC1:XCXC1 =v % = YCCTSL 5250:  SCROLL UP >A XC,YCCT: (27)"I"; >A$LI$(YC):1 :>A XCSC1,YCCT1: (27)"Q"; N>A$LI$(YC1):1 T> Z>: p> --- MERGE LINES ~> YC1  > AK SXXC:XC0:LI$(YC)"" >YCYC1:XC(LI$(YC)) >LI$(Y &C)LI$(YC)LI$(YC1) >AYC1NL1:LI$(A)LI$(A1):A ? YCNL LI$(NL)"" '? NL0 NLNL1 -?: J? A 0,YCCT:A$LI$(YC):1 g?*A 0,YCCT1:(27)"D"; ?4A 0,SL:A$LI$(CTSL):1 ?> CTSLNL1 A 0,23: (27)"Q"; ?H AK XCSX:YCY 'C1 ?R ?\: ?f --- SAVE FILE @p BU  CF$""  SA0  )@z  5490:"BACKING UP OLD FILE..."; C@  B$(CF$,12)".BAK" P@   (B$) e@   (CF$)  (B$) l@ @ CF$""  SA1 SA0 : 6520:  SAVE AS @ CF$"" 5540:  @5490:" SAVING..."; @ (CF$) @IMX:  LI$(I)"":II1: @NLI "A 1,1,3,CF$",S,W":DEDS:DE$DS$ 1A A0  NL AA  1,LI$(A) IA A ]A DS0  DEDS eA 1 oA5490 A$ DE0 CH0 A.9 CO((DE0)) A8 R$((DE0));DE$;" ";:9 SB AB77!            BIT 0  : AUTOLOAD SOURCE ENABLE FLAG               BIT 1  : AUTOJUMP TO LINE FLAG               BIT 2  : AUTOBACKUP FLAG               BIT 3  : VERBOSE FLAG               BIT 4-7: RESERVED$04,FF08        ERROR NUMBER TO BE DISPLAYED (>1928 ARE PREPROCESSOR ERRORS)$04,FF09/0A     LINE NUMBER FOR AUTOJUMP$04,FF10-$04,FF1F        CURRENT FILE NAME$04,FF20-$04,FF2F        OUTPUT FILE NAME$04,FF30-        $04,FF7F        RESERVED. 7.2 TTIC  CACHE USAGELEVEN USES SOME PAR!.V0.1A          25.01.2021- INITIAL RELEASE.V0.2           26.01.2021- ADDS "ALT+G", "ALT+C" AND "ALT+S" FOR "GOTO LINE", "CTRL MODE" AND "SAVE  DEFAULTS" COMMANDS RESPECTIVELY (THANKS, NOOPY)- ADDS A WHOLE LOT OF MISSING 10 KEYWORDS (ALSO TH!ANKS, NOOPY :))- LOWERS REQUIREMENT TO 911203 (THANKS AGAIN, NOOPY :)).V0.3           27.01.2021-  NOW SHOWS SHIFT+SPACE AS 'CHECKERBOARD' CHARACTER IN ORDER TO AVOID   STRANGE COMPILATION ERRORS WITH ILLEGAL SHIFT-SPACES BETWEEN IDENTIFIERS- !: FIXES BUG IN AUTOINDENT WHEN SPLITTING LINES (THANKS LEXANDER)- ADDS NEW EXAMPLE CODE: "IENI" .V0.3.1         28.01.2021- : NEW "SHIFT+/" COMMAND TO QUIT - ADDS NEW EXAMPLE CODE: "IZZY".V0.3.2         30.01.2021- : BUGFIX FOR A!N ISSUE WHERE THE "ALT" KEY WOULD NOT BE DETECTED  ON  VERSIONS NOT FORCING THE - CONTEXT (THANKS  & NOOPY)- OPTIMIZES CODE GENERATOR TO EMIT LESS SPACES AND COLONS- REMOVES FAULTY - ACTIVATION IN AUTOBOOT (THANKS ITHIFTER)- FIXES !A BUG WHERE THE LABEL TABLE WOULD GET CORRUPTED AND/OR  THE COMPILER WOULD CRASH (THANKS ITHIFTER)- SOME CLEANUP IN DOCUMENTATION.V0.3.3         17.2.2021-  & PREPROCESSOR: OW SUPPORTS DIFFERENT MEMORY MANAGEMENT SCHEME  OF S >920130 (THANK!S ITHIFTER).V0.4           23.3.2021- : FIXES BUGS RELATING TO PAGEUP AND PAGEDOWN- : ADDS FIND & REPLACE- PREPROCESSOR: FIXES A BUG WHERE A SURPRISINGLY LARGE NUMBER OF KEYWORDS   WOULDN'T PROPERLY BE RECOGNIZED (HEY, ANYBODY USING THIS AT A!	LL?)- PREPROCESSOR: ADDS SUPPORT FOR BYTE ("&") DATA TYPE- PREPROCESSOR SPEEDUP (THANKS ITHIFTER)- BUGFIX IN % PREFIX (THANKS ITHIFTER)- FIXES "BASEDEMO.EL" FILENAME (THANKS MOK)- SUPPORT FOR OLD MEMORY MANAGEMENT SCHEME DROPPED- UPDATED !
- NOW REQUIRES  >=920147. LDER VERSIONS OF THE CLOSED  HAD A BUG  WHICH COULD CAUSE SEVERE DATA CORRUPTION; ALSO,  NOW USES SOME OF  ITHIFTER'S ADVANCED FEATURES; THUS COMPATIBILITY WITH HORRIBLE OLD   =  WAS DROPPED IN THIS VER!SION..V0.4.1         10.4.2021- NOW USING YPER: DITOR, PREPROCESSOR AND THE 'SETTINGS' APPLICATION  NOW STAY RESIDENT IN . O MORE CHAIN LOADING FROM DISC. AYY (THANKS  ITHIFTER)- NOW REQUIRES  >=920156.V0.4.2         19.5.2021- FI!XES   CONTROLLER IF IT HAS BEEN INITIALIZED WITH THE WRONG VALUE- TESTS FOR THE PRESENCE OF  - UPDATED THE DEMO PROGRAMS TO THE LATEST  FEATURES- NOW REQUIRES  >=920180.V0.4.3         18.6.2021, NOT RELEASED- SOME INTERNAL REF!ACTORING TO MAKE ROOM FOR NEW FEATURES.V0.4.4          8.8.2021- FIXES A  INCOMPATIBILITY WHICH WOULD CRASH THE FIND COMMAND AND/OR DISPLAYGARBLED OUTPUT (THANKS URCE AND ITHIFTER)- FIXES AN ISSUE WHERE DISC ERRORS WOULD NOT BE REPORTED- NOW !FLASHES THE FOUND STRING.V0.4.5         15.3.2022- CORRECTS A CONDITION WHERE THE  BOOTLOADER WOULD CRASH BECAUSE THE  STATEMENT IS NO LONGER SUPPORTED BY 65 (THANKS INDRAIL)- UPDATES  TO REFLECT THE DEVELOPMENT STATUS OF !.V0.4.6         20.6.2022- FIXES A BUG IN THE MODULE LOADER WHICH WOULD LEAD TO CRASHES WHEN THE COMPILED  PROGRAM WOULD BE EDITED (ALTHOUGH  HAVE NO IDEA WHY SOMEONEWOULD WANT TO DO SUCH A THING... ;-)- FIXES A BUG WHERE THE EDITOR WOUL!D WRITE A FAULTY DEFAULT FILE WITHBACKGROUND, BORDER AND FOREGROUND COLOUR SET TO BLACK, THUS RENDERING THEEDITOR UNUSABLE- FIXES A BUG WHERE THE LAST LINE OF A PROGRAM WOULDN'T BE SAVED TO ATTIC WHEN CHANGING MODULES- NOW FORCES A RELOAD OF THE  VCURRENT EDITOR DOCUMENT WHEN REBOOTING- CHANGED LAUNCH HOTKEY TO +/                                                                                                                                                                           ! ! T$ "B65SUPPORT.BIN": $1600 3 ^$F$"HELLO.EL" ] h$L$"/FILE:"F$: 9450: POST FILENAME k r$#2,(F$) u |$L$""  $#2,C$  $L$L$C$  $ (L$)128   9450: POST CHUNK  $ N$;  $  ST  64  9350  $#2 !$ (L$)0   9450: POST R EMAINING CHUNK D!$ 9450: POST EMPTY CHUNK TO DECLARE WE'VE FINISHED ^!$ "FINISHED POSTING!" d!$ }!$ *** POST CHUNK *** !$L$((L$)1)  L$: PREPEND THE LENGTH OF STRING+1 !$A("/"L$) !% "POSTING CHUNK..." !%L$"" !%   L\ `C!#OUTPUT "BIGSPRITE"#DEFINE =1'============.DECLARATIONS'============  ' MUSIC RELATED VARS  ' ------------------  #DECLARE MUSICCHUNKINDEX     ' OLD T  #DECLARE BARINDEX             ' OLD TT  #DECLARE MAPBARTOCHUNK(25)  ' OLD M()!  #DECLARE V1$(15), V2$(15), V3$(15), V4$(15), V5$(15), V6$(15)  ' PALETTE  ' -------  #DECLARE DEFAULTRED(32)  #DECLARE DEFAULTGREEN(32)  #DECLARE DEFAULTBLUE(32)  #DECLARE CURRRED(32)  #DECLARE CURRGREEN(32)  #DECLARE CURRBLUE(32)  #DE!CLARE FADEVAL, TEMPVAL  #DECLARE GREY  #DECLARE TEMPR, TEMPG, TEMPB  #DECLARE VEL=1,DIST=0  ' MISC  '-----  #DECLARE A$ = ""  #DECLARE IDX = 0  #DECLARE VALUE = 0  #DECLARE LOC  #DECLARE K  #DECLARE SPRITEFRAMEIDX(8)  #DECLARE SPRITEX(8!)  #DECLARE SPRITEY(8)  #DECLARE STATE = 0  #DECLARE COUNTER = 0  #DECLARE DEFCOLVAL = 0, DEFCOLDIR=1, ALTCOLVAL = 0, ALTCOLDIR=1  #DECLARE STARTCOL, ENDCOL  #DECLARE CURRMUSE = 0#DECLARE THANKSTATE = 0#DECLARE THANKIDX = 0#DECLARE S$,SX,!SY#DECLARE THANK1$(15)THANK1$(0)="A BIG THANK YOU TO THE CORE MEGA65 TEAM FOR ALL THEIR EFFORTS OVER THE YEARS!"THANK1$(1)="HIGHLANDER"THANK1$(2)="DEFT"THANK1$(3)="SERIOUSLY"THANK1$(4)="ADTBM"THANK1$(5)="FALK/BLUEWAYWS"THANK1$(6)="ANTTI-BRAIN"TH!ANK1$(7)="DOUBLEFLASH"THANK1$(8)="BIT SHIFTER"THANK1$(9)="LGB"THANK1$(10)="SY2002"THANK1$(11)="TAYGER"THANK1$(12)="LYDON"THANK1$(13)="M3WP"THANK1$(14)="FERALCHILD"THANK1$(15)="INDIOCOLIFA"#DECLARE THANK2$(16)THANK2$(0)="EXTRA SHOUT OUTS TO:"T!HANK2$(1)="TRENZ ELECTRONICS AND THE MOULDS TEAM!"THANK2$(2)="DEATHY FOR ALL YOUR PASSION AND DEDICATION TO THE MEGA65!"THANK2$(3)="BIT SHIFTER FOR ALL THE GREAT BASIC 65 ENHANCEMENTS!"THANK2$(4)="LYDON FOR ALL YOUR EFFORTS PREPARING BATCH#2!"THANK2$!(5)="SY2002, MJOERGEN AND LYDON FOR ALL THE ADDITIONAL CORES!"THANK2$(6)="DDDAAANNN FOR ALL YOUR DOCUMENTATION, TOOLING AND COMMUNITY-BUILDING!"THANK2$(7)="TAYGER FOR MEGA65CONNECT AND THE 'FILES.MEGA65.ORG' FILEHOST!"THANK2$(8)="IMPAKT FOR THE DETERM!INED AND THOROUGH MANUAL PROOF-READING!"THANK2$(9)="THECHIEF FOR YOUR EFFORTS SUPPORTING THE NEXYS BOARD!"THANK2$(10)="HOJO FOR THE AWESOME NEW FRONT COVERS YOU MADE FOR ALL OUR MANUALS!"THANK2$(11)="AMOK FOR ALL YOUR DOCUMENTATION EFFORTS!"THANK2$(1!2)="UBIK FOR THE AWESOME ELEVEN IDE!"THANK2$(13)="MAURICE FOR TESTING EVERY SINGLE BASIC 65 EXAMPLE IN THE MANUAL!"THANK2$(14)="RETROCOMBS, PERIFRACTIC AND RB-JEFFREY FOR YOUR AWESOME YOUTUBE VIDS!"THANK2$(15)="MINDRAIL FOR THE MACGUYVER-JTAG VIDEO!"!THANK2$(16)="DEFT AND ADTBM FOR ALL YOUR 'HELLO MEGA65 COMMUNITY' VIDEOS!"#DECLARE THANK3$(60)THANK3$(0)="THANKS TO ALL THE 1ST GEN DEVELOPERS THAT MADE DEMOS, UTILITIES AND GAMES!"THANK3$(1)="ADTBM"THANK3$(2)="AIRJURI"THANK3$(3)="AKMAFIN"THANK3$(!4)="AMOK"THANK3$(5)="DDDAAANNN"THANK3$(6)="DEATHY"THANK3$(7)="DEFT"THANK3$(8)="DEXTROUS"THANK3$(9)="DILLOF"THANK3$(10)="DIRK"THANK3$(11)="DOCSTER"THANK3$(12)="EGONOLSEN71"THANK3$(13)="ELCH"THANK3$(14)="ENDURION"THANK3$(15)="FERALCHILD"THANK3$! (16)="FREDRIKR"THANK3$(17)="GEEHAF"THANK3$(18)="GEIRS"THANK3$(19)="GRIM-FANDANGO"THANK3$(20)="GRUBI"THANK3$(21)="HEATH-MAN"THANK3$(22)="HERNANDP"THANK3$(23)="HSTAMPFL"THANK3$(24)="JAMES"THANK3$(25)="JESPERGRAVGAARD"THANK3$(26)="JOHAN"THANK3$(2!!7)="JOHNWAYNER"THANK3$(28)="KIDRA"THANK3$(29)="KITHKANAN"THANK3$(30)="KRYAN1"THANK3$(31)="LAK132"THANK3$(32)="LIQUIDDREAM"THANK3$(33)="LYDON"THANK3$(34)="M3WP"THANK3$(35)="MAJIKEYRIC"THANK3$(36)="MAURICE"THANK3$(37)="MAXICE"THANK3$(38)="MC64"!"THANK3$(39)="MIGHTYAXLE"THANK3$(40)="MR.TOAST"THANK3$(41)="MTEUFEL"THANK3$(42)="N1K0M0"THANK3$(43)="NEOMAN"THANK3$(44)="OZIPHANTOM"THANK3$(45)="RETROCOMBS"THANK3$(46)="SHALLAN50K"THANK3$(47)="SNOOPY"THANK3$(48)="STEPZ"THANK3$(49)="STIGODUMP"TH!#ANK3$(50)="SY2002"THANK3$(51)="TAYGER"THANK3$(52)="THECHIEF"THANK3$(53)="UBIK"THANK3$(54)="URBANL"THANK3$(55)="WAULOK"THANK3$(56)="WOMBAT"THANK3$(57)="ZEHA"THANK3$(58)="ZZSILA"THANK3$(59)=""THANK3$(60)=""#DECLARE THANK4$(10)THANK4$(0)="...AN!&D SOME FINAL THANK YOUS TO:"THANK4$(1)="OLIVIA NEWTOWN JOHN, ELO AND JOHN FARRAR, FOR THE WONDERFUL MUSICAL MEMORIES!"THANK4$(2)="SYNTAX PARTY ORGANISERS FOR HOSTING THIS LOVELY EVENT!"THANK4$(3)="MY WIFE, TRAM, AND BUBBY MOANA FOR THEIR LOVE AND SACR  URCH$ = MID$(S$, RVIDX, 1)    IF CURCH$ = ":" AND QUOTEFLAG = 0 THEN BEGIN      SHITTYSYNTAXFLAG = 0    BEND    IF SHITTYSYNTAXFLAG AND CURCH$ = "(" THEN BEGIN      DELIM$ = DEFAULTDELIM$    BEND    IF SHITTYSYNTAXFLAG AND CURCH$ =!'  "" VECDATA%(1) = ASC("E")VECDATA%(2) = ASC("C")#DECLARE VECSIZE% = 3#DECLARE STOR%(1000), STORCNT%#STRUCT  X%, Y%, W%, H%, TYPE%, STATE%, TEXT$#DEFINE ů = 0#DEFINE ů = 1#DEFINE     = 0#D IFICE!"THANK4$(4)="...AND THANK YOU MUM TOO, FOR ALWAYS BEING THERE FOR ME!"#DECLARE MUSESTATE = 0#DECLARE NEXTSPR = 1#DECLARE NEXTFRM = 0#DECLARE NEXTCNT = 0#DECLARE SPRACTIVE(8)#DECLARE SPRANGLE = 0#DECLARE GREYS(3)GREYS(0)=15:GREYS(1)= EFINE   = 1#DEFINE  = 2#DEFINE      = 3#DEFINE     = 4#DEFINE     = 5#DEFINE     = 6#DEFINE     = 7#DEFINE     = 8#DEFINE د = 9 BTNS(د) = [     _  [ 0, 0, 0, 0, ů, 0, "LINE", ],  ")RESS 'F5' TO DIRECTLY INVOKE THE PRECOMPILER FROM INSIDE THE EDITOR. F THECOMPILER ENCOUNTERS AN ERROR WHILE COMPILING, YOU ARE AUTOMATICALLY RETURNEDTO THE EDITOR, AND (IF POSSIBLE) THE LINE WHERE THE ERROR OCCURED.. 2.7. ONTROL HARACTER OD"E (F11)O INCLUDE CONTROL CHARACTERS (LIKE  , , ETC.) IN YOUR SOURCE CODE,YOU CAN ENTER "ONTROL HARACTER ODE" BY PRESSING 'F11'. HILE IN ONTROL HRACTER ODE, "CTRL" FLASHES AT THE LOWER RIGHT CORNEROF THE SCREEN, AND ALL CHARACER C"ODES GENERATED BY CURSOR AND SCREEN EDITING KEYS ARE DIRECTLY INSERTED INTO THE SOURCE CODE RATHER THAN INTERPRETED BY , JUST LIKE "QUOTE MODE" IN OMMODORE ASIC.O EXIT ONTROL HARACTER ODE, SIMPLY PRESS 'F11' AGAIN.. 2.8. AVING THE CURRENT "CONFIGURATION (F14)HEN BOOTING , CERTAIN OPTIONS ARE LOADED FROM THE CONFIGURATION FILE IFPRESENT. HESE OPTIONS ARE:- THE SCREEN COLOURS- WHETHER TO AUTOMATICALLY BACKUP FILES WHEN SAVING- THE CURRENT FILE NAMEHAT WAY, YOU CAN AUTOMATIC"ALLY HAVE YOUR CURRENT FILE LOADED WHEN STARTING A NEW SESSION WITH .O STORE THE CURRENT CONFIGURATION (AND THE CURRENT FILENAME ALONG WITH IT),PRESS 'F14'. O EDIT OTHER ASPECTS OF THE CONFIGURATION, YOU MAY USE THE 'PREFERENCES'PROGRAM BY" PRESSING 'P' WHILE BOOTING .. 2.9. UTOMATIC BACKUPS AUTOMATICALLY CREATES BACKUPS OF THE CURRENT FILE EACH TIME YOU SAVESOMETHING TO DISC. HIS BEHAVIOUR CAN BE CHANGED IN THE PREFS APPLICATION.LEASE NOTE THAT DISABLING BACKUPS IS HIGHL"Y DISCOURAGED, BECAUSE THE 65'S IS HIGHLY UNSTABLE AND YOU CAN'T DO TOO MUCH BACKUPS!. 3.  HE PRECOMPILER IS WHAT IS AT THE HEART OF . T TRANSFORMS BLAND OLD10 INTO A REASONABLY READABLE AND COMFORTABLE PROGRAMMING "LANGUAGE BYADDING THE FOLLOWING NEW FEATURES.. 3.1. OMMENTSOMMENTS ARE DEFINED WITH THE SINGLE QUOTE ("'") SIGN. VERYTING AFTER THESINGLE QUOTE SIGN IS IGNORED IN THE FINAL PROGRAM.(YOU CAN STILL USE THE  COMMAND FOR COMMENTS, BUT ITS USE I"	S DISCOURAGEDBECAUSE THE QUOTE SIGN PROVIDES MUCH MORE READABLE PROGRAM CODE)XAMPLE:PRINT "HELLO, ";USERAME$         ' GREET USERF COURSE, YOU MAY CONTINUE USING THE "'" SIGN IN STRING CONSTANTS:MYTRING$="MAY  'QUOTE' THIS?"   ' YES, YOU MA"
Y. 3.2. ABELSNSTEAD OF LINE NUMBERS, -ENABLED PROGRAMS USE NAMED LABELS AS JUMP DESTINATIONS. ABELS CONTAIN NUMBERS, LETTERS AND GRAPHICS CHARACTERS. HENLABELS ARE DEFINED, A DOT CHARACTER IMMEDIATELY PRECEDES THE LABEL:   .INITROGRA"M   .ERRORANDLER   HEN THEY'RE REFERENCED BY A ,  OR , THE DOT IS OMITTED:TRAP ERRORANDLERGOSUB INITROGRAMLEVEN'S EDITOR HAS A NICE FEATURE WHICH LISTS ALL THE LABELS IN A PROGRAMWHEN PRESSING THE 'F7' (LBLS) KEY.  OU CAN THEN" SELECT WHICH LABEL TO JUMP TO BY USING THE CURSOR KEYS (OR ESCAPE TO RETURN FROM THE LABEL LIST). . 3.3. HE #DECLARE DIRECTIVEIKE LABELS,  SUPPORTS DESCRIPTIVE VARIABLE NAMES. ARIABLES STARTWITH A LETTER AND MAY CONTAIN NUMBERS. S IN "10, STRING VARIABLES ENDWITH $ AND INTEGER VARIABLES END WITH %.ITH #DECLARE, YOU DECLARE A VARIABLE FOR USAGE ON YOUR PROGRAM. OU CAN ONLYUSE VARIABLES YOU HAVE DECLARED BEFOREHAND. NLIKE 10, VARIABLE NAMES CAN BE OF ARBITRARY LENGTH."XAMPLES:#DECLARE FLOATINGOINTARIABLE#DECLARE STRINGARIABLE$#DECLARE INTEGERARIABLE%FLOATINGOINTARIABLE=5.3INTEGERARIABLE=42STRINGARIABLE$="VALUE IS "+STR$(FLOATINGOINTARIABLE)OUR PROGRAM CAN USE AS MANY #DECLARE DIRECTIVES AS IS NECC"ESSARY TO DECLAREALL THE VARIABLES USED.OR ARRAY VARIABLES, YOU MAY EITHER #DECLARE AND  THE ARRAY IN ONE GO:#DECLARE ANRRAY(100)OR DECLARE ONLY THE ARRAY'S BASE NAME AND ENSION IT LATER ON:#DECLARE ANRRAYDIM ANRRAY(100)AST BUT NOT" LEAST, IT'S ALSO POSSIBLE TO ASSIGN AN INITIAL VALUE TO A VARIABLE WHEN DECLARING IT:#DECLARE ELEVEN=11OTE: LTHOUGH  MAKES PROGRAMMING 10 MUCH MORE CONCISE AND COPREHENSIVE, NOTHING IS CHANGED IN 10 ITSELF. OR EXAMPLE, ALL CALC"ULATIONS ARE STILL PERFORMED IN SLOW FLOATING POINT ARITHMETIC, INTEGERS ARE CONVERTED INTERNALLY BEFORE ANY CALCULATIONS ARE DONE. . 3.4. HE #OUTPUT DIRECTIVEHE #OUTPUT DIRECTIVE LETS YOU DEFINE THE NAME OF THE FINISHED PROGRAM.XAMPLE:#OUTPU"T "MYROG.PRG". 3.5. ASE CONVERSIONSOU CAN USE THE "%" AND "$" PREFIXES TO WRITE INTEGERS IN BINARY OR HEXADECIMAL NOTATION, RESPECTIVELY.XAMPLES:#DECLARE MYINARYUMBER = %10110#DECLARE ANOTHERUMBERANOTHERUMBER = $BA12PRINT "OUR LUCK"Y NUMBER IS ",ANOTHERUMBER+%101011. 4.   (DESCRIPTION FORTHCOMING). 5.   & . 5.1. UTO INDENT AUTOMATICALLY INDENTS NEW LINES WHEN  IS PRESSED INSIDE AN INDENTED LINE, THUS MAKING IT MUCH EASI"ER WRITING PRETTY FORMATTED CODE.. 5.2. ONG LINESINES WITH MORE THAN 80 CHARACTERS ARE DISPLAYED TRUNCATED WITH AN "$" AT THERIGHT SCREEN BORDER. OU CAN SCROLL THOSE LINES BY PRESSING  AND THE / KEYS.. 5.3. ACK TO FTE"R RUNNING YOUR COMPILED PROGRAM YOU CAN ENTER THE EDITOR AGAIN BY SIMPLYPRESSING THE '1' KEY (THAT IS, UNLESS YOUR PROGRAM REDEFINES THE FUNCTIONKEYS).  . 6.   (ELDOM SKED UESTIONS)>> "K, SO TELL US: HY DID YOU DO IT?"FTER HOLD"ING THE FIRST PROTOTYPE 65 IN MY HANDS AND USING THAT WONDERFULKEYBOARD, THE FIRST THING COMING TO MY MIND WAS: " WANT TO WRITE PROGRAMSON THIS THING!!"EP, THAT'S RIGHT. *N* THIS THING. OT CROSS-DEVELOPING ON SOME SHINY  INSOME SHINY  B"UT *ON* THE 65 DIRECTLY. FTER ALL, WHY BUILD SUCH A GORGEOUS KEYBOARD IF NO ONE'S PROGRAMMING ON IT?NFORTUNATELY, ONE OF THE MOST SEVERE PROBLEMS OF THE 65 PLATFORM IS ITS BUNDLED PROGRAMMING ENVIRONMENT. 10 WAS ALREADY HOPELESSLY ANTI"QUATED IN 1991 (THERE'S A QUITE EXTENSIVE INTERNAL DOCUMENT FROM OMMODORE LISTINGITS MANY SHORTCOMINGS), AND IT CERTAINLY HASN'T AGED WELL. 10 IS AN INHERENTLY SLOW AND OVERCOME IMPLEMENTATION OF THE  LANGUAGE,AND ITS RELIANCE ON ARCHAIC C"ONCEPTS LIKE TWO-LETTER VARIABLE NAMES AND LINE NUMBERS MAKE IT A POSITIVELY HAZARDOUS PROGRAMMING ENVIRONMENT WHICH IS ENGAGING ONLY FROM AN ARCHAEOLOGICAL POINT OF VIEW OR TO PEOPLE WITH A DISTINCT FONDNESS FOR MASOCHISM. UT, ALAS, IT'S THE ONLY "ONE WE HAVE, AND IT'S BUNDLED WITH EACH 65.>> "EY, BUT THERE HAVE BEEN MADE BIG ENHANCEMENTS TO 10. E CAN EVEN DO WITH IT NOW! INALLY, WE HAVE A REALLY GOOD !"ORRY TO BURST YOUR BUBBLE BUT NO, WE DON'T. OT EVEN A LITTLE.  "T'S TRUE THAT ITHIFTER HAS MADE TREMENDOUS IMPROVEMENTS TO 10, AND HE DESERVES HEAPS OF RESPECT AND PRAISE FOR IT (MATTER OF FACT, THE NEWER VERSIONSOF  WOULD NOT EXIST WITHOUT HIS EFFORTS!)UT A GOOD IMPLEMENTATION OF  IT IS NOT." T LACKS SUCH A FRUSTRATINGLYLARGE NUMBER OF THINGS THAT WERE ALREADY PERFECTLY NATURAL IN 1991 (NAMED PROCEDURES AND FUNCTIONS, FAST INTEGER ARITHMETIC, INLINE ASSEMBLY, INDIRECTION OPERATORS, STRUCTURES...) THAT IT'S ALMOST PAINFUL TO ARGUE ABOUT "IT AGAIN AND AGAIN IN ONLINE FORUMS IN THE YEAR 2021. >> "K, FAIR ENOUGH. UT WHY JUST A PREPROCESSOR THEN? HY NOT A BEAUTIFUL NEW IMPLEMENTATION OF  WITH ALL THE LITTLE AND BIG THINGS THAT 10 LACKS?"  WOULD HAVE LIKED THAT VERY MUCH." EGRETTABLY  LACK BOTH THE SKILLSAND THE TIME FOR SUCH AN UNDERTAKING. 'M STILL HOPEFUL THAT SUCH A LANGUAGE MIGHT EVENTUALLY SEE THE LIGHT OF DAY. UT COUNTLESS DISCUSSIONS ON FORUM64 AND THE 65 DISCORD HAVE SHOWN THATIT'S STILL A LONG, LONG", LONG WAY TO GO. S OF EARLY 2021, THERE ARE MANY DIFFERENT OPINIONS ABOUT WHAT SUCH A LANGUAGE SHOULD BE -- AND EVEN WHETHER ITIS NEEDED AT ALL.ND THAT'S HOW  CAME INTO EXISTENCE: ATHER THAN WAITING FOR FOLKS TO COME TO THEIR SENSES,  DEC" IDED TO TACKLE THE PROBLEM BY WRITING AN EDITOR AND PREPROCESSOR IN ORDER TO ALLEVIATE AT LEAST SOME OF THE MOST GLARING MALADIES INHERENT IN 10.>> "AMED MULTILINE PROCEDURES AND FUNCTIONS WOULD BE NICE. H AND PLEASE,WE WANT  VARIABLES!"!"NDEED THEY WOULD. S A MATTER OF FACT, THIS FEATURE WAS IMPLEMENTED IN AVERY EARLY VERSION OF  ALREADY. UT THERE ARE TWO PROBLEMS: A) THE AMOUNT OF PARSING NEEDED SLOWS DOWN PREPROCESSING TO A CRAWL AND B) IN ORDER TO SUPPORT RECURSION, WE'""D NEED A WRAPPER AROUND PARAMETER PASSING, WHICH WOULD MAKE THE RESULTING PROGRAM MUCH SLOWER. HERE'S ONLY SO MUCH YOU CAN DO WITHOUT RESORTING TO MACHINE LANGUAGE... AND ONCE YOU START CODING IN , YOU MIGHT AS WELL IMPLEMENT A SANE PROGRAMMING LAN"#GUAGE FOR THE 65 ALTOGEHTER (SEE ABOVE ;-))>> "O. HAT GIVES? E DON'T NEED YOUR SHINY 'MODERN' CONCEPTS ON THE 65! E LIKE THIS HERE 10 WITH THEM PRETTY OL' LINE NUMBERS AND SPAGHETTI CODE AND THEM TWO LETTER VARIABLE NAMES AND THE QUIR"$KINESS AND THE BUGSES! ATTEROF FACT, EVEN 2.0 WOULD BE ENOUGH!    ! PARE US YOUR MODERN BIG CITY HOCUS POCUS AND  65  !11!"H... RELAX. OU'RE WELCOME TO USE YOUR 65 IN ANY WAY YOU WANT, AS LONG AS YOU L"%EAVE ME OUT OF IT.>> "HAT'S NEXT FOR ?"  S OF AY 2022, DEVELOPMENT OF  HAS HALTED.  WAS INTENDED AS ASTOPGAP MEASURE TO GIVE PEOPLE SOMETHING TO CODE WITH UNTIL A BETTER IS ON THE HORIZON. T'S HIGH TIME TO IMPLEMENT THAT"& BETTER . HE DEAD HORSE WHICH IS 65 HAS BEEN FLOGGED LONG ENOUGH. >> "HY CALL IT ?"HE INSPIRATION FOR THE NAME OF COURSE COMES FROM PINAL AP... IF YOU DON'T KNOW THE FILM,  HEARTILY RECOMMEND IT :). 7. ECHNICAL INFORMATIO"'N. 7.1 VERLAY MAILBOX N ORDER TO COMMUNICATE WITH EACH OTHER, EDITOR AND PRECOPILER USEA SPECIALLY DESIGNATED AREA IN  BANK 4. O THIS END, LOCATIONS $04FF00-$04FF79 ARE USED AS FOLLOWS:$04,FF00 'S'    ELEVEN ID; EACH MODULE CHECKS FOR TH! E EXISTENCE OF THESE$04,FF01 'K'    IDENTIFIER BYTES. $04,FF02        BORDER COLOUR$04,FF03        BACKGROUND COLOUR$04,FF04        FOREGROUND COLOUR$04,FF05        HIGHLIGHT COLOUR$04,FF06        STATUS BAR COLOUR$04,FF07        MISC. FLAGS   #ROBABILITY (1-100)? 1";PIREPREE=PREE/100PIRE=PIRE/100DIM FOREST(WIDTH,HEIGHT)DIM FORESTEW(WIDTH,HEIGHT)FORESTHAR$(TREE)="T"FORESTHAR$(TURNING)="F"FORESTHAR$(TMPTY)=" "PRINT"PRESS ANY KEY TO STOP..."' MAIN LOOP#DECLARE SCR#EENSERECOND#DECLARE STARTIME,ENDIME#DECLARE NUMCREENS#DECLARE AVGIMEDO  STARTIME = TI  FOR X=1 TO WIDTH-1    FOR Y=1 TO HEIGHT-1      IF FOREST(X,Y)=TREE THEN GOSUB BURN      IF FOREST(X,Y)=TMPTY THEN GOSUB GROW      IF FOREST(X,Y)=T#URNING THEN GOSUB REMOVE    NEXT  NEXT  FOR X=1 TO WIDTH-1    FOR Y=1 TO HEIGHT-1       FOREST(X,Y)=FORESTEW(X,Y)       CURSOR X,Y:PRINT FORESTHAR$(FOREST(X,Y));    NEXT  NEXT  ENDIME = TI-STARTIME  NUMCREENS=NUMCREENS+1  AVGIME=AVGIM#E+ENDIME  SCREENSERECOND=10/(AVGIME/NUMCREENS)  CURSOR 0,24  PRINT USING "AVG SPS: ##.##";SCREENSERECOND;  GET KEY$LOOP UNTIL KEY$<>""CURSOR 0,23:PRINT CHR$(27)+"QAGAIN(Y/N)?";CHR$(27)+CHR$(27);DO:GETKEY KEY$:LOOP UNTIL KEY$="Y" OR KEY$#="N"IF KEY$="N" THEN PRINT "TSCHUESSN!":ENDRUN#DECLARE XEST,YEST.BURN  SHOULDURN = 0  FOR XEST=-1 TO 1    FOR YEST=-1 TO 1      IF FOREST(X+XEST,Y+YEST)=TURNING THEN SHOULDURN=1:XEST=2:YEST=2    NEXT  NEXT  IF (RND(3)<PIRE OR SHO ULDURN) THEN FORESTEW(X,Y)=TURNING  RETURN.GROW  IF (RND(3)<PREE) THEN BEGIN    FORESTEW(X,Y)=TREE  BEND  RETURN.REMOVE  FORESTEW(X,Y)=TMPTY  RETURN                                                                                    # DBLQUOTE$  GOSUB STRIPTR$FROMBEGINNING  GOSUB STRIPTR$FROMEND  ' QUOTES LEFT & RIGHT  IF VERBOSE THEN BEGIN    PRINT "SETTING OUTPUT FILE TO " + S$ + ""  BEND  OF$ = S$  DELETELINEFLAG = 1  ' DISABLE PASSTHROUGH  RETURN'---------#2, DRAWCOLOR, IDX, TMPX1#DECLARE PX1, PY1, PX2, PY2#DECLARE OX1, OY1, OX2, OY2#DECLARE RET%#DECLARE DATIDX, PLAYERDATIDX, BADDIEDATIDX#DECLARE PLAYERDATFIXED, BADDIEDATFIXED#DECLARE TMP#DEFINE үد = 112#DEFINE үد#	---------.ADDTOLABELTABLE'------------------  IF VERBOSE THEN BEGIN    PRINT "LABEL "; CURSRCLINE$; " AT LINE "; DESTLINENO  BEND  DELETELINEFLAG = 1  LABELNAME$(LABELCNT) = MID$(CURSRCLINE$, 2)  LABELLINENO(LABELCNT) = DESTLINENO#
 + 1  LABELCNT = LABELCNT + 1  ' INCREASE LABEL COUNT  RETURN'---------------------------.RETURNTOEDITORWITHERROR'---------------------------  BANK 4  ' SET ERROR MAILBOX FLAG  FOR R=1 TO LEN(PARSERERROR$)    POKE $4FF30 + R - 1, ASC(MI#D$(PARSERERROR$, R, 1))  NEXT R  POKE $4FF30 + R - 1, 0  POKE $FF09, MOD(SRCLINENO, 256)  POKE $FF0A, SRCLINENO / 256  POKE $FF07, PEEK($FF07) OR 2  ' SET AUTOJUMP FLAG  DCLOSE  GOTO CHAINEDITOR'------------------------.STRIPTR$FROMBEG#INNING'------------------------  ' -- STRIP TR$ FROM BEGINNING OF STRING IN S$ --  DO WHILE INSTR(TR$, (LEFT$(S$, 1)))    S$ = MID$(S$, 2)  LOOP  RETURN'------------------.STRIPTR$FROMEND'------------------  ' -- STRIP CHARACTERS IN TR$ FR#OM END OF S$ --  DO WHILE INSTR(TR$, RIGHT$(S$, 1))    S$ = LEFT$(S$, LEN(S$) - 1)  LOOP  RETURN'---------------.PARSEARGUMENTS'---------------  ' -- PARSE ARGUMENTS --  '     IN: S$ = STRING  '    OUT: ARGS$(X) = ARGUMENT LIST, ARGCNT = AR#GUMENT COUNT  '         ARGS$(0) = FIRST ARG, ARGS$(1) = SECOND ARG...    DELIM$ = ",;"  ARGCNT = 0  ARGSLIST$ = S$  ARGSLISTLEN = LEN(S$)  IGNOREDELIMFLAG = 0  IF ARGSLISTLEN = 0 THEN BEGIN    ARGCNT = -1    RETURN  ' NO STRING  BE#ND  FOR ARGSIDX = 0 TO 31    ARGS$(ARGSIDX) = ""  NEXT ARGSIDX  FOR ARGSIDX = 1 TO ARGSLISTLEN    CURCH$ = MID$(ARGSLIST$, ARGSIDX, 1)    IF CURCH$ = "(" AND IGNOREBRACKETS = 1 THEN IGNOREDELIMFLAG = 1    IF CURCH$ = ")" AND IGNORE# = 110#DEFINE үد = 109#DEFINE үد = 125#DEFINE ү   = 64#DEFINE ү   = 93#DEFINE ү  = 32.JOYSTICKDEFS'-------------#DEFINE ʯ = 1#DEFINE ʯЯ = 2#DEFINE ʯ = 3#DEFINE ʯί = 4##DEFINE ʯ = 5#DEFINE ʯί = 6#DEFINE ʯ = 7#DEFINE ʯЯ = 8#DEFINE ʯ = 128#DEFINE į = 1#DEFINE įЯ = 2#DEFINE į = 3#DEFINE įί = 4#DEFINE į = 5#DEFINE įί = 6#DEFINE į = 7#DEFINE įЯ = 8#DECLARE JD(1,8) ' DIRECTIONAL JOYSTICK (PLAYER DIRECTION NEUTRAL)JD(0, ʯ) = įJD(0, ʯЯ) = įЯJD(0, ʯ) = įJD(0, ʯί) = įίJD(0, ʯ) = į )#OUTPUT "DRAWER".DECLARATIONS.MAIN                                                                                                                                                                                                                      #BRACKETS = 1 THEN IGNOREDELIMFLAG = 0    IF INSTR(DELIM$, CURCH$) = 0 OR IGNOREDELIMFLAG = 1 THEN BEGIN      ARGS$(ARGCNT) = ARGS$(ARGCNT) + CURCH$    BEND : ELSE BEGIN      S$ = ARGS$(ARGCNT)      TR$ = " "      GOSUB STRIPTR$FROMBEG#INNING      GOSUB STRIPTR$FROMEND      ARGS$(ARGCNT) = S$      ARGCNT = ARGCNT + 1    BEND  NEXT ARGSIDX  S$ = ARGS$(ARGCNT)  TR$=" "  GOSUB STRIPTR$FROMBEGINNING  GOSUB STRIPTR$FROMEND  ARGS$(ARGCNT) = S$  S$ = ARGSLIST$  '# RESTORE S$  RETURN'-----------------------.REPLACEVARSANDLABELS'-----------------------  ' -- REPLACE VARS & LABELS IN SOURCE STRING --  '    IN:   S$ = SOURCE STRING  '    OUT:  S$ = DEST STRING WITH REPLACED ITEMS    IF LEFT$(S$, 2) = "^!$^" THEN BEGIN    S$ = RIGHT$(S$,LEN(S$)-2)    RETURN  BEND  QUOTEFLAG = 0  A$ = ""  CURTOK$ = ""  SHITTYSYNTAXFLAG = 0  EXPECTINGLABEL = 0  DEFAULTDELIM$ = "?<>=+-#*/^,.:;() "  DELIM$ = DEFAULTDELIM$  FOR RVIDX = 1 TO LEN(S$)    C#------------------------------. *  V0.4.6 --  *------------------------------(OTE: THIS DOCUMENT WAS OPTIMIZED FOR VIEWING WITH THE  EDITOR. F YOU'REREADING THIS USING , YOU CAN PRESS 'F7' FOR THE TABLE OF CONTENTS. OU MAYTHEN US#E THE CURSOR KEYS TO JUMP TO INDIVIDUAL SECTIONS DIRECTLY). 1. . 1.1. HAT IS ? IS A COMBINED EDITOR AND PREPROCESSOR PACKAGE WHICH ENHANCES 65 BY ADDING THE FOLLOWING FEATURES:- NO MORE LINE NUMBERS- NAMED LABELS#- VARIABLE DECLARATION- VARIABLE NAMES OF ARBITRARY LENGTH- $ AND % PREFIXES FOR HEXADECIMAL AND BINARY INTEGERS- EASY TO READ COMMENTS- EASY TO USE '' FULL SCREEN TEXT EDITOR WITH PREPROCESSOR INTEGRATION- AUTOMATIC BACKUP FACILITY   CONS#ISTS OF TWO MAIN PARTS: HE EDITOR AND THE PREPROCESSOR ITSELF. OTH ARE WORKING HAND IN HAND IN ORDER TO PROVIDE A SIMPLE AND INTEGRATEDDEVELOPMENT WORKFLOW.. 1.2. NSTALLATION / UICK STARTO USE , SIMPLY MAKE A COPY OF THE  DISC IMA#GE AND BOOT FROM IT(EITHER BY RESETTING YOUR 65 OR BY TYPING '' AT THE  PROMPT). OOTING LAUNCHES , 'S SOURCE CODE EDITOR, ALONG WITH THE CURRENTFILE.OU MAY PRESS 'P' DURING THE BOOT PROCESS TO ACCESS THE PREFERENCES PROGRAM(S#EE "4. " FOR MORE INFO).NCE IN THE EDITOR, BY PRESSING THE 'F1' KEY YOU CAN LOAD ONE OF THEVARIOUS EXAMPLES. OU CAN COMPILE AND RUN THEM BY HITTING THE 'F5' KEY. R,WHEN YOU'VE SEEN ENOUGH, YOU CAN PRESS 'F2' TO BEGIN YOUR VERY OWN ADVEN#TURESIN .. 1.3. XAMPLESHERE ARE SOME EXAMPLE PROGRAMS ON THE  DISC SHOWING HOW TO PUT THEPRECOMPILER FEATURES TO GOOD USE. HESE ARE:"HELLO.EL" SLIGHTLY ADVANCED HELLO WORLD"BASEEMO.EL"IMPLE BASE CONVERSION DEMO"HOPALONG.E#L"OPALONG FRACTAL"FFIRE.EL"OREST FIRE SIMULATION"FIENI"NAKE GAME"DIZZY"ALETTE SHIFT DEMO. 2.  . 2.1. VERVIEW COMES WITH , AN EASY TO USE TEXT EDITOR WITH A FEW TRICKS UP ITSSLEEVE TO MAKE EDITING  SOURCES FOR #  EASY AND UNCOMPLICATED.. 2.2. HE STATUS BAR DISPLAYS A STATUS BAR WITH THE FOLLOWING INFORMATION:- THE FILE NAME (PREFIXED WITH '*' IF THE FILE HAS UNSAVED CHANGES)- THE CURRENT CURSOR POSITION (IN COLUMNS:ROW FORMAT)- THE MOST IMPORTAN#!T FUNCTION KEYS- THE CURRENT CONTROL CHARACTER MODE (FLASHING 'CTRL' WHEN IN CTRL MODE)FTER FILE OPERATIONS, THE STATUS BAR DISPLAYS THE RESULT OF THE LAST FILEOPERATION. T THEN CHANGES TO ITS NORMAL APPEARANCE AFTER THE NEXT KEYPRESS. . 2.3. D#"ITOR FUNCTIONS<F1>         LOAD A FILE FROM THE DEFAULT DRIVE<F2>          ERASE THE CURRENT TEXT IN MEMORY AND START OVER<F3>         SAVE THE CURRENT TEXT (WITH THE CURRENT FILENAME)<F4>       SAVE THE CURRENT TEXT UNDER A NEW NA##ME ('SAVE AS')<F5>      COMPILE THE CURRENT FILE (SEE BELOW)<F7>       DISPLAY LABEL CHOOSER (SEE BELOW)<F9>         JUMP TO LINE NUMBER (SEE BELOW)<F11>       TOGGLE CONTROL CHARACTER MODE ON/OFF (SEE BELOW)<F14>   #$   SAVE CURRENT CONFIGURATION AS DEFAULT (SEE BELOW)<ALT+F>     SEARCH<ALT+R>     SEARCH & REPLACE<ALT+DEL>   DELETE CURRENT LINE<HOME>      JUMP TO BEGINNING OF TEXT<ALT+HOME>  JUMP TO END OF TEXT<ALT+UP>    PAGE UP<ALT+DOWN>  PAGE DOWN<ALT+LE#%FT>  SCROLL LINE LEFT (ONLY WITH LINES>80 COLUMNS)<ALT+RIGHT> SCROLL LINE RIGHT (ONLY WITH LINES>80 COLUMNS)<HELP>      SHOW COMMAND HELP<SHIFT+RUN/STOP> EXIT EDITOR. 2.4. HE LABEL CHOOSER (F7)NE OF THE MAIN FEATURES OF THE PRECOMPILER IS ITS #&USAGE OF LABELS INSTEADOF LINE NUMBERS.  LABEL IS DEFINED WITH A "DOT" PREFIX (SEE "3.2 ABELS")O MAKE WORKING WITH LABELS EASIER,  KEEPS TRACK OF THE LABELS IN YOURPROGRAM AND LETS YOU NAVIGATE DIRECTLY TO LABEL POSITIONS. O BRING UP THELABEL #'CHOOSER, PRESS 'F7' AND THEN CHOOSE THE DESIRED LABEL WITH THE CURSOR KEYS.OTE: OU CAN ALSO USE THIS FEATURE TO MARK CERTAIN POINTS IN YOUR SOURCECODE WITHOUT ACTUALLY USING THEM AS LABELS. OU MAY DEFINE AS MANY LABELSAS YOU LIKE.(F YOU ARE RE" ADING THIS DOCUMENT WITH , YOU CAN TRY THIS FEATURE BYPRESSING 'F7' NOW. LL SECTIONS ARE DEFINED AS LABELS, SO THAT YOU CANEASILIY JUMP SECTIONS) . 2.5. OTO LINE (F9)RESS 'F9' TO DIRECTLY SPECIFY A LINE NUMBER TO JUMP TO.. 2.6. OMPILE (F5$NDLABELS        GOSUB CHECKFORCREATIONOFSTRUCTOBJECT        GOSUB CHECKFORCONTINUEONTONEXTLINE        ' SAFE ADD CURDESTLINE$+S$ TO CURRENT OR NEXT DESTLINE$(DESTLINENO)        GOSUB SAFEADDTOCURRENTORNEXTLINE        IF RIGHT$($S$, 4) = "BEND" OR RIGHT$(S$, 6) = "RETURN" _           OR LEFT$(S$, 2) = "IF" THEN BEGIN          NEXTLINEFLAG = 1        BEND      BEND  ' ENDIF DELETELINEFLAG = 0    BEND  ' ENDIF CURSRCLINE$ <> "".PARSERLOOPSKIP    ' INCREASE SOURCE C$ODE LINE (FOR ERROR MSGS...)    SRCLINENO = SRCLINENO + 1    IF VERBOSE THEN BEGIN      PRINT "SRCLINENO="; SRCLINENO      GET KEY Z$    BEND  LOOP    IF CURDESTLINE$ <> "" THEN BEGIN    DESTLINE$(DESTLINENO) = CURDESTLINE$    DESTL$INENO = DESTLINENO + 1  BEND  CLOSE 1  GOSUB SAVEFILENAME  ' SET OUTPUT FILENAME  SCRATCH "11TEMP"  SCRATCH "11TOKENIZED"' ------------------------- PASS 2 ------------------------------------'------.PASS2'------  OPEN 1,1,5,"11TEMP,S,W"$  PRINT CHR$(13) "PASS 2 ";  FOR CURDESTLINENO = 0 TO DESTLINENO - 1    S$ = DESTLINE$(CURDESTLINENO)    IF VERBOSE THEN PRINT CURDESTLINENO; "=> " S$ : ELSE PRINT ".";    DO WHILE INSTR(S$, MK$) <> 0       S1 = INSTR(S$, MK$) : S2 = IN$STR(S$, MK$, S1 + 2)       IF S2 = 0 THEN BEGIN         EXIT  ' EXIT LOOP FOR CASES WHERE A PI SYMBOL WAS USED IN THE SOURCE       BEND:ELSE BEGIN         CURTOK$ = MID$(S$, S1 + 2, S2 - S1 - 2)         GOSUB SWAPOUTLABELINCURTOK$FORLINENO $        S$ = LEFT$(S$, S1 - 1) + CURTOK$ + MID$(S$, S2 + 2)       BEND    LOOP    IF VERBOSE THEN PRINT "<= "; STR$(CURDESTLINENO) + S$    PRINT #1, STR$(CURDESTLINENO) + " " + S$  NEXT CURDESTLINENO  GOSUB DUMPVARS  FOR R = 0 TO 10   $ PRINT #1, STR$(32000 + R)  NEXT R  ' REMOVE 11.TOKENISE.BAS LINES?  F$ = "D:D" + DBLQUOTE$ + "11TOKENIZED" + DBLQUOTE$  F$ = F$ + ":IFDS<>0THEN?" + DBLQUOTE$ + "DISC ERROR: "  F$ = F$ + DBLQUOTE$ + ";DS$:ELSE?" + DBLQUOTE$  F$ = F$ + "$	"  F$ = F$ + DBLQUOTE$ + ":D" + DBLQUOTE$ + "11.POST"  PRINT #1, F$  CLOSE 1  PRINT""  PRINT "ELAPSED TIME:"; TI; "TICKS"  PRINT"EDMA 0,$1FFF,$8022000,$2001:NEW RESTORE"  PRINT"RUN";  ' LOAD '11.TOKENIZE' FROM CA$
CHE  BANK 128  POKE 208,2      ' NO# OF CHARS IN KEYBOARD BUFFER  POKE 688,13,13  ' RETURN CHARS  END'--------------.DECLARES$VAR'--------------  ' DECLARE VAR(S) IN S$  S$ = MID$(CURSRCLINE$, 10 - DEFINEFLAG)  IGNOREBRACKETS = 1  GO$SUB PARSEARGUMENTS  IGNOREBRACKETS = 0  ' SPLIT PARAMETERS  NEXTLINE$ = ""  ' NEW LINE IF DIMENSIONING...  IF ARGCNT < 0 THEN BEGIN    PARSERERROR$ = "?DECLARE PARAMETER MISSING IN LINE " + STR$(SRCLINENO)    GOTO RETURNTOEDITORWITHERROR$  BEND  FOR I = 0 TO ARGCNT    VARNAME$ = ARGS$(I)    GOSUB PARSEDECLAREDVAR  NEXT I  IF NEXTLINE$ <> "" THEN BEGIN    DELETELINEFLAG = 0    CURSRCLINE$ = "^^" + NEXTLINE$  BEND : ELSE BEGIN    DELETELINEFLAG = 1  BEND  RETURN$'------------------.PARSEDECLAREDVAR'------------------  DIMENSION$ = ""  VALUE$ = ""  BKTOPENIDX = INSTR(VARNAME$, "(")  BKTCLOSEIDX = INSTR(VARNAME$, ")")  EQUALSIDX = INSTR(VARNAME$, "=")  IF EQUALSIDX <> 0 THEN BEGIN  ' --- ASSIG$NMENT    VALUE$ = MID$(VARNAME$, EQUALSIDX + 1)    VARNAME$ = LEFT$(VARNAME$, EQUALSIDX - 1)    TR$ = WHITESPACE$    S$ = VARNAME$    GOSUB STRIPTR$FROMEND    VARNAME$ = S$    S$ = VALUE$    GOSUB STRIPTR$FROMBEGINNING    GOSUB ST r#OUTPUT "HELLO"#DECLARE X#DECLARE V1$(15).MAIN  FOR X = 0 TO 15    PRINT X  NEXT X   ' TRAILING COMMENT                                                                                                                                             $' A SHORT AND QUITE USELESS DEMO SHOWING' HOW TO WORK WITH BASE CONVERSIONS IN ...#DECLARE HEXUMBER=$1234#DECLARE BINUMBER8BIT=%10100110#DECLARE BINUMBER10BIT=%1001011010#DECLARE A%,B%,C&#OUTPUT "BASEEMO"A%=$10+$20B%=%10110+C&C&=%11 *%10PRINT "HEXUMBER IS";HEXUMBERPRINT "BINUMBER8BIT IS";BINUMBER8BITPRINT "BINUMBER10BIT IS";BINUMBER10BITPRINT "A%,B%,C&:";A%,B%,C&                                                                                                              $' ' ====' N OPEN-SOURCE TOOL FOR DRAWING 640X400 VECTOR ART ON THE MEGA65#OUTPUT "VART"' #DEFINE ǯ=1' MENU SYSTEM' +------+--------+-----+------+----------+---------+------+------+------+-----+' ! LINE ! CIRCLE ! BOX ! POLY ! (X) $FILL ! PALETTE ! LOAD ! SAVE ! UNDO ! REDO!' +------+--------+-----+------+----------+---------+------+------+------+-----+' X = EXIT' ? = SHOW/HIDE MENU' CTRL+1-8 = SELECT FROM 1ST 8 COLOURS' MEGA+1-8 = SELECT FROM 2ND 8 COLOURS' CTRL+D = CHOOSE F$ROM DEFAULT PALETTE' CTRL+A = CHOOSE FROM ALTERNATE PALETTE.DECLARES'--------#DECLARE KEY$#DECLARE K,M0%, M1%, A$#DECLARE X%, Y%, W%, H%, X2%, Y2%#DECLARE MX%, MY%, MB%, MBOLD%#DECLARE MENUSELECTION = -1#DECLARE RET%#DECLARE LASTCOLOUR% = -$1#DECLARE SELECTEDCOLOUR% = 1#DECLARE OLDMENUSELECTION% = -1#DECLARE YMIN%, YMAX%, IDX%, PIDX%, PX%(20)#DECLARE REV%, Y0%, Y1%, X0%, X1%, TMP%, M, C, I%, J%, SWAPPED%#DECLARE LOADSTATE% = -4#DECLARE FILLSTATE% = 0#DECLARE LINESTATE%, LX0%,!% LY0%#DECLARE CIRCLESTATE%, CX0%, CY0%, RADIUS%#DECLARE ELLIPSESTATE%, EX0%, EY0%, XRADIUS%, YRADIUS%#DECLARE BOXSTATE%, BX0%, BY0%#DECLARE POLYSTATE%, POLYIDX%=0, POLYX%(250), POLYY%(250)#DECLARE VECDATA%(12000)VECDATA%(0) = ASC("V")  ' $RIPTR$FROMEND    VALUE$ = S$    IF LEFT$(VALUE$, 1) = "$" THEN BEGIN      HX$ = MID$(VALUE$, 2)      GOSUB CHECKHEX    BEND    IF LEFT$(VALUE$, 1) = "%" THEN BEGIN      BI$ = MID$(VALUE$, 2)      GOSUB CHECKBINARY    BEND  BEND  IF BK$TOPENIDX <> 0 AND BKTCLOSEIDX <> 0 THEN BEGIN  ' --- DIMENSION    DIMENSION$ = MID$(VARNAME$, BKTOPENIDX + 1, BKTCLOSEIDX - BKTOPENIDX - 1)    CLEANVARNAME$ = LEFT$(VARNAME$, BKTOPENIDX - 1)    S$ = DIMENSION$    DONTMARKLABEL = 1 $   GOSUB REPLACEVARSANDLABELS    DONTMARKLABEL = 0    DIMENSION$ = S$    VARNAME$ = CLEANVARNAME$  ' CHECK FOR DEFINE TOKENS    DELETELINEFLAG = 0  BEND  TY = Я  ' VAR TYPE  T$ = RIGHT$(VARNAME$, 1)  ' TYPE (IF ANY) IN T$  IF $' AY OF THE MPLODING OOT' -------------------------'  COLLABORATIVE TEAM-EFFORT GAME MADE BY THE 65 COMMUNITY'' URCE:' -----' - NITIAL BACKGROUND ART' - LEVEN CODE INFRASTRUCTURE' - NITIAL AME MECHANICS' EFT:' ----' - RTISTIC PL$AYER HEAD PERMUTATIONS#OUTPUT "FOOT"' 4 EMORY USAGE' ------------------' 4.0000 -' 4.0100   (EACH PALETTE IS 16*3 IN SIZE, HAVE 12 PALETTES)' 4.0800  ' 4.2000  ' 5 EMORY USAGE' -------     "EDCDEEE"                                                                                                                                                                                                                                             $!VERBOSE THEN BEGIN    PRINT "ADDING ";  BEND  IF INSTR("%&$", T$) = 0 THEN BEGIN    T$ = ""    TY = Я  BEND  IF DEFINEFLAG = 1 THEN BEGIN    TY = Я  BEND  IF T$ = "%" THEN BEGIN    TY = Я  BEND  IF T$ = "$" THEN BEGI$-----------' 5.0000 SCREEN BUFFER' 5.1000 COLOR RAM BUFFER' 5.2000 DOUBLED-UP LAYER BUFFER' UNCOMMENT THIS LINE TO ADD DEBUG OUTPUT#DECLARE  = 0.PETSCII VARS'------------#DEFINE ͯ   = 0#DEFINE ͯ   = 1#DEFINE ͯ  $  = 2#DEFINE ͯ     = 3#DEFINE ԯ   = 0#DEFINE ԯ1 = 1#DEFINE ԯ2 = 2#DEFINE ԯ3 = 3#DEFINE ԯ4 = 4#DEFINE ԯ    = 5#DEFINE ԯ     = 6#DECLARE DATAADDR = $42000#DECLARE MAXFRAMES(ͯ$ )#DECLARE FRAMEADDR(ԯ, 25)#DECLARE FRAMEDBLUPADDR(64)#DECLARE JDIRRAW, JFIRE, JDIR#DECLARE FRMIDX = 0#DECLARE FRMW, FRMH,FRMX,FRMY,FRMX1,FRMY1,FRAMEIDX,CDATAADDR#DECLARE YY, SCRADDR,CLRADDR#DECLARE A$, LIDX, K, X, Y#DECLARE SRCA$$DDR, DESTADDR, LENGTH, TRANSP#DECLARE DESTMBSEL, DESTBANK#DECLARE FORM, SZ#DEFINE  = 0#DEFINE  = 1#DECLARE CHARACTER#DECLARE OPPONENTDATAADDR#DECLARE DBLUPADDR = $52000#DECLARE KNEELFLAG#DECLARE BADDIEKNEELFLAG#DECLAR$"N    TY = Я  BEND  IF T$ = "&" THEN BEGIN    TY = Я  BEND  VARTABLE$(TY, ELEMENTCNT(TY)) = VARNAME$  IF DIMENSION$ <> "" THEN BEGIN    ID = ELEMENTCNT(TY)    GOSUB GENERATEVARNAME  ' FETCH VARNAME IN GENVARNAME$    IF DEFI$#NEFLAG = 0 THEN BEGIN      NEXTLINE$ = NEXTLINE$ + "DIM " + GENVARNAME$ + T$ + "(" + DIMENSION$ + "):"    BEND  BEND  IF VALUE$ <> "" THEN BEGIN    ID = ELEMENTCNT(TY)    GOSUB GENERATEVARNAME     IF DEFINEFLAG=0 THEN BEGIN      NEXTLINE$%$ = NEXTLINE$ + GENVARNAME$ + T$ + "=" + VALUE$ + ":"    BEND  BEND  IF DEFINEFLAG = 1 THEN BEGIN    DEFINEVAL$(ELEMENTCNT(TY)) = VALUE$  BEND  IF VERBOSE THEN BEGIN    PRINT VARNAME$; ": "; ELEMENTCNT(TY)  BEND  ELEMENTCNT(TY) = ELE#E MIRROR, PLAYERMIRROR, BADDIEMIRROR, OPPONENTMIRROR, TMPMIRROR#DECLARE PX, PY ' PLAYER X,Y#DECLARE BX, BY ' BADDIE X,Y#DECLARE PLAYERENERGY = 18#DECLARE LAGPENERGY = 0#DECLARE BADDIEENERGY = 18#DECLARE LAGBENERGY = 0#DECLARE X1,Y1,X2,Y#MENTCNT(TY) + 1  RETURN'---------------.SETOUTPUTFILE'---------------  S$ = MID$(CURSRCLINE$, 8)  GOSUB PARSEARGUMENTS  IF ARGCNT <> 0 THEN BEGIN    PRINT "?INVALID PARAMETERS IN LINE ";SRCLINENO    END  BEND  S$ = ARGS$(0)  TR$ =$'' FOREST FIRE #OUTPUT "FFIRE"#DECLARE X,Y#DECLARE TMPTY   = 0#DECLARE TREE    = 1#DECLARE TURNING = 2#DECLARE WIDTH    = 39#DECLARE HEIGHT   = 24#DECLARE PREE    ' TREE CREATION PROBABILITY#DECLARE PIRE    ' FIRE PROBABILITY#DECLARE S# HOULDURN#DECLARE FOREST, FORESTEW #DECLARE FORESTHAR$#DECLARE KEY$CLR TIPRINT "";BORDER 0: BACKGROUND 0IF RWINDOW(2)=80 THEN PRINT CHR$(27)+"X";PRINT "** FOREST FIRE **"INPUT "TREE GROWTH PROBABILITY (1-100)? 5";PREEINPUT "FIRE P% 0,YCCT:A$CL$: 1:(CL$)79" "; m'IV0 m' m' *** INVERT IF MARKED LINE m'IV0: MF0   m$' MSME  MSYC  YCME  IV1: n.' MEMS  MEYC  YCMS  IV1 n8' @nB' *** MARK-MODE HANDLING *** RnL' T$""   {nM'  MEYC1:C%L$LI$(YC): 9970:YCYC1 nN'   YCCTSL3   5250::  nO'    CL$LI$(YC): 9970: nP'   nQ' nV' T$""  YC0   oW'  MEYC1:CL$LI$(YC): 9970:YCYC1 -oX'   YCCT0   5330::  JoY'    CL$LI$(YC): 9970: SoZ'   Zo[' uo`'% T$"X"  T$"C"   oj'   MSME  IVMS:MSME:MEIV ot'   IVME  MS  1 o~'    CB$(IVMS)  LI$(IV) o'   IV o'   T$"X"   	p'     AMS  NL(MEMS1) +p'      LI$(A)LI$(A(MEMS1)) 7p'     A up'    NLNL(MEMS1): ANL1  NL%(MEMS1):LI$(A)"": A p'    YCMS: YCCT0  LYMS: 6600 p'   p'  IV0:MF0:CSMEMS1:MS0:ME0 p' p' 5150 p' p' *** PASTE *** q' IVCS1  0  1 )q'   INSERT A LINE AT YC <q'  MFYC: TEMP Nq (  CH1: 5650 _q
(  YCMF:M%F0 uq(  LI$(YC)CB$(IV) ~q( IV q(( 5150 q2( q) --- SET FN KEYS AND MAKE SURE F11 DOESN'T GENERATE PASTE q)  q)FK$""(132) r") R1  15: R, (FK$,R,1): R r,) tr6) 	(1)25   "-- PRESS ANY KEY FOR NEXT PAGE";:T%$:"";:5490:  ""; r@)"ALT + P POST TO PC (M65POSTBOX)" rJ)"ESC, J GO TO START OF LINE" rT)"ESC, K GO TO END OF LINE" s^)"ESC, D DELETE CURRENT LINE" +sh)"CTRL + W MOVE TO NEXT WORD" Ssr)"CTRL + U MOVE TO PREVIOUS WORD" s|)%"SHIFT + INST/DEL DELETE CURRENT CHARACTER" s)"CTRL + = TOGGLE COMPILATION DEBUGGING ON/OFF" s)"ESC, M TURN 'MARK-MODE' ON" 't)"  - WHEN 'MARK-MODE' IS ON, USE CURSOR UP/DOWN TO SELECT LINES" Et)"  - PRESS 'X' TO CUT" dt)"  - PRESS %'C' TO COPY" t)"  - HEN USE ESC,P TO PASTE CLIPBOARD CONTENTS" t) t) --- JUMP TO PREVIOUS FILE t) CH1   t)   5490:9 HL u)   "CURRENT FILE NOT SAVED - PRESS ANY KEY";:  T$ 5u)   5490: 5540: <u) Uu*TMPV:NF$PV$: 639%	0 fu*LYTM: 6600 lu* u* --- NAVIGATE TO LABEL UNDER CURSOR u+ 11100:  GET TERM UNDER CURSOR u+NZ%1:  NAV TO LABEL FLAG = TRUE v+ 7430:  GOSUB FIND LABEL SCREEN v + 5v\+ --- GET TERM UNDER CURSOR INTO FZ$ [vf+ 11200:  START OF LABE%
L INTO SZ vp+ 11300:  END OF LABEL INTO EZ vz+FZ$  (CL$,SZ1,EZSZ1) v+ v+ --- GET START OF LABEL INTO SZ v+K  XC  1 : ZZ$" :" : SZ  0 v+  K  0 'w+   (ZZ$,(CL$,K1,1))  SZ  K  1 :  7w+  K  K  1 =w+ Cw+ fw$, --- GE T END OF LABEL INTO EZ w.,K  XC : ZZ$" :" : EZ  (CL$)1 w8,  K  EZ wB,   (ZZ$,(CL$,K1,1))  EZ  K  1 :  wL,  K  K  1 wV, w`,                                                                                                           SK 	                                                                                                                                                                                                                                                    %#OUTPUT "11.PARSE-NEW"' 4 EMORY USAGE  (AKA 'AILBOX ')' ------------------' 4.00  "SK" MAGIC SIGNATURE (TEPHAN LEINERT / UBIK'S INITIALS)' 4.02  BORDER COLOUR' 4.03  BACKGROUND COLOUR' 4.04  FOREGROUND COLOUR' 4.05  HIGHLIGHT% COLOUR' 4.06  STATUS BAR COLOUR' 4.07  MISC. FLAGS'         - BIT0: AUTOLOAD SOURCE ENABLE FLAG'         - BIT1: AUTOJUMP TO LINE FLAG'         - BIT2: AUTOBACKUP FLAG'         - BIT3: VERBOSE FLAG'         - BIT4: TEXT-MODE (0=80X25, 1=80X50%)'         - BIT5-7: RESERVED' 4.08  ERROR NUMBER TO BE DISPLAYED (>128 ARE PREPROCESSOR ERRORS)' 4.09  (2 BYTES) LINE NUMBER FOR AUTOJUMP'' 4.10  CURRENT FILE NAME' 4.20  OUTPUT FILE NAME'' 4.30- RESERVED' 4.7'' TTIC  CACHE U%SAGE' =====================' $800,0000 +---------------+'           ! 11.       ! (MAX 53KB)' $801,0000 +---------------+'           ! 11.      ! (MAX 53KB)' $802,0000 +---------------+'           ! 11.   ! (8KB)' $802,2000 +----%-----------+'           ! 11.   ! (8KB)' $802,4000 +---------------+'           ! 11.       ! (8KB)' $802,6000 +---------------+' ' $803,0000 +---------------+'           !   !'       ... +---------------+'  %  :' ----------------------------' $803,0000         OTAL INES' $803,0002         INE 1 LENGTH' $803,0003  []  HARS FOR INE 1' $803,00XX         INE 2 LENGTH' $803,00YY  []  HARS FOR INE 2' ...'---%----.DEFINES'-------#DEFINE Я = 0#DEFINE Я = 1#DEFINE Я = 2#DEFINE Я = 3#DEFINE Я = 4  CLR#DECLARE DBLQUOTE$, PARSERFILE$, T$, BLANKLINE$, TYPEIDENT$#DECLARE CURSRCLINE$, NEXTLINEFLAG, NEXTLINE$#DECLA%RE MK$, DBLQUOTECHAR, SNGLQUOTECHAR#DECLARE TOKENS$(10), DUMBCMDS$, I#DECLARE BINCONV(16)  ' BIT SHIFTER'S FAST BINARY CONVERSION#DECLARE MAPDESTTOSRCLINENO%(1000) ' DEST FILE LINE NR --> SRC FILE LINE NR#DECLARE DESTLINE$(1000)          %    ' POST PROCESSED LINES#DECLARE ELEMENTCNT(4)                ' ELEMENT COUNT PER TYPE#DECLARE VARTABLE$(4,200)             ' VARIABLE TABLE PER TYPE#DECLARE DEFINEVAL$(200)              ' DEFINE VALUES TABLE#DECLARE LABELNAME$(200)           %   ' LABEL TABLE#DECLARE LABELLINENO(200)#DECLARE LABELCNT=0#DECLARE ARGS$(32)                     ' ARGUMENT LIST#DECLARE STRUCTNAME$(30)#DECLARE STRUCTFIELDS$(30)#DECLARE STRUCTVARS$(30)              ' STRUCT VARS (EACH ENTRY HAS STRING OF% VARS)#DECLARE STRUCTCNT=0                  ' INDEX TO NEXT FREE STRUCT DEFINITION#DECLARE WHITESPACE$, SRCLINENO, CURSRCLINENO, CB#DECLARE CURATTICADDR, TOTALLINES, S$, DELETELINEFLAG#DECLARE VERBOSE, DESTLINENO, INSIDEIFDEF, Z$, CURDES%TLINE$#DECLARE CURDESTLINENO, S1, S2, CURTOK$, R, F$, DEFINEFLAG, DELIM$#DECLARE IGNOREBRACKETS, ARGCNT, PARSERERROR$, VARNAME$#DECLARE DIMENSION$, VALUE$, BKTOPENIDX, BKTCLOSEIDX, EQUALSIDX#DECLARE TR$, HX$, BI$, DONTMARKLABEL, TY, I%D, GENVARNAME$, OF$#DECLARE ARGSLIST$, ARGSLISTLEN, IGNOREDELIMFLAG, ARGSIDX, CURCH$#DECLARE QUOTEFLAG, DIDREPLACEFLAG#DECLARE A$, EXPECTINGLABEL, DEFAULTDELIM$, RVIDX#DECLARE T, LC$, FOUNDSTRUCTIDX, BR, B, BC$, VL#DECLARE N1, N2, BA%, A, AD, TF$, FOUNDIDX, K, SF$, SF#DECLARE CURLINELEN, SRCLINEPTR, SRCLINEBUFFPTR, CUTTAILIDX#DECLARE CURLINELENMINUSONE, CURLINEBUFFADDR, CHR#DECLARE CO$, RIDX, SK$, BL, SZ, SR, SM, ZZ$#DECLARE CONTNEXTLINEFLAG, TOKNAME$, CLEANVA%RNAME$#DECLARE SHITTYSYNTAXFLAG, ZZ'----.MAIN'----  PARSERFILE$ = "11.PARSE"  MK$ = "@~"  ' @ AND PI  DBLQUOTE$ = CHR$(34)  DBLQUOTECHAR = 34  SNGLQUOTECHAR = 39  KEY ON  PRINT " PREPROCESSOR V0.6.0"  PRINT  KEY 7, "SCRATC%H" + DBLQUOTE$ + PARSERFILE$ + DBLQUOTE$ + ":DSAVE" + DBLQUOTE$ + PARSERFILE$ + DBLQUOTE$ + ":DVERIFY" + DBLQUOTE$+PARSERFILE$  T$="                                                                               "  BLANKLINE$ = T$ + T$ + T$  %T$ = ""TOKENS$(0)=" PRINT INPUT IF THEN ELSE DO LOOP WHILE UNTIL GOSUB GOTO OPEN CLOSE DOPEN DCLOSE FOR NEXT GETKEY HEX$ DIM PEEK POKE WAIT DEC CHR$ ASC SGN SQR STR$"  TOKENS$(0) = TOKENS$(0) + " GRAPHIC CLR SCREEN DEF BEGIN BEND LEN MID$ RIGHT$ LEFT$% INSTR FOR NEXT STEP TRAP BORDER AND FOREGROUND "  TOKENS$(1) = " BACKGROUND SET ABS SIN COS TAN LOG FRE CURSOR PIXEL WINDOW RWINDOW LINE BOX CIRCLE ELLIPSE PALETTE RESTORE DATA ERR$ ER EL CURSOR ON OFF"  TOKENS$(1) = TOKENS$(1) + " VAL SCRATCH RETURN %RND STOP BANK TI DO OR ST IF EL ER ON TO PEN GET END INT NOT DS RUN USING DOT "  TOKENS$(2) = " APPEND ATN AUTO BACKUP BLOAD BOOT BSAVE BUMP BVERIFY CATALOG CHANGE CHAR CMD COLLISION COLOR CONCAT CONT COPY WPOKE WPEEK SETBIT CLRBIT "  TOKENS$(3) = " DC% LEAR DEFFN DELETE FN DIR DISK DLOAD DMA DMODE DPAT DSAVE DVERIFY EDMA ENVELOPE ERASE EXIT EXP FAST FILTER FIND GO64 HEADER HELP HIGHLIGHT "  TOKENS$(4) = " JOY LIST LOAD LOCATE LPEN MOD MONITOR MOUSE MOVSPR NEW PAINT PLAY POINTER POLYGON POS POT PUDEF "%!  TOKENS$(5) = " RCOLOR RDOT READ RECORD REM RENAME RESUME RGRAPHIC RMOUSE RPLAY RREG RSPCOLOR RSPPOS RSPRITE SAVE SCNCLR SLEEP SLOW SOUND SPC SPRCOLOR "  TOKENS$(6) = " SPRITE SPRSAV SYS TAB TEMPO TROFF TRON TYPE USR VERIFY VOL XOR KEY VSYNC RCURSOR T%"@& C@& RGRAPHIC FREAD POINTER "  DUMBCMDS$ = " BLOAD BSAVE DLOAD TO SAVE DIR COLLECT DOPEN DCLOSE BACKUP FREAD GET "  GOSUB GETFILENAME  BANK 128  TYPEIDENT$(Я)=""  TYPEIDENT$(Я)="%"  TYPEIDENT$(Я)="$"  TYPEIDENT$(Я%#)="&"  BINCONV(0) = 1  FOR I = 1 TO 16    BINCONV(I) = BINCONV(I - 1) + BINCONV(I - 1)  NEXT I' ------------------------- PASS 1 ------------------------------------'------.PASS1'------  NEXTLINEFLAG = 0  WHITESPACE$ = CHR$(32) + C%$HR$(160) + "	"  ' CLEANUP TEMPORARY FILES  SRCLINENO = 0  PRINT "PASS 1 ";  CURSRCLINENO=0  CLR TI  ' KEEP START TIME FOR TIMING  CB = $8030000   ' ELEVEN SOURCE TO BE COMPILED IS LOCATED HERE IN ATTIC RAM  CURATTICADDR = CB  TOTALLIN%%ES = WPEEK(CURATTICADDR)  CURATTICADDR = CURATTICADDR + 2  DO WHILE CURSRCLINENO <> TOTALLINES  ' UNTIL TARGET LINES IS REACHED    GOSUB READNEXTLINE    GOSUB SINGLEQUOTECOMMENTTRIM    ' STRIP WHITESPACE FROM END    S$ = CURSRCLIN%&E$    GOSUB STRIPTR$FROMEND    CURSRCLINE$ = S$    IF CURSRCLINE$ <> "" THEN BEGIN      DELETELINEFLAG = 0      IF VERBOSE THEN PRINT ">> :" DESTLINENO;", : "; SRCLINENO;": "; CURSRCLINE$      IF LEFT$(CURSRCLINE$, 1) = "."%' THEN BEGIN        NEXTLINEFLAG = 1        GOSUB ADDTOLABELTABLE      BEND      IF LEFT$(CURSRCLINE$, 1) = "#" THEN BEGIN        GOSUB PARSEPREPROCESSORDIRECTIVE      BEND      IF INSIDEIFDEF = 1 THEN GOTO PARSERLOOPSKIP      IF LE$ FT$(CURSRCLINE$, 4) = "DATA" OR RIGHT$(CURSRCLINE$, 5) = "BEGIN" THEN BEGIN        NEXTLINEFLAG = 1      BEND      IF DELETELINEFLAG = 0 THEN BEGIN        IF VERBOSE = 0 THEN PRINT ".";        S$ = CURSRCLINE$        GOSUB REPLACEVARSA&0,79,SL :  ""; : 9 FG G   (NF$)  1   :   G     ((NF$,2)) H   H   6350 H )H"";:5490 EH  NF$"" 5540:5150: xH
PV$CF$:PVYC:CF$NF$: "LOADING "CF$"..."; H5010 H""FO$; H(5150:  REDRAW SCREEN &H2 DE0 7720:  PERSIST FILENAME H<5490:9 CO((DE0)) IF "";CF$;" - ";R$((DE0));DE$;" ";:9 SB AIP DE0 "; READ ";NL; "LINES."; JIZNS1 PId VIn: uIx --- QUERY SAVE FILE NAME I5490: "SAVE FILE NAME (RETURN TO CANCEL) "(27&)"T"; INF$"" I  "";NF$ I"";:5490 ICF$NF$ I I: "J --- ENSURE LY IS AT SANE POSITION END JJ     MAKE LINE LY THE CURRENT LINE jJ IF LY>NL-SL THEN LY=NL-SL {JCTLY :YCLY J CTCL CTCTCL J6690 J CT0 CT&0 J YC0 YC0 J YCNL YCNL : CTYCSL3 K CTCL CTCTCL :  CONTEXT LINES K CT0 CT0  K"5150 &K, >K6 --- QUERY LINE NO |K@5490: "JUMP TO LINE # (RETURN TO CANCEL) "(27)"T"; KJNN$"":  NN$ KTNN(NN$):"";:54&90 K^ NNNL  KhLYNN:CL8:6600 Kr5540 K| K --- HELP (L"-- CURSOR MOVEMENT --",,"-- EDITOR FUNCTIONS --" OL"CURSOR KEYS   MOVE THE CURSOR" wL"ALT + UP      SCROLL UP 1 PAGE" L"ALT + DOWN    SCROLL DOWN 1 PAGE" L&"ALT + LEFT   SCROLL LEFT 1 CHAR(*)" L"ALT + RIGHT   SCROLL RIGHT 1 CHAR(*)" &M"SHIFT + CLR   GO TO TOP OF FILE" OM"ALT + CLR     GO TO END OF FILE" {M"ALT + DELETE  DELETE CURRENT LINE" M"ALT + RETURN  TO START OF NEXT &LINE" M"ALT + F       FIND" M"ALT + R       FIND & REPLACE" N"ALT + Z       GO TO LABEL UNDER CURSOR" IN"*) ONLY IN LINES WITH >80 CHARACTERS" sN"#) XEMU-EQUIVALENT SHORTCUT KEY" N"",,,," F1  LOAD FILE" N,,,," F&2  NEW FILE" N,,,," F3  SAVE FILE" N,,,," F4  SAVE FILE AS" O&,,,," F5  COMPILE + RUN" *O0,,,," F6  JUST COMPILE" IO:,,,," F7  GO TO LABEL" oO?,,,," F8  GO TO PREVIOUS FILE" OD,,,," F9  GO TO LINE NR     (#)CTRL + P&	" OF,,,,"CTRL-O JUMP TO LOC PRIOR TO F7"  PN,,,,"F11  TOGGLE CTRL MODE  (#)CTRL + 5" 3PX,,,,"F14  UPDATE DEFAULTS   (#)CTRL + Z" dPb,,,,"HELP THIS SCREEN       (#)PAGEUP" ~Pg 10550 :  MORE HELP Pl5490:"EE CHEAT SHEET -- &
PRESS ANY KEY TO RETURN TO EDITOR"; Pv T$:5150:5540: Q --- SET FILENAME FROM MAILBOX RAM .Q 4:T$((("FF00")))((("FF01"))) `Q T$"SK" BO6:FG5:BG0:SB14:HL2:JL1: xQJL1 :  JUMP LINE QAL(("FF07"))1 :  AUTOLOAD &FLAG? Q AL0 7170 QTF$"":I("FF10"):  (I)0 QTF$TF$((I)):II1: QCF$TF$ )R (("FF07"))2  :  AUTOJUMP FLAG PR ("FF07"),(("FF07"))(255  2) RJL(("FF09"))256(("FF0A")):EE(("FF08")) R RBO(("F&F02")):BG(("FF03")):FG(("FF04")) RHL(("FF05")):SB(("FF06")) 
SBU(("FF07"))4 :  BACKUP FLAG ?SSM($4FF07)8: SM   (27)"5";:  (27)"8" JS  128 PS* VS4: gS> ------ NEW tSH CH  SR:  5490:"URRENT FILE WAS MO&DIFIED! EALLY START OVER (Y/N)? "; S\:  : T$:  T$"Y"  T$"N" Sf:   T$"N" 5540:     Tp "TzA0MX:LI$(A)"":A:LC0 -TCF$"" >T"":5150 HT5540 `TCH0:XC0:YC0:CT0 T5490:"** EW FILE **";:NS1 T T -----&- NEW T5490:"REALLY QUIT EE? "(27)"O"; T: T$:  T$"Y"  T$"N" T T$"N" 5540: U 128:248,0: :4  0U"TSCHUESSN...!" 6U [U --- FILTER LABELS BASED ON FZ$ UA072:FI$(A)"":FI(A)0:A:FZ0:MP1 UA0MN&1: ((FZ$)0  (MK$(A),FZ$)0) (FZ$)0   U   FI$(FZ)MK$(A):FI(FZ)MK(A):FZFZ1 V   MK(A)  YC  MPMP1 V V A: "";: 5490: FZ0 "HOOSE LABEL WITH CURSOR KEYS + , ESCAPE WITH Ò - FILTER='";FZ$;"'"; V FZ0 &"O LABELS FOUND - FILTER='";FZ$;"'"FO$;:NS1:  WLSL1:0,0,79,SL:"":A0FZ:A 20(AL),(A,L): FI$(A);: A: MP0  MP0::  1W --- LABELS <WMP  0 EW 1 zW5490:"OLLECTING LABELS...";: NZ%0  FZ$"" W$A072:MK$(A)""&:MK(A)0:FI$(A)"":FI(A)0:A:MN0:FZ0 W.A0NL:T$LI$(A):LB$"":(T$,1)"."7490 X8MK$(MN)(T$,1,38):MK(MN)A:MNMN1 XB &XL5490: 7421 7XV NZ%1   ZXX   FZ1  T$(13): T$(27) mXZ  NZ%0: 7690 tX\ ~X`NZ%0 X X  SX&20(MPL): SY(MP,L):A 0,10 X  A SX,SY: "";FI$(MP);""; X   T$ X  A SX,SY: FI$(MP); Y   T$"" MPMP1 %Y   T$"" MPMPL <Y  T$"" MPMP1 SY  T$"" MPMPL Y  (T$"A"  T$"Z")  T$""  FZ$FZ$T$:7421 &Y  T$(20)  (FZ$)0  FZ$(FZ$,(FZ$)1):7421 Y  MPFZ1 MPFZ1 Y   MP0 MP0 Z   T$(13)  T$(27) GZ
 T$(13)  XZXC:LLYC:LZCT:XC0:LYFI(MP):6600:Ս5150 fZ5540:  REDRAW STATUS BAR lZ Z( --- SAVE FILENAME IN MA&ILBOX RAM Z2 9000 :  SAVE TO ATTIC Z< I1  (CF$): $4FF10I1,((CF$,I,1)): I ZF $4FF10I1,0 [P $4FF00,("S"),("K") )[Z $4FF07,($4FF07)1 5[d128: G[n --- COMPILE P[xAB0 {[ CF$""  :  NOW FILENAME, NO CIGAR [ CH1 & [  5490: 9 HL [   "CURRENT FILE NOT SAVED - PRESS ANY KEY";: T$ [  9 FG: 5540: AB1 [ \ AB1  \""(27)"L"; N\ PF%   8700 :  COPY PROJ FILES TO ATTIC RAM u\ GOSUB9000 : REM SAVE LINE BUFFER \"EDMA &0,$D400,$8010000,$2001:NEW RESTORE":"RUN";: LOAD '11.PARSE' FROM ATTIC CACHE \ 128 ] 208,2     :  NO OF CHARS IN KEYBOARD BUFFER 3] 688,13,13 :  2X RETURN 9] ^] --- M/L HELPER FOR VIC-IV MODE n]128:7970 ] I0  12: A$:& ("1600")I,(A$): I ]" 78,A2,47,A0,53,8E,2F,D0,8C,2F,D0,58,60 ],V4("1600") ]6 ]@ ================ ^J FIND AND REPLACE #^T ================ )^^: J^h5490: "FIND:"(27)"T"; ^rFS$"":RS$"":SD1 :  FIND STRING, REPLACE STRING,& SEARCH DIR ^|RA%0 :  REPLACE ALL ^ 1,0,0: 1,FS$: 1 ^ FR%0 8110 ^  "";:5490:"REPLACE:"(27)"T"; _   1,0,0: 1,RS$: 1 *_"";:5490 ^_ FS$""  FS$" " "FIND CANCELLED.";:NS1: g_SYC _5490:"SEARCHING...&"; _  S0  SNL _  FP(LI$(S),FS$) :  FOUND POS _   FP0 8240 _     LYS:CL8: 6600 _      128 `       MARK FOUND LINE )`       RV0  79 F`        I((YCCT)80)RV j`         2048I,(2048I)  128 w`      RV `   &    FLASH FOUND STRING `!       RV0  (FS$)1 `"        I((YCCT)80)FPRV1 `#         $D800I,($D800I)  16 a$       RV %a&       FR%0 8310: Ս8390 2a0   SSSD 8a:  saD  FD$"Q"  5540: Ս5490:9 HL:"END OF FOUND";:NS1 aI  FD&$"Q"  SNL   " - SEARCH FROM START?(Y/N):";:  FD$:  FD$"Y"  S0: 8140:  5490 aN XC0:A XC,YCCT: (27)"Q"; bX 9 FG &bb A$LI$(YC):1:  REDRAW CURRENT ,bl  @bv  --- FIND NEXT Kb  128 rb 5490: "FIND N)EXT P)REV Q)UIT"; b :& FD$:  ("NPQ",FD$) b  FD$"N" SD1 b  FD$"P" SD1 b  FD$"Q" SNL2 b  b  --- REPLACE b  128 "c 5490: "R)EPLACE A)LL N)EXT P)REV Q)UIT"; Bc : FD$:  ("RANPQ",FD$) Vc  FD$"N" SD1 kc  FD$"P" SD1 c! FD$"Q&" SNL1 c! FD$"R" 8480 c! c !TS$LI$(S) c*!NS$(TS$,FP1)RS$(TS$,FP(FS$),255) c4!LI$(S)NS$ d>!A XC,YCCT: (27)"Q"; dH!A$LI$(S):1 dR!SS1 %d\! +df! Cdp! --- ERROR HANDLER Rdz! ER30  Xd! sd! 128:248,0: :4  d&! (27)"Q"(27)"L";(ER),EL d! d! COPY PROJ FILES TO ATTIC RAM d"CF$  PN$ e" 7720 :  SAVE FILENAME IN MAILBOX, SO WE COME BACK TO PROJ *e"CB$8030000 : C  CB 6e$"TP%  0 Ze." CB, 0 :  RESET TOTAL LENGTH he8"C  C  2 ~eB" FI% & 0  PI%1 eL"  CF$  PF$(FI%) eV"   5010 e`"   DE0   ej"    TP%  TP%  NL1 et"     CB, TP% e~"     9030 e"    f" FI% f" .f(# --- COPY LINE BUFFER TO ATTIC RAM Ef<#CB$8030000 : CCB qfA# C,NL1 : CC2 :  STORE NO OF LINES & fF# A0  NL fP#  P
(LI$(A)):L(LI$(A)):B$10000(P1) fZ#   C,L : CC1 fd#   L0 ! 0,L,B,C:CCL fn# fx# g# --- COPY ATTIC RAM TO LINE BUFFER .g#CB$8030000 : CCB Ag#NL(C):CC2 Jg#CL0 Yg#  CLNL g#  L(C):LI$(CL)&!(BL$,L):P
(LI$(CL)) g#  B$10000(P1):CC1 g#   L0  ! 0,L,C,B : CCL g#  CLCL1 g# g# gT$ "B65SUPPORT.BIN": $1600 h^$A(0): SET ISSUE# TO ZERO Ihh$L$"/FILE:"CF$: 9450: POST FILENAME Xhr$#2,(CF$) bh|$L$"" mh$#2,C$ &"zh$L$L$C$ h$ (L$)128   9450: POST CHUNK h$ N$; h$  ST  64  9350 h$#2 h$ (L$)0   9450: POST REMAINING CHUNK 1i$ 9450: POST EMPTY CHUNK TO DECLARE WE'VE FINISHED Ki$ "FINISHED POSTING!" Qi$ ji$ *** POST CHUNK *** &#i$L$((L$)1)  L$: PREPEND THE LENGTH OF STRING+1 i$A("/"L$) i% "POSTING CHUNK..." i%L$"" i% i!% MOVE TO NEXT WORD j&%  (CL$,XCXI,1)  " " j0%   9600 -j:%   EF   3jD% PjN%  (CL$,XCXI,1)  " " ]jX%   9600 ljb%   EF &&  rjl% xjv% j% MOVE TO NEXT CHAR j%EF0:XCXC1 j% XC(CL$)   j%   YC NL  XC0:YCYC1:CL$LI$(YC): YCCT20   5250 j%  EF1 k% k% (k% MOVE TO PREVIOUS WORD ?k% 9800: PREV CHAR \k%  (CL$,XCXI,1)  " " ik%   980&% -  }128: X05:A$:("1600")X,(A$):X S } 248,0 :  RESTORE ROW LINK MODE  }: "PASS 3: TOKENIZING":""(27)"T"""(27)"B";  } 1,1,5,"11TEMP,S,R":("1600") :  STDIN = 11TEMP  } FILL KEYBOARD BUFFER !!}208,4: 688,("R ?"):689,("U"):690,("N"): 691,13 9!} A2,01,20,C6,FF,60                                                                                                                                                                                                   &'0 xk&   EF   ~k& k&  (CL$,XCXI,1)  " " k &   9800 k*&   EF   k4& k9& 9600: NEXT CHAR k>& kH& MOVE TO PREV CHAR lR&EF0:XCXC1 l\& XC0   Ulf&   YC0  YCYC1:CL$LI$(YC):XC(CL$)1: YCCT0  5330 ilk&   XC0  X% C0 tlp&  EF1 {lz& l& EF1  (CL$)  YC0   9810 l& l& DELETE CURRENT CHAR l& XC(CL$)   l&  CH1 m&  CL$(CL$,XCXI1)(CL$,XCXI1) m&  LI$(YC)CL$ %m&  9970 ,m& 2m& Lm& *** REDRAW LINE *** ]m&IV0: 10000 m&A' 8   LL0:LZ0:XZ0:130: BUFFER OF PAST LINE LOCATION e  A$(A$,XI):B(A$):OB80:"";:OB79   P
(A$):0:M(P1)256(P2):CMB1:B06    IV1   "";   1:AMC:ZA(A):A$(ZA);: IV1  ZA34   ""; ! :128:O9 HL:7'9);"$";:9 FG !  !d : =!n  --- GENERAL INITIALIZATIONS --- C!x : M! 8560 V! 4  !  0,65             :  M65 FAST MODE ! 7940:  INSTALL M/L ! PF$"11.EDIT" "  7,"SCRATCH "(34)PF$(34)":DSAVE"(34)PF$(34)":DVERIFY"(34)PF$'(34) 3"  	(2)80  (27)"X";: FORCE 80COLS MODE M" 7040: READ DEFAULTS z" ; BG: < BO: 9 FG : ""(27)"M"; " 5490:" EE V0.5.0"; "  10500           :  ENABLE RAW FN KEYS " : " MX2000               :  MAX NUMBER OF LINES' $# ES%0                 :  ESCAPE FLAG # T$"                                                                               ":BL$T$T$T$:T$"" # Q$(34)           :  FAST ACCESS TO QUOTE CHAR #FO$(27)(27) :  ESCAPE FLASH ETC. 8$CC$'""(22)(20)(148)(13) :  CTRL CHARS r$HM$""(20)     :  HORIZONTAL MOVEMENT CHARACTERS $"CH$(0)" ":CH$(1)"*" :  FOR FILE CHANGED INDICATOR $,CM$(0)"    ":        :  FOR CONTROL CHAR MODE INDICATOR  %6CM$(1)"'CTRL"FO$ @%@R$(1)"SUCCESS: ":R$(0)"ERROR: " :  DISC OPERATION RESULT %JCO(1)SB:CO(0)HL                 :  DISC OPERATION RESULT COLORS %TDF$"11.DEFAULTS"                 :  DEFAULTS FILE NAME %^ LI$(MX)           :  LINE BUFFER &c C'B$(100)        :  CLIPBOARD OF LINES P&h MK$(72),MK(72),FI$(72),FI(72)   :  MARKER TABLE s&rEE$(0)"VARIABLE NOT DECLARED" y&: & --- BUILD CHAR TRANSLATION TABLE --- &: & A$(255)           :  CHAR TRANSLATION TABLE 'A131:A$(A)"'"(64A)"":A$(128A)""(192A)"":A L'A32127:A$(A)(A):A$(A128)(A128):A a'A$(34)(34)FO$ 'A$(160)"" :  MAKE SHIFT+SPACE VISIBLE ': ': 'XI1 :  HORIZONTAL SCROLL INDEX IN CURRENT LINE ' 128 ( 248,(248)26 '	   :  DISABLE SCREEN EDITOR LINE LINKING W(&XC0:YC0:SL	(1)2 :  CURSOR POS, STATUS LINE POSITION b(+ 5001 t(0 CF$""  (5   FT$".PRJ"  ($4FF70)55  ($4FF71)77   (6     9100 (7  :  (:    5010:  LOAD FILE IF SET )<'
     9000:  KEEP COPY OF FILE IN ATTIC RAM 2)?     $4FF70,55,77 x)D     DE0 CF$"" :  DELETE CURRENT FILENAME IF FILE NOT THERE )I   )N )X: )b UNCOMMENT THIS FOR OUTPUT PERFORMANCE TEST )l TS=TI:FORTE=0TO10:GOSUB2080:NEXTTE:PRI'NT""TI-TS:STOP *v: *5150:  REDRAW SCREEN <*5540:  BUILD STATUS BAR B*: _* ********************** |* ** MAIN EDITOR LOOP ** * ********************** *: *128:V4 :  ENABLE VIC IV * JL1   +  LYJL:CL5:6600: ' BRING LINE IN CONTEXT +    ($4FF30)0  X+*    R0:PE$""::P($4FF30R):PE$PE$(P):RR1:  P0 w+>     5490: "";PE$;:NS1 +C     $4FF30,0 +H   +R  JY1:CL0             :  CLEAR JUMP LINE +\ +f +p   YCCT0 CT0:'YC0 .,z   NS1 PO$"      "((XC),2)":"((YC),2):5400 E, YC2000  YC  1 W,  CL$LI$(YC) ,    (YCCT)	(1)1  YCCT	(1)1 ,  A XC,YCCT ,  9 SB:A :  T$ : A $:9 FG ,   MF1   10050: 2160: MARK-MODE HAN'DLING -   NS1 5540: 128:V4: NS0 B-   128:AK  (54801)  16 :  CHECK ALT KEY u-   -- IF T$=F11 (ALSO CTRL+5/GREEN FOR XEMU?) -   T$""  (AK  T$"C") CM(CM1) : 2170 -    CO((CC$,T$)  CM0)  AK -    CO  .    ' T$"G" T$"" :  WORKAROUND FOR CHALLENGED KEYBOARDS 5.     T$"S" T$"" f.     T$(13) CH1: 5650:  INSERT RETURN .     (HM$,T$)0  XI1  .       XI1:A 0,YCCT:CL$LI$(YC):A$CL$:1 .	        T$(13) A 0,YCCT1:A$LI'$(YC1):1 .	     &/	     T$""   9510: CTRL-W = NEXT WORD Y/	     T$""   9700: CTRL-U = PREVIOUS WORD /	     T$""   9900: SHIFT-DEL = DELETE CURRENT CHAR /	     T$""   $4FF07,($4FF07)  8: ($4FF07)8   "T0O5SG" 0	'     T$"P" 9300: POST CURRENT FILE TO PC G0	     T$"Z" 11000: NAVIGATE TO LABEL UNDER CURSOR p0	     T$"F"  FR%0 : 8000:  FIND 0$	     T$"R"  FR%1 : 8000:  FIND AND REPLACE 0.	     T$"" 5990:  SAVE 08	     T$"" SA1:'5990:  SAVE AS 1B	     T$"" 6260:  LOAD -1L	     T$"" 7360:  STOP L1V	     T$"" 7230:  NEW n1`	     T$"" 7430:  LABELS 1j	     T$"" 6710:  GOTO LINE 1o	     T$"" 10700:  GO TO PREVIOUS FILE (PV$) 1t	     T$"" '6790:  HELP ;2y	     T$""  TMYC:YCLL:LLTM: TMCT:CTLZ:LZTM: TMXC:XCXZ:XZTM: 5150 g2~	     T$""            :  HOME/END 2	       AK0 LY0:XC0:6600: LYNL:XC0:6600 2	     2	     T$""  :  -------- CURSOR RIGHT 2'	       AK  "3	          79XI(CL$) XIXI1:A0,YCCT:A$CL$:1 :3	       : XCXC1 P3	       XC79  z3	        XC79: XCXI(CL$) XIXI1 3	        A 0,YCCT:A$CL$:1 3	       3	     3	     T$""  4 
       XC'0 XCXC1 : Ջ YC0 YCYC1:XC(LI$(YC)): XC79 XC79 4

     24
     T$""  Z4
       AK LYYCSL:6600:YCYC1 4(
       YCCTSL3 5250:  YCCTSL YCYC1 42
     4<
     T$""  4F
       AK LYYCSL:6600:YCYC1 '5P
       YCCT0 5330:  YCCT0 YCYC1 5Z
     ;5d
     T$"" 7790:  --- F5 - COMPILE [5n
     T$(20) : DELETE j5x
      CH1 5
       XC0  AK 5840: :  MERGE WITH LAST LINE 5
      CL$(CL$,XCXI2)(CL$,XCXI) 5
 '     LI$(YC)CL$ 6
      A 0,YCCT:A$CL$:1:(CL$)79" "; /6
       XC0 XCXC1 :6
     C6
   r6
   T$""  :  --- F14 - SAVE DEFAULTS 6
    5490:"SAVING DEFAULTS..."; 6
     (DF$): (DF$),B(4),P(("FF00"))  P(("FF80")') 6
    DEDS : DE$DS$ 7
    9 CO((DE0)) 17
    5490: "";R$((DE0));DE$;" ";:9 SB >7
    NS1 G7   {7: : T$(27)  :  -- CHECK ESCAPE FLAG 7  T$"": ES%0  ES%1: ES%0 7: : ES%1   :  -- CHECK ESCAPE CHA'RACTERS 8   T$"K"  XC(CL$): XC78  XIXC78:XC78: 9970 =8   T$"J"  XC0: XI1  XI1: 9970 _8   T$"D"  AK1: 5840:CH1 8   T$"M"  MF1:MSYC:MEYC: 9970 8   T$"P"   10200 8  ES%0 8: :  -- INSERT CHAR 8'    CH1 8"     XC79 XIXI1 19,      (CL$)XC:CL$CL$" "::  FILL UP SPACES IF NEEDED \96    CL$(CL$,XCXI1)T$(CL$,XCXI) p9@    LI$(YC)CL$ 9J    A 0,YCCT:A$CL$:1 9T    XCXC1 :  XC79 XC79 9^  : ENDIF ES%=1 9`  ': ENDIF T$=CHR$(27) :b  : ENDIF CO (CTRL-CHAR) :h  QU1 :r :|: X: ==================== SUBROUTINES ===================== q: --- CHECK FILETYPE :FT$".EL" : (CF$)  4  (CF$, 4)  ".PRJ"   :  FT$".PRJ" :  PF%  1 ': : : --- READ IN F$ 	; 5001 :  CHECK FILETYPE .; FT$".PRJ"  PN$CF$ : PI%  0 S; 1,1,5,CF$",S,R":DEDS:DE$DS$ o; DE0  CF$OF$: 1: ;A0MX:LI$(A)"":A:LC0 ;NL0:CT0:YC0:XC0 ; ;  L$"": 1,L$ ;  LI'$(NL)L$ ;  NLNL1 <   PF%  FT$".PRJ"  (L$)0  (L$,1)"'"   +<    PF$(PI%)  L$ A<    PI%  PI%  1 J<   W<  ST0 h<NLNL1:CH0 p<  1 v<
 |<: < ---  REDRAW SCREEN <(9 FG :  ""; <2 CT0 CT0 << I0  'SL <F  A 0,I <K   CT2000  CT1 <P  A$LI$(CTI) 0=Z   (27)"Q";:ZYYC:YCCTI:10000:YCZY:1 8=d I >=n D=x: X= --- SCROLL UP l= CTSLNL1  =CTCT1 :  CURRENT TOP =S$LI$(CTSL) =A 0,0: (27)"V"; =A 0,SL:A$S$':1 = =: = --- SCROLL DOWN = CT0  >CTCT1 >S$LI$(CT) 3>A0,0: (27)"W";:A$S$:1 9> ?>: _> --- DISPLAY STATUS IN ST$ i>"9 SB >,"";:A 20,SL1:""PO$; >6A 75,SL1:CM$(CM); >@A 0,SL1:""CH$(CH)"";'  >J 0,0,79,SL >T9 FG >^ >h: "?r 	(1)25  CB2048(2480) : FB$FF80000  (2480) ]?t 	(1)50  CB$40800(4980) : FB$FF80000  (4980) ?w! 3,80,160,CB       :   --- CLEAR STATUS BAR ?|! 3,80,SB,FB        :   SET STATUS BAR CO'!LOUR ?"";:A 0,SL1 ?9 SB ?  @ --- CLEAR STATUS @ 5490 k@"";:A 18,SL1:"        F1LOAD F3SAVE F5COMPILE F7LBLS F9GO F11CMODE "; @A 2,SL1: CF$""  CF$;:ՙ "<UNTITLED>"; @ 0,0,79,SL @9 FG @ '"@: @ --- INSERT RETURN @YCYC1 @NLNL1 A& YCNL NLYC 8A0ANL1YC11:LI$(A)LI$(A1):A:LI$(YC)"" WA:LI$(YC)(LI$(YC1),XCXI) zADLI$(YC1)(LI$(YC1),XCXI1) ANXC0:SC1:PL$LI$(YC1) AX  (PL$,SC,1)" " :  --- AUTOI'#NDENT Ab   LI$(YC)"" LI$(YC)" "LI$(YC)  Bl  SCSC1:XCXC1 Bv )B YCCTSL 5250:  SCROLL UP FBA XC,YCCT: (27)"I"; XBA$LI$(YC):1 |BA XCSC1,YCCT1: (27)"Q"; BA$LI$(YC1):1 B B: B --- MERGE LINES B A'$K0  YC1  B AK SXXC:XC0:YCYC1: 5880 CYCYC1:XC(LI$(YC)) #CLI$(YC)LI$(YC)LI$(YC1) GCAYC1NL1:LI$(A)LI$(A1):A `C YCNL LI$(NL)"" tC NL0 NLNL1 zC: C  AK0  A 0,YCCT:A$LI$(YC):1 C*A 0,YCCT1:(27)'%"D"; C4A 0,SL:A$LI$(CTSL):1 D> CTSLNL1 A 0,SL: (27)"Q"; DH AK XCSX:YCYC1 DR %D\: 9Df --- SAVE FILE WDp BU  CF$""  SA0  Dz  5490:"BACKING UP OLD FILE..."; D  B$(CF$,12)".BAK" D   (B$) D   (CF$) '& (B$) D D CF$""  SA1 SA0 : 6520:  SAVE AS E CF$"" 5540:  E5490:"SAVING..."; +E (CF$) JEIMX:  LI$(I)"":II1: SENLI xE 1,1,3,CF$",S,W":DEDS:DE$DS$ E A0  NL E  1,LI$(A) E A E DS0  DEDS ''E 1 E5490 E$ DE0 CH0 E.9 CO((DE0)) 
F8 R$((DE0));DE$;" ";:9 SB 4FB7720:  SAVE FILENAME IN MAILBOX RAM =FLNS1 CFV IF`: OFj: cFt --- LOAD FILE mF~5490 yFOF$CF$ F CH1  F   "CURRENT FILE "CF$" NOT SAVED.&  REALLY PROCEED? (Y/N) "FO$; F  : T$:  ("YN",T$) F  5490 G   T$"N" 5540: G hG5490: "LOAD FILE NAME ($ FOR DIRECTORY, RETURN TO CANCEL) "(27)"T"; sGNF$"" G  "";NF$ G (NF$)0  (NF$,1)"$"   G  0,(  11.D81  00 1D                                                                                                                                                                                                                                     (D00@                                                                                                                                                                                                                                                      D00@                                                                                                                ?               *                                    5             |@                 8'($FOOT.EL            %11.DEFAULTS            !CHANGELOG             H1.EL             GIEDIT         C   &$11.TOKENIZE            XANADU.EL         V   !BIGSPRITE.EL          ( DRAWSPRITE.EL            $HELLO.EL            $BASEDEMO.EL            $VART.EL         I   $&FFIRE.EL            MELODY.EL            TESTDEF.EL            #README         ? (!POST            5CHABI.P         A   ) B65SUPPORT.BIN            ' 11.EDIT         Y   )11.PARSE         ;   /PAPER.DAT            /INTRO.DAT         V   BIGSPRITE         K (#DRAWER.EL            FFIRE            *11.POST            	HUNGRY.EL            GURCE.V            *11.SETTINGS            $MELODYCREATOR            THAI.V          (2GURCE            2MURAL.BIN            2MURAL.CLR            7MARY.P            *%AUTOBOOT.C65            
GURCE2.V            TESTDEF            1"TURK.V         * (	ONION.V         
    VIET.V         
    AUS.V            1UZBEK.V            GERMAN.V            MEGA65.V            TEST.P            GITEST          (
SONG1.P            TEST.PL            V 5             SONGS.P         
   BACKUP.P            AUS.P            ANGEL.P         	    LINE.EL          (5 ENIGMA.P            
 VIET.P            
TURK.P         
   HUNGRYDINOSAURS         `   ELEVEN.OUT            
VART            	HELLO1.EL            %11.PARSE.EL         } (8V 6          9    - 11TEMP        ?   GRABBER.EL         X   	XANADU-BASIC65            HELLO            1TEST.V            	TEST.LN         	   	"ANA.LN         	 (L11.PARSE-NEW         2   ;LEVEL1-BG.DAT            7BOXTEST.EL         	   3PAL.BIN            .FOOT         ;   GRAB             LINE            ; PLAYER3.BIN         K ( F11.PARSE-NEW        2   2'LEVEL1-BG.BIN         .   <PLAYER.DAT         '   5BOXTEST            :PLAYMAKER         ?   A!PLAYER2.BIN         K   C RIZAM.P            =PLAYER.BIN         K (@DUCK.DAT            BDUCK.BIN         $   FPLAYER2.DAT         '    IFOOT        7    P11TOKENIZED             %11.PARSE         :   GPLAYER3.DAT         '   LGRABBER           HPLAYER4.BIN         K   K PLAYER4.DAT         '    %11.PARSE.EL        r    NFOOT        &    P11TOKENIZED                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ) G/ЩS/Т< }MEGA65 UNIT TEST SUPPORT INSTALLED `  fg  L ded 겱=/'cP(F/D6l    L  L L L   `H    h `c
겱 L\ `C `G/ЩS/Т< }MEGA65 UNIT TEST SUPPORT INSTALLED `  fg  L ded 겱=/'cP(F/D6l    L  L L L   `H    h `c
겱 L\ `C)    6  PN$"11.PARSE":MK$"@":Q$(34):H34:Y39 >    e   " PREPROCESSOR V0.5.0":   7,"SCRATCH"Q$PN$Q$":DSAVE"(34)PN$Q$":DVERIFY"Q$PN$ ! T$"                                                                             )  ":BL$T$T$T$:T$"" !
 RW$(0)" PRINT INPUT IF THEN ELSE DO LOOP WHILE UNTIL GOSUB GOTO OPEN CLOSE DOPEN DCLOSE FOR NEXT GETKEY HEX$ DIM PEEK POKE WAIT DEC CHR$ ASC SGN SQR STR$" 1" RW$(0)RW$(0)" GRAPHIC CLR SCREEN DEF BEGIN BEND LEN MID$ RIGHT$ L)EFT$ INSTR FOR NEXT STEP TRAP BORDER AND FOREGROUND " " RW$(1)" BACKGROUND SET ABS SIN COS TAN LOG FRE CURSOR PIXEL WINDOW RWINDOW LINE BOX CIRCLE ELLIPSE PALETTE RESTORE DATA ERR$ ER EL CURSOR ON OFF" ?## RW$(1)RW$(1)" VAL SCRATCH RETURN RND STOP B)ANK TI DO OR ST IF EL ER ON TO PEN GET END INT NOT DS RUN USING DOT " #F RW$(2)" APPEND ATN AUTO BACKUP BLOAD BOOT BSAVE BUMP BVERIFY CATALOG CHANGE CHAR CMD COLLISION COLOR CONCAT CONT COPY WPOKE WPEEK SETBIT CLRBIT " q$G RW$(3)" DCLEAR DEFFN DELETE )FN DIR DISK DLOAD DMA DMODE DPAT DSAVE DVERIFY EDMA ENVELOPE ERASE EXIT EXP FAST FILTER FIND GO64 HEADER HELP HIGHLIGHT " $H RW$(4)" JOY LIST LOAD LOCATE LPEN MOD MONITOR MOUSE MOVSPR NEW PAINT PLAY POINTER POLYGON POS POT PUDEF " q%I RW$(5)" RCOLOR R)DOT READ RECORD REM RENAME RESUME RGR RMOUSE RPLAY RREG RSPCOLOR RSPPOS RSPRITE SAVE SCNCLR SLEEP SLOW SOUND SPC SPRCOLOR " %K RW$(6)" SPRITE SPRSAV SYS TAB TEMPO TROFF TRON TYPE USR VERIFY VOL XOR KEY VSYNC RCURSOR T@& C@& RGRAPHIC FREAD POINTER " @&U)	 DC$" BLOAD BSAVE DLOAD TO SAVE DIR COLLECT DOPEN DCLOSE BACKUP FREAD GET " Z&Z 7020:  GET FILENAME k&d 128: 0,65 &n PF$(0)"":PF$(1)"%":PF$(2)"$":PF$(3)"&" &o  B(16) :  BIT SHIFTER'S FAST BINARY CONVERSION. THANKS A LOT! 'p B(0)1: I1  )
16:B(I)B(I1)B(I1): I U's  LN%(1000)             :  SRC FILE LINE NR <-> INTERNAL IDX MAPPING 'x  LI$(1000)             :  POST PROCESSED LINES 'y  EC(4)                 :  ELEMENT COUNT PER TYPE 'z  VT$(4,200)            :  VARIABLE TABLE) PER TYPE -({  DF$(200)              :  DEFINE VALUES TABLE a(}  LB$(200),LL(200):LC0 :  LABEL TABLE & COUNT (~  AL$(32)               :  ARGUMENT LIST (  SN$(30),SK$(30)       :  STRUCT NAMES, FIELDS )  SV$(30)               :  STRUCT VA)RS (EACH ENTRY HAS STRING OF VARS) W) SS0                      :  INDEX TO NEXT FREE STRUCT DEFINITION ]) : )  ------------------------- PASS 1 ------------------------------------ ) : ) NL  0 ) WH$(32)(160)"	" :  WHITESPACE *  CL)EANUP TEMPORARY FILES '* SL0 :  SOURCE CODE LINE COUNTER =*  "PASS 1 ";:RL0 d*  TI:  KEEP START TIME FOR TIMING * CB$8030000:CACB:TL(CA)256(CA1):CACA2 *   RLTL :  UNTIL TARGET LINES IS REACHED *    9500: READ NEXT LINE INT)O CL$ +  CT(CL$,"'"):  CT0 580 .+   (CL$,(34))0 540 9+  CT0 d+  0:L(P)1:A(P1)256(P2):1 +  R.L:C(AR):CHQ(Q1):ՋCYQ0CTR1:R999 +   +   CT CL$(CL$,CT1) +0   STRIP WHITESPACE FROM END +)D  S$CL$:2050:CL$S$ ,I   CL$""  5,J    DL0 :  DELETE LINE FLAG S,N     VB  ">>"LN;SL;CL$ ,X     (CL$,1)"." NL1:1500:  LABEL ,Y     (CL$,1)"#"  ,Z      CC1 ,[       (CL$,"IFDEF")2  S$(CL$,8): 9210:DL1 	-\ )      (CL$,"ENDIF")2  SH0:DL1 8-]       (CL$,"DEFINE")2 DF1:1000:DF0 c-^       (CL$,"DECLARE")2 DF0:1000 -_       (CL$,"OUTPUT")2 1200 -`       (CL$,"STRUCT")2  9300:DL1 -     -     SH1   750 	.     (CL)$,4)"DATA"  (CL$,5)"BEGIN"  NL1 .     DL0  5.       VB0  "."; F.      S$CL$ t.      3007: REPLACE VARS & LABELS IN S$ .      9600: CHECK FOR CREATION OF STRUCT OBJECT .       (L$,1)"_"  L$(L$,(L$)1):NL0:CN1: )CN0 #/       9800: SAFE ADD L$+S$ TO CURRENT OR NEXT LI$(LN) f/       (S$,4)"BEND"  (S$,6)"RETURN"  (S$,2)"IF" NL1 /     :  ENDIF DL=0 /   :  ENDIF C$<>"" /  SLSL1 :  INCREASE SOURCE CODE LINE (FOR ERROR MSGS...) / )  VB   "SL=";SL: Z$ / 0 L$"" LI$(LN)L$:LNLN1 '0 1 H07150:  SET OUTPUT FILENAME g0 "11TEMP": "11TOKENIZED" 0 ------------------------- PASS 2 ------------------------------------ 0: 0 1,1,5,"11TEMP,S,W" 0 (13))"PASS 2 "; 1LP0   :  CURRENT LINE POINTER 31OL$"" :  CURRENT OPTIMIZED LINE E1  SI0  LN1 s1*S$LI$(SI)  :  VB  SI;"=> "S$:ՙ "."; 1,    (S$,MK$)0 1.     S1(S$,MK$):S2(S$,MK$,S12) 1/     C$(S$,S12,S2S12) 14     )4505 2>     S$(S$,S11)C$(S$,S22) 2\   (2a VB  "<= ";(SI)S$ >2k  1,(SI)" "S$ G2l SI c2p 10000: --- DUMP VARS 2q R0  10:1,(32000R):R 3vF$"D:D"Q$"11TOKENIZED"Q$":IFDS<>0THEN?"Q$"DISC ERROR: "Q$";DS$:ELSE?"Q)$""Q$":D"Q$"11.POST" 3z1,F$  3 1 )3"" S3ETTIBT: "ELAPSED TIME:";ET;"TICKS" 3"EDMA 0,$1FFF,$8022000,$2001:NEW RESTORE":"RUN";: LOAD '11.TOKENIZE' FROM CACHE 3 128 3 208,2   :  NO OF CH)ARS IN KEYBOARD BUFFER 4 688,13,13: RETURN 4 4: .4 DECLARE VAR(S) IN S$ n4S$(CL$,10DF):D$",;":IB1:2100:IB0:  SPLIT PARAMETERS 4 (IB=IGNORE BRACKETS) 4NL$"" :  NEW LINE IF DIMENSIONING... 4 AC0  PE$"?DECLARE PARAME)TER MISSING IN LINE "(SL):1800 5 I0  AC 25  P$AL$(I): 1030: PARSE DECLARED VAR :5 I b5  NL$"" DL0:CL$"^^"NL$: DL1 h5 5 --- PARSE DECLARED VAR 5: DI$"" : VL$"" 5: B1(P$,"("):B2(P$,")"):EQ(P$,"=") 5:  EQ)0  :  --- ASSIGNMENT ,6:   VL$(P$,EQ1):P$(P$,EQ1):TR$WH$:S$P$:2050:P$S$ N6:   S$VL$:2000:2050:VL$S$ 6:    (VL$,1)"$"HX$(VL$,2):4900:VL$C$ 6:    (VL$,1)"%"BI$(VL$,2):4800:VL$C$ 6:  6:  B10  B20 ) :  --- DIMENSION 7:   DI$(P$,B11,B2B11) : PP$(P$,B11) ^7:   S$DI$:DZ1: 3000:DZ0:DI$S$:P$PP$:  CHECK FOR DEFINE TOKENS k7":   DL0 t7$:  7&: TY0 :  VAR TYPE 7(: T$(P$,1):  TYPE (IF ANY) IN T$ 7*:  VB  "ADDING "; )7,:  ("%&$",T$)0 T$"":TY0 8-:  DF1 TY4 8.:  T$"%" TY1 -80:  T$"$" TY2 B81:  T$"&" TY3 \82: VT$(TY,EC(TY))  P$ p84:  DI$""  86:   IDEC(TY):5000:  FETCH VARNAME IN VN$ 8<:    DF0  NL$NL$"DIM "VN$T$"("DI)$"):" 8=:  8@:  VL$""  	9A:   IDEC(TY):5000 59B:    DF0  NL$NL$VN$T$"="VL$":" >9D:  ]9E:  DF1  DF$(EC(TY))VL$ {9K:  VB  P$;": ";EC(TY) 9L: EC(TY)EC(TY)1 9` 9S$(CL$,8):D$",;":2100 9 AC0  "?INVAL)ID PARAMETERS IN LINE ";LN%(SL): *:S$AL$(0):TR$Q$:2000:2050:  TRIM QUOTES LEFT & RIGHT X: VB  "SETTING OUTPUT FILE TO "S$"" c:OF$S$ :DL1 :  DISABLE PASSTHROUGH : :: : ADD TO LABEL TABLE :: : VB  "LABEL ";CL$;") AT LINE ";LN :DL1 :LB$(LC)(CL$,2) ;LL(LC)LN1 *;LCLC1 :  INCREASE LABEL COUNT 0; R; RETURN TO EDITOR WITH ERROR v; 4 :  SET ERROR MAILBOX FLAG ; R1  (PE$): $4FF30R1,((PE$,R,1)): R ; $4FF30R1,0 ; ("FF0)9"),(SL,256): ("FF0A"),SL256 < ("FF07"),(("FF07"))2 :  SET AUTOJUMP FLAG %<& /<07210 5<: j< -- STRIP TR$ FROM BEGINNING OF STRING IN S$ -- <  (TR$,((S$,1))) <  S$(S$,2) < < <: < -- STRIP CHARCTERS IN TR$)  FROM END OF S$ -- <  (TR$,(S$,1)) =  S$(S$,(S$)1) =  =* =/: 4=4 -- PARSE ARGUMENTS -- \=5     IN: S$ = STRING, D$=DELIMITER =6    OUT: AL$(X)=ARGUMENT LIST, AC=ARGUMENT COUNT =7         AL$(0)=FIRST ARG, AL$(1)=SECOND ARG)!... =8 ==: =>AC0:AL$S$:AL(S$):IG0 >@ AL0 AC1: :  NO STRING />CAI031:AL$(AI)"":AI ?>H AI1  AL R>MB$(AL$,AI,1) l>N B$"("  IB1 IG1 >O B$")"  IB1 IG0 >R (D$,B$)0  IG0  >T    S$AL$(AC):TR$" ":20)"00:2050:AL$(AC)S$ >\    ACAC1 >f   :  ?p    AL$(AC)AL$(AC)B$ ?z   !? AI O?S$AL$(AC):TR$" ":2000:2050:AL$(AC)S$ i?S$AL$ :  RESTORE S$ o? u?: ? -- REPLACE VARS & LABELS IN SOURCE STRING -- ?    IN:   S$ = SOU)#RCE STRING ?    OUT:  S$ = DEST STRING WITH REPLACED ITEMS @: +@ (S$,2)"^^" S$(S$,(S$)2): I@Q0:A$"":C$"":SS0:TG0 n@CX$"?<>=+-#*/^,.:;() " : D$CX$ @ II1  (S$):B$(S$,II,1) @ B$":"  Q0  SS0:RI0 @ SS  B$")$("  RI0 : D$CX$ @ SS  B$")"  RI1 : D$CX$  "DPUB" A   B$Q$  : Q(Q1) KA   Q1 4000:A$A$C$:C$"":A$A$B$:B$"" RA lA Q1 A$A$B$:3200 A (D$,B$)0  A4000:A$A$C$:C$"":B$" "B$"" AA$A$B$ A)% : C$C$B$ A A4000 AS$A$C$ A A< 
B C$""  C$"_"  ?B (C$)0 TG0:      :  NEVER CHANGE NUMBERS ~B C$"0" C$".":        :  STUPID MS BASIC OPTIMIZATION B TG  DZ0 4500:TG0:   :  REPLACE LABEL B C$)&"GOTO" NL1 B C$"GOTO"  C$"GOSUB"  C$"TRAP" TG1 CDR0 :  DID REPLACE FLAG :C (C$,1)"$" HX$(C$,2):4900: aC (C$,1)"%" BI$(C$,2):4800: sCP$" "C$" " C T0  6: (RW$(T),P$)0  LC$C$: 4100: C CT$(C$,)'1):TY0 C T$"%" TY1 C T$"$" TY2 C T$"&" TY3 D ID0  EC(TY) ED C$VT$(TY,ID) 5000:C$VN$PF$(TY):IDEC(TY):DR1 ND ID \D DR1  D ID0  EC(4): CHECK DEFINES TABLE TOO D   C$VT$(4,ID)  C$DF$(ID): D ID*  DCI1 D ID0  SS1: CHECK STRUCT NAMES ,E   C$SN$(ID)   9600:CIID:IDSS1: CREATE NEW STRUCT OBJECT 5E ID ]E CI1  :  (C$)222  : PI E (DC$, LC$)0  (C$"R"  C$"P"  C$"U8"  C$"W")   EPE$"?UNRESOLVED I*DENTIFIER: '"C$"' IN LINE "(SL): 1: 1800 E E: E: (F CHECK IF COMMAND TRIGGERS SHITTY SYNTAX MODE sF TODO: COMPARE UBIK'S LOGIC HERE VERSUS MY OWN 4079 LC$="DOPEN" LOGIC yF FC$MK$C$MK$ :  :  MARK LABEL FDR0 F ID0*  LC1 F C$LB$(ID) C$(LL(ID)):IDLC:DR1 F ID F DR  >GPE$"?UNRESOLVED LABEL: '"C$"' IN LINE"(LN%(SI1)): 1:1800 DG ]G --- CONVERT BINARY qGBR0 :  RESULT G B0  (BI$)1 GBC$(BI$,(BI$)B,1) G BC$"1" * BC$"0" 4:("FF08"),132:4082 G BC$"1" BRBRB(B) G B HC$((BR),2) H H# *H$ --- CONVERT HEX 4H)4940 BH.VL(HX$) TH8C$((VL),2) ZH= `HB HL: 4: ("FF08"),131 :  SET ILLEGAL HEX HV4082:  JUMP INTO ERROR H*ANDLER H~: H GENERATE VARNAME FROM INDEX H:  I ID26 VN$(65ID) :  IN2(ID,26):N1(ID26)1 9IVN$(65N1)(65N2) xI VN$"DO"  VN$"D1": AVOID ANY BASIC TERMS AS VAR NAMES I VN$"GO"  VN$"G1" I VN$"TO"  VN$"T1"* I VN$"DS"  VN$"D2" I VN$"DT"  VN$"D3" I VN$"EL"  VN$"E1" J VN$"ER"  VN$"E2" .J VN$"FN"  VN$"F1" HJ VN$"IF"  VN$"I1" NJ TJ ZJT: `JU: fJV: yJX GET FILENAME Jb: Jl 4:BA("FF00") Jv (BA0)("S")*  (BA1)("K")  J  VB(("FF07"))16 K  F$"":ABA16:(A)0:F$F$((A)):AA1:: 'K   (("FF07"))1  EK   "FILENAME? "F$:""; LK `K "FILENAME";A$ K A$""  "NO FILENAME SET": K BA,("S"): BA1,("K") KR*116: BA8R1,((A$,R,1)):R KF$A$ K K --- SAVE FILENAME LAD("FF30"): 4 LR016:ADR,0:R HL OF$"" TF$OF$ : TF$"ELEVEN.OUT" qLR1(TF$):ADR1,((TF$,R,1)):R wL  L* CHAIN EDITOR L4 A$: A$""   ZZ: *ZZ1  ADFSDF M9"EDMA 0,$D400,$8000000,$2001:NEW RESTORE":"RUN";: LOAD '11.EDIT' FROM CACHE M> 128 LMH 208,2     :  NO OF CHARS IN KEYBOARD BUFFER gMR 688,13,13 :  RETURN mM\ M# --- COPY ATTIC RAM TO LINE BUFFER M#CB$803000*	0 : CCB M#NL(C)256(C1):CC2 M#CL0 M#  CLNL N#  L(C):LI$(CL)(BL$,L):P
(LI$(CL)) 4N#  B$10000(P1)256(P2):CC1 VN#   L0  ! 0,L,C,B : CCL dN#  CLCL1 jN# pN# N# --- DEFINE IN S$ EXISTS? N$SH  1 N$K*
0EC(4) N$ VT$(4,K)  S$  SH0 N"$K N,$ NT$ --- READ IN STRUCT DETAILS !OY$CL$(CL$,9): 9400: GET NEXT TOKEN IN S$ VO[$ S$""   "ERROR: NO STRUCT NAME FOUND": 1: gO^$SN$(SS)  S$ yOh$SV$(SS)  CL$ Om$SSSS1 Or$ O$ --- READ NEXT *TOKEN FROM CL$ INTO S$ O$S$CL$: 2000: 2050:CL$S$ O$SF$" ":SF0 P$ (S$,1)Q$  SF$Q$", ":SF2 P$A(CL$,SF$) `P$ A0  S$(CL$,1,(CL$,SF$)SF1):CL$(CL$,(CL$,SF$)SF1) zP$ A0  S$CL$:CL$"" P$ P% --- READ NEXT LINE P&%* 0 P0%L(CA):CL$(BL$,L):P
(CL$):CACA1 P:%B$10000(P1)256(P2) QD% L0  ! 0,L,CA,B : CACAL QN%RLRL1 ;QX%TR$WH$:S$CL$:2000:CL$S$ SQb%Q  0 :  QUOTES ON vQl%CT  0 :  CUT CHARS FROM TAIL Qv% 1 Q{% Q% --- CHECK FOR CR*EATION OF STRUCT OBJECT Q%CO$S$:CL$S$:ZZ1: PRESERVE ORIGINAL STRING R% 9400: READ NEXT TOKEN FROM CL$ INTO S$ $R% ZI0  SS ER%   S$SN$(ZI)  ZZZI:ZISS NR% ZI mR% ZZ1  CL$CO$:S$CO$: R% 9400:SK$S$: GET STRUCT OBJECT NAME *R%BL(SK$,"(") R% *** FOUND IT, SO MAKE DIM'S FOR EACH MEMBER VAR S%S$SV$(ZZ): 2100: PARSE ARGS INTO AL$(), AC  S%ZZ1:SZ0 0S% ZI0  AC IS%   AL$(ZI)""   jS%     "AL$(";ZI;")=";AL$(ZI) S%     BL0  S$SK$""AL$(ZI): "STRUCT*: ";S$:P$S$: 1030 T%     BL0  S$(SK$,BL1)""AL$(ZI)(SK$,BL): "STRUCT: ";S$:P$S$: 1030:SK$(SZ)P$:SZSZ1 HT%     IF NL$<>"" THEN DL=0:CL$="^^"+NL$:ELSE DL=1 QT%   ZT% ZI T%S$NL$: 9800:NL$"": SAFE ADD L$+S$ TO CURRENT LI$(LN*) T% 9400: S$"="  CL$"": T% 9400:SZ0:SR0:SM0: READ NEXT TOKEN FROM CL$ INTO S$ U%  S$"" =U%     S$"_"  SLSL1: 9500: 9717: READ NEXT LINE sU%   SM0  S$"["   "ERROR: EXPECTED [": 1: U%   SM0  S$"["  SM1: 9*717 U%   SM1  S$"["  S$"]"   "ERROR: EXPECTED [ OR ]": 1: U%   SM2   0V%     (S$,1)"]"  SRSR1:SZ0:SM1:S$"": 9714: NEXT ROW V% IF LEFT$(S$,1)=Q$ THEN SS$=S$:TR$="":DO WHILE RIGHT$(SS$,2)<>(Q$+","):GOSUB9400:SS$=SS$+S$:*PRINTSS$:LOOP:S$=SS$:TR$=WH$:STOP V%     (S$,1)","  S$(S$,(S$)1) 3W%    S$SK$(SZ)"("(SR)")="S$: 3007: 9800:S$"":SZSZ1: SAFE ADD TO LI$(LN) <W%   ^W%   SM1  S$"["  SM2:SZ0 {W%   SM1  S$"]"  SM0 W%   9400: READ *NEXT TOKEN FROM CL$ INTO S$ W% W&S$"":CL$"":NL$""::ZZ$"Z" W>& XH& --- SAFE ADD L$+S$ TO CURRENT ORNEXT LI$(LN) 2XR& (L$)(S$)((LN))159 NL1 eXW& ZZ$""  S$"":ZZ$"":: FORCE S$ TO EMPTY tX\& NL1  Xf&  LI$(LN)L$:L$S$ X*p&  LN%(LN)SL: Xz&  LNLN1 : NL0 X& :   -- ADD TO L$ X&   L$""  CN0  (L$,1)":" L$L$":" Y&  L$L$S$ Y& +Y& VB   "<<"LN;S$ 1Y& EY' --- DUMP VARS VY' TY  0  3 nY$'   ID  0  EC(TY) Y.'     5000:  GET VN$ (OP TIMISED VAR NAME) Y8'    1, (SI)" REM "  VT$(TY,ID)  " = :"VN$PF$(TY)":" Y='    SISI1 YB'   ID ZL' TY ZV'   $ Y& +Y& VB   "<<"LN;S$ 1Y& EY' --- DUMP VARS VY' TY  0  3 nY$'   ID  0  EC(TY) Y.'     5000:  GET VN$ (OP*  
  POST-COMPILE 4  "COMPILING SUCCESSFUL." J   4:AD("FF30") t    (AD)0:F$F$((AD)):ADAD1:  (  F$""  (F$)16   "??FATAL ERROR DETERMINING OUTFILE":  - ("11TEMP"):(F$)  2  ("11TOKENIZED")  (F$) 	!< "RUN"(34) =F$:""; !A   !B  128 1!D  208,1: 688,13 7!F    4:AD("FF30") t    (AD)0:F$F$((AD)):ADAD1:  (  F$""  (F$)16   "??FATAL ERROR DETERMINING OUTFILE":  - ("11TEMP"):(F$)  2  ("11TOKENIZED")  (F$) 	!< "RUN"(34)*  d DF$"11.DEFAULTS" S n SB$" DEVELOPMENT ENVIRONMENT VERSION 0.1 ALPHA" ~ x  820:  GET SETTINGS FROM MAILBOX RAM    $   ""   DL$(27)"Q":  DELETE LINE   BU$(0)"DISABLED":BU$(1)"ENABLED "   SM$(0)"80X25":SM$(1)"80X50"* +!  1220:  READ DEFAULTS, SET SCREEN MODE 1!  I! 9 FG: ; BG: < BO j! "   PREFERENCES  " ! A 0,3: "  1  WORKING FILE NAME : ";DL$;CF$; !  CF$""   "<NOT DEFINED>"; ! : "  2  AUTOMATIC BACKUP  : ";BU$(BU) ! A 0,5 *"" "  3  BORDER COLOUR     : "; D"9 BO:  "          ":9 FG j" "  4  BACKGROUND COLOUR : "; ""9 BG:  "          ":9 FG ", "  5  FOREGROUND COLOUR : "; "69 FG:  "          ":9 FG "@ "  6  HIGHLIGHT COLOUR  : ";* #J9 HL:  "          ":9 FG B#T "  7  STATUS BAR COLOUR : "; d#^9 SB:  "          ":9 FG j#h #r "  9  SCREEN MODE       : ";SM$(SM) #|A 0,16:9 HL #"     AVE AS DEFAULTS" #"     OAD DEFAULTS FROM DISC" $" *    ESET DEFAULTS" A$"   XIT PREFERENCES & LAUNCH EDITOR"; S$A 0,24:9 SB $ SB$""  SB$" DEVELOPMENT ENVIRONMENT VERSION 0.5" $ 1130 $ T$ : SB$"" $ T$""  BOBO1: BO15  BO0 $ T$""  BGBG1: BG1*5  BG0 $% T$""  FGFG1: FG15  FG0 J% T$""  HLHL1: HL15  HL0 p% T$""  SBSB1: SB15  SB0 % T$""  BU(BU1) % T$""   %  SM  (SM1) %&   1220:  SET SCREENMODE %0 %: T$"R"  RS1:820  &D* T$"S"   &&N  SB$"SAVING DEFAULTS...": 1130 4&X   (DF$) d&b   (DF$),B(4),P(("FF00"))  P(("FF80")) &l   3,80,160,0,3968,0 :   --- CLEAR STATUS BAR &v   DS0  SB$"DEFAULTS SAVED.":  SB$"DISC ERROR "DS$ &   1130 & &* T$"L"   &'  SB$"LOADING DEFAULTS...": 1130 G'   (DF$),B(4),P(("FF00")) S'   820 '   DS0  SB$"DEFAULTS LOADED.":  SB$"DISC ERROR "DS$ '   1130: 1220 ' ' 990 '  T$"	" ' 0( "EDMA 0,$D400,$8000000* ,$2001:NEW RESTORE":"RUN";: LOAD '11.EDIT' FROM ATTIC CACHE <(  128 p(  208,2     :  NO OF CHARS IN KEYBOARD BUFFER (  688,13,13 :  RETURN (   (* (4 --- LOAD SETTINGS TO MAILBOX RAM (>T$(($4FF00))(($4FF01)) (HRT0 )R*! T$"SK" RS1   9)\  BG0:FG5:BO6:HL2:SB14 :  STANDARD COLOURS b)f  CF$"" : BU1 : RT1 : RS0 : SM0 i)p )z RT1   :  RETURN IF JUST INITIALIZED )TF$"":I$4FF10:  (I)0 )TF$TF$((I)):II1: )BO($4FF02):BG($4*"FF03):FG($4FF04) *HL($4FF05):SB($4FF06) 9*BU  ((($4FF07)4)0) V*SM  ((($4FF07)8)0) i*CF$TF$: 128 o* u*: * --- SAVE SETTINGS FROM MAILBOX RAM * 4 * CF$""   1040 * I1  (CF$): ("FF10")I1,((CF$,I*#,1)): I + ("FF10")I1,0 2+ ("FF07"),0 : FL0 :  DELETE FLAGS a+FL  FL  1              :  AUTOLOAD FLAG +$ BU1  FLFL  4   :  AUTOBACKUP FLAG +. SM1  FLFL  8   :  80X50 FLAG +8 $4FF07,FL +B $4FF00,("S"): $4FF01,("K*$") ,L $4FF02,BO :  $4FF03,BG :  $4FF04,FG 4,V $4FF05,HL :  $4FF06,SB @,`128: U,j --- STATUS BAR ,t 	(1)25  CB2048(2480)   : FB$FF80800  (2480) ,~ 	(1)50  CB$40800(4980) : FB$FF80800  (4980) ,! 3,80,160,CB   :    --- CLEAR STATUS BAR )-! 3,80,SB,FB    :   SET STATUS BAR COLOR :-A 0,	(1)1 M-9 SB :  SB$; S- \- T$ u- --- SET SCREENMODE - SM   (27)"5":  (27)"8" - -   (4980) : FB$FF80800  (4980) ,! 3,80,160,CB   :   *&  d  ================= 1 n  ELEVEN BOOTLOADER I x  ================= i }  2000: CHECK FOR AUTOLOAD o  :    	(2)80  (27)"X";   "": 0,65    4:CF$((("FF00")))((("FF01")))   CB  CF$"SK" :  CB=1 IF COLD BOOTING ! L*'P0 :  LOAD PREFS FLAG <! MV920371  :  MINIMUM ROM VERSION b!  CHECK CORRECT ROM VERSION FIRST !  2: I0  5:V$V$((("17")I)): ! V(V$) !  VMV 940:  VERSION MISMATCH ! BD$"24-JUN-2022" ! VN$"0.5.0" !DF$"11.DEFAULTS" + "X$(27)(27) " 128 ;""900:  CHECK FOR 'P' KEYPRESS z", 248,(248)26    :  DISABLE SCREEN EDITOR LINE LINKING "6< 6: ; 6:9 1:""(142) "@W6 "J S0  W "TA79(W2)(S2)9,S "^"        "; "hL0(12S2):" ";:L+ #r S #| 1020 #9 1 ?#"ELEVEN DEVELOPMENT ENVIRONMENT" ^#"VERSION ";VN$;3);BD$ #"WRITTEN BY STEPHAN KLEINERT" #"COPYRIGHT (C) 2021-2022 7 TURTLES SOFTWARE" # 1450:  CHECK ATTIC RAM $ CB   "** COLD BOOT *+*": 1610:  CHECK ATTIC RAM STATE #$ TI W$ "PRESS 'P' DURING BOOT TO SET PREFERENCES" $ "PRESS 'C' DURING BOOT TO FORCE COLD BOOT" $ $ "CLEANING UP" $ "11TEMP": "11TOKENIZED" $900 $ "LOADING DEFAULTS" : 640 !% $4F+F70,0,0 :  FORCE LOAD FROM DISC ON STARTUP V%& $4FF08,0   :  CLEAR EXTERNAL ERROR ON STARTUP _%0900 %: LP0 TBTI::900:  TITB.1 %D 0 %N:T$:T$"" %X 1110:  LOAD MODULES )&b :16,"EDMA 0,$D400,$8000000,$2001:NEW RESTORE+"(13)"RUN"(13): LOAD '11.EDIT' FROM ATTIC CACHE G&l128: $D61A,($D61A)16 &q SM   (27)"5";: SWITCH TO 80X50 IF SETTINGS SAY SO &v LP0   1250:   1390:  LOAD EDITOR OR PREFS & --- LOAD SETTINGS TO MAILBOX RAM 'T$(($4FF0+0))(($4FF01)) 4' T$"SK"   825 :  SETTINGS ALREADY LOADED ='890 X' (DF$),B(4),P($FF00) ^' ' DS0  "COULD NOT LOAD DEFAULTS" ' 4:T$((("FF00")))((("FF01"))) 'RT0 ' T$"SK"  (BG0:FG5:BO6:HL2:SB14 : + STANDARD COLOURS (CF$"" : BU1 : RT1 ?( $4FF00,("S"): $4FF01,("K") c( $4FF00,("S"): $4FF01,("K") ( $4FF02,BO :  $4FF03,BG :  $4FF04,FG ( $4FF05,HL :  $4FF06,SB (  $4FF10,0  :  FILENAME (* (4 RT1  )9 2200: I+NJECT AUTOLOAD INTO $4FF10 ()>TF$"":I$4FF10:  (I)0 D)HTF$TF$((I)):II1: o)RBO($4FF02):BG($4FF03):FG($4FF04) )\HL($4FF05):SB($4FF06) )aSM  ($4FF07)25 )fCF$TF$: 128 )p )zւ )T0400:T$ )T$"P"LP1 )+T$"C"CB1 *T: * --- VERSION MISMATCH J* "ROM VERSION TOO OLD"(27)(27) }* "ROM VERSION >= ";: "######";MV;: " "; * "REQUIRED, BUT VERSION ";V$;" INSTALLED!" * "SORRY FOR THE INCONVENIENCE. PLEASE UPDATE "; ++	 "YOUR MEGA65 AND TRY AGAIN." +: + (+ --- PALETTE 6+ R0  7 R+4  16R,15,15(R2),R Z+ R t+$ 1:BA$FF80000:A80 +. R0  7 +8! 3,80,R64,BA(RA) +B +L +V --- LOAD MODULES +` CB   +j"INSTALLING EDITOR...+
" ,t "11.EDIT",P($8000000) ",~"INSTALLING PARSER..." @, "11.PARSE",P($8010000) [,"INSTALLING PREFS..." |, "11.SETTINGS",P($8020000) ,"INSTALLING TOKENIZER..." , "11.TOKENIZE",P($8022000) ,"INSTALLING POST COMPILER..." ,+ "11.POST",P($8024000) - 	- %- --- CHAIN LOAD EDITOR +-: -"EDMA 0,$D400,$8000000,$2001:NEW RESTORE":"RUN";: LOAD '11.EDIT' FROM ATTIC CACHE -  128 -
: - HACK: LOAD NEXT MODULE IN DIRECT MODE . THIS WILL GO AWAY ON+CE WE HAVE THE "LOAD AT ADDRESS" COMMAND O.( (UNLESS FOLKS START WHINING ABOUT COMPATIBLITY WITH THE FIVE .2 ALREADY EXISTING BASIC10 PROGRAMS AGAIN...) .<: .F 128 .P 208,2     :  NO OF CHARS IN KEYBOARD BUFFER .Z 688,13,13 :  RETURN +.d /n --- CHAIN LOAD PREFS f/x"EDMA 0,$1FFF,$8020000,$2001:NEW RESTORE":"RUN";: LOAD '11.SETTINGS' FROM ATTIC CACHE q/ 128 / 208,2      :  NO OF CHARS IN KEYBOARD BUFFER / 688,13,13  :  RETURN / / --- ATTIC RAM CHEC+K /HA&1:TA$8000000 0 T0  32 0RATA(T$1000) &0O(RA) 40 RA,T15 N0 (RA)T15  HA&0 Y0 RA,O a0 T n0 HA&  |0< 0:; 0 0 "ERROR: 11 NEEDS AT LEAST " 0" "128KB OF ATTIC RAM INSTALLED. 0, "SORRY FOR THE IN+CONVENIENCE." 06: 0@: +1J --- QUICK AND DIRTY ATTIC RAM SANITY CHECK N1T "CHECKING ATTIC RAM SANITY"; f1^A$30000:B$8000000 z1h! 0,$10000,A,B 1r C0  $FFFE  7 1| (AC)(BC)   1710:  FAIL 1 (C,$400)0  "."; 1 2+: "ATTIC RAM SEEMS STABLE. PHEW." 2 <2"ATTIC RAM SANITY TEST FAILURE"(27)"O" B2 2"ELEVEN'S INITIAL TEST HAS DETERMINED THAT ATTIC RAM SEEMS TO BE ON THE FRITZ 2"(AGAIN). PLEASE INSTALL THE MOST RECENT STABLE MEGA65 CORE ON +YOUR MACHINE.     IF THE PROBLEM "; .3"PERSISTS, PLEASE CONTACT THE MEGA65 TEAM." E3"ERROR DETAIL:" z3"EXPECTED $";((AC));" AT ADDRESS $";(BC); 3 " BUT GOT $";((BC)) 3"SORRY FOR THE INCONVENIENCE" 3: 4 SUB --- CHEC+K FOR AUTOLOAD, RETURN FILENAME IN AL$ --- 4I0:AL$"":AA0 !4 128 \4 (2048I)64(("AUTOLOAD",I1,1))  AA0:AL$"": s4II1: I8  2020 4A(2048I): A34  I20  II1: 2040 4 A34  AA0: 4II1: I40  AL$"":AA0:+ 4A(2048I): A34  2100 5  A1  A26  AA64 )5*AL$AL$(A): 2060 G54 (AL$)16  AL$"":AA0 R5>AA1: |5 SUB --- INJECT AUTOLOAD INTO $4FF10 5 AA0   5 $4FF07, ($4FF07)  1 : I  0 5 K1  (AL$) 5   $4FF10I, = ((AL$,K,1)) 5  II1 5 K 6 $4FF10I,0 6   )5*AL$AL$(A): 2060 G54 (AL$)16  AL$"":AA0 R5>AA1: |5 SUB --- INJECT AUTOLOAD INTO $4FF10 5 AA0   5 $4FF07, ($4FF07)  1 : I  0 5 K1  (AL$) 5   $4FF10I,+D 78 IFC$="$"THENBEGIN 79 AD=2:BEND 80 IFC$="&"THENBEGIN 81 AD=3:BEND 82 L$(AD,F(AD))=AA$ 83 IFAB$<>""THENBEGIN 84 AE=F(AD):GOSUB 213 85 IFW=.THENBEGIN 86 G$=G$+"DIM "+AH$+C$+"("+AB$+"):":BEND 87 BEND 88 IFAC$<>""THENBEGIN 89 AE=F(AD):GOSUB 2+13 90 IFW=.THENBEGIN 91 G$=G$+AH$+C$+"="+AC$+":":BEND 92 BEND 93 IFW=1THENBEGIN 94 M$(F(AD))=AC$:BEND 95 IFPTHENBEGIN 96 PRINTAA$;": ";F(AD):BEND 97 F(AD)=F(AD)+1:RETURN 98 T$=MID$(F$,8):Y$=",;":GOSUB 112 99 IFY<>.THENBEGIN 100 PRINT"?INVALID+ PARAMETERS IN LINE ";J:END:BEND 101 T$=O$(.):AD$=A$:GOSUB 110:GOSUB 111 102 IFPTHENBEGIN 103 PRINT"SETTING OUTPUT FILE TO "+T$+"":BEND 104 AI$=T$:O=1:RETURN 105 IFPTHENBEGIN 106 PRINT"LABEL ";F$;" AT LINE ";Q:BEND 107 O=1:N$(H)=MID$(F$,2):G(H)=+Q+1:H=H+1:RETURN 108 BANK4:FORV=1TOLEN(Z$):POKE327472+V-1,ASC(MID$(Z$,V,1)):NEXTV:POKE327472+V-1,.:POKE65289,MOD(J,256):POKE65290,J/256:POKE65287,PEEK(65287)OR2:DCLOSE 109 GOTO 240 110 DOWHILEINSTR(AD$,(LEFT$(T$,1))):T$=MID$(T$,2):LOOP:RETURN 111 DOW+HILEINSTR(AD$,RIGHT$(T$,1)):T$=LEFT$(T$,LEN(T$)-1):LOOP:RETURN 112 Y=.:AJ$=T$:AF=LEN(T$):AG=. 113 IFAF=.THENBEGIN 114 Y=-1:RETURN 115 BEND 116 FORAH=.TO31:O$(AH)="":NEXTAH:FORAH=1TOAF:AK$=MID$(AJ$,AH,1):IFAK$="("ANDX=1THENAG=1 117 IFAK$=")"ANDX=1TH+ENAG=. 118 IFINSTR(Y$,AK$)<>.ANDAG=.THENBEGIN 119 T$=O$(Y):AD$=" ":GOSUB 110:GOSUB 111:O$(Y)=T$:Y=Y+1 120 BEND:ELSEBEGIN:O$(Y)=O$(Y)+AK$:BEND 121 NEXTAH:T$=O$(Y):AD$=" ":GOSUB 110:GOSUB 111:O$(Y)=T$:T$=AJ$:RETURN 122 IFLEFT$(T$,2)="^^"THENBEGIN 123+ T$=RIGHT$(T$,LEN(T$)-2):RETURN 124 BEND 125 AI=.:AL$="":W$="":I=.:AJ=.:AM$="?<>=+-#*/^,.:;() ":Y$=AM$:FORAK=1TOLEN(T$):AK$=MID$(T$,AK,1) 126 IFAK$=":"ANDAI=.THENBEGIN 127 I=.:AL=.:BEND 128 IFIANDAK$="("THENBEGIN 129 AL=.:Y$=AM$:BEND 130 IFIANDAK$+ =")"THENBEGIN 131 AL=-1:Y$=AM$+"DPUB":BEND 132 IFAK$=A$THENBEGIN 133 AI=ABS(AI-1) 134 IFAI=1THENBEGIN 135 GOSUB 147:AL$=AL$+W$:W$="" 136 BEND:ELSEBEGIN:AL$=AL$+AK$:AK$="":BEND 137 BEND 138 IFAI=1THENBEGIN 139 AL$=AL$+AK$ 140 GOTO 145:BEND 141 +NPUT #2, FILTMIN(ROW)    INPUT #2, FILTSWEEP(ROW)  NEXT ROW  ' LOAD SEQUENCE  ' -------------  SEQCNT = 0  INPUT #2, SEQCNT  ROW = 0  DO WHILE ROW < SEQCNT    INPUT #2, SEQCHUNK(ROW)    INPUT #2, SEQEXTRA(ROW)    ROW = ROW + 1  LOOP  +DCLOSE #2  CHUNKIDX = 0  RETURN'-------.SETENV'-------  ENVELOPE ROW, ENVSATTACK(ROW), ENVSDECAY(ROW), ENVSSUSTAIN(ROW), ENVSRELEASE(ROW), ENVSWAVEFORM(ROW), ENVSPW(ROW)  RETURN'--------------------.PARSECURRENTSEQPTR'-----------+---------  RET% = 0  IF RPLAY(1)<>0 THEN RET%=1:RETURN  K = SEQCHUNK(PLYPTR)    IF K >= 0 THEN BEGIN    CHUNKIDX = K    IF CHUNKRPT <= 0 THEN CHUNKRPT = SEQEXTRA(PLYPTR)    GOSUB PLAYCHUNKIDX    'SLEEP .1    RET% = 1  BEND  IF K = +! THEN BEGIN    K = SEQEXTRA(PLYPTR)    TEMPO (K)    TMPO% = K  BEND  IF K = į THEN BEGIN    K = SEQEXTRA(PLYPTR)    FSROW = K    FSEL = K    GOSUB APPLYSELECTEDFILTER  BEND  IF K = įϯ1 THEN ECHOM = 1 : ECHODELAY = +"IFINSTR(Y$,AK$)<>.THENBEGIN 142 GOSUB 147:AL$=AL$+W$:W$="":IFAK$=" "THENAK$="" 143 AL$=AL$+AK$ 144 BEND:ELSEBEGIN:W$=W$+AK$:BEND 145 NEXT:GOSUB 147:T$=AL$+W$:RETURN 146 END 147 IFW$=""ORW$="_"THENRETURN 148 IFVAL(W$)<>.THENBEGIN 149 AJ=.:RETURN +#0  IF K = įϯ2 THEN ECHOM = 2 : ECHODELAY = 0  IF K = įϯ  THEN ECHOB = 1 : ECHODELAY = 0  IF K = įϯ THEN ECHOM = 0 : ECHOB = 0  IF K = įϯ THEN ECHOSZ = SEQEXTRA(PLYPTR)  IF K = į THEN ECHODELAY = 1 +$150 BEND 151 IFW$="0"THENBEGIN 152 W$=".":RETURN 153 BEND 154 IFAJANDAC=.THENBEGIN 155 GOSUB 196:AJ=.:RETURN 156 BEND 157 IFW$="GOTO"THENA=1 158 IFW$="GOTO"ORW$="GOSUB"ORW$="TRAP"THENBEGIN 159 AJ=1:BEND 160 AM=. 161 IFLEFT$(W$,1)="$"THENBEGIN+%: ECHOM = 0 : ECHOB = 0  IF K = į THEN V = SEQEXTRA(PLYPTR) : VOL V, V  IF CHUNKRPT > 0 THEN CHUNKRPT = CHUNKRPT - 1  IF CHUNKRPT <= 0 THEN PLYPTR = PLYPTR + 1  IF K = į THEN PLYPTR = 0  IF PLYPTR >= SEQCNT THEN PLYFLAG = 0 +& 162 AE$=MID$(W$,2):GOSUB 210:RETURN 163 BEND 164 IFLEFT$(W$,1)="%"THENBEGIN 165 AF$=MID$(W$,2):GOSUB 203:RETURN 166 BEND 167 AA$=" "+W$+" ":FORAN=.TO6 168 IFINSTR(I$(AN),AA$)<>.THENBEGIN 169 AN$=W$:GOSUB 195:RETURN 170 BEND 171 NEXT:C$=RIGHT$(W+': PLYPTR = -1  RETURN'--------------.PLAYCHUNKIDX'--------------  V1$ = V$(0,CHUNKIDX)  V2$ = V$(1,CHUNKIDX)  V3$ = V$(2,CHUNKIDX)  V4$ = V$(3,CHUNKIDX)  V5$ = V$(4,CHUNKIDX)  V6$ = V$(5,CHUNKIDX)  IF ECHODELAY = 1 THEN BEGIN    P,'$,1):AD=0:IFC$="%"THENAD=1 172 IFC$="$"THENAD=2 173 IFC$="&"THENAD=3 174 FORAE=.TOF(AD) 175 IFW$=L$(AD,AE)THENBEGIN 176 GOSUB 213:W$=AH$+E$(AD):AE=F(AD):AM=1:BEND 177 NEXTAE:IFAM=1THENRETURN 178 FORAE=.TOF(4) 179 IFW$=L$(4,AE)THENBEGIN 180 W$=M$, LAY V1$    SLEEP (ECHOSZ)    PLAY ,V2$    SLEEP (ECHOSZ)    PLAY ,,V3$    SLEEP (ECHOSZ)    PLAY ,,,V4$    SLEEP (ECHOSZ)    PLAY ,,,,V5$    SLEEP (ECHOSZ)    PLAY ,,,,,V6$    SLEEP (ECHOSZ)    RETURN  BEND  IF ECHOM = 0 AND ECHOB ,= 0 THEN BEGIN    PLAY V1$, V2$, V3$, V4$, V5$, V6$    RETURN  BEND  IF ECHOM = 1 AND ECHOB = 0 THEN BEGIN    PLAY V1$, V2$, V3$,    , V5$, V6$    SLEEP (ECHOSZ)    PLAY    ,    ,    , V1$  BEND  IF ECHOM = 1 AND ECHOB = 1 THEN BEGIN    ,ORW$="U8"ORW$="W")THENBEGIN 191 RETURN 192 BEND 193 Z$="?UNRESOLVED IDENTIFIER: '"+W$+"' IN LINE "+STR$(J):SLEEP1 194 GOTO 108:RETURN 195 RETURN 196 W$=H$+W$+H$:RETURN 197 AM=.:FORAE=.TOH-1 198 IFW$=N$(AE)THENBEGIN 199 W$=STR$(G(AE)):AE=H:AM=1:B,END 200 NEXTAE:IFAMTHENRETURN 201 Z$="?UNRESOLVED LABEL: '"+W$+"' IN LINE"+STR$(A%(S-1)):SLEEP1 202 GOTO 108:RETURN 203 AP=.:FORAQ=.TOLEN(AF$)-1:AO$=MID$(AF$,LEN(AF$)-AQ,1) 204 IFAO$<>"1"ANDAO$<>"0"THENBEGIN 205 BANK4:POKE65288,132 206 GOTO 193:BE,PLAY V1$, V2$, V3$,    , V5$    SLEEP (ECHOSZ)    PLAY    ,    ,    , V1$,    , V3$  BEND  IF ECHOM = 2 AND ECHOB = 0 THEN BEGIN    PLAY V1$,    , V3$,    ,    , V6$    SLEEP (ECHOSZ)    PLAY    ,    ,    , V1$    SLEEP (ECHOSZ)    PLAY   , , V1$    SLEEP (ECHOSZ)    PLAY    ,    ,    ,    , V1$  BEND  IF ECHOM = 2 AND ECHOB = 1 THEN BEGIN    PLAY V1$,    , V3$    SLEEP (ECHOSZ)    PLAY    ,    ,    , V1$    SLEEP (ECHOSZ)    PLAY    , V1$,    ,    ,    , V3$    SLEEP (ECHO,ND 207 IFAO$="1"THENAP=AP+E(AQ) 208 NEXTAQ:W$=MID$(STR$(AP),2):RETURN 209 STOP 210 TRAP 211:AR=DEC(AE$):W$=MID$(STR$(AR),2):TRAP:RETURN 211 TRAP:BANK4:POKE65288,131 212 GOTO 193 213 IFAE<26THENBEGIN 214 AH$=CHR$(65+AE):RETURN 215 BEND 216 AT=MO,D(AE,26):AS=INT(AE/26)-1:AH$=CHR$(65+AS)+CHR$(65+AT):IFAH$="DO"THENAH$="D1" 217 IFAH$="GO"THENAH$="G1" 218 IFAH$="TO"THENAH$="T1" 219 IFAH$="DS"THENAH$="D2" 220 IFAH$="DT"THENAH$="D3" 221 IFAH$="EL"THENAH$="E1" 222 IFAH$="ER"THENAH$="E2" 223 IFAH$,	="FN"THENAH$="F1" 224 IFAH$="IF"THENAH$="I1" 225 RETURN 226 STOP 227 BANK4:AU=65280 228 IFPEEK(AU+.)=ASC("S")ANDPEEK(AU+1)=ASC("K")THENBEGIN 229 P=PEEK(65287)AND8:X$="":AV=AU+16:DOWHILEPEEK(AV)<>.:X$=X$+CHR$(PEEK(AV)):AV=AV+1:LOOP:IFPEEK(65287)AND1,
SZ)    PLAY    ,    ,    ,    , V1$  BEND  RETURN'---------------------.APPLYSELECTEDFILTER'---------------------  IF FSEL = -1 THEN RETURN  CURRFREQ = FILTFREQ(FSEL)  CURRDIR = ү  IF   FILTDIR(FSEL) = ү _    OR FILTDIR,THENRETURN 230 PRINT"FILENAME? "+X$:PRINT"";:BEND 231 INPUT"FILENAME";AL$ 232 IFAL$=""THENBEGIN 233 PRINT"NO FILENAME SET":END:BEND 234 POKEAU,ASC("S"):POKEAU+1,ASC("K"):FORV=1TO16:POKEAU+8+V-1,ASC(MID$(AL$,V,1)):NEXTV:X$=AL$:RETURN 235 AW=65328:B,(FSEL) = ү THEN BEGIN    CURRFREQ = FILTMIN(FSEL)    CURRDIR = ү  BEND  IF FILTDIR(FSEL) = ү THEN BEGIN    CURRDIR = ү  BEND  FILTER 1, FILTFREQ(FSEL), FILTLP(FSEL), _          FILTBP(FSEL), FILTHP(FSEL), FILTR,ANK4:FORV=.TO16:POKEAW+V,.:NEXTV 236 IFAI$<>""THENBEGIN 237 AP$=AI$ 238 BEND:ELSEBEGIN:AP$="ELEVEN.OUT":BEND 239 FORV=1TOLEN(AP$):POKEAW+V-1,ASC(MID$(AP$,V,1)):NEXTV:RETURN 240 GETAL$ 241 IFAL$<>""THENBEGIN 242 INPUTAX:IFAX=1THENSTOP 243 BEND 24 yES(FSEL)  FILTER 2, FILTFREQ(FSEL), FILTLP(FSEL), _          FILTBP(FSEL), FILTHP(FSEL), FILTRES(FSEL)  RETURN                                                                                                                                      ,4 PRINT"EDMA 0,$D400,$8000000,$2001:NEW RESTORE":PRINT"RUN";:BANK128:POKE208,2:POKE688,13,13:END 245 R=1:FORAY=.TOF(4) 246 IFL$(4,AY)=T$THENBEGIN 247 R=.:BEND 248 NEXTAY:RETURN 249 F$=MID$(F$,9):GOSUB 254 250 IFT$=""THENBEGIN 251 PRINT"ERR,OR: NO STRUCT NAME FOUND":SLEEP1:RETURN 252 BEND 253 P$(I)=T$:R$(I)=F$:I=I+1:RETURN 254 T$=F$:GOSUB 110:GOSUB 111:F$=T$:AQ$=" ":AZ=. 255 IFLEFT$(T$,1)=A$THENBEGIN 256 AQ$=A$+", ":AZ=2:BEND 257 AV=INSTR(F$,AQ$) 258 IFAV<>.THENBEGIN 259 T$=MID$(F$,,1,INSTR(F$,AQ$)+AZ-1):F$=MID$(F$,INSTR(F$,AQ$)+AZ+1):BEND 260 IFAV=.THENBEGIN 261 T$=F$:F$="":BEND 262 RETURN 263 BANK.:BA=PEEK(M):F$=LEFT$(D$,BA):BB=POINTER(F$):BC=65536+WPEEK(BB+1):M=M+1 264 IFBA<>.THENBEGIN 265 EDMA.,BA,M,BC:M=M+BA:BEND 266 K=K,+1:AD$=S$:T$=F$:GOSUB 110:F$=T$:AI=.:BD=.:BANK1:RETURN 267 BD=INSTR(F$,"'") 268 IFBD<>.THENBEGIN 269 IFINSTR(F$,A$)<>.THENBEGIN 270 BD=.:BANK.:BE=PEEK(BB)-1:BF=WPEEK(BB+1):BANK1:FORV=.TOBE:BG=PEEK(BF+V) 271 IFBG=BTHENBEGIN 272 AI=ABS(AI-1) 273 BEN,D:ELSEBEGIN 274 IFBG=CANDAI=.THENBEGIN 275 BD=V+1:V=999:BEND 276 BEND 277 NEXT:BEND 278 IFBDTHENBEGIN 279 F$=LEFT$(F$,BD-1):BEND 280 BEND 281 RETURN 282 IFINSTR(F$,"IFDEF")=2THENBEGIN 283 T$=MID$(F$,8):GOSUB 245:O=1:BEND 284 IFINSTR(F$,"ENDIF",)=2THENBEGIN 285 R=.:O=1:BEND 286 IFINSTR(F$,"DEFINE")=2THENBEGIN 287 W=1:GOSUB 49:W=.:BEND 288 IFINSTR(F$,"DECLARE")=2THENBEGIN 289 W=.:GOSUB 49:BEND 290 IFINSTR(F$,"OUTPUT")=2THENBEGIN 291 GOSUB 98:BEND 292 IFINSTR(F$,"STRUCT")=2THENBEGIN 293 ,GOSUB 249:O=1:BEND 294 RETURN 295 AR$=T$:F$=T$:AX=-1:GOSUB 254:FORBH=.TOI 296 IFT$=P$(BH)THENBEGIN 297 AX=BH:BH=I:BEND 298 NEXTBH 299 IFAX=-1THENBEGIN 300 F$=AR$:T$=AR$:RETURN 301 BEND 302 GOSUB 254:AS$=T$:BI=INSTR(AS$,"("):T$=R$(AX):GOSUB 112:A,X=1:BJ=.:FORBH=.TOY 303 IFO$(BH)<>""THENBEGIN 304 PRINT"ARGS$(";BH;")=";O$(BH) 305 IFBI=.THENBEGIN 306 T$=AS$+""+O$(BH):PRINT"STRUCT: ";T$:AA$=T$:GOSUB 58:BEND 307 IFBI<>.THENBEGIN 308 T$=LEFT$(AS$,BI-1)+""+O$(BH)+MID$(AS$,BI):PRINT"STRUCT: ";T$:,AA$=T$:GOSUB 58:Q$(BJ)=AA$:BJ=BJ+1:BEND 309 NEXTBH:T$=G$:GOSUB 341:G$="":GOSUB 254 310 IFT$<>"="THENBEGIN 311 F$="":RETURN 312 BEND 313 GOSUB 254:BJ=.:BK=.:BL=.:DOWHILET$<>"" 314 IFT$="_"THENBEGIN 315 J=J+1:GOSUB 263 316 GOTO 336:BEND 317 IFBL=.,ANDT$<>"["THENBEGIN 318 PRINT"ERROR: EXPECTED [":SLEEP1:STOP:BEND 319 IFBL=.ANDT$="["THENBEGIN 320 BL=1 321 GOTO 336:BEND 322 IFBL=1ANDT$<>"["ANDT$<>"]"THENBEGIN 323 PRINT"ERROR: EXPECTED [ OR ]":SLEEP1:STOP:BEND 324 IFBL=2THENBEGIN 325 IFLEFT$(T,$,1)="]"THENBEGIN 326 BK=BK+1:BJ=.:BL=1:T$="" 327 GOTO 331:BEND 328 IFRIGHT$(T$,1)=","THENBEGIN 329 T$=LEFT$(T$,LEN(T$)-1):BEND 330 T$=Q$(BJ)+"("+STR$(BK)+")="+T$:GOSUB 122:GOSUB 341:T$="":BJ=BJ+1 331 BEND 332 IFBL=1ANDT$="["THENBEGIN 333 BL=2:BJ,=.:BEND 334 IFBL=1ANDT$="]"THENBEGIN 335 BL=.:BEND 336 GOSUB 254:LOOP:T$="":F$="":G$="":AT$="Z":RETURN 337 IFRIGHT$(V$,1)="_"THENBEGIN 338 V$=LEFT$(V$,LEN(V$)-1):A=.:BM=1 339 BEND:ELSEBEGIN:BM=.:BEND 340 RETURN 341 IFLEN(V$)+LEN(T$)+LEN(STR$(Q))>,=159THENBEGIN 342 A=1:BEND 343 IFAT$<>""THENBEGIN 344 T$="":AT$="":RETURN 345 BEND 346 IFA=1THENBEGIN 347 K$(Q)=V$:V$=T$:A%(Q)=J:Q=Q+1:A=. 348 BEND:ELSEBEGIN 349 IFV$<>""ANDBM=.ANDRIGHT$(V$,1)<>":"THENBEGIN 350 V$=V$+":":BEND 351 V$=V$+T$:BEND, 352 IFPTHENPRINT"<<"Q;T$ 353 RETURN 354 FORAD=.TO3:FORAE=.TOF(AD):GOSUB 213:PRINT#1,STR$(S)+" REM "+L$(AD,AE)+" = :"+AH$+E$(AD)+":":S=S+1:NEXTAE:NEXTAD 355 REM NEXTLINEFLAG = :A: 356 REM DBLQUOTECHAR = :B: 357 REM SNGLQUOTECHAR = :C: 358 REM, I = :D: 359 REM BINCONV = :E: 360 REM ELEMENTCNT = :F: 361 REM LABELLINENO = :G: 362 REM LABELCNT = :H: 363 REM STRUCTIDX = :I: 364 REM SRCLINENO = :J: 365 REM CURSRCLINENO = :K: 366 REM CB = :L: 367 REM CURRATTICADDR = :M: 368 REM T,OTALLINES = :N: 369 REM DELETELINEFLAG = :O: 370 REM VERBOSE = :P: 371 REM DESTLINENO = :Q: 372 REM INSIDEIFDEF = :R: 373 REM CURDESTLINENO = :S: 374 REM S1 = :T: 375 REM S2 = :U: 376 REM R = :V: 377 REM DEFINEFLAG = :W: 378 REM IGNORE,BRACKETS = :X: 379 REM ARGCNT = :Y: 380 REM BKTOPENIDX = :Z: 381 REM BKTCLOSEIDX = :AA: 382 REM EQUALSIDX = :AB: 383 REM DZ = :AC: 384 REM TY = :AD: 385 REM ID = :AE: 386 REM ARGSLISTLEN = :AF: 387 REM IG = :AG: 388 REM AI = :AH: 389 R,EM QUOTEFLAG = :AI: 390 REM TG = :AJ: 391 REM II = :AK: 392 REM RI = :AL: 393 REM DR = :AM: 394 REM T = :AN: 395 REM CI = :AO: 396 REM BR = :AP: 397 REM B = :AQ: 398 REM VL = :AR: 399 REM N1 = :AS: 400 REM N2 = :AT: 401 REM BA = :AU: 402 RE, M A = :AV: 403 REM AD = :AW: 404 REM ZZ = :AX: 405 REM K = :AY: 406 REM SF = :AZ: 407 REM CURLINELEN = :BA: 408 REM SRCLINEPTR = :BB: 409 REM SRCLINEBUFFPTR = :BC: 410 REM CUTTAILIDX = :BD: 411 REM CURLINELENMINUSONE = :BE: 412 REM ,!CURLINEBUFFADDR = :BF: 413 REM CHR = :BG: 414 REM ZI = :BH: 415 REM BL = :BI: 416 REM SZ = :BJ: 417 REM SR = :BK: 418 REM SM = :BL: 419 REM CONTNEXTLINEFLAG = :BM: 420 REM  = :BN: 421 REM MAPDESTTOSRCLINENO% = :A%: 422 REM  = :B%: 423," REM DBLQUOTE$ = :A$: 424 REM PARSERFILE$ = :B$: 425 REM T$ = :C$: 426 REM BLANKLINE$ = :D$: 427 REM TYPEIDENT$ = :E$: 428 REM CURRSRCLINE$ = :F$: 429 REM NEXTLINE$ = :G$: 430 REM MK$ = :H$: 431 REM TOKENS$ = :I$: 432 REM DUMBCMDS$ = :J$,#: 433 REM DESTLINE$ = :K$: 434 REM VARTABLE$ = :L$: 435 REM DEFINEVAL$ = :M$: 436 REM LABELNAME$ = :N$: 437 REM ARGS$ = :O$: 438 REM STRUCTNAME$ = :P$: 439 REM STRUCTFIELDS$ = :Q$: 440 REM STRUCTVARS$ = :R$: 441 REM WHITESPACE$ = :S$: 44,$2 REM S$ = :T$: 443 REM Z$ = :U$: 444 REM CURRDESTLINE$ = :V$: 445 REM C$ = :W$: 446 REM F$ = :X$: 447 REM D$ = :Y$: 448 REM PARSERERROR$ = :Z$: 449 REM P$ = :AA$: 450 REM DIMENSION$ = :AB$: 451 REM VALUE$ = :AC$: 452 REM TR$ = :AD$: 453 RE,%M HX$ = :AE$: 454 REM BI$ = :AF$: 455 REM PP$ = :AG$: 456 REM VN$ = :AH$: 457 REM OF$ = :AI$: 458 REM ARGSLIST$ = :AJ$: 459 REM B$ = :AK$: 460 REM A$ = :AL$: 461 REM CX$ = :AM$: 462 REM LC$ = :AN$: 463 REM BC$ = :AO$: 464 REM TF$ = :AP$: 465,& REM SF$ = :AQ$: 466 REM CO$ = :AR$: 467 REM SK$ = :AS$: 468 REM ZZ$ = :AT$: 469 REM  = :AU$: 470 REM  = :A&: 32000 32001 32002 32003 32004 32005 32006 32007 32008 32009 32010D:D"11TOKENIZED":IFDS<>0THEN?"DISC ERROR: ";DS$:ELSE?". 0  1 CLR:DIM I$(10):DIM E(16):DIM A%(1000):DIM K$(1000):DIM F(4):DIM L$(4,200):DIM M$(200):DIM N$(200):DIM G(200):H=0:DIM O$(32):DIM P$(30):DIM Q$(30): 2 DIM R$(30):I=0: 3 B$="11.PARSE":H$="@~":A$=CHR$(34):B=34:C=39:KEYON:PRINT" PREPROCESSOR V,(AE):RETURN 181 BEND 182 NEXTAE:AO=-1:FORAE=.TOI-1 183 IFW$=P$(AE)THENBEGIN 184 GOSUB 295:AO=AE:AE=I-1:BEND 185 NEXTAE 186 IFAO<>-1THENBEGIN 187 RETURN 188 BEND:ELSEBEGIN:IFASC(W$)=222THENRETURN 189 BEND 190 IFINSTR(J$,AN$)<>.AND(W$="R"ORW$="P"- 0  1 CLR:DIM I$(10):DIM E(16):DIM A%(1000):DIM K$(1000):DIM F(4):DIM L$(4,200):DIM M$(200):DIM N$(200):DIM G(200):H=0:DIM O$(32):DIM P$(30):DIM Q$(30): 2 DIM R$(30):I=0: 3 B$="11.PARSE":H$="@~":A$=CHR$(34):B=34:C=39:KEYON:PRINT" PREPROCESSOR V-    PRINT "ERROR: EXPECTED [ OR ]"      SLEEP 1      STOP    BEND    IF SM = 2 THEN BEGIN      IF LEFT$(S$, 1) = "]" THEN BEGIN        SR = SR + 1        SZ = 0        SM = 1        S$ = ""        GOTO CFCOSONEXTROW  ' NEXT ROW      BEND  -    ' IF LEFT$(S$, 1) = DBLQUOTE$ THEN BEGIN      ' SS$ = S$      ' TR$ = ""      ' DO WHILE RIGHT$(SS$, 2) <> (DBLQUOTE$ + ",")      '   GOSUB READNEXTTOKEN      '   SS$ = SS$ + S$      '   PRINT SS$      ' LOOP      ' S$ = SS$      ' TR$ =- WHITESPACE$      ' STOP      IF RIGHT$(S$, 1) = "," THEN BEGIN        S$ = LEFT$(S$, LEN(S$) - 1)      BEND      S$ = STRUCTFIELDS$(SZ) + "(" + STR$(SR) + ")=" + S$      GOSUB REPLACEVARSANDLABELS      GOSUB SAFEADDTOCURRENTORNEXTLINE -     S$ = ""      SZ = SZ + 1  ' SAFE ADD TO DESTLINE$(DESTLINENO).CFCOSONEXTROW    BEND    IF SM = 1 AND S$ = "[" THEN BEGIN      SM = 2      SZ = 0    BEND    IF SM = 1 AND S$ = "]" THEN BEGIN      SM = 0    BEND.CFCOSOSKIP    GOSUB- READNEXTTOKEN  ' READ NEXT TOKEN FROM CURSRCLINE$ INTO S$  LOOP  S$ = ""  CURSRCLINE$ = ""  NEXTLINE$ = ""  ZZ$ = "Z"  RETURN'---------------------------------.CHECKFORCONTINUEONTONEXTLINE'---------------------------------  IF R-IGHT$(CURDESTLINE$, 1) = "_" THEN BEGIN    CURDESTLINE$ = LEFT$(CURDESTLINE$, LEN(CURDESTLINE$) - 1)    NEXTLINEFLAG = 0    CONTNEXTLINEFLAG = 1  BEND: ELSE BEGIN    CONTNEXTLINEFLAG = 0  BEND  RETURN'---------------------------------.SAFEADDTOCURRENTORNEXTLINE'--------------------------------  ' --- SAFE ADD CURDESTLINE$+S$ TO CURRENT OR NEXT DESTLINE$(DESTLINENO)  IF LEN(CURDESTLINE$) + LEN(S$) + LEN(STR$(DESTLINENO)) >= 159 THEN BEGIN    NEXTLINEFLAG=1  -	BEND  IF ZZ$ <> "" THEN BEGIN    S$ = ""    ZZ$ = ""    RETURN  ' FORCE S$ TO EMPTY  BEND  IF NEXTLINEFLAG = 1 THEN BEGIN    DESTLINE$(DESTLINENO) = CURDESTLINE$    CURDESTLINE$ = S$    MAPDESTTOSRCLINENO%(DESTLINENO) = SRCLINENO-
    DESTLINENO = DESTLINENO + 1    NEXTLINEFLAG = 0  BEND : ELSE BEGIN  ' -- ADD TO CURDESTLINE$    IF CURDESTLINE$ <> "" AND CONTNEXTLINEFLAG = 0 AND RIGHT$(CURDESTLINE$,1) <> ":" THEN BEGIN      CURDESTLINE$ = CURDESTLINE$ + ":" -   BEND        CURDESTLINE$ = CURDESTLINE$ + S$  BEND  IF VERBOSE THEN PRINT "<<" DESTLINENO; S$  RETURN'---------.DUMPVARS'---------  FOR TY = 0 TO 3    FOR ID = 0 TO ELEMENTCNT(TY)      GOSUB GENERATEVARNAME  ' GET GENVARNAME$ (O PTIMISED VAR NAME)      PRINT#1, STR$(CURDESTLINENO) + " REM " _        + VARTABLE$(TY,ID) + " = :" + GENVARNAME$ + TYPEIDENT$(TY) + ":"      CURDESTLINENO = CURDESTLINENO + 1    NEXT ID  NEXT TY  RETURN                                 -0.6.0":PRINT:KEY7,"SCRATCH"+A$+B$+A$+":DSAVE"+A$+B$+A$+":DVERIFY"+A$+B$ 4 C$="                                                                               ":D$=C$+C$+C$:C$="" 5 I$(.)=" PRINT INPUT IF THEN ELSE DO LOOP WHILE UNTIL GOSUB GOTO OPEN CLO-SE DOPEN DCLOSE FOR NEXT GETKEY HEX$ DIM PEEK POKE WAIT DEC CHR$ ASC SGN SQR STR$" 6 I$(.)=I$(.)+" GRAPHIC CLR SCREEN DEF BEGIN BEND LEN MID$ RIGHT$ LEFT$ INSTR FOR NEXT STEP TRAP BORDER AND FOREGROUND " 7 I$(1)=" BACKGROUND SET ABS SIN COS TAN LOG FRE- CURSOR PIXEL WINDOW RWINDOW LINE BOX CIRCLE ELLIPSE PALETTE RESTORE DATA ERR$ ER EL CURSOR ON OFF" 8 I$(1)=I$(1)+" VAL SCRATCH RETURN RND STOP BANK TI DO OR ST IF EL ER ON TO PEN GET END INT NOT DS RUN USING DOT " 9 I$(2)=" APPEND ATN AUTO BACKUP BLOA-D BOOT BSAVE BUMP BVERIFY CATALOG CHANGE CHAR CMD COLLISION COLOR CONCAT CONT COPY WPOKE WPEEK SETBIT CLRBIT " 10 I$(3)=" DCLEAR DEFFN DELETE FN DIR DISK DLOAD DMA DMODE DPAT DSAVE DVERIFY EDMA ENVELOPE ERASE EXIT EXP FAST FILTER FIND GO64 HEADER HELP H-IGHLIGHT " 11 I$(4)=" JOY LIST LOAD LOCATE LPEN MOD MONITOR MOUSE MOVSPR NEW PAINT PLAY POINTER POLYGON POS POT PUDEF " 12 I$(5)=" RCOLOR RDOT READ RECORD REM RENAME RESUME RGRAPHIC RMOUSE RPLAY RREG RSPCOLOR RSPPOS RSPRITE SAVE SCNCLR SLEEP SLOW SOUND- SPC SPRCOLOR " 13 I$(6)=" SPRITE SPRSAV SYS TAB TEMPO TROFF TRON TYPE USR VERIFY VOL XOR KEY VSYNC RCURSOR T@& C@& RGRAPHIC FREAD POINTER " 14 J$=" BLOAD BSAVE DLOAD TO SAVE DIR COLLECT DOPEN DCLOSE BACKUP FREAD GET ":GOSUB 225:BANK128:E$(0)="":E$(1)=-"%":E$(2)="$":E$(3)="&":E(.)=1 15 FORD=1TO16:E(D)=E(D-1)+E(D-1):NEXTD 16 A=.:S$=CHR$(32)+CHR$(160)+"	":J=.:PRINT"PASS 1 ";:K=.:CLRTI:L=134414336:M=L:N=WPEEK(M):M=M+2:DOWHILEK<>N:GOSUB 261 17 GOSUB 265:T$=F$:GOSUB 111:F$=T$ 18 IFF$<>""THENBEGIN 19 O-=.:IFPTHENPRINT">> :"Q;", : ";J;": ";F$ 20 IFLEFT$(F$,1)="."THENBEGIN 21 A=1:GOSUB 105:BEND 22 IFLEFT$(F$,1)="#"THENBEGIN 23 GOSUB 280:BEND 24 IFR=1THENGOTO 33 25 IFLEFT$(F$,4)="DATA"ORRIGHT$(F$,5)="BEGIN"THENBEGIN 26 A=1:BEND 27 IFO=.THEN-BEGIN 28 IFP=.THENPRINT"."; 29 T$=F$:GOSUB 122:GOSUB 293:GOSUB 335 30 GOSUB 339:IFRIGHT$(T$,4)="BEND"ORRIGHT$(T$,6)="RETURN"ORLEFT$(T$,2)="IF"THENBEGIN:A=1:BEND 31 BEND 32 BEND 33 J=J+1 34 IFPTHENBEGIN 35 PRINT"SRCLINENO=";J:GETKEYU$:BEND 36 LO-OP 37 IFV$<>""THENBEGIN 38 K$(Q)=V$:Q=Q+1:BEND 39 CLOSE1:GOSUB 233:SCRATCH"11TEMP":SCRATCH"11TOKENIZED" 40 OPEN1,1,5,"11TEMP,S,W":PRINTCHR$(13)"PASS 2 ";:FORS=.TOQ-1:T$=K$(S):IFPTHENPRINTS;"=> "T$:ELSEPRINT"."; 41 DOWHILEINSTR(T$,H$)<>.:T=INSTR(T$-,H$):U=INSTR(T$,H$,T+2) 42 IFU=.THENBEGIN 43 EXIT 44 BEND:ELSEBEGIN:W$=MID$(T$,T+2,U-T-2):GOSUB 196:T$=LEFT$(T$,T-1)+W$+MID$(T$,U+2):BEND 45 LOOP:IFPTHENPRINT"<= ";STR$(S)+T$ 46 PRINT#1,STR$(S)+" "+T$:NEXTS:GOSUB 352:FORV=.TO10:PRINT#1,STR$(32000+V)-:NEXTV:X$="D:D"+A$+"11TOKENIZED"+A$ 47 X$=X$+":IFDS<>0THEN?"+A$+"DISC ERROR: ":X$=X$+A$+";DS$:ELSE?"+A$:X$=X$+"":X$=X$+A$+":D"+A$+"11.POST":PRINT#1,X$:CLOSE1:PRINT"" 48 PRINT"ELAPSED TIME:";TI;"TICKS":PRINT"EDMA 0,$1F-FF,$8022000,$2001:NEW RESTORE":PRINT"RUN";:BANK128:POKE208,2:POKE688,13,13:END 49 T$=MID$(F$,10-W):X=1:GOSUB 112:X=.:G$="" 50 IFY<.THENBEGIN 51 Z$="?DECLARE PARAMETER MISSING IN LINE "+STR$(J) 52 GOTO 108:BEND 53 FORD=.TOY:AA$=O$(D):GOSUB 58:NEXT-D 54 IFG$<>""THENBEGIN 55 O=.:F$="^^"+G$ 56 BEND:ELSEBEGIN:O=1:BEND 57 RETURN 58 AB$="":AC$="":Z=INSTR(AA$,"("):AA=INSTR(AA$,")"):AB=INSTR(AA$,"=") 59 IFAB<>.THENBEGIN 60 AC$=MID$(AA$,AB+1):AA$=LEFT$(AA$,AB-1):AD$=S$:T$=AA$:GOSUB 111:AA$=T$:T$=AC$-:GOSUB 110:GOSUB 111 61 AC$=T$ 62 IFLEFT$(AC$,1)="$"THENBEGIN 63 AE$=MID$(AC$,2):GOSUB 208:BEND 64 IFLEFT$(AC$,1)="%"THENBEGIN 65 AF$=MID$(AC$,2):GOSUB 202:BEND 66 BEND 67 IFZ<>.ANDAA<>.THENBEGIN 68 AB$=MID$(AA$,Z+1,AA-Z-1):AU$=LEFT$(AA$,Z-1):T$=-AB$:AC=1:GOSUB 122:AC=.:AB$=T$:AA$=AU$:O=.:BEND 69 AD=0:C$=RIGHT$(AA$,1) 70 IFPTHENBEGIN 71 PRINT"ADDING ";:BEND 72 IFINSTR("%&$",C$)=.THENBEGIN 73 C$="":AD=0:BEND 74 IFW=1THENBEGIN 75 AD=4:BEND 76 IFC$="%"THENBEGIN 77 AD=1:BEND 78 IFC$="$"THE-NBEGIN 79 AD=2:BEND 80 IFC$="&"THENBEGIN 81 AD=3:BEND 82 L$(AD,F(AD))=AA$ 83 IFAB$<>""THENBEGIN 84 AE=F(AD):GOSUB 211 85 IFW=.THENBEGIN 86 G$=G$+"DIM "+AG$+C$+"("+AB$+"):":BEND 87 BEND 88 IFAC$<>""THENBEGIN 89 AE=F(AD):GOSUB 211 90 IFW=.THENB-EGIN 91 G$=G$+AG$+C$+"="+AC$+":":BEND 92 BEND 93 IFW=1THENBEGIN 94 M$(F(AD))=AC$:BEND 95 IFPTHENBEGIN 96 PRINTAA$;": ";F(AD):BEND 97 F(AD)=F(AD)+1:RETURN 98 T$=MID$(F$,8):GOSUB 112 99 IFY<>.THENBEGIN 100 PRINT"?INVALID PARAMETERS IN LINE ";J:E-ND:BEND 101 T$=O$(.):AD$=A$:GOSUB 110:GOSUB 111 102 IFPTHENBEGIN 103 PRINT"SETTING OUTPUT FILE TO "+T$+"":BEND 104 AH$=T$:O=1:RETURN 105 IFPTHENBEGIN 106 PRINT"LABEL ";F$;" AT LINE ";Q:BEND 107 O=1:N$(H)=MID$(F$,2):G(H)=Q+1:H=H+1:RETURN 108 BAN- K4:FORV=1TOLEN(Z$):POKE327472+V-1,ASC(MID$(Z$,V,1)):NEXTV:POKE327472+V-1,.:POKE65289,MOD(J,256):POKE65290,J/256:POKE65287,PEEK(65287)OR2:DCLOSE 109 GOTO 238 110 DOWHILEINSTR(AD$,(LEFT$(T$,1))):T$=MID$(T$,2):LOOP:RETURN 111 DOWHILEINSTR(AD$,RIGHT$(T$,1-!)):T$=LEFT$(T$,LEN(T$)-1):LOOP:RETURN 112 Y$=",;":Y=.:AI$=T$:AF=LEN(T$):AG=. 113 IFAF=.THENBEGIN 114 Y=-1:RETURN 115 BEND 116 FORAH=.TO31:O$(AH)="":NEXTAH:FORAH=1TOAF:AJ$=MID$(AI$,AH,1):IFAJ$="("ANDX=1THENAG=1 117 IFAJ$=")"ANDX=1THENAG=. 118 IFINS-"TR(Y$,AJ$)=.ORAG=1THENBEGIN 119 O$(Y)=O$(Y)+AJ$ 120 BEND:ELSEBEGIN:T$=O$(Y):AD$=" ":GOSUB 110:GOSUB 111:O$(Y)=T$:Y=Y+1:BEND 121 NEXTAH:T$=O$(Y):AD$=" ":GOSUB 110:GOSUB 111:O$(Y)=T$:T$=AI$:RETURN 122 IFLEFT$(T$,2)="^^"THENBEGIN 123 T$=RIGHT$(T$,LEN(T-#$)-2):RETURN 124 BEND 125 AI=.:AK$="":W$="":BM=.:AK=.:AL$="?<>=+-#*/^,.:;() ":Y$=AL$:FORAL=1TOLEN(T$):AJ$=MID$(T$,AL,1) 126 IFAJ$=":"ANDAI=.THENBEGIN 127 BM=.:BEND 128 IFBMANDAJ$="("THENBEGIN 129 Y$=AL$:BEND 130 IFBMANDAJ$=")"THENBEGIN 131 Y$=AL$-$+"DPUB":BEND 132 IFAJ$=A$THENBEGIN 133 AI=ABS(AI-1) 134 IFAI=1THENBEGIN 135 GOSUB 147:AK$=AK$+W$:W$="" 136 BEND:ELSEBEGIN:AK$=AK$+AJ$:AJ$="":BEND 137 BEND 138 IFAI=1THENBEGIN 139 AK$=AK$+AJ$ 140 GOTO 145:BEND 141 IFINSTR(Y$,AJ$)<>.THENBEGIN 14-%2 GOSUB 147:AK$=AK$+W$:W$="":IFAJ$=" "THENAJ$="" 143 AK$=AK$+AJ$ 144 BEND:ELSEBEGIN:W$=W$+AJ$:BEND 145 NEXT:GOSUB 147:T$=AK$+W$:RETURN 146 END 147 IFW$=""ORW$="_"THENRETURN 148 IFVAL(W$)<>.THENBEGIN 149 AK=.:RETURN 150 BEND 151 IFW$="0"THENBEGIN-& 152 W$=".":RETURN 153 BEND 154 IFAKANDAC=.THENBEGIN 155 GOSUB 195:AK=.:RETURN 156 BEND 157 IFW$="GOTO"THENA=1 158 IFW$="GOTO"ORW$="GOSUB"ORW$="TRAP"THENBEGIN 159 AK=1:BEND 160 IFLEFT$(W$,1)="$"THENBEGIN 161 AE$=MID$(W$,2):GOSUB 208:RETURN 162-' BEND 163 IFLEFT$(W$,1)="%"THENBEGIN 164 AF$=MID$(W$,2):GOSUB 202:RETURN 165 BEND 166 AT$=" "+W$+" ":FORAM=.TO6 167 IFINSTR(I$(AM),AT$)<>.THENBEGIN 168 AM$=W$:GOSUB 194:RETURN 169 BEND 170 NEXT:AJ=.:C$=RIGHT$(W$,1):AD=0:IFC$="%"THENAD=1 171 IFC$. ="$"THENAD=2 172 IFC$="&"THENAD=3 173 FORAE=.TOF(AD) 174 IFW$=L$(AD,AE)THENBEGIN 175 GOSUB 211:W$=AG$+E$(AD):AE=F(AD):AJ=1:BEND 176 NEXTAE:IFAJ=1THENRETURN 177 FORAE=.TOF(4) 178 IFW$=L$(4,AE)THENBEGIN 179 W$=M$(AE):RETURN 180 BEND 181 NEXTAE:AN.=-1:FORAE=.TOI-1 182 IFW$=P$(AE)THENBEGIN 183 GOSUB 293:AN=AE:AE=I-1:BEND 184 NEXTAE 185 IFAN<>-1THENBEGIN 186 RETURN 187 BEND 188 IFASC(W$)=222THENRETURN 189 IFINSTR(J$,AM$)<>.AND(W$="R"ORW$="P" 190 ORW$="U8"ORW$="W")THENBEGIN:RETURN 191 BEND. 192 Z$="?UNRESOLVED IDENTIFIER: '"+W$+"' IN LINE "+STR$(J):SLEEP1 193 GOTO 108:RETURN 194 RETURN 195 W$=H$+W$+H$:RETURN 196 AJ=.:FORAE=.TOH-1 197 IFW$=N$(AE)THENBEGIN 198 W$=STR$(G(AE)):AE=H:AJ=1:BEND 199 NEXTAE:IFAJTHENRETURN 200 Z$="?UNRESOLVE.D LABEL: '"+W$+"' IN LINE"+STR$(A%(S-1)):SLEEP1 201 GOTO 108:RETURN 202 AO=.:FORAP=.TOLEN(AF$)-1:AN$=MID$(AF$,LEN(AF$)-AP,1) 203 IFAN$<>"1"ANDAN$<>"0"THENBEGIN 204 BANK4:POKE65288,132 205 GOTO 192:BEND 206 IFAN$="1"THENAO=AO+E(AP) 207 NEXTAP:RETUR.%N 208 TRAP 209:AQ=DEC(AE$):TRAP:RETURN 209 TRAP:BANK4:POKE65288,131 210 GOTO 192 211 IFAE<26THENBEGIN 212 AG$=CHR$(65+AE):RETURN 213 BEND 214 AS=MOD(AE,26):AR=INT(AE/26)-1:AG$=CHR$(65+AR)+CHR$(65+AS):IFAG$="DO"THENAG$="D1" 215 IFAG$="GO"THENAG$=".0.6.0":PRINT:KEY7,"SCRATCH"+A$+B$+A$+":DSAVE"+A$+B$+A$+":DVERIFY"+A$+B$ 4 C$="                                                                               ":D$=C$+C$+C$:C$="" 5 I$(.)=" PRINT INPUT IF THEN ELSE DO LOOP WHILE UNTIL GOSUB GOTO OPEN CLO.SE DOPEN DCLOSE FOR NEXT GETKEY HEX$ DIM PEEK POKE WAIT DEC CHR$ ASC SGN SQR STR$" 6 I$(.)=I$(.)+" GRAPHIC CLR SCREEN DEF BEGIN BEND LEN MID$ RIGHT$ LEFT$ INSTR FOR NEXT STEP TRAP BORDER AND FOREGROUND " 7 I$(1)=" BACKGROUND SET ABS SIN COS TAN LOG FRE. CURSOR PIXEL WINDOW RWINDOW LINE BOX CIRCLE ELLIPSE PALETTE RESTORE DATA ERR$ ER EL CURSOR ON OFF" 8 I$(1)=I$(1)+" VAL SCRATCH RETURN RND STOP BANK TI DO OR ST IF EL ER ON TO PEN GET END INT NOT DS RUN USING DOT " 9 I$(2)=" APPEND ATN AUTO BACKUP BLOA. 
   A0: U  B270336: C(3): D(6,25): E(64):I0:AI335872:AU18:AV0:AW18:AX0:    BT(1,8):BT(.,1)1:BT(.,2)2:BT(.,3)3:BT(.,4)4:BT(.,5)5:BT(.,6)6:BT(.,7)7:BT(.,8)8:BT(1,1)1:BT(1,2)8:BT(1,3)3:BT(1,4)6:BT(1,5)5:BT(1,6)4 ! BT(1,7)3:.	BT(1,8)2 !  BW(7): BX(7):BX(.)1:BX(1)7:BX(2)0:BX(3)2:BX(4)3:BX(5)4:BX(6)5:BX(7)6: BY(7):BY(.).7:BY(1).:BY(2).1:BY(3).5:BY(4)1:BY(5)1.5:BY(6)2 6"  CB(3,10,10):CB(1,0,.)0:CB(1,0,1)1:CB(1,0,2)2:CB(1,0,3)1:CB(1,1,.)3:CB(1,1,1)4:C.
B(1,1,2)5:CB(1,1,3)4:CB(1,1,4)3:CB(1,2,.)6:CB(1,2,1)7 " CB(1,2,2)8:CB(1,2,3)7:CB(1,2,4)6:CB(1,3,.)9:CB(1,3,1)10:CB(1,3,2)11:CB(1,4,.)10:CB(1,4,1)9:CB(1,5,.)12:CB(1,5,1)13:CB(1,5,2)14:CB(1,5,3)13 q# CB(1,5,4)12:CB(1,6,.)15:CB(1,6,1).16:CB(1,6,2)17:CB(1,6,3)16:CB(1,6,4)15:CB(1,7,.)18:CB(1,7,1)19:CB(1,7,2)20:CB(1,7,3)21:CB(1,7,4)22:CB(1,7,5)22 	$ CB(1,7,6)22:CB(1,7,7)22:CB(1,7,8)22:CB(1,8,.)9:CB(1,8,1)10:CB(2,0,.)0:CB(2,0,1)1:CB(2,0,2)2:CB(2,0,3)1:CB(2,1,.)3:CB(2,1.,1)4:CB(2,1,2)5 $	 CB(2,1,3)4:CB(2,1,4)3:CB(2,2,.)6:CB(2,2,1)7:CB(2,2,2)8:CB(2,2,3)9:CB(2,2,4)10:CB(2,2,5)10:CB(2,2,6)10:CB(2,2,7)10:CB(2,2,8)10: CC(3,10): %
 CC(1,0)4:CC(1,1)5:CC(1,2)5:CC(1,3)3:CC(1,4)2:CC(1,5)5:CC(1,6)5:CC(1,7)9.:CC(1,8)2:CC(2,0)4:CC(2,1)5:CC(2,2)9 % CD1:CE1: CF(3,9):CF(1,0)0:CF(1,1)1:CF(1,2)2:CF(1,3)3:CF(1,4)4:CF(1,5)5:CF(1,6)6:CF(1,7)7:CF(1,8)8:CF(2,0)0:CF(2,1)1:CF(2,2)1:CF(2,7)2 % CG0:CH0:CI0:CJ0: %  CK(3):CK(.)4:CK(1)8:CK(2).12:CK(3)16 & CR.05: B$(5,50): J$(9): CX(9): CY(9): CZ(9): DA(9): DB(9): DC(9):J$(.)"IANO":CX(.).:CY(.)9:CZ(.).:DA(.).:DB(.)2:DC(.)1536 -' J$(1)"CCORDION":CX(1)12:CY(1).:CZ(1)12:DA(1).:DB(1)1:DC(1).:J$(2)"ALLIOPE":CX(2).:CY.(2).:CZ(2)15:DA(2).:DB(2).:DC(2).:J$(3)"RUM":CX(3). ' CY(3)5:CZ(3)5:DA(3).:DB(3)3:DC(3).:J$(4)"LUTE":CX(4)9:CY(4)4:CZ(4)4:DA(4).:DB(4).:DC(4).:J$(5)"UITAR":CX(5).:CY(5)9:CZ(5)2:DA(5)1:DB(5)1 o( DC(5).:J$(6)"ARPSICRD":CX(.6).:CY(6)9:CZ(6).:DA(6).:DB(6)2:DC(6)512:J$(7)"RGAN":CX(7).:CY(7)9:CZ(7)9:DA(7).:DB(7)2:DC(7)2048:J$(8)"RUMPET" ( CX(8)8:CY(8)9:CZ(8)4:DA(8)1:DB(8)2:DC(8)512:J$(9)"YLOPHONE":CX(9).:CY(9)9:CZ(9).:DA(9).:DB(9).:DC(9).:DD0:D.E1: ~) DD0:DE1: K$(10): DF(10): DG(10): DH(10): DI(10): DJ(10): DK(10): DL(10): DM(10):K$(.)"LOWPUP":DF(.)1000:DG(.)1:DH(.)0 * DI(.)0:DJ(.)15:DK(.)1:DL(.)100:DM(.)10:K$(1)"LOWPDOWN":DF(1)1000:DG(1)1:DH(1)0:DI(1)0:DJ(1)15.:DK(1)2:DL(1)100:DM(1)10:K$(2)"LOWPOSC" * DF(2)1000:DG(2)1:DH(2)0:DI(2)0:DJ(2)15:DK(2)3:DL(2)100:DM(2)10:K$(3)"BANDPUP":DF(3)1000:DG(3)0:DH(3)1:DI(3)0:DJ(3)15:DK(3)1:DL(3)100 N+ DM(3)10:K$(4)"BANDPDOWN":DF(4)1000:DG(4)0:DH(4.)1:DI(4)0:DJ(4)15:DK(4)2:DL(4)100:DM(4)10:K$(5)"BANDPOSC":DF(5)1000:DG(5)0:DH(5)1:DI(5)0 + DJ(5)15:DK(5)3:DL(5)100:DM(5)10:K$(6)"HIGHPUP":DF(6)1000:DG(6)0:DH(6)0:DI(6)1:DJ(6)15:DK(6)1:DL(6)100:DM(6)10:K$(7)"HIGHPDOWN":DF(7).1000 , DG(7)0:DH(7)0:DI(7)1:DJ(7)15:DK(7)2:DL(7)100:DM(7)10:K$(8)"HIGHPOSC":DF(8)1000:DG(8)0:DH(8)0:DI(8)1:DJ(8)15:DK(8)3:DL(8)100:DM(8)10  - K$(9)"SPARE1":DF(9).:DG(9)0:DH(9)0:DI(9)0:DJ(9).:DK(9)0:DL(9).:DM(9).:K$(10)"SPAR3E2":DF(10).:DG(10)0:DH(10)0:DI(10)0:DJ(10).:DK(10)0 W- DL(10).:DM(10).: D1(200): DP(200):DU50:DV50: - (27)"5":(147);:<.:;.: 33:BZ.: 39:C$"CHABI.P": 294 -  40: 31: 196 -  28 . 262153,Y:262156,Z:262151,AA:262148.D BOOT BSAVE BUMP BVERIFY CATALOG CHANGE CHAR CMD COLLISION COLOR CONCAT CONT COPY WPOKE WPEEK SETBIT CLRBIT " 10 I$(3)=" DCLEAR DEFFN DELETE FN DIR DISK DLOAD DMA DMODE DPAT DSAVE DVERIFY EDMA ENVELOPE ERASE EXIT EXP FAST FILTER FIND GO64 HEADER HELP H.IGHLIGHT " 11 I$(4)=" JOY LIST LOAD LOCATE LPEN MOD MONITOR MOUSE MOVSPR NEW PAINT PLAY POINTER POLYGON POS POT PUDEF " 12 I$(5)=" RCOLOR RDOT READ RECORD REM RENAME RESUME RGR RMOUSE RPLAY RREG RSPCOLOR RSPPOS RSPRITE SAVE SCNCLR SLEEP SLOW SOUND SPC .SPRCOLOR " 13 I$(6)=" SPRITE SPRSAV SYS TAB TEMPO TROFF TRON TYPE USR VERIFY VOL XOR KEY VSYNC RCURSOR T@& C@& RGRAPHIC FREAD POINTER " 14 J$=" BLOAD BSAVE DLOAD TO SAVE DIR COLLECT DOPEN DCLOSE BACKUP FREAD GET ":GOSUB 227:BANK128:E$(0)="":E$(1)="%":E.$(2)="$":E$(3)="&":E(.)=1 15 FORD=1TO16:E(D)=E(D-1)+E(D-1):NEXTD 16 A=.:S$=CHR$(32)+CHR$(160)+"	":J=.:PRINT"PASS 1 ";:K=.:CLRTI:L=134414336:M=L:N=WPEEK(M):M=M+2:DOWHILEK<>N:GOSUB 263 17 GOSUB 267:T$=F$:GOSUB 111:F$=T$ 18 IFF$<>""THENBEGIN 19 O=.:IF.PTHENPRINT">> :"Q;", : ";J;": ";F$ 20 IFLEFT$(F$,1)="."THENBEGIN 21 A=1:GOSUB 105:BEND 22 IFLEFT$(F$,1)="#"THENBEGIN 23 GOSUB 282:BEND 24 IFR=1THENGOTO 33 25 IFLEFT$(F$,4)="DATA"ORRIGHT$(F$,5)="BEGIN"THENBEGIN 26 A=1:BEND 27 IFO=.THENBEGIN. 28 IFP=.THENPRINT"."; 29 T$=F$:GOSUB 122:GOSUB 295:GOSUB 337 30 GOSUB 341:IFRIGHT$(T$,4)="BEND"ORRIGHT$(T$,6)="RETURN"ORLEFT$(T$,2)="IF"THENBEGIN:A=1:BEND 31 BEND 32 BEND 33 J=J+1 34 IFPTHENBEGIN 35 PRINT"SRCLINENO=";J:GETKEYU$:BEND 36 LOOP 3.7 IFV$<>""THENBEGIN 38 K$(Q)=V$:Q=Q+1:BEND 39 CLOSE1:GOSUB 235:SCRATCH"11TEMP":SCRATCH"11TOKENIZED" 40 OPEN1,1,5,"11TEMP,S,W":PRINTCHR$(13)"PASS 2 ";:FORS=.TOQ-1:T$=K$(S):IFPTHENPRINTS;"=> "T$:ELSEPRINT"."; 41 DOWHILEINSTR(T$,H$)<>.:T=INSTR(T$,H$):.U=INSTR(T$,H$,T+2) 42 IFU=.THENBEGIN 43 EXIT 44 BEND:ELSEBEGIN:W$=MID$(T$,T+2,U-T-2):GOSUB 197:T$=LEFT$(T$,T-1)+W$+MID$(T$,U+2):BEND 45 LOOP:IFPTHENPRINT"<= ";STR$(S)+T$ 46 PRINT#1,STR$(S)+" "+T$:NEXTS:GOSUB 354:FORV=.TO10:PRINT#1,STR$(32000+V):NEXT.V:X$="D:D"+A$+"11TOKENIZED"+A$ 47 X$=X$+":IFDS<>0THEN?"+A$+"DISC ERROR: ":X$=X$+A$+";DS$:ELSE?"+A$:X$=X$+"":X$=X$+A$+":D"+A$+"11.POST":PRINT#1,X$:CLOSE1:PRINT"" 48 PRINT"ELAPSED TIME:";TI;"TICKS":PRINT"EDMA 0,$1FFF,$8.022000,$2001:NEW RESTORE":PRINT"RUN";:BANK128:POKE208,2:POKE688,13,13:END 49 T$=MID$(F$,10-W):Y$=",;":X=1:GOSUB 112:X=.:G$="" 50 IFY<.THENBEGIN 51 Z$="?DECLARE PARAMETER MISSING IN LINE "+STR$(J) 52 GOTO 108:BEND 53 FORD=.TOY:AA$=O$(D):GOSUB 58:N. EXTD 54 IFG$<>""THENBEGIN 55 O=.:F$="^^"+G$ 56 BEND:ELSEBEGIN:O=1:BEND 57 RETURN 58 AB$="":AC$="":Z=INSTR(AA$,"("):AA=INSTR(AA$,")"):AB=INSTR(AA$,"=") 59 IFAB<>.THENBEGIN 60 AC$=MID$(AA$,AB+1):AA$=LEFT$(AA$,AB-1):AD$=S$:T$=AA$:GOSUB 111:AA$=T$:T$=.!AC$:GOSUB 110:GOSUB 111 61 AC$=T$ 62 IFLEFT$(AC$,1)="$"THENBEGIN 63 AE$=MID$(AC$,2):GOSUB 210:AC$=W$:BEND 64 IFLEFT$(AC$,1)="%"THENBEGIN 65 AF$=MID$(AC$,2):GOSUB 203:AC$=W$:BEND 66 BEND 67 IFZ<>.ANDAA<>.THENBEGIN 68 AB$=MID$(AA$,Z+1,AA-Z-1):AG$=L."EFT$(AA$,Z-1):T$=AB$:AC=1:GOSUB 122:AC=.:AB$=T$:AA$=AG$:O=.:BEND 69 AD=.:C$=RIGHT$(AA$,1) 70 IFPTHENBEGIN 71 PRINT"ADDING ";:BEND 72 IFINSTR("%&$",C$)=.THENBEGIN 73 C$="":AD=.:BEND 74 IFW=1THENBEGIN 75 AD=4:BEND 76 IFC$="%"THENBEGIN 77 AD=1:BEN.#D 78 IFC$="$"THENBEGIN 79 AD=2:BEND 80 IFC$="&"THENBEGIN 81 AD=3:BEND 82 L$(AD,F(AD))=AA$ 83 IFAB$<>""THENBEGIN 84 AE=F(AD):GOSUB 213 85 IFW=.THENBEGIN 86 G$=G$+"DIM "+AH$+C$+"("+AB$+"):":BEND 87 BEND 88 IFAC$<>""THENBEGIN 89 AE=F(AD):GOSUB 2.$13 90 IFW=.THENBEGIN 91 G$=G$+AH$+C$+"="+AC$+":":BEND 92 BEND 93 IFW=1THENBEGIN 94 M$(F(AD))=AC$:BEND 95 IFPTHENBEGIN 96 PRINTAA$;": ";F(AD):BEND 97 F(AD)=F(AD)+1:RETURN 98 T$=MID$(F$,8):Y$=",;":GOSUB 112 99 IFY<>.THENBEGIN 100 PRINT"?INVALID/  PARAMETERS IN LINE ";J:END:BEND 101 T$=O$(.):AD$=A$:GOSUB 110:GOSUB 111 102 IFPTHENBEGIN 103 PRINT"SETTING OUTPUT FILE TO "+T$+"":BEND 104 AI$=T$:O=1:RETURN 105 IFPTHENBEGIN 106 PRINT"LABEL ";F$;" AT LINE ";Q:BEND 107 O=1:N$(H)=MID$(F$,2):G(H)=.&G1" 216 IFAG$="TO"THENAG$="T1" 217 IFAG$="DS"THENAG$="D2" 218 IFAG$="DT"THENAG$="D3" 219 IFAG$="EL"THENAG$="E1" 220 IFAG$="ER"THENAG$="E2" 221 IFAG$="FN"THENAG$="F1" 222 IFAG$="IF"THENAG$="I1" 223 RETURN 224 STOP 225 BANK4:AT=65280 226 IFPEEK(.'AT+.)=ASC("S")ANDPEEK(AT+1)=ASC("K")THENBEGIN 227 P=PEEK(65287)AND8:X$="":AU=AT+16:DOWHILEPEEK(AU)<>.:X$=X$+CHR$(PEEK(AU)):AU=AU+1:LOOP:IFPEEK(65287)AND1THENRETURN 228 PRINT"FILENAME? "+X$:PRINT"";:BEND 229 INPUT"FILENAME";AK$ 230 IFAK$=""THENBEGIN3 231 PRINT"NO FILENAME SET":END:BEND 232 POKEAT,ASC("S"):POKEAT+1,ASC("K"):FORV=1TO16:POKEAT+8+V-1,ASC(MID$(AK$,V,1)):NEXTV:X$=AK$:RETURN 233 AV=65328:BANK4:FORV=.TO16:POKEAV+V,.:NEXTV 234 IFAH$<>""THENBEGIN 235 AO$=AH$ 236 BEND:ELSEBEGIN:AO$="ELEVE1Q+1:H=H+1:RETURN 108 BANK4:FORV=1TOLEN(Z$):POKE327472+V-1,ASC(MID$(Z$,V,1)):NEXTV:POKE327472+V-1,.:POKE65289,MOD(J,256):POKE65290,J/256:POKE65287,PEEK(65287)OR2:DCLOSE 109 GOTO 240 110 DOWHILEINSTR(AD$,(LEFT$(T$,1))):T$=MID$(T$,2):LOOP:RETURN 111 DOW/                  >  >  >  >                                               <  |  |  |  |                                             |  |  |  ~  ~                                           >  >  >  >                      /                      ?  ?  ~  ~  |  x  x  0                               8  <  |  |  ~  ~  >  >                                        @  `  |  |                                              x  x  x  x  |  <  <                   /                       @  @            ~  ?                                                 ?  2                                               ?  ?                                   >  >  ~  ~  ~  <  <  8  8            G                            <  8  x  x  x  8                                              ?  2                                               ?  ?                                   >  >  ~  ~  ~  <  <  8  8           /                                                                                                                                                                                  dd                                        dRdd    `                       dy/FCEcc cxEDCFRd````                     `dRF@Ec   ccEb`                      EDFFRyd        xEDCCydd         ``ddFCCEx      dRF@a                        a     ccxDCCFRd        ca     lDEc  `  dyFCDEx      |                         |{             /cEDDCCyd  |{    a   lFCDEc             a                                   lbbb{          b~      lbb{                                  |{      b~ |           a     l{bbb~                                 a lCDC{ |     {  /	        l  UCCI |                           a    a H   ]      l~    a  u cv  aࠠb{                           |  ECE  EEDF    { JCCK lࠠ{                    la    |bbb cEEDD@CCFFFRRRd   |b/
bbb~a                    |{                           `|add    ~   @b~                    bd          cx               d         @@@                   lFFl{@@@bFDDDDD      l~  lb    /                  l    dFd |a E`  RFCCF    ll~ RFR    ᠠa                  |~ `~ ]  I] ` a  NUEcc  JI laa ] EM]  a                      ⠠~   a  MF       ]G     ]l~  |a J@R@K l~ `              /         |~     b{ lb  a   MJodMdd       b{  b   l~                        l~   ```` ~   {   JCFRFCl{      |   ba+{                        DDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDD                             /                                                                                                                                                                                                                              /                        /                                                                                             /                                                                              / CC        CCCCCCCC          CC   CCC               DDDDDDDD            CCCC   DDDDD                         D              DDDDD / DDDDDD            DDDDDD  EEEEEE            EEEEE  EEEEEEEE                                   EEEEE FFFFFFFF   /                            FFFF  FFFFFFFF                                FFFF FFFFF                             FF             /                                                                                                                /  0a!'teD	'bP0`l;sh3&eё$*(FY)H/DԆ%8&H9G%Bժ*               			  				                                      @@			
	 
              /                	B	B	BK
		BL				@L				LL@  	@A@KB    @A	    L               KK 	@LK		BB	L			BB
	@A  @LAL  DD	            /   	LB	B	KE
		AL	@A

@				KKB	@GD
 @A  J@             	ON	BF		L@G@BKG	@L
L	
L
			AE
L
		
BLK @@  J@                 	AOG/			BE		B				@KB@L@				DEB			E
	C	KG@ 	@@  J@                O
B		@@E	@B@			@KL		BB
AK@K	DFEG			@N
L		A		DK		D@J@LB	                
KK@N	
ELNG@			@K
L/OFLOK
LKACMG			@
K	AHJG@		IB	LF@ JEGK             	 	K@	BE@LGJE@			
NMMDAMMEGAELNLANIIG			@JJKAHMJE
	CJB	LF@	JB      		BEKBFGMGG
FIIJD
AHIIGK
NMML
/OCHHMIJKAHIIFGCIB
LI
JJB
 LBB

GLJJN@IELDLNCCGD
AHHFNDHIJL
OCHCELAACIHMKAHHHAO
ECIBEIJJ
MJBEEEGBOA
	 @EBEJJOBMMBFFEJJGDDGFNDENACJL
GONCGIMGHCIDE/HHHBEEJJCHFE
IJMJJGMMJBJJJJJEK  	JMMIMMGEMJGKIMJMFNNLEMDAD
FDEGDCELFNOAEHEACFKCCHFFGHHCHJGIMIFEHHFIMJBJGIIIIJK	  @JIMFIM@DFNLGDOFECALBGCGD
AEBNBDFDECCFEECGJ
III/JIIJBK  	KBEIIMEIIMN@DFDL@
DOFGCOA
@LGGB
AAAGDDCK@CCF@
CFE
FIHIIIMB@B@  	K@NMIIFHHMANFD@O
DOFN
FOAFGE@AOA
AFD
CF
KFENIHH@IHM
/	   
JNGIICHHJA
JJDFDEEFDOFDEFOAEENAGFGNOAEGFCKCADFGGLODBE@HHHJMMIHM
      B@IHCCHE@JFDAOFDEOADAGDEEOAFEENAFKECAFEEBE
HCHEEJJHHMJ@B	       L/BICFDFDOFD@AOAG
DAGL@DOAFG

AFN
CA
KEHCHGG
HCMB         	KBKGCDGN
KABFDBOFDBAOABKBDAGDBAAFKKBAFCABBBOKHCHFBKHCIE@@         			CLG				LFD@/ 			
DAFDACAA
			@DGLCAE@ 		@HECAL			B
	CC			CCI           		NCALG				DFNG@			
DCDACG@			
DDELHE 		@F	NCAL		DB	CC	CCI            		NCALG				KGCF			DCMDAFDG@	/!		DDELI@ 		
MNDH			DB	CI               	NAAEB				LEMM			DIHJDLGCFG@			NNNL	IHC@ 		
CJBH			DB	A	H             
FAAN			B
			NJJD	BGG@	
DFL	KMI@ /"	
CHKDMCC		@CCF	DA	AH              	FAOKG			
			F		G@  	
E	@JG@		
FEB		GMIE
  	CH	DAAH            BFAAAEK				G@			FK			

  	
AB		B@			
ML		KJG 	/#HI	DAFDAAH               	NHAAAN			BG		N				BG
 	
A
B
				B@			DE						NHM		DADBDAAH                FCN
				@G			DE						@
 	
AK						@@			
AGD			B	FHE@		DODA/$AC             	@FCNFE		B			BK					K
			
BL							K
		
D
	BBDDCJ			DDODAAH               	ICDEJEK				
L			L				
L
			
D						
L
			
DB		GG		DOGDAAH              /%   INCF
			B									B
			
K				 	
			
A	  	K
B	FAGDAH                 FHNEBCE												
			  			
	  KK		FAGAH                
FHBEC/&JK																											NACGOI               	ICE
HF	                                 	DCCE@DI               	ICNMCCE	     /'                                 	NCCCI         BICNE@	CCJK	                                          	NHCE@CCM               	FICG	HCJN            0                         	NHCECCCMB              @IHEF	MHMG	                                          	NICCEFCHJA             	GIIF		IMB	                             0       BMHCE NI	             	KJJ	@JJF                                 FMHED	NCJ             E
	G                                                               0EMIGDKKBI@	               	@
				                             	FJIMMFCM              		N		B                                        JJJ@@     0         
@		
@                                        @

B	            					B                                        KB@L                 0K				                                            @B	                 				                                              	                   	0                                                          +
$                              bbb                                                                                                a                 0             l{                                                            ͠                             |͠  oooooooooooooooooooooNo      |lbbb|Р{      a |{    ᠠ  |0㠠{   bb b                          aa                          a                            a                            < M< M                            |CCxCC~ 			0	


				


		
	
AAAAAAAAAAAAAAAAAAAAA0	A

AAAAAAAAAAAAAAAAAAABDIAA	AAAAAAAAAAAAAAAAAAAA	AAAAAAAAAAAAAAAAAAAAAAAA																			0
			$  l   |   x   v
% b砠Πx~v  v  v
%  bbΠ  v
%   lb|	

$    l l~   v	
0

	
"     ᠠ l |     v	
!     l   b v



       l    b bb v    v



(





(Ѡ





(ﭠ





         l      0 b       v         voooo     vР{ B   


AAAA
BDIAA!     l   l    v   |{v    |v{     M 



A!	     l    l    v    |͠0      l{      




A"    l         ͠    |            

	       l     b  bb v     vNo      v



0A       l    l     v    |{vo    |v{     


A
AA#   l  l  v  |͠    l     



"
    l{     l     llbbb  |xᠠ0a      ᠠ          {      {         aa      a   





AAA		#      a     lblbbb lРa   x0ᠠ      ᠠu       ᠠu                	
	



(ڠڠѠ





(͠Π





(͠Π





(Ѡ





(





(





$ 0    a    lbbb  bb a  xᠠ     u   	
	



#      a     lb bb ᠠ a   xxԠ          	
	




$  yy   là0u xx~          



$  yy    là  xxa      ᠠϠ |{   ᠠ       ~    



'	a      0  ᠠa  {   ᠠa                 
+	a          a      l   a   {  {   {  ~  |              0+	a            a            a        {        l  b       x~         a    ~      +
a               a                                       {   0    y{   |{  a l~     x~   |           a               +	a                                                   0           a             {    l{       l a   {       ~ M   |~       |  C~   |           ,0                                a                                                                   ~                     {         {    l{      l~      x      |                  0+a                   M                   C~                                                                                         0         8                                              0                                                 l젠{                  l~{ {             lbbbb|{          l~|0 |{       l~        |{   l~           { l~            ~            0  a             l~|{          l~  {        l~   |{      ~   0

















0








































































0
































































0 
















Π͠Π͠à 󠠠     º 0!    à0"     젠~{bb|⠠0#        0$

@@@@@@@@@@
@@@BBBBBBBBBB@@@




@@BBBDDDDDDDDDDBBB@@



@BBDDDFFFFFFFFFFDDDBB@@BDDFFFIIIIIIIIIIFFFDDB@BDFFIIIKKKKKKKKKKIIIFFDB@DFIKKKMMMMMMMMMMKKKIIFDIKMMMOOOOOOOOO0%OMMMKIFMMOOOOMM   젠{ b|0&⠠    ΠԠ  ̠̠      l0'  
BBB







1 


?                                                                 EM1 M M                                                 |        DFEM                                              l       R  D EM                                          lCoN       wC  EE{c                                   oy.N N           1EC DoEC y                           o      c        c-C. ECEDb{  o              oF Eo                   C.C.   EDE oE EG      l-EcEo   FC EE  {                   C.  RCCCFoD  oFFET      HDERE  C oRRo   FE                 1      GNNcc MMM  N       Hw    NN.C.M.                         zCH     GBT RFFR        GoRR  GN    MMT                       FCCF     HHT CwwCT       Howo YBT    .C                               FCDCF    N         T   FEDCR         o   |a     l{   1l            l           Y         lbob voy    o        o    l              l    |{      젠byo ᠠa   { l        l{  | o  vaa     ᠠ~    b{    o  |oow  {    ᠠ 1  l ~   a l{x⠠    |  {t  lx |~   l|     x{v⠠a t     { |         ~ vl  ⠠  {      v  xw      {x~   |1  ~~{    |       |    vaa      |      11I1	OOO@@@BBBFFLMMMMMOOOOOOO@@@@@BBBDFFFLLLLMMMMMMOOOO@@@@BBBBBBBBDDDD1
FFFFIIJJLLLLLMMMMMMOOOOOO@@@BBBBBBBBBDDDDDFFFFFIIIIJJJLLLLMMMMMMMMOOOOOOO@@@BBBBBBBDDDDDFFFFFFFIIIIJJJJJLLLLLMMMMMMMOOOOOOOO@@@@BBBBBBBDDDDDDFFFFFIIIIIJJJJJJLLLLMMMMMMOOOOOOOO@@@@@BBBBBBDDDDDDDFF FFFIIIIIIJJJJLLLLLMMMMOOOOOO@@@@@BBBBDDDDDDDFFFFFIIIIIJJJLLLLLMMMMOOOO@@@@@BBBDDDDDDFFIIJJLLLMMMOO  @@@@BBBBBBBDDDDDDFFFFFIIIIIJJJJJJLLLLMMMMMMOOOOOOOO@@@@@BBBBBBDDDDDDDFF VEC 9}r5'0"aYmM[2P<C`GimVywv-
cc    q ++ t n   J     L%   d1 6C g  n n  U] | 7O7O7Q/P b                     1VECD     D	DD< 6 ; ? ? BDD	EE I H C ? @ CED	EEI!H+6<CEEDDD< 6565<;744-*4+6 :BDDD	   } m`j   D 1  }k`auwy~sv} D	   D	       DB:433:x9u6z2z22/-{+x/t3l3q+c3b5m9@1BBBBD	BB?<<84:BD	CCGF?<=@CDCCCCCAo;b6mGGCD;<AA;;D
34}9y8z3z3{3{323D
////w+Dzw1i$a#b"lwD$gfb`__`ry w r g [RIDCBCH
IP N K C 4D V q    x	tkgD
]YYHIRZY\]D~VVWYY1^disrv%-+,1,(*!
                      s p q W W H D W O1 ? > ; ; 8                              s      g  |  i X = !6 9G :R 7d -j *} !  ,       ' / - 0 5/./:'= =CDFJVD1D

    D"D
          D     
D$()+1!$"%$DD	D,.1/)$*,D('$  #'(DD1DD          D! ! ! # + 7 9 A < G G H =  ! D!    # + 3 3 6 + " ! D          D     1 D    D     D       
    	      D                D       D       1 D        D      D             
                             D                D           1                D      D	 
    !* & & $ $   	 DD+ + / % & & ( + D	/ 1 2 3 1 - $ %1 / D< 9 2 0 D; ; 4 6 J K I D4 )$#$%((**23@N K = 4 D)*0,**)DSQOPWY\ \ [ OAMSD444*))2654414D4984++4D:E 4:D
"!'("	"D	#D	   $'
$ D           # D    
  1  D                 Dq   z qD       D  
         D $ $ ) * $ $D * - . 1 %   $ ' ) $1 $ $ ( + *D!0254 .(.!0D . - * % %( , .D            D                                D        D         D     Z            D` 8r .x + "        %p 'k 9z ; 8   DN  i  o  u  y        |    ~  }                                                        1HILEINSTR(AD$,RIGHT$(T$,1)):T$=LEFT$(T$,LEN(T$)-1):LOOP:RETURN 112 Y=.:AJ$=T$:AF=LEN(T$):AG=. 113 IFAF=.THENBEGIN 114 Y=-1:RETURN 115 BEND 116 FORAH=.TO31:O$(AH)="":NEXTAH:FORAH=1TOAF:AK$=MID$(AJ$,AH,1):IFAK$="("ANDX=1THENAG=1 117 IFAK$=")"ANDX=1TH1ENAG=. 118 IFINSTR(Y$,AK$)<>.ANDAG=.THENBEGIN 119 T$=O$(Y):AD$=" ":GOSUB 110:GOSUB 111:O$(Y)=T$:Y=Y+1 120 BEND:ELSEBEGIN:O$(Y)=O$(Y)+AK$:BEND 121 NEXTAH:T$=O$(Y):AD$=" ":GOSUB 110:GOSUB 111:O$(Y)=T$:T$=AJ$:RETURN 122 IFLEFT$(T$,2)="^^"THENBEGIN 1231  T$=RIGHT$(T$,LEN(T$)-2):RETURN 124 BEND 125 AI=.:AL$="":W$="":I=.:AJ=.:AM$="?<>=+-#*/^,.:;() ":Y$=AM$:FORAK=1TOLEN(T$):AK$=MID$(T$,AK,1) 126 IFAK$=":"ANDAI=.THENBEGIN 127 I=.:AL=.:BEND 128 IFIANDAK$="("THENBEGIN 129 AL=.:Y$=AM$:BEND 130 IFIANDAK$1!=")"THENBEGIN 131 AL=-1:Y$=AM$+"DPUB":BEND 132 IFAK$=A$THENBEGIN 133 AI=ABS(AI-1) 134 IFAI=1THENBEGIN 135 GOSUB 147:AL$=AL$+W$:W$="" 136 BEND:ELSEBEGIN:AL$=AL$+AK$:AK$="":BEND 137 BEND 138 IFAI=1THENBEGIN 139 AL$=AL$+AK$ 140 GOTO 145:BEND 141 2&IFINSTR(Y$,AK$)<>.THENBEGIN 142 GOSUB 147:AL$=AL$+W$:W$="":IFAK$=" "THENAK$="" 143 AL$=AL$+AK$ 144 BEND:ELSEBEGIN:W$=W$+AK$:BEND 145 NEXT:GOSUB 147:T$=AL$+W$:RETURN 146 END 147 IFW$=""ORW$="_"THENRETURN 148 IFVAL(W$)<>.THENBEGIN 149 AJ=.:RETURN 1#VEC?C~    8?D, L  F  B  >  <  8  6  4 4 6  8 $< 2@ HD RF `J hN jP fR `T RV HX @X 8Z 2\ .\ $` ` b f 
h h d  `  \  Z  X  V  T  T  P  N  L  L D0 V  R   R , P H N b N j P r N ~ P  N  P  P  R  T  1$V  X  X  Z  \  ^  f  l  p  x  |  |                 d  R  <  .                r  h 
 b 
 Z D'          2 > H P B < 8 4 0 . ( "                    1%                   D#                 z n ^ P 
B : . ( "   & 0 4 8  8          *  4  J  X  l  |  D! 8 4 2 , $ "     ",621&4:8<>D$R&^(j*n.d0`4\6X8 8Dbb
hjnr| &" ~p
l
hD | x r t v x        D               1'        x z ~  D	
D3                     * 6 B P V ^ h r | ~ z x l j d X T RL2 
B8.&  D. @ \ l ~ ~ z l ^ T D : D| (| 6~ 2 * "  ?DF                $  6  D  P  `  j  r  ~                                    2     ~  | z x v t p n l f  d  j  p  v  x  z  z                   ~  r  d  X  L  @  8  .  &  D$4 4 ,6 48 :< @> L@ \B nD zF H J L N |P tR lT dV XX PX DZ :Z JX RV ^T hR 2jP fN ^J VH NF <B 2@ $< 8 6 Dh b b ` $` d f f D2\ :Z BZ D          D      "  4  :  D  H  D  B  >  4  .  "    D8t                                     2 r 
j ^ T J > 0 , ( $, (* *& .$ 4" 8 8 , $ " ( 6 F 
T ^ t                    DP Z \ X R J F B 6 * . 0 6 < D J D  (   D      2       
 
              D'.:DLT\\
^b`XZbjv $&(.026~8\8`2d0n.h*Z(N&D$>8:622
40D       2           ~       D0                                             2   ?D!   ( $ 0 $ 6 ( @ * J * V , d * z (  (  *  ( | *  . z 2 r 2 l 0 ` . Z , R 0 H 2 P . H , @ , : . 0 . $ , 2 * ( (  & 4 ( . & $ $ D	Z T V Z ^ ` ^ \ Z Dh h f j n r r t t r n l j @ "  $ @ $  2( @ (  , @ ,  , @ *  * @ *  , @ ,  , @ .  . @ .  0 @ 2  2 @ 0 0 @2  2 Dz L  J  F  B  H  J  L ?@ (  , @  0  . @ 8  4 @ @  > @ <  : @ :  8 @ 8  6 @ B  @ @ > & : @ B  @ @ J  F @ F   D @  D ( B @( B , > @ J2 " H @" H ( F @( F , B @& N , J @, J 0 F @0 F 2 D @4 > 8 : @8 : @ 8 @> 8 D 6 @D 6 J 6 @H > N : @N : T 6 @J F P D @B F H B @8 L < H @2 L 4 J @4 H 8 F @T @ Z < @Z < ^ : @^ . ` 2 @` 2 f 6 @Z @ ^ > @` B b > @f @ h < @d : l 8 ?@l @ n < @r D x @ @t > x : @x :2	 | 8 @p : t 6 @ <  8 @ @  : @ B  > @ :  8 @ 6  2 D R  R  T  X  Z  `  b  f  j  r  ~   
  
     x  j 
 b  X  T D       v  p  h  t  |         @    D    
          ?D :  6  2  0  6 2
 :  <  > ?D :  4  0  0  2  4  6  8  8  8  4 D
d J z L t H | F  D t F l H h D b D h F D> L H H N H R F N J R L H L DZ J ^ H b F ` J D N  N  L  J  L 
 L DT R N L T ^ d h p t z p d l n h ` V DP2 X Z \ b ` ^ \ X T P L N N D%6 8 8 6 8 : < 8 @ < > F @ F L D @ @ J N J F @ D J F @ D < B < < @ @ > > : Df\ jZ nX l\ jd fj h` DBl Jn Nn Xj Z2f Tj Rl Tf Tb Pj Ll Lh Hl D  z  v  r  l "h "d $n &v $| " " D                                      D                                  D
        2            D                            D                                            D                D
                    D`  2h  p  t  t  v  n  h  f  d  b  Dd  b  ^  \  ^  `  DH  @  J  H  N  N  N  T  V  T  X  Z  \  V  P  ?D6l 6t 4~ 8 : : 8 6 8 8 6 6 4 8 8 4~ 0x .z (x *v 0x 0n 2v 4z 6t ?D2 2 4 4 82 6 4 D, 0 2 0 D4 6 4 2 2 0 , , , * , * , * ( . . 0 0 . , , 0 2 4 6 6 6 D  $ & & & $ $ & $       "       D       2 D                              ?D2 4 8 > B L T Z P L H F D > 6 Dv p j h j n p p t n r Dp | ~  2x t DH L T Z P X ^ b X T Z ` V N Db f f f d j t j j r | t p l x n f d ?D
~          Db
bd b d d ` ^ ` ` ^ V T R RV Z 2\ \^`
DN N P P L H N L J F D J L JN D 
       
D &   
              " & , 0 (    $ &D
X X X (V 0V (V  R N T V D: 88 44 024 *6 "6 4 "0 . $0 *. 0* 2, 6. 8?D  |  p  j  b  V  N  H  J  V  b  n  v  ~  ?DH  D  <  2  ,  "  2  >  L  V  b  V  N  J  D        D             D2      L
 L x 9  (  c  N X`x 9  (  o  N X`   `%!&!'!(!`%!&!'!(!` {   Lc `   !Lo `       `    #!;  ```   #!  `$!     #!;$!;`8`    #!#!  .i	 r`    #!#! `      CIIKHHBBJAAGGAAAJBHOBC	C@BOKBBJAAADDDAAABLOBC				@BBKHBJGAAADDD2x |              ~ x t |  |  Dj x |  
|
vrn x|z v p D
D    

    2  D         D  
DDt |             z | z x D"     ~ r |    
 2    0 6 @ 2 * $   
            D, $                        $ * 2 2 8 0 . D8 8 : < @ H > : D2F4L*NNP"TTR
XZ ^^\bhnlj p t trnjd"`"\(V,N0@    @    @  
  @
    @    @    @    @    @    @    @    @    @    @    @  "  @" 2 &  @    @4  <  @b  \  @Z  V  @R  J  @L  D  @    @|  ~  @    @    @    @    @    @    @    @    @    @    @    @    @    @    @    @    @r  p  @v  x  @    @ 2 @  @  @  @  @  @  @  @  @  @    @    @  @   @    @    @   @   @  @( " @  @  @   @    @0l .f @.f ,b @2j 4d @4d 2` @*p (2j @(j (d @n h @l h @l j @8p <n @<n >j @P R~ @R~ Rv @Rv Pn @H J @J Lv @Lv Ln @: @ @N~ B @D| Fr @Fr Df @>| >v @>v <n @V X~ @X~ ^t @^t dn @dn jl @`~ dx @dx dt @lr nl @nl pf @pf n^ @rp th 2@th v\ @v\ zX @zl ~b @~b ~Z @~Z T @b h @h j @j j| @j| nt @h l @l n @n p| @^ b @b d @d j @d h @r t @t v @v x~ @x~ |x @|x |r @|r |n @v z @z | @| x @x p @~  @  @2 z @ ( @  @  @  @   @  @ 6 .@ . @  @  @  @ 0 "@ " @ 0 $@ $ @  @  
@z 2x (@x (z @b 2f (@f (j @j l @L 6L *@L *N  @B 6> (@> (< @D &B @B 2> @B  F @ 
 @z ~ @  @  
D	         @&   @   @  @( ( @( & @& $ @B B @B @ @@ < @< > @> > @> < @4 6 @6 4 @2 . @" @  @@2  @  
@R T @Z \ @p z @h l@h p @p v @ @
@  @  @x  @  @@ @"*@*2@28@8(@(@60@0,@.(@  @  @  @  @ 2! @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @@8D2@D2F*@F*F @B&B@B>@:<@4(62@62482"@.800@00."@.",@($&.@&. 2@ 26@6*@*"@$.@$(@vz@zz @z | @8 6 @6 6 @6 : @x (x @(x 0z @0z <| @< B @6 4 @4 6 @2 0 @0 4 @2 0 @0 , @, * @* " @2#"  @   @  @  @  @  @ | @  @ 
 @
  @ | @x t @t n @n j @d T @L H @B D @> 0 @&   @F  P* @\2 ^2 @V. \2 @2 |$ @d> r@ @r@ |B @|B F @F J @J N D2$ "$""@ @ @?
DP` b ^v \d ZT bf fr l r v x x v p j d d ^ X T P H B @ @ > > < > 8 6 4 6 8 4 0 * & $ " $          
  2%                          ( > P Z D
          ?D    
         D
&   $ " ( , , 0 , Z * ? @h l @l p @p t @^ ` @` d @p t @t v @d f @t v     ( > P Z D
          ?D    
         D
&   $ " ( , , 0 ,3'150 BEND 151 IFW$="0"THENBEGIN 152 W$=".":RETURN 153 BEND 154 IFAJANDAC=.THENBEGIN 155 GOSUB 196:AJ=.:RETURN 156 BEND 157 IFW$="GOTO"THENA=1 158 IFW$="GOTO"ORW$="GOSUB"ORW$="TRAP"THENBEGIN 159 AJ=1:BEND 160 AM=. 161 IFLEFT$(W$,1)="$"THENBEGIN6  /- P                                                                                                                                                                                       3$,1):AD=0:IFC$="%"THENAD=1 172 IFC$="$"THENAD=2 173 IFC$="&"THENAD=3 174 FORAE=.TOF(AD) 175 IFW$=L$(AD,AE)THENBEGIN 176 GOSUB 213:W$=AH$+E$(AD):AE=F(AD):AM=1:BEND 177 NEXTAE:IFAM=1THENRETURN 178 FORAE=.TOF(4) 179 IFW$=L$(4,AE)THENBEGIN 180 W$=M$3(AE):RETURN 181 BEND 182 NEXTAE:AO=-1:FORAE=.TOI-1 183 IFW$=P$(AE)THENBEGIN 184 GOSUB 295:AO=AE:AE=I-1:BEND 185 NEXTAE 186 IFAO<>-1THENBEGIN 187 RETURN 188 BEND:ELSEBEGIN:IFASC(W$)=222THENRETURN 189 BEND 190 IFINSTR(J$,AN$)<>.AND(W$="R"ORW$="P"3ORW$="U8"ORW$="W")THENBEGIN 191 RETURN 192 BEND 193 Z$="?UNRESOLVED IDENTIFIER: '"+W$+"' IN LINE "+STR$(J):SLEEP1 194 GOTO 108:RETURN 195 RETURN 196 W$=H$+W$+H$:RETURN 197 AM=.:FORAE=.TOH-1 198 IFW$=N$(AE)THENBEGIN 199 W$=STR$(G(AE)):AE=H:AM=1:B3END 200 NEXTAE:IFAMTHENRETURN 201 Z$="?UNRESOLVED LABEL: '"+W$+"' IN LINE"+STR$(A%(S-1)):SLEEP1 202 GOTO 108:RETURN 203 AP=.:FORAQ=.TOLEN(AF$)-1:AO$=MID$(AF$,LEN(AF$)-AQ,1) 204 IFAO$<>"1"ANDAO$<>"0"THENBEGIN 205 BANK4:POKE65288,132 206 GOTO 193:BE3ND 207 IFAO$="1"THENAP=AP+E(AQ) 208 NEXTAQ:W$=MID$(STR$(AP),2):RETURN 209 STOP 210 TRAP 211:AR=DEC(AE$):W$=MID$(STR$(AR),2):TRAP:RETURN 211 TRAP:BANK4:POKE65288,131 212 GOTO 193 213 IFAE<26THENBEGIN 214 AH$=CHR$(65+AE):RETURN 215 BEND 216 AT=MO3D(AE,26):AS=INT(AE/26)-1:AH$=CHR$(65+AS)+CHR$(65+AT):IFAH$="DO"THENAH$="D1" 217 IFAH$="GO"THENAH$="G1" 218 IFAH$="TO"THENAH$="T1" 219 IFAH$="DS"THENAH$="D2" 220 IFAH$="DT"THENAH$="D3" 221 IFAH$="EL"THENAH$="E1" 222 IFAH$="ER"THENAH$="E2" 223 IFAH$3="FN"THENAH$="F1" 224 IFAH$="IF"THENAH$="I1" 225 RETURN 226 STOP 227 BANK4:AU=65280 228 IFPEEK(AU+.)=ASC("S")ANDPEEK(AU+1)=ASC("K")THENBEGIN 229 P=PEEK(65287)AND8:X$="":AV=AU+16:DOWHILEPEEK(AV)<>.:X$=X$+CHR$(PEEK(AV)):AV=AV+1:LOOP:IFPEEK(65287)AND13THENRETURN 230 PRINT"FILENAME? "+X$:PRINT"";:BEND 231 INPUT"FILENAME";AL$ 232 IFAL$=""THENBEGIN 233 PRINT"NO FILENAME SET":END:BEND 234 POKEAU,ASC("S"):POKEAU+1,ASC("K"):FORV=1TO16:POKEAU+8+V-1,ASC(MID$(AL$,V,1)):NEXTV:X$=AL$:RETURN 235 AW=65328:B3	ANK4:FORV=.TO16:POKEAW+V,.:NEXTV 236 IFAI$<>""THENBEGIN 237 AP$=AI$ 238 BEND:ELSEBEGIN:AP$="ELEVEN.OUT":BEND 239 FORV=1TOLEN(AP$):POKEAW+V-1,ASC(MID$(AP$,V,1)):NEXTV:RETURN 240 GETAL$ 241 IFAL$<>""THENBEGIN 242 INPUTAX:IFAX=1THENSTOP 243 BEND 243
4 PRINT"EDMA 0,$D400,$8000000,$2001:NEW RESTORE":PRINT"RUN";:BANK128:POKE208,2:POKE688,13,13:END 245 R=1:FORAY=.TOF(4) 246 IFL$(4,AY)=T$THENBEGIN 247 R=.:BEND 248 NEXTAY:RETURN 249 F$=MID$(F$,9):GOSUB 254 250 IFT$=""THENBEGIN 251 PRINT"ERR3OR: NO STRUCT NAME FOUND":SLEEP1:RETURN 252 BEND 253 P$(I)=T$:R$(I)=F$:I=I+1:RETURN 254 T$=F$:GOSUB 110:GOSUB 111:F$=T$:AQ$=" ":AZ=. 255 IFLEFT$(T$,1)=A$THENBEGIN 256 AQ$=A$+", ":AZ=2:BEND 257 AV=INSTR(F$,AQ$) 258 IFAV<>.THENBEGIN 259 T$=MID$(F$,31,INSTR(F$,AQ$)+AZ-1):F$=MID$(F$,INSTR(F$,AQ$)+AZ+1):BEND 260 IFAV=.THENBEGIN 261 T$=F$:F$="":BEND 262 RETURN 263 BANK.:BA=PEEK(M):F$=LEFT$(D$,BA):BB=POINTER(F$):BC=65536+WPEEK(BB+1):M=M+1 264 IFBA<>.THENBEGIN 265 EDMA.,BA,M,BC:M=M+BA:BEND 266 K=K3+1:AD$=S$:T$=F$:GOSUB 110:F$=T$:AI=.:BD=.:BANK1:RETURN 267 BD=INSTR(F$,"'") 268 IFBD<>.THENBEGIN 269 IFINSTR(F$,A$)<>.THENBEGIN 270 BD=.:BANK.:BE=PEEK(BB)-1:BF=WPEEK(BB+1):BANK1:FORV=.TOBE:BG=PEEK(BF+V) 271 IFBG=BTHENBEGIN 272 AI=ABS(AI-1) 273 BEN3D:ELSEBEGIN 274 IFBG=CANDAI=.THENBEGIN 275 BD=V+1:V=999:BEND 276 BEND 277 NEXT:BEND 278 IFBDTHENBEGIN 279 F$=LEFT$(F$,BD-1):BEND 280 BEND 281 RETURN 282 IFINSTR(F$,"IFDEF")=2THENBEGIN 283 T$=MID$(F$,8):GOSUB 245:O=1:BEND 284 IFINSTR(F$,"ENDIF"3)=2THENBEGIN 285 R=.:O=1:BEND 286 IFINSTR(F$,"DEFINE")=2THENBEGIN 287 W=1:GOSUB 49:W=.:BEND 288 IFINSTR(F$,"DECLARE")=2THENBEGIN 289 W=.:GOSUB 49:BEND 290 IFINSTR(F$,"OUTPUT")=2THENBEGIN 291 GOSUB 98:BEND 292 IFINSTR(F$,"STRUCT")=2THENBEGIN 293 3GOSUB 249:O=1:BEND 294 RETURN 295 AR$=T$:F$=T$:AX=-1:GOSUB 254:FORBH=.TOI 296 IFT$=P$(BH)THENBEGIN 297 AX=BH:BH=I:BEND 298 NEXTBH 299 IFAX=-1THENBEGIN 300 F$=AR$:T$=AR$:RETURN 301 BEND 302 GOSUB 254:AS$=T$:BI=INSTR(AS$,"("):T$=R$(AX):GOSUB 112:A3X=1:BJ=.:FORBH=.TOY 303 IFO$(BH)<>""THENBEGIN 304 PRINT"ARGS$(";BH;")=";O$(BH) 305 IFBI=.THENBEGIN 306 T$=AS$+""+O$(BH):PRINT"STRUCT: ";T$:AA$=T$:GOSUB 58:BEND 307 IFBI<>.THENBEGIN 308 T$=LEFT$(AS$,BI-1)+""+O$(BH)+MID$(AS$,BI):PRINT"STRUCT: ";T$:3x)Iy***JZ٪[i)\[{}(wO,W	I9Y)YYɹi
ii*Yj)Kػ<hKݛw޻xH))	YIɉJh(kZ'ՖG7WGwwׇ(hHWI7	i+vu%ɴ9&6FfFfVFVg'&g	8x(+c3Td4t3U5Vdg(6S6ҩ6bqrCS##CC#sSӓҤӂ%2цQsP`BBbRbrrb²BS1%@4 p!210q R p!Q!!!11A!AAQAAAAqQAA1`2 a p0pp E`@0A p @ 0  0         0 0000000 00 @0@0 P  `  @ 0     QsP`BBbRbrrb²BS1%@4 p!210q R p!Q!!!11A!AAQAAAAqQAA1`2 a p0pp3AA$=T$:GOSUB 58:Q$(BJ)=AA$:BJ=BJ+1:BEND 309 NEXTBH:T$=G$:GOSUB 341:G$="":GOSUB 254 310 IFT$<>"="THENBEGIN 311 F$="":RETURN 312 BEND 313 GOSUB 254:BJ=.:BK=.:BL=.:DOWHILET$<>"" 314 IFT$="_"THENBEGIN 315 J=J+1:GOSUB 263 316 GOTO 336:BEND 317 IFBL=.3ANDT$<>"["THENBEGIN 318 PRINT"ERROR: EXPECTED [":SLEEP1:STOP:BEND 319 IFBL=.ANDT$="["THENBEGIN 320 BL=1 321 GOTO 336:BEND 322 IFBL=1ANDT$<>"["ANDT$<>"]"THENBEGIN 323 PRINT"ERROR: EXPECTED [ OR ]":SLEEP1:STOP:BEND 324 IFBL=2THENBEGIN 325 IFLEFT$(T3$,1)="]"THENBEGIN 326 BK=BK+1:BJ=.:BL=1:T$="" 327 GOTO 331:BEND 328 IFRIGHT$(T$,1)=","THENBEGIN 329 T$=LEFT$(T$,LEN(T$)-1):BEND 330 T$=Q$(BJ)+"("+STR$(BK)+")="+T$:GOSUB 122:GOSUB 341:T$="":BJ=BJ+1 331 BEND 332 IFBL=1ANDT$="["THENBEGIN 333 BL=2:BJ3N.OUT":BEND 237 FORV=1TOLEN(AO$):POKEAV+V-1,ASC(MID$(AO$,V,1)):NEXTV:RETURN 238 GETAK$ 239 IFAK$<>""THENBEGIN 240 INPUTBN:IFBN=1THENSTOP 241 BEND 242 PRINT"EDMA 0,$D400,$8000000,$2001:NEW RESTORE":PRINT"RUN";:BANK128:POKE208,2:POKE688,13,13<:END 243 R=1:FORAX=.TOF(4) 244 IFL$(4,AX)=T$THENBEGIN 245 R=.:BEND 246 NEXTAX:RETURN 247 F$=MID$(F$,9):GOSUB 252 248 IFT$=""THENBEGIN 249 PRINT"ERROR: NO STRUCT NAME FOUND":SLEEP1:RETURN 250 BEND 251 P$(I)=T$:R$(I)=F$:I=I+1:RETURN 252 T$=F$:GOS3=.:BEND 334 IFBL=1ANDT$="]"THENBEGIN 335 BL=.:BEND 336 GOSUB 254:LOOP:T$="":F$="":G$="":AT$="Z":RETURN 337 IFRIGHT$(V$,1)="_"THENBEGIN 338 V$=LEFT$(V$,LEN(V$)-1):A=.:BM=1 339 BEND:ELSEBEGIN:BM=.:BEND 340 RETURN 341 IFLEN(V$)+LEN(T$)+LEN(STR$(Q))>3=159THENBEGIN 342 A=1:BEND 343 IFAT$<>""THENBEGIN 344 T$="":AT$="":RETURN 345 BEND 346 IFA=1THENBEGIN 347 K$(Q)=V$:V$=T$:A%(Q)=J:Q=Q+1:A=. 348 BEND:ELSEBEGIN 349 IFV$<>""ANDBM=.ANDRIGHT$(V$,1)<>":"THENBEGIN 350 V$=V$+":":BEND 351 V$=V$+T$:BEND3 352 IFPTHENPRINT"<<"Q;T$ 353 RETURN 354 FORAD=.TO3:FORAE=.TOF(AD):GOSUB 213:PRINT#1,STR$(S)+" REM "+L$(AD,AE)+" = :"+AH$+E$(AD)+":":S=S+1:NEXTAE:NEXTAD 355 REM NEXTLINEFLAG = :A: 356 REM DBLQUOTECHAR = :B: 357 REM SNGLQUOTECHAR = :C: 358 REM3 I = :D: 359 REM BINCONV = :E: 360 REM ELEMENTCNT = :F: 361 REM LABELLINENO = :G: 362 REM LABELCNT = :H: 363 REM STRUCTIDX = :I: 364 REM SRCLINENO = :J: 365 REM CURSRCLINENO = :K: 366 REM CB = :L: 367 REM CURRATTICADDR = :M: 368 REM T4OTALLINES = :N: 369 REM DELETELINEFLAG = :O: 370 REM VERBOSE = :P: 371 REM DESTLINENO = :Q: 372 REM INSIDEIFDEF = :R: 373 REM CURDESTLINENO = :S: 374 REM S1 = :T: 375 REM S2 = :U: 376 REM R = :V: 377 REM DEFINEFLAG = :W: 378 REM IGNORE3,AB:55042,4:55041,0:55045,0: . (147);:(14);:"AY OF THE MPLODING OOT":"=========================":" GAME MADE BY THE 65 COMMUNITY!":A$:A$"" .  !3,3840,160,264192:(142);: .! CA270336:AE0:BN0:"LEVEL1-BG.DAT",P(CA): 43: 43 4: 38:AE1 5/" BN1:"PLAYER.DAT",P(CA): 43: 38:AE1:BN2:"PLAYER2.DAT",P(CA) h/#  43: 38:AE1:BN3:"PLAYER3.DAT",P(CA): 43 /$  38:AE1:BN4:"PLAYER4.DAT",P(CA): 43: 38:AE2:BN5 /% "DUCK.DAT",P(CA): 43: 38:"PAL.BIN",P(262400),R:3! 0& CABS:AF(CA0):CACAAF: r0' CA262400BZ163:V.15:53504V16,(CA):CACA1:53760V16,(CA):CACA1:54016V16,(CA):CACA1:V: 0( V.20:262144V,.:V:262144,129:262145,0:262146,7:262147,134:262148,32:262149,0:262150,0:2623"151,0 j1) 262153,4096:262155,5:262156,4096:262158,5:262159,0:262160,0:!3,3840,160,327680:!3,160,32,331520:!3,4000,79,331776:AJ. 1* CD1:BQ4:BOBQ:AK.:CE1:BR2:BPBR:CG.:CHCF(CD,0):AQ.:AR23:AS60:AT23:AU18:AV.:AW.:AX.:D2.:AM.:A3#N1:D3.:DU50:DV50:DW0: a2+ BSCA:C(AE)(CA2):CACA3:I.:IC(AE):D(BN,I)CA:J(CA2):K(CA3):CACA20JK:II1::CABS: 2, AI335872:P.C(0)1:CAD(0,P):L(CA0):M(CA1):J(CA2):K(CA3):NLJ1:OMK1:E(P)AI:XMO:V.1:!.,J,3$(CA20),AI 3- AIAIJ:V:CACAJ:X:P: 03. 262155,5:U.C(0)1:PBX(U): 193:U: >3/ AQ25 J30 AQAQ1 U31 : n32 AS.(DW2DW3) 33  247:ASAS1: 34 DW0 35  247: 36  37 AJ.: 38 AQ. 39 AQAQ1 3: : 3; 3%AS60 3<  248:ASAS1: 3=  4> AJ.: 4?  67: 81 %4@ A$"X" B4A AJ.:CHCF(CD,7):CG.: H4B  j4C A$:A$","BZ.BZBZ1: 39 4D A$"."BZ11BZBZ1: 39 4E A$"1" 4F A(A1,2):!3,3840,160,327680:!3,3840,160,264192: 43&G A$"D" 4H CD1 4I CD2:BO5 5J ::CD1:BOBQ: 35K CHCF(CD,0):CG.:AJ.: G5L A$"<"BQ1 \5M BQBQ1:BOBQ: p5N A$">"BQ4 5O BQBQ1:BOBQ: 5P  5Q F(2):GF128:HF127:H8H. 5R F.CH3 5S CGCC(1,3)14' 5T AJ.:CH4:CG.: 5U  5V F. 
6W G. 6X H3D2. 47 06Y H7D2. 56 A6Z H5CH0 R6[ CH3:CG.: c6\ H1D2. y6] CH8:D21:CG.: 6^  6_ G128D2. 6` BT(AM,H)2CHCF(CD,0) 6a CHCF(CD,1):1AM3,4000,5,3  162 AE$=MID$(W$,2):GOSUB 210:RETURN 163 BEND 164 IFLEFT$(W$,1)="%"THENBEGIN 165 AF$=MID$(W$,2):GOSUB 203:RETURN 166 BEND 167 AA$=" "+W$+" ":FORAN=.TO6 168 IFINSTR(I$(AN),AA$)<>.THENBEGIN 169 AN$=W$:GOSUB 195:RETURN 170 BEND 171 NEXT:C$=RIGHT$(W4: 7j CHCF(CD,0)(H7H3) 7k CGCG1: 8l CHCF(CD,0) #8m CGCG1: 48n CH3H5 H8o CGCC(1,3) a8p CGCC(1,3)1:AJ1: g8q  n8r  {8s CH8 8t CGCC(1,8) 8u CGCC(1,8)1: 8v  8w D2. 8x D21 8y ARAR42:AR.D22 8z  8{ D22 8| ARAR2 9} AR23 .9~ AR23:D2.:CHCF(CD,0):CG.: 59  <9  R9 CGCC(CD,CH) _9 CH7 l9 AU. z9 CH4:CG. 9 ::CGCC(CD,CH)1: 9  9  9 AJ1CH3 9 CH3:CGCC(1,3)41 9 ::CHCF(CD,0):CG.: 9  : AQ(AS5)AM1 : AS(AQ5)AM. !:  .: DW2 B: AS(AQ5)AN1 V: AQ(AS5)AN. ]:  k: CJ0 z: CICI1: : CICC(CE,CJ) : CJ7 : AW. : CJ4:CI. : ::CICC(4CE,CJ)1: :  :  : AK1CJ3 ; CJ3:CICC(1,3)1 *; ::CJCF(CE,0):CI.: 0;  7;  C; CI7 U;  180:A%1 g;  175:A%1 y;  166:A%1 ;  ; A%. ; (AQAS)8CJ0 ; A%1:V((1)8) ; V1 ; C4J1:CI.:1AN3,4000,5,1,100,1000,3: ; V2 (< CJ2:CI.:1AN3,2000,5,1,100,1000,3: /<  5<  >< A%. Q< (AQAS)8 i< ((1)4)3 184 u< A%1: {<  < A%. < (AQAS)20 <  184:A%1: <  < CJ0:CICI1:CI4CC(CE,CJ)CI. < ASAQ < ASAS1 = ::ASAS1: =  9= 262155,4:AL1-N262150,5:՜N262150,5 = BD(BN,P):L(B0):M(B1):J(B2):K(B3):LBU:MBV:NLJ1:OMK1:T331776LM80:AL1TTJ1 = QB20:RMO:YQ:ZT:AAJ:A4B255: 30:QQJ:TT80:R:A 249 =  264: > N262150,5 > BD(0,P):L(B0):M(B1):J(B2):K(B3):NLJ1:OMK1:T331776LM80:QB20JK:BW(P)(BW(P)80,80):BW(BW(P)):QE(P):RMO > YQBW:ZT:AAJ:AB255: 30:QQJ2:TT80:R:4 >  63: 46: 220: 244: 223: 199:A%.:A%. ?  299: ?  196: ? AUAV *? AVAU C? AVAV1:VAV: 216: J?  X? AVAU q? VAV: 217:AVAV1: x?  ?  ? AWAX ? AXAW ? AXAX1:VAX: 218: ?  ?4	 AXAW ? VAX: 219:AXAX1: ?  ?  ?  #@ A1V2,48:"";:A1V2,49:"";: M@ A1V2,48:" ";:A1V2,49:" ";: {@ A78V2,48:"";:A78V2,49:"";: @ A78V2,48:" ";:A78V2,49:" ";: @ DW2DW3 @ 4
 105: @  104: @  106: 224: @ DW0 A DUDU1:DU.DW1 A  A  "A DW1 +A CE1 8A BR2 AA BR3 TA ::BR2: A BPBR:DW2:AS60:AT23:AW18:AX.:D3.: A  A DW2 A  143:AW.DW3:DV50 A  A 4 A DW3 A  143:AM.:DVDV1:DV.DW0:DU50 A  A  B  B A AB !.,3840,327680,264192:!3,3840,160,327680: tB !.,3840,331776,267911168:!3,3840,79,331776: B V.7:BW(V)BW(V)BY(V):V: B V.7:BW(V)BW(V)BY(V):V: 4B CAB4:BD.3:AY(CA.):AZ(CA1):BA(CA2):BB(CA3) C (AY.AZ.BA.BB.) %C  287:BC7 2C BD3 AC BC2: 257 UC :: 257: \C  nC CACA4:BD: CWAY:XAZ:V112: 259:WBA:XAZ:V110: 259:WAY:XBB:V109: 259:WB4A:XBB:V125: 259:WAY1BA1 0DXAZ:V64: 259:XBB:V64: 259:W:XAZ1BB1:WAY:V93: 259:WBA:V93: 259:X: MD(327680WX80)32 YDVV128 xD::331776WX80,1: DBC2331776WX80,BC D327680WX80,V: DBD(BN4,P):APAL D	AG0 D
PCB(CE,CJ,CI):AHD(BP,P):AOAN:BUAS:BVAT: EAG1 ?EPCB(CD,CH,CG):AHD(BO,P):AOAM:BUAQ:BVAR: EAY(B16.):AZ(B161):BA(B162):BB(B163):AY.AZ.BA.BB. F 287:BFAY:BGAZ:BHBA:BIBB:L4(AH0):M(AH1):LLBU:MMBV:J(AH2):K(AH3):CAAH4:BD.2:AY(CA.) JFAZ(CA1):BA(CA2):BB(CA3): 287:BJAY:BKAZ:BLBA:BMBB: 291 WFA%1 dFAG1 FCHCF(CD,7):CG.:AU.AUAU1 FAU. F1AM3,8000,50,1,435,1004,.,4000 F::1AM3,8000,10,1,435,200,.,4000: F FAG0 GCJCF(CE,7):CI.:AW.AWAW1 ,GAW. QG1AN3,8000,50,1,435,100,.,4000 G::1AN3,8000,10,1,435,200,.,4000: G GBD2: GCACA4:BD:ALAP:CAD(B4N,P): GAL. G AYLAY:AZMAZ:BALBA:BBMBB #H!::BEAY:AYLJBA1:AZMAZ:BALJBE1:BBMBB: )H" YH#((BJBH)(BLBF)(BKBI)(BMBG)):A%1 lH$::A%.: rH% H&#2,(C$),R,U8:2,CL:CM.CL1:CN.5:2,B$(CN,CM):C4N:CM:2,B%:CO.9:2,J$(CO):2,CX(CO):2,CY(CO) >I'2,CZ(CO):2,DA(CO):2,DB(CO):2,DC(CO): 298:CO::CO.10:2,K$(CO):2,DF(CO):2,DG(CO) I(2,DH(CO):2,DI(CO):2,DJ(CO):2,DK(CO):2,DL(CO):2,DM(CO):CO:DN.:2,DN:CO.:CODN:2,D1(CO) I)2,4DP(CO):COCO1::#2:CM.: I*
CO,CX(CO),CY(CO),CZ(CO),DA(CO),DB(CO),DC(CO): J+A%.:(1).A%1: $J,VD1(DQ) 1J-V. KJ.CMV:CS.CSDP(DQ) ]J/ 320:A%1: jJ0V1 J1VDP(DQ):(V):B%V: J2V2 J3VDP(DQ):DDV:DEV:4 336: J4V4CP1:CT. J5V5CP2:CT. J6V6CQ1:CT. K7V7CP.:CQ. K8V8CRDP(DQ) 0K9V10CT1:CP.:CQ. KK:V9CUDP(DQ):CU,CU ]K;CS.CSCS1 pK<CS.DQDQ1 K=V3DQ. K>DQDNDR.:DQ1 K? K@D$B$(.4,CM):E$B$(1,CM):F$B$(2,CM):G$B$(3,CM):H$B$(4,CM):I$B$(5,CM) KACT1 RLBD$:(CR):,E$:(CR):,,F$:(CR):,,,G$:(CR):,,,,H$:(CR):,,,,,I$:(CR): YLC kLDCP.CQ. LED$,E$,F$,G$,H$,I$: LF LGCP1CQ. LHD4$,E$,F$,,H$,I$:(CR):,,,D$: LICP1CQ1 MJD$,E$,F$,,H$:(CR):,,,D$,,F$: MKCP2CQ. TMLD$,,F$,,,I$:(CR):,,,D$:(CR):,D$:(CR):,,,,D$: fMMCP2CQ1 MND$,,F$:(CR):,,,D$:(CR):,D$,,,,F$:(CR):,,,,D4$: MO MPDE1 MQCVDF(DE):CW0:DK(DE)1DK(DE)3:CVDL(DE):CW1: NRDK(DE)2 NSCW2: gNT1,DF(DE),DG(DE),DH(DE),DI(DE),DJ(DE):2,DF(DE),DG(DE),DH(DE),DI(DE),DJ(DE): yNU  = :A: NV DATAADDR = :B: NW MAXFRAMES =4 :C: NX FRAMEADDR = :D: NY FRAMEDBLUPADDR = :E: NZ JDIRRAW = :F: O[ JFIRE = :G: O\ JDIR = :H: &O] FRMIDX = :I: 7O^ FRMW = :J: HO_ FRMH = :K: YO` FRMX = :L: jOa FRMY = :M: |Ob FRMX1 = :N: Oc FRMY1 = :O: Od FRAMEIDX = 4:P: Oe CDATAADDR = :Q: Of YY = :R: Og SCRADDR = :S: Oh CLRADDR = :T: Pi LIDX = :U: Pj K = :V: Pk X = :W: ,Pl Y = :X: APm SRCADDR = :Y: WPn DESTADDR = :Z: kPo LENGTH = :AA: Pp TRANSP = :AB: Pq DESTMBSEL = :AC: Pr4 DESTBANK = :AD: Ps FORM = :AE: Pt SZ = :AF: Pu CHARACTER = :AG: Qv OPPONENTDATAADDR = :AH:  Qw DBLUPADDR = :AI: 8Qx KNEELFLAG = :AJ: WQy BADDIEKNEELFLAG = :AK: kQz MIRROR = :AL: Q{ PLAYERMIRROR = :AM: Q| BADDIEMIRROR =40 THEN V = 0      FILTRES(FSROW) = V    BEND    IF FSCOL = 6 THEN BEGIN      V = VAL(V$)      IF V > 3 THEN V = 3      IF V < 0 THEN V = 0      FILTDIR(FSROW) = V    BEND    IF FSCOL = 7 THEN BEGIN      V = VAL(V$)      IF V > 2047 THEN V = 42047      IF V < 0 THEN V = 0      FILTMIN(FSROW) = V    BEND    IF FSCOL = 8 THEN BEGIN      V = VAL(V$)      IF V > 2047 THEN V = 2047      IF V < 0 THEN V = 0      FILTSWEEP(FSROW) = V    BEND  BEND.CHECKPIANOKEYS'----------------  '4$ :AN: Q} OPPONENTMIRROR = :AO: Q~ TMPMIRROR = :AP: Q PX = :AQ: Q PY = :AR: R BX = :AS: R BY = :AT: 1R PLAYERENERGY = :AU: JR LAGPENERGY = :AV: eR BADDIEENERGY = :AW: ~R LAGBENERGY = :AX: R X1 = :AY: R Y1 = 4  APPLY FILTER  PSTR$ = "X0"  IF FSEL <> -1 THEN PSTR$ = "X1"  ' DECIDE NOTE LENGTH  PSTR$ = PSTR$ + DUR$(SDUR, )  ' DECIDE OCTAVE  PSTR$ = PSTR$ + "O" + STR$(OCT)  ' WHICH NOTE TO PLAY  FOR K = 0 TO 11    IF A$ = KEYSIN$(K) THEN PSTR$ =4BRACKETS = :X: 379 REM ARGCNT = :Y: 380 REM BKTOPENIDX = :Z: 381 REM BKTCLOSEIDX = :AA: 382 REM EQUALSIDX = :AB: 383 REM DZ = :AC: 384 REM TY = :AD: 385 REM ID = :AE: 386 REM ARGSLISTLEN = :AF: 387 REM IG = :AG: 388 REM AI = :AH: 389 R4"EM QUOTEFLAG = :AI: 390 REM TG = :AJ: 391 REM II = :AK: 392 REM RI = :AL: 393 REM DR = :AM: 394 REM T = :AN: 395 REM CI = :AO: 396 REM BR = :AP: 397 REM B = :AQ: 398 REM VL = :AR: 399 REM N1 = :AS: 400 REM N2 = :AT: 401 REM BA = :AU: 402 RE4! PSTR$ + KEYSOUT$(K)  NEXT K  IF LEN(PSTR$)>0 THEN BEGIN    PLAY "T"+STR$(SROW)+PSTR$  BEND  RETURN.INCRVAL'--------  GOSUB GETVAL  MAXV = 15  IF SCOL = 5 THEN MAXV = 4  IF SCOL = 6 THEN MAXV = 4095  V = V + DELTA  IF V > MAXV THEN V 4#= MAXV  GOSUB APPLYVAL  RETURN.DECRVAL'--------  GOSUB GETVAL  V = V - DELTA  IF V < 0 THEN V = 0  GOSUB APPLYVAL  RETURN.INCRFVAL'---------  IF FSCOL = 1 THEN BEGIN    V = FILTFREQ(FSROW) + DELTA    IF V > 2047 THEN V = 2047   5M A = :AV: 403 REM AD = :AW: 404 REM ZZ = :AX: 405 REM K = :AY: 406 REM SF = :AZ: 407 REM CURLINELEN = :BA: 408 REM SRCLINEPTR = :BB: 409 REM SRCLINEBUFFPTR = :BC: 410 REM CUTTAILIDX = :BD: 411 REM CURLINELENMINUSONE = :BE: 412 REM 5$ FILTFREQ(FSROW) = V  BEND  IF FSCOL = 2 THEN FILTLP(FSROW) = 1  IF FSCOL = 3 THEN FILTBP(FSROW) = 1  IF FSCOL = 4 THEN FILTHP(FSROW) = 1  IF FSCOL = 5 THEN BEGIN    V = FILTRES(FSROW) + DELTA    IF V > 15 THEN V = 15    FILTRES(FSROW) = 4%:AZ: R X2 = :BA: R Y2 = :BB: R DRAWCOLOR = :BC: R IDX = :BD: R TMPX1 = :BE: S PX1 = :BF: S PY1 = :BG: 0S PX2 = :BH: BS PY2 = :BI: TS OX1 = :BJ: fS OY1 = :BK: xS OX2 = :BL: S OY2 = :BM: S DATIDX4& = :BN: S PLAYERDATIDX = :BO: S BADDIEDATIDX = :BP: S PLAYERDATFIXED = :BQ: T BADDIEDATFIXED = :BR: $T TMP = :BS: 4T JD = :BT: DT FX = :BU: TT FY = :BV: gT XOFFS = :BW: T DRAWORDER = :BX: T OFFSAMOUNT = :B5Y: T PALIDX = :BZ: T PTR = :CA: T ANIMORDER = :CB: T MAXFRAME = :CC: U PLAYERFORM = :CD: U BADDIEFORM = :CE: 5U FORMANIM = :CF: OU PLAYERFRAME = :CG: hU PLAYERANIM = :CH: U BADDIEFRAME = :CI: U BADDIEANIM4 1,100,1000,3:AJ1CH5 6b CG.: 7c BT(AM,H)4CH0 =7d CH2:1AM3,2000,5,1,100,1000,3:AJ1CH6 I7e CG.: P7f  V7g  7h AG0:PCB(CD,CH,CG):BUAQ:BVAR:ALAM:AECD:BNBO: 189: 7i AG1:PCB(CE,CJ,CI):BUAS:BVAT:ALAN:AECE:BNBP: 1895D  IF FSCOL=8 AND FILTSWEEP(FSROW) > 0 THEN BEGIN    V = FILTSWEEP(FSROW) - DELTA    IF V < 0 THEN V = 0    FILTSWEEP(FSROW) = V  BEND  GOSUB APPLYSELECTEDFILTER  RETURN.APPLYVAL'---------  IF SCOL=0 THEN ENVSNAME$(SROW) = V$  IF SC:CURLINEBUFFADDR = :BF: 413 REM CHR = :BG: 414 REM ZI = :BH: 415 REM BL = :BI: 416 REM SZ = :BJ: 417 REM SR = :BK: 418 REM SM = :BL: 419 REM CONTNEXTLINEFLAG = :BM: 420 REM  = :BN: 421 REM MAPDESTTOSRCLINENO% = :A%: 422 REM  = :B%: 4235OL=1 THEN ENVSATTACK(SROW) = V  IF SCOL=2 THEN ENVSDECAY(SROW) = V  IF SCOL=3 THEN ENVSSUSTAIN(SROW) = V  IF SCOL=4 THEN ENVSRELEASE(SROW) = V  IF SCOL=5 THEN ENVSWAVEFORM(SROW) = V  IF SCOL=6 THEN ENVSPW(SROW) = V  ROW = SROW  GOSUB SETEN5V  RETURN.SETENV'-------  ENVELOPE ROW, ENVSATTACK(ROW), ENVSDECAY(ROW), ENVSSUSTAIN(ROW), ENVSRELEASE(ROW), ENVSWAVEFORM(ROW), ENVSPW(ROW)  RETURN.RUNSTOPTRAPPER'---------------  IF ER=30 THEN RESUME  ' IGNORE RUN/STOP  TRAP  PRINT 5 \   J(2,3):J(0,0)5:J(0,1)5:J(0,2)10:J(0,3)10:J(1,0)15:J(1,1)15:J(1,2)20:J(1,3)20   (147);(142);:1: 11: 3: 6:   (J(1,0)J(0,2)J(1,2)J(0,0)J(1,1)J(0,3)J(1,3)J(0,1)):<2   ::<7:     ! A$:H.:I.:A$""I51 ! A$""I1 !! A$""H1 1!	 A$""H1 x!
 J(0,0)J(0,0)H:J(0,1)J(0,1)I:J(0,2)J(0,2)H:J(0,3)J(0,3)I: ! (147);:G01:AJ(G,0):BJ(G,1):CJ(G,2):DJ(G,3): 12:G: " AA,B:"";:AC,B:"";:AA,D:"";:AC,D:"";:EA1C P1:AE,B:"";:AE,D:"";:E H" FB1D1:AA,F:"";:AC,F:"";:F:                                                                                                                                                                                  5ERR$(ER);" ERROR"  PRINT " IN LINE";EL  KEY ON  END.CHUNKSEQUENCER'---------------  DO WHILE 1    GOSUB DRAWSEQUENCE    GOSUB GETUSERINPUTFORSEQUENCE    IF A$ = ٯ THEN EXIT  LOOP  RETURN.DRAWSEQUENCE'-------------  PRINT 5	"SEQUENCE EDITOR"  PRINT "---------------"  PRINT ")DD )NSERT )ELETE, DIT=, LAYLL=+, LAY= - SEQCNT = ";SEQCNT  PRINT ": EDIT , : STOP MUSIC, +: EXIT"  PRINT " MD            XTRA"           PRINT " ---            --5
---"  IF INT((SEQCNT-1)/43) > 1 AND (INT(SEQOFFS/43)+1) < INT((SEQCNT-1)/43) THEN BEGIN    'IF INT((SEQCNT-1) / 43) * 43 > SEQOFFS THEN BEGIN      CURSOR 75, 5:PRINT "--->"    'BEND  BEND  IF SEQOFFS > 0 THEN BEGIN    CURSOR 70, 5:PRINT "<---"5  BEND  K = SEQOFFS  DO WHILE K < SEQCNT    IF K > (SEQOFFS + 43 * 2 - 1) THEN K=SEQCNT:GOTO NXT    IF (K-SEQOFFS) >= 43 THEN CURSOR 40,6+(K-SEQOFFS-43)    IF PLYPTR = K THEN PRINT ">";:ELSE PRINT " ";    S=0:GOSUB HIGHLIGHTSELECTEDSEQCO5LUMN    ' CHUNK IS A SPECIAL į*?    IF SEQCHUNK(K) < 0 AND ABS(SEQCHUNK(K)) < į THEN BEGIN      V$ = SEQCMDNAME$(ABS(SEQCHUNK(K)))      S = 10-LEN(V$)      PRINT V$;      DO WHILE S >= 0        PRINT " ";        S = S - 1      LOOP5    BEND:ELSE BEGIN      PRINT SEQCHUNK(K);ٯ;    BEND    S=1:GOSUB HIGHLIGHTSELECTEDSEQCOLUMN    HANDLED = 0    IF SEQCHUNK(K) = į THEN BEGIN      HANDLED = 1      IF SEQEXTRA(K) = -1 THEN PRINT ٯ;"<NONE>":ELSE BEGIN 5       PRINT ٯ;FILTNAME$(SEQEXTRA(K))      BEND    BEND    IF HANDLED=0 AND SEQCHUNK(K) = į THEN BEGIN      HANDLED = 1      PRINT ٯ;SEQEXTRA(K)    BEND    '     IF HANDLED = 0 THEN BEGIN       PRINT ٯ;SEQEXTRA5(K)    BEND    PRINT ٯ֯;.NXT    K = K + 1  LOOP    RETURN.HIGHLIGHTSELECTEDSEQCOLUMN'-----------------------------  IF SEQPTR = K AND SSCOL=S THEN PRINT ٯ֯;:ELSE PRINT ٯ֯;  RETURN.GETUSERINPUTFORSEQUENCE'5---------------------------  GOSUB READKEYLOOP  IF A$="A" THEN GOSUB ADDCHUNKTOSEQ  IF A$="I" THEN GOSUB INSERTCHUNKTOSEQ  ' IF A$="E" THEN GOSUB EDITCHUNKSEQ  IF A$="D" THEN GOSUB DELETECHUNKSEQ  IF A$=ٯ AND SEQPTR > 0 THEN SEQP5TR = SEQPTR - 1  IF A$=ٯ AND SEQPTR < SEQCNT-1 THEN SEQPTR = SEQPTR + 1   IF A$=ٯ THEN BEGIN    IF SSCOL = 1 THEN BEGIN      SSCOL = 0    BEND:ELSE BEGIN      IF (SEQPTR-43)>=0 THEN BEGIN        SSCOL = 1        SEQPTR = SEQPTR - 435      BEND    BEND  BEND  IF A$=ٯ THEN BEGIN    IF SSCOL = 0 THEN BEGIN      SSCOL = 1    BEND:ELSE BEGIN      IF (SEQPTR+43) < SEQCNT THEN BEGIN        SSCOL = 0        SEQPTR = SEQPTR + 43      BEND    BEND  BEND  IF A$=ٯ5 THEN BEGIN    PLYPTR = 0    PLYFLAG = 1    CHUNKRPT = 0    PLAY    GOSUB SETALLENV    TEMPO TMPO%  BEND  IF A$=ٯ THEN BEGIN    PLYPTR = SEQPTR    PLYFLAG = 1    CHUNKRPT = 0    PLAY    GOSUB SETALLENV    TEMPO TMPO% 5 BEND  IF A$=ٯ THEN GOSUB EDITCHUNKCELL  IF A$="C" THEN GOSUB EDITCHUNKCMD  IF A$=ٯ THEN GOSUB STOPALLMUSIC  IF A$=ٯ THEN SEQPTR = 0  IF A$=ٯ THEN SEQPTR = SEQCNT-1  ' FINALLY, ADJUST SEQOFFS IF NEEDBE  IF (I5NT(SEQPTR / 43) * 43) < SEQOFFS THEN SEQOFFS = SEQOFFS - 43  IF (INT(SEQPTR / 43) * 43) > (SEQOFFS+43) THEN SEQOFFS = SEQOFFS + 43  RETURN.STOPALLMUSIC'--------------  PLYPTR = -1  PLYFLAG = 0  PLAY  GOSUB SETALLENV  TEMPO TMPO%  GO5SUB APPLYSELECTEDFILTER  RETURN.DELETECHUNKSEQ'----------------  IF SEQCNT = 0 THEN RETURN  K = SEQPTR  DO WHILE K < SEQCNT - 1    SEQCHUNK(K) = SEQCHUNK(K + 1)    SEQEXTRA(K) = SEQEXTRA(K + 1)    K = K + 1  LOOP  SEQCNT = SEQCNT - 51  IF SEQPTR = SEQCNT AND SEQPTR>0 THEN SEQPTR = SEQPTR - 1  RETURN.EDITCHUNKSEQ'--------------  IF SEQCNT = 0 THEN RETURN  PRINT ٯ;ٯ;ٯ;ٯ;"Q";  V=0:INPUT "CHUNK#: ", V  SEQCHUNK(SEQPTR) = V  PRINT ٯ;ٯ5;ٯ;ٯ;"Q";  V=-1:INPUT "EXTRA#: ", V  SEQEXTRA(SEQPTR) = V  RETURN.EDITCHUNKCELL'---------------  IF SEQCNT = 0 THEN RETURN  PRINT ٯ;ٯ;ٯ;ٯ;"Q";  IF SSCOL = 0 THEN BEGIN    V = SEQCHUNK(SEQPTR)5    V1$ = STR$(V)    IF LEFT$(V1$,1) = " " THEN V1$=MID$(V1$,2)    PRINT "CHUNK#: ";ٯ;"^";V1$;ٯ;"_";    INPUT "", V    SEQCHUNK(SEQPTR) = V  BEND  IF SSCOL = 1 THEN BEGIN    V = SEQEXTRA(SEQPTR)    V1$ = STR$(V)    IF LEF5T$(V1$,1) = " " THEN V1$=MID$(V1$,2)    PRINT "EXTRA#: ";ٯ;"^";V1$;ٯ;"_";    INPUT "", V    SEQEXTRA(SEQPTR) = V  BEND  RETURN.EDITCHUNKCMD'--------------  V = -SEQCHUNK(SEQPTR)  PRINT ٯ;  FOR ROW = 1 TO į -5 1    PRINT ROW;":"; SEQCMDNAME$(ROW)  NEXT ROW  PRINT  INPUT "CMD: ", V  IF V > 0 THEN SEQCHUNK(SEQPTR) = -V  RETURN.INSERTCHUNKTOSEQ'-------------------  SEQCNT = SEQCNT + 1  ' MOVE ALL HIGHER CHUNK SEQUENCES UP ONE  K = SEQCNT - 25  DO WHILE K >= SEQPTR    SEQCHUNK(K+1) = SEQCHUNK(K)    SEQEXTRA(K+1) = SEQEXTRA(K)    K = K - 1  LOOP  SEQCHUNK(SEQPTR) = 0  SEQEXTRA(SEQPTR) = 0  RETURN.ADDCHUNKTOSEQ'----------------  SEQPTR = SEQCNT  SEQCNT = SEQCNT + 1  SEQ 4CHUNK(SEQPTR) = 0  SEQEXTRA(SEQPTR) = 0  RETURN                                                                                                                                                                                                           : = :CJ: U BXOFFS = :CK: U CHUNKCNT = :CL: U CHUNKIDX = :CM: U VIDX = :CN: V ROW = :CO: V ECHOM = :CP: )V ECHOB = :CQ: >V ECHOSZ = :CR: UV CHUNKRPT = :CS: mV ECHODELAY = :CT: |V V = :CU: V CURRFREQ = :CV5 34 O5X0P0T0M0 Q #DR Q.#D I#D Q#D .#D IGFG H#D   IRGFG H#D   Q.F .F F I#D QC IF Q#DRR    Q#D H#DP0X0T2O6M5 Q#DR Q.#D I#D Q#D .#D IGFG H#D  IRGFG H#D  Q.F .F F I#D QC IF Q#DRR  Q#D Q#DP0X0T8O3M3 Q#DRP2 Q.#D I#D Q#D .#D IGFG H#D  IRGFG H#D  Q.F .F F I#D6! QC IF Q#DRR  Q#D Q#DX0T8O4M3 Q#DR Q.#D I#D Q#D .#D IGFG H#D  IRGFG H#D  Q.F .F F I#D QC IF Q#DRR  Q#D Q#DO4X0T1   Q#DR Q.#D I#D Q#D .#D IGFG H#D  IRGFG H#D  SX0FX1FX0FX1FX0FX1F X0FX1FX0FX1FX0FX1F X0FX1FX0FX1F X0 I#D QC IF H#DQR  Q#D Q#DHO0T7C QT9O4C 5!W .R                  .R           .R           O3T4.GWM1T5 O1.A            .A           .A           .AP0HM3T9 O2A O4C O3B     O2A O4C O3B  O2A O4C O3B  HR WO4T4.GP0QM3T9 RH O3A O3A O4C   O3A O3A O4C  O3G O3G R   WO4T4.BWM1T5 O1.A            .A     5"      .A           .AW.R                   .R           .R           IR WO2T4.AW .R                .R             .R           O3T4.GWM1T5 O1.A          .A             .A           .AHM3T9 O2A O3B O3A   O2A O3B O3A    O2A O4C O3B  HR WO4T4.GQM3T9 RH5# O3F O2A O3F  O3F O2A O3F   O3G O2A R   WO4T4.BWM1T5 O1.A          .A             .A           .AW.R                 .R             .R           IR WO2T4.AW .R                 .R           .R             .WRWM1T5 O1.A           .A           .A       6       RHM3T9 O2A O3B O3A    O2A O3B O3A  O2A O4C O3B O4C QR HO4C O3AQM3T9 RH O3F O2A O3F  O3F O2A O3F  O3G O2A O3G O4D QR SO3BO4CIO3BWM1T5 O1.A           .A           .A             RW       .R          .R                .R           .RWM1T5 O1.A  5%V  BEND  IF FSCOL=6 AND FILTDIR(FSROW) < 3 THEN FILTDIR(FSROW) = FILTDIR(FSROW) + 1  IF FSCOL=7 AND FILTMIN(FSROW) < 2047 THEN BEGIN    V = FILTMIN(FSROW) + DELTA    IF V > 2047 THEN V = 2047    FILTMIN(FSROW) = V  BEND      IF FSCOL=8 A5&ND FILTSWEEP(FSROW) < 2047 THEN BEGIN    V = FILTSWEEP(FSROW) + DELTA    IF V > 2047 THEN V = 2047    FILTSWEEP(FSROW) = V  BEND  GOSUB APPLYSELECTEDFILTER  RETURN.DECRFVAL'---------  IF FSCOL = 1 THEN BEGIN    V = FILTFREQ(FSROW) - D5'ELTA    IF V < 0 THEN V = 0    FILTFREQ(FSROW) = V  BEND  IF FSCOL = 2 THEN FILTLP(FSROW) = 0  IF FSCOL = 3 THEN FILTBP(FSROW) = 0  IF FSCOL = 4 THEN FILTHP(FSROW) = 0  IF FSCOL = 5 THEN BEGIN    V = FILTRES(FSROW) - DELTA    IF V < 0 THE5 N V = 0    FILTRES(FSROW) = V  BEND  IF FSCOL=6 AND FILTDIR(FSROW) > 0 THEN FILTDIR(FSROW) = FILTDIR(FSROW) - 1  IF FSCOL=7 AND FILTMIN(FSROW) > 0 THEN BEGIN    V = FILTMIN(FSROW) - DELTA    IF V < 0 THEN V = 0    FILTMIN(FSROW) = V  BEN6        .R                .A           .RHM3T9 O4E O3A O2A O4C O3A IO4CO3B QR  HO4E O3A O2A O4C O3A IO4CO3B QRQM3T9 RH O2A O4D O3A O2A O3B O3A       O2A O4D O3A O2A O3B O3AWM1T5 O1.A          .R                .A           .RW     .R              .R6                  .R             .RWM1T5 O1.G            .R                  .GHM3T9  O4C O3G O3D    O4C O3D  O3B        O4C O3G O3D    O4G E CQM3T9 RH O3D O3B O3G   O4D SO4CDICQR O3A RH O3D O3B O3G  O4F SDEIDQR HO3BWM1T5 O1.G            .R          6        .GT2M8O6 H.E .D .C O5QB O6ICO5B P0 QA O6H.E .D .C O5QB O6ICO5B P0 QAT1M1O2 W.F  .F   .F   .FHM2P3T7 O4E O3A O2A O4C O3A IO4CO3B QR HO4E O3A O2A O4C O3A IO4CO3B QRQM2P3T7 RH O2A O4D O3A O2A O3B O3A      O2A O4D O3A O2A O3B O3AT1M1O2 W.D  .D 6  .D   .DT2M6O6 H.E .D .C O5QB O6ICO5B P0 QA O6H.E .D .C O5QB O6ICO5B P0 QAT2M8O6 H.C O5.B O6QC HD SCDICQ O5BA  O6H.C O5.B O6QGFE SDEIDQCO5BT1M1O2 W.G .G .G .GHM3T7 O4C O3G O3D     O4C O3D O3B          O4C O3G O3D  O4G E CQM3T7 RH O3D O3B O3G   O4D 6SO4CDICQR O3A RH O3D O3B O3G O4F SDEIDQR HO3BT1M1O2 W.D .D .D .DT2M6O6 H.C O5.B O6QC HD SCDICQ O5BA O6H.C O5.B O6QGFE SDEIDQCO5BT2M8O5 H.B QA W.A QBO6C        WO5.B B QAGT1M1O1 H.A QA W.A QAA          T0QO2GIGGQGGGG GIGGQGGGGM3T7 O3H.B QA W.A QBO4C 6       WO3.B B QAGM1T7 O3H.F QE W.E O4P5QBO5C    WO4.B B QAGT1M1O2 H.F QE W.E QEE          T0QO2DIDDQDDDD DIDDQDDDDT2M6O5 H.B QA W.A QBO6C        WO5.B B QAGT2M8O5 W.AA QBO6CT0QO2FIFFQFFFF FIFFQFFFFM3T7 O3W.AA QBO4CM1T7 O4W.AA QBO5CT0QO2CICCQCCCC6 CICCQCCCCT2M6O5 W.AA QBO6CT2M8O5 WA QBO6C O5WB QAG WA QBO6CT0QO2AIAAQAAAA GIGGQGGGG FIFFQFFFFM3T7 O3WA QBO4C O3WB QAG WA QBO4CM1T7 O4WA QBO5C O4WB QAG WA QBO5CT0QO2EIEEQEEEE DIDDQDDDD CICCQCCCCT2M6O5 WA QBO6C O5WB QAG WA QBO6CT2M8O5 WAQR G WB QR6 A W#G QRIFGSFGFGFG QE SDW.E QRT0M1QO2DIDDQDDDD T1W.E .E .E .EM3T7 O3 WAQR  G WB QR A W#G QRIFGSFGFGFG QE SDW.EM1T7 O4 WAQR  G WB QR A W#G QRIFGSFGFGFG QE SDW.ET0QO1AIAAQAAAA T1W.E .E .E .ET2M6O5 WAQR G WB QR A W#G QRIFGSFGFGFG QE SDW.EP0M3T8 HO26	A O4C O2F O4C R O3A  QR HO3A B A B O4C QRP0M3T8 QR HO3A B   A B O4C QR  HO2A O4C O2F O4C R O3AP0T3O4IGGGG QGG HC R WR          IGGGG QGG HC R WRO1M1T6 QA IAA QAA O1M0WFR       O1M1T6 QA IAA QAA O1M0HFRP0M3T8 HO2A O4C O2F O4C R O3A  QR HO3A B A B O46
C QRP0M3T8 QR HO3A B  A B O4C QR  HO2A O4C O2F O4C R O3AO1M1T6 QA IAA QAA O1M0WFR       O1M1T6 QA IAA QAA O1M0HFRP0T3O4IGGGG QGG HC R WR         IGGGG QGG HC R WRO1M0T1 QM0WE.F HR   WE.F HRO2M1T8 QM0WE.F HR   WE.F HRP0M3T8 HO2A O4C O2F O4C R O3A QR6 HO3A B A B O4C QRP0M3T8 QR HO3A B  A B O4C QR  HO2A O4C O2F O4C R O3AO1M2T8 QM0WE.F HR    WE.F HRO2M0T1 QM0WE.F HR   WE.F HRO1M0T1 QM0WA.F HR  WA.F HRO2M1T8 QM0WA.F HR  WA.F HRP0M3T8 HO2A O4C O2F O4C R O3A QR HO3A B A B O4C QRP0M3T8 QR HO3A B  A 6B O4C QR  HO2A O4C O2F O4C R O3AO1M2T8 QM0WA.F HR WA.F HRO2M0T1 QM0WA.F HR WA.F HRO2M0T1 HR M0W.E .E .E .EO1M1T1 M0W.E .E .E .EP0M3T8 O3 T1W.#G .#G .#G .#GP0M3T8 O3 T1H.R W.E .E .E .EO1M1T1 M0W.E .E .E .EO2M0T1 HR M0W.E .E .E .EM1T9 O5 W.A .R .F6M1T1 O5 W.A .R .FM3T2 O3WA QBO4C O3W3WB QAG WA QBO4CM1T2 O4WA QBO5C O4W3WB QAG WA QBO5CM1T1 O5 W.R .GM1T9 O5 W.R .GM1T1O5W.A .G .FT1M1O2W.A .G .FM3T2 O3WA QBO4C O3W3WB QAG WA QBO4CM1T2 O4WA QBO5C O4W3WB QAG WA QBO5CT1M1O1W.A .G .FM1T1 O5W.A .G6 .FM1T1O5 W.D .E .E .E .ET1M1O2 W.D .E .E .E .EM3T2 O3 WAQR  G WB QR A W#G QRIFGSFGFGFG QE SDW.EM1T2 O4 WAQR  G WB QR A W#G QRIFGSFGFGFG QE SDW.ET1M1O1 W.D .E .E .E .EM1T1O5 W.D .E .E .E .E 18 IOOONO 0  9  0  0  2  1536 CCORDION 172  0  12  0  1  0 ALLIOPE 0  0  15  0  0  0 RUM 0  5  5  0  3  0 LUTE 9  4  4  0  0  0 UITAR 0  9  2  1  1  0 ARPSICRD 0  9  0  0  2  512 RGAN 0  9  9  0  2  2048 RUMPET 8  9  4  1  2  512 YL65GP0FP5GP0 Q#DO4X0T1  HRQ#D #DR I#DC#DF QG#A IG#AGF Q#D I#DF QG#A G SX0FX1GX0FX1G Q#D I#DF QG#A G SX0FX1GX0FX1G Q#DHR QT9O2C HT7O0C IT6O4CO2CO4CO2C QT9O4C O2C H.T7O0C QT9O4C HT7O0C QT9O4C IT6O2CO4C QT9C O2C O4C IT6O2CO4C HT7O2C O0CO5X0T1ID#D S X0FX1F 6X0FX1F P4X0GP0X1G X0GX1G X0FX1F X0FX1F P4X0GP0X1G X0GP0X1G X0FX1F X0FX1F P4X0GP0X1G X0GP0X1G X0FX1F X0FX1F P4X0GP0X1G X0GP0X1GHR QT9O2C HT7O0C IT6O4C O0C O0C O2C O4QT9CSO5X0FX1F X0FX1F P8X0Q#D  SP1X0FX1F X0FX1F X0FX1F X0FX1F X0FX1F X0FX1F X0FX1F X06FX1F X0HFHT7O0.C QT9O4C HT7O0CO5T0P0 Q.G IF#DFG#D Q.F IO6CO5#AO6CO5#AO6CO5#AO6CO5#AO6C O5Q#GX1#GX0#G                 X0IG#G Q#A G IP0FP5GP0FP5G P0Q#DRR Q#D Q#D IRP0X0T2O6M5 Q.G IF#DFG#D Q.F IO6C#AC#AC#AC#AC O6Q#GX1#GX0#G                 X0IG#G Q#A6 G IP0FP5GP0FP5G P0Q#DRR Q#D #D IRX0T8O3M3P0 Q.G P2IF#DFG#D Q.F IO4CO3#AO4CO3#AO4CO3#AO4CO3#AO4C O3Q#GX1#GX0#G                 X0IG#G Q#A G IP0FP5GP0FP5G P0Q#DRR Q#D #D IRX0T8O4M3P0 Q.G P3IF#DFG#D Q.F IO5CO4#AO5CO4#AO5CO4#AO5CO4#AO5C O4Q#GX1#GX0#G     6            X0IG#G Q#A G IP0FP5GP0FP5G P0Q#DRR Q#D #D IRX0T1O4M0P0 Q.G IF#DFG#D Q.F IO5CO4#AO5CO4#AO5CO4#AO5CO4#AO5C O4SX0#GX1#G#G#G X0#GX1#G#G#G  X0#GX1#G#G#G    X0IG#G Q#A G IP0FP5GP0FP5G P0Q#DRR Q#D #D IRQT9O4C IO2T6C O4C QT9O4C C T7HO0C T7HO0.C O2T69QC HT7O0C T9O4QC IT6O2C O3C QT9O4C O2.C IO6O0C QO4T9C HT7O0.C QO4T9C T7O0.CO5T0 IO6CO5#AO6CO5#AO6CO5#AO6CO5#AO6C  O5H#G O5I#A O6#D C O5 #A Q#G SP0GP2#GP0GP2#G P0Q.FP0X0T2O6 IO6C#AC#AC#AC#AC  H#G I#A #D C #A Q#G SP0GP2#GP0GP2#G P0Q.FX0T8O3M3 IO4CO3#AO64CO3#AO4CO3#AO4CO3#AO4C  O3H#G I#A O4#D C O3 #A Q#G SP0GP2#GP0GP2#G P0Q.FX0T8O4M3 IO5CO4#AO5CO4#AO5CO4#AO5CO4#AO5C  O4H#G I#A O5#D C O4 #A Q#G SP0GP2#GP0GP2#G P0Q.FX0T1O4M0P0 IO5CO4#AO5CO4#AO5CO4#AO5CO4#AO5C  SO4X0#GX1#G#G#G X0#GX1#G#G#G  X0O4I#A O5#D 6C O4 #A SX0#GX1#G#G#G X0SP0GP2#GP0GP2#G P0Q.FIR T9O4C ST6O2CC IO0C O2C QT9O4C O2C HT7O0C H.C QT9O4C HT7O0C O5T0 IO6CO5#AO6CO5#AO6CO5#AO6CO5#AO6C  O5H#G Q#G IG#G Q#A G IFG #DFP0X0T2O6 IC#AC#AC#AC#AC  H#G Q#G IG#G Q#A G IFG #DFX0T8O3M3 IO4CO3#AO4CO3#AO64CO3#AO4CO3#AO4C  O3H#G Q#G IG#G Q#A G IFG #DFX0T8O4M3 IO5CO4#AO5CO4#AO5CO4#AO5CO4#AO5C  O4H#G Q#G IG#G Q#A G IFG #DFX0T1O4M0P0 IO5CO4#AO5CO4#AO5CO4#AO5CO4#AO5C  O4SX0#GX1#G#G#G X0#GX1#G#G#G X0#GX1#G#G#G X0 IG#G SX0#AX1#A#A#A X0GX1GGG X0IFG #DFIR QT9O64C IO2T6C O4C QT9O4C C T7HO0C T7HO0.C O2T9QC HT7O0CT0 P0O5I#D#GG#G   Q#A O6IC SO5P0#AO6P7C  P0QO5#A O6IC SO5P0#AO6P7C   P0QO5#A O6IC SO5P0#AO6P7C  P0QO5#A O6IC SO5P0#AO6P7C P0QO5#A I#GP3#A P0W#A Q#ARP0X0T2O6 P0I#D#GG#G   Q#A IC S#AC  Q#A IC S#AC   Q#A 6IC S#AC  Q#A IC S#AC Q#A I#GP4#A P0W#A Q#ARX0T8O3M3 P0O3I#D#GG#G   Q#A O4IC SO3P0#AO4P7C  P0QO3#A O4IC SO3P0#AO4P7C   P0QO3#A O4IC SO3P0#AO4P7C  P0QO3#A O4IC SO3P0#AO4P7C P0QO3#A I#GP1#A P0W#AQ#ARX0T8O4M3 P0O4I#D#GG#G   Q#A O5IC SO4P0#AO5P7C  P0QO4#A O65IC SO4P0#AO5P7C   P0QO4#A O5IC SO4P0#AO5P7C  P0QO4#A O5IC SO4P0#AO5P7C P0QO4#A I#GP2#A P0W#AQ#AR X0T1O4M0 P0HR S#AX1#A#A#A QR  SX0#AX1#A#A#A QR SX0#AX1#A#A#A  QR SX0#AX1#A#A#A QR SX0#AX1#A#A#A QR SX0#AX1#A#A#A #A#A#A#A #A#A#A#A #A#A#A#A X0#AQT9O4C IT66O0C O2C QT9O4C O2C HT9O4C HT7O0.C QT9O4C HT7O0C QT9O4C IT6O0C O2C QT9O4C O2C HT7O0CT0Q.O6C O5I#A#G#AO6CO5#G H#AP0X0T2O6 Q.O6C I#A#G#AC#G H#AX0T8O3M3 Q.O4C O3I#A#G#AO4CO3#G H#AX0T8O4M3 Q.O5C O4I#A#G#AO5CO4#G H#AX0T1O4M0 SO5X0CX1CX0CX1CX0CX1C X0O4I#A#6G#AO5CO4#G H#AQ.T7O0C IT6O2C QT9O4C QT6O4C HT7O0CX0IO4T1#AO5#DD#DCDO4#AO5C  O4#AO5#DD#DCDO4#AO5C  O4#AO5#DD#DCDO4#AO5CP0X0T2O6 S#AR#DRDR#DRCRDR#ARCR  #AR#DRDR#DRCRDR#ARCR  #AR#DRDR#DRCRDR#ARCRX0T8M3 SO3#ARO4#DRDR#DRCRDRO3#ARO4CR  O3#ARO4#DRDR#DRCRDRO63#ARO4CR  O3#ARO4#DRDR#DRCRDRO3#ARO4CRX0T8M3 SO4#ARO5#DRDR#DRCRDRO4#ARO5CR  O4#ARO5#DRDR#DRCRDRO4#ARO5CR  O4#ARO5#DRDR#DRCRDRO4#ARO5CRX0T1O4M0 IO4#AO5#DD#DCDO4#AO5C  O4#AO5#DD#DCDO4#AO5C  O4#AO5#DD#DCDO4#AO5CQT9O4C IT6O2C O3C QT9O4C T6C HT7O0C H.T7O0C7 QT9O4C H.T7O0CX0T0O4Q#A SO5 X0FX1#FX0FX1#F X0#DX1#DX0#DX1#D X0DX1DX0DX1D X0#DX1#DX0#DX1#D X0DX1DX0DX1D X0CX1CX0CX1C O4X0#AX1#AX0#AX1#AP0X0T2  O6Q#A SO6 X0FX1#FX0FX1#F X0Q#D D #D D C O6#AX0T8M3 O3Q#A SO4 X0F#FF#F X0I#D#D DD #D#D DD CC O3#A#AX0T8M3 O46                                                                                                                                                      6$6"IO0C O4C QC C HO0T7C .C QT9O4C HO0T7C   QT9O4C IO0CO4C QCC  IR T6O1CT9O0QC H.T7C QT9O4C HO0T7CP0T0O5Q.#D I#D Q#D #D .G IF Q#D IFG #DGFG Q#D #A .G IF Q#D  F I#D QC IF Q#DX0T2O6M5 Q.#D I#D Q#D #D .G IF Q#D IFG #DGFG Q#D #A .G IF Q#D  F I#D QC IF Q#DP2X06#T8O3M3 Q.#D I#D Q#D #D .G IF Q#D IFG #DGFG Q#D #A .G IF Q#D  F I#D QC IF Q#DX0T8O4M3 Q.#D I#D Q#D #D .G IF Q#D IFG #DGFG Q#D #A .G IF Q#D  F I#D QC IF Q#DO4X0T1 Q.#D I#D SX0#DX1#D#D#D X0#DX1#D#D#D SX0GX1GGGGG X0IF Q#D SX0FX1FX0GX1G X0#DX1#DX0GX1GX0FX1F6'X0GX1G X0I#D#AG#A Q.G IF Q#D  F I#D QC IF Q#DQ.T9O4C IO2T6C QT9O4C T6O2C T9HO4C O0C QR O4C HO0C QO4C T6IO2C O4C QT9O4C O0C C IT6O2C O4C H.O0T7CP0T0O5HRQ#D H#D I#DC#DF QG#A G IGF Q#D  I#DF QG#A G SFP5GP0FP5GP0 Q#D  I#DF QG#A G SFP5GP0FP5GP0 Q#DX0T2O6M56%  P                6&7'6HRQ#D #DR I#DC#DF QG#A G IGF Q#D  I#DF QG#A G SFGFG Q#D I#DF QG#A G SFGFG Q#D P2X0T8O3M3HRQ#D #DR I#DC#DF QG#A G IGF Q#D  I#DF QG#A G SFGFG Q#D I#DF QG#A G SFGFG Q#DX0T8O4M3HRQ#D #DR I#DC#DF QG#A G IGF Q#D  I#DF QG#A G SFP5GP0FP5GP0 Q#D I#DF QG#A G SFP77D O5#A IRSO6#FFP0M0X0T4 QR O4#D R #D R D R #D R D O3#AT7M0 O0X0QC IO4X0T6CC T9O2QG T6O4C QT7O0C T6O4C  T7O0C S HT9O4C T6QO4C T9O2O2CM0P0T4X0 QR O5#D R #D R D R #D R D O4 I#AB O5D#DM0T5O2X1I#D#D#D#D#D#D#D#D DDDD #D#D#D#D DDDD O1 #AT2O6M3H.#D S#DFI#D7AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB7BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDEEEEEEEEEEEEEEE7' OUNDING BOX COLLISION TESTER' -----------------------------#OUTPUT "BOXTEST"'------------.DECLARATIONS'------------#DECLARE X1, Y1, X2, Y2#DECLARE X, Y, IDX, A$, XINC, YINC#STRUCT  X1, Y1, X2, Y2#DEFINE 1 = 0#DEFINE 2 = 1#DEFI7NE 1 = 0#DEFINE 1 = 1#DEFINE 2 = 2#DEFINE 2 = 3#DECLARE BX(2,3)BX(1, 1) = 5BX(1, 1) = 5BX(1, 2) = 10BX(1, 2) = 10BX(2, 1) = 15BX(2, 1) = 15BX(2, 2) = 20BX(2, 2) = 20#DEFINE ٯ = ""#DEFINE ٯ7 = ""#DEFINE ٯ = ""#DEFINE ٯ = ""'----.MAIN'----  PRINT CHR$(147);CHR$(142);  DO WHILE 1    GOSUB DRAWBOXES    GOSUB CHECKBOXCOLLISION    GOSUB GETUSERINPUT  LOOP'-------------------.CHECKBOXCOLLISION'--------7EEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGHHHHHHHHHHHHHHHHHHHHHHHHHHHHH7	HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKK7
KKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN7$NNNNNNNNNNNNNNNNNNNNNNNOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO P                                                                                                                                        7 SDC QM9D IRM1X0T4 QR O4#D R #D R D RT7M0 O0X0QC IO4X0T6CC T9O2QG T6O4C QT7O0C T6O4C T4X0 QR O5#D R #D R D RM0T5O2X1I#D#D#D#D#D#D#D#D DDDDM1X0T0O4 Q#D ICO3#A Q#G#A O4ICD Q#D O3#ARR #A #A IRRT2O6Q#D ICO5#A Q#G#A O6ICD Q#D O5#ARR #A #A IRRO5 ST1X0#7DX1#DX0#DX1#D X0CX1C O4X0#AX1#A X0#GX1#GX0#GX1#G X0#AX1#AX0#AX1#A O5X0CX1C X0DX1D X0#DX1#D X0#DX1#D O4Q#A RR #A #AM0T8I O2X0#DX1#D X0CO1X1#A X0#GX1#G X0#AX1#A O2X0C X1D X0#DX1#D O1Q#A RR #A #AO4 ST1X0#DX1#DX0#DX1#D X0CX1C O3X0#AX1#A X0#GX1#GX0#GX1#G X07#AX1#AX0#AX1#A O4X0CX1C X0DX1D X0#DX1#D X0#DX1#D O3Q#A RR #A #AT7O0X0H.C  QT9O4C T7O2HC  T7O0H.C T9O2QC T7O0HCM1T0X0O4H.#D IF#D SDC QD IRT2O6M3H.#D S#DFI#D SDC QM9D IRO5M0T1S X0#DX1#DX0#DX1#D X0#DX1#DX0#DX1#D X0#DX1#DX0#DX1#D X0#DX1#DX0#DX1#D X0DX1DX7D HBSEL > 0 THEN HBSEL = HBSEL - 1  IF A$=ٯ AND HBSEL < 3 THEN HBSEL = HBSEL + 1  IF A$="-" AND CURRFRAME > 0 THEN BEGIN    CURRFRAME = CURRFRAME - 1    GOSUB DRAWCURRFRAME  BEND  IF A$="=" AND CURRFRAME < PEEK($50002)-1 THEN BE7GIN    CURRFRAME = CURRFRAME + 1    GOSUB DRAWCURRFRAME  BEND  IF A$=ٯ THEN BEGIN    GOSUB GETSELECTEDCOORDSINTOX1Y1X2Y2    GOSUB GETSELECTEDOFFSETINTOK    POKE CURRPTR + K    , X1    POKE CURRPTR + K + 1, Y1    POKE CU9RRPTR + K + 2, X2    POKE CURRPTR + K + 3, Y2  BEND  RETURN'---------------------------------.GETSELECTEDCOORDSINTOX1Y1X2Y2'---------------------------------  ' COORD1  X = X1 : Y = Y1  STORESTATE = ůԯ  GOSUB ENTERCOORD7OPHONE 0  9  0  0  0  0 FISHY 1000  1  0  0  15  100  10 DISHY 1000  1  0  0  15  100  10 LOWPOSC 1000  1  0  0  15  100  10 BANDPUP 1000  0  1  0  15  100  10 BANDPDOWN 1000  0  1  0  15  100  10 BANDPO8SC 1000  0  1  0  15  100  10 HIGHPUP 1000  0  0  1  15  100  10 HIGHPDOWN 1000  0  0  1  15  100  10 HIGHPOSC 1000  0  0  1  15  100  10 SPARE1 0  0  0  0  0  0  0 SPARE2 0  0  0  0  0  0  0  10 -1 7O4 X1QEDCDO2 QCGEG 12 IANO 0  9  0  0  2  1536 CCORDION 12  0  12  0  1  0 ALLIOPE 0  0  15  0  0  0 RUM 0 7 5  5  0  3  0 LUTE 9  4  4  0  0  0 UITAR 0  9  2  1  1  0 ARPSICRD 0  9  0  0  2  512 RGAN 0  9  9  0  2  2048 RUMPET 8  9  4  1  2  512 YLOPHONE 0  9  0  0  0  0 LOWPUP 1000  1  0  0  15  1070  10 LOWPDOWN 1000  1  0  0  15  100  10 LOWPOSC 1000  1  0  0  15  100  10 BANDPUP 1000  0  1  0  15  100  10 BANDPDOWN 1000  0  1  0  15  100  10 BANDPOSC 1000  0  1  0  15  100  10 HIGHPUP 1000  0  0   1  15  100  10 HIGHPDOWN 1000  0  0  1  15  100  10 HIGHPOSC 1000  0  0  1  15  100  10 SPARE1 0  0  0  0  0  0  0 SPARE2 0  0  0  0  0  0  0  5 -8  0.05 -5 -1 -6 -1 -2  2  0  2   1  0  0  15  107-----------  IF NOT (BX(2, 1) > BX(1, 2) OR _          BX(2, 2) < BX(1, 1) OR _          BX(2, 1) > BX(1, 2) OR _          BX(2, 2) < BX(1, 1)) THEN _  BEGIN    BORDER 2  BEND:ELSE BEGIN    BORDER 7  BEND  RETURN7'--------------.GETUSERINPUT'--------------  GET KEY A$  XINC = 0  YINC = 0  IF A$ = ٯ THEN YINC = -1  IF A$ = ٯ THEN YINC = 1  IF A$ = ٯ THEN XINC = -1  IF A$ = ٯ THEN XINC = 1  BX(1, 1) = BX(1, 1) + 7XINC  BX(1, 1) = BX(1, 1) + YINC  BX(1, 2) = BX(1, 2) + XINC  BX(1, 2) = BX(1, 2) + YINC  BEND'----------.DRAWBOXES'----------  PRINT CHR$(147);  FOR IDX = 1 TO 2    X1 = BX(IDX, 1)    Y1 = BX(IDX, 1)    X7#2 = BX(IDX, 2)    Y2 = BX(IDX, 2)    GOSUB DRAWBOX  NEXT IDX  RETURN'--------.DRAWBOX'--------  ' DRAW CORNERS  ' ------------  CURSOR X1, Y1 : PRINT "";  CURSOR X2, Y1 : PRINT "";  CURSOR X1, Y2 : PRINT "";  CURSOR X2, Y2 : PRIN70DX1D X0DX1DX0DX1DM0T8I O2X0#DX1#DX0#DX1#DX0#DX1#DX0#DX1#D X0DX1DX0DX1DO4M0T1S X0#DX1#DX0#DX1#D X0#DX1#DX0#DX1#D X0#DX1#DX0#DX1#D X0#DX1#DX0#DX1#D X0DX1DX0DX1D X0DX1DX0DX1DX0M0T9O4QC IT6O2CO0T9C QO4T9C  QO2T9C HT7CM1T0O4I#D#GF#DD#D QD O3#A IRSO4#FFT72O6I#D#GF#DD#D QM9D O5#A IRSO6#FFO5M0T1S X0#DX1#DX0#DX1#D X0#DX1#DX0#DX1#D X0DX1DX0DX1DX0DX1DX0DX1D O4X0#AX1#AX0#AX1#A X0#AX1#A O5X0#FX1FM0T8I O2X0#DX1#DX0#DX1#D X0DX1DX0DX1D O1X0#AX1#A X0#A SO2#FX1FO4M0T1S X0#DX1#DX0#DX1#D X0#DX1#DX0#DX1#D X0DX1DX0DX71DX0DX1DX0DX1D O3X0#AX1#AX0#AX1#A X0#AX1#A O4X0#FX1FM0H.T7O2C QT9O4C HT7O0CP0T0O4M1H#D ID#D QD O3#A P0O4ID#D SP0X0FP1X1#FP0X0FP1X1#F X0QP0#D  SP0X0FP1X1#FP0X0FP1X1#F X0QP0#DP0T2O6M3H#D ID#D QD O5#A P0O6ID#D SP0FP5#FP0FP5#F QP0#D  SP0FP5#FP0FP5#F QP0#D8O5M0T1SX0#DX1#DX0#DX1#DX0#DX1#DX0#DX1#D X0DX1DDDDDDD X0O4#AX1#A#A#A X0IO5D#D SP0FP3X1#FP0X0FP3X1#F X0P0S#DX1#D#D#D P0X0FP3X1#FP0X0FP3X1#F P0X0#DX1#D#D#DM0T8IO2#D#D#D#DDDDDO1#A#AO2D#DFF#D#DFF#D#DO4M0T1X0S#DX1#D#D#D#D#D#D#D X0DX1DX0DX1DX0DX1DX0DX1D X0O37 Q#A SO5 X0F#FF#F X0I#D#D DD #D#D DD CC O4#A#AX0T1O4M0 O4Q#A SO5 X0FX1#FX0FX1#F X0#DX1#DX0#DX1#D X0DX1DX0DX1D X0#DX1#DX0#DX1#D X0DX1DX0DX1D X0CX1CX0CX1C O4X0#AX1#AX0#AX1#AX0QT9O4C IT6O0CC QT9O4C T6C HT9O2C HT7O0CST0O4 X0#GX1#GX0#GX1#G X0#AX1#AX0#AX1#A 7!X0O5CX1CX0DX1D X0Q#D X0O4#A X1#A #A #A X0H#AP0X0T2 O6 Q#G #A IC D Q#D X0O6#A X1#A #A #A X0H#AX0T8M3 O3 Q#G #A O4ICD Q#D QO3#A #A #A #A H#AX0T8M4 O4 SX0#GX1#GX0#GX1#G X0#AX1#AX0#AX1#A X0O5CX1CX0DX1D X0Q#D X0O4#A X1#A #A #A X0H#AX0T1O4M0 SO4 X0#GX1#GX07"#GX1#G X0#AX1#AX0#AX1#A X0O5CX1CX0DX1D X0Q#D X0O4#A X1#A #A #A X0H#AQT9O4C Q.T7O0C IT6O2C QT9O4C H.T7O0C QT9O4C HT7O0CST0O4 X0#GX1#GX0#GX1#G X0#AX1#AX0#AX1#A X0O5CX1CX0DX1D X0Q#D X0O4H.#A Q#A H#AP0X0T2 O6 Q#G #A IC D Q#D X0O6#ARR Q#A #ARX0T8M3 O3 Q#G7 #A O4ICD Q#D QO3#ARR #A #ARX0T8M3 O4 Q#G #A O5ICD Q#D QO4#ARR #A #ARX0T1O4M0 SO4 X0#GX1#GX0#GX1#G X0#AX1#AX0#AX1#A X0O5CX1CX0DX1D X0Q#D QO4#A RR #A #ARQT9O4C Q.T7O0C IT6O2C QT9O4C H.T7O0C QT9O4C HT7O0CT2O6M3H.#D S#DFI#D SDC QM9D IR O6I#D#GF#DD#D QM9:$T "";  ' DRAW HORIZONTALS  ' ----------------  FOR X = X1+1 TO X2-1    CURSOR X,Y1 : PRINT "";    CURSOR X,Y2 : PRINT "";  NEXT X  ' DRAW VERTICALS  ' --------------  FOR Y = Y1+1 TO Y2-1    CURSOR X1,Y : PRINT "";    CURSOR X2,Y : P7%                                                                                                                                                          7&                                   9'OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO7 8RP0M0T8IO2 IFFFD Q#D #G IFFFD Q#D X0HO4T9C T8O2 I#DR#DRT8P0O4 SX0FP3X1#FX0FX1#FX0FX1#F P0X0ID P3#DR #GR SP0X0FP3X1#FX0FX1#FX0FX1#F P0ID P3#DR X0HO4T9C T8I#DR#DRQRQT9O4C IT9O0C O2C QT9O4C O2C IT9O4C O0C QO0C QT7C HO4T9C QT9O4C HT7O0CX0P0T8M3O4Q.#AP9IO85DQO4#ASO5DO4#AIO5DP0O4Q#AIO5D#DP0SFP1I.GSGI.FSFI.GGP3#GSP0#AP3B#ABP0Q#GSFP3#FF#FF#FIP0DH#D P3Q#GP0SX0#FP2X1FX0#FX1FP0X0I#DX1P7GX0DX1#DM0T4O4 QR X0I#A Q#A IR Q#A QR X0I#A Q#A IR Q#A QR #A R #A   QR I#A Q#A IR Q#A QR #A R #AT8P0O3 QR X0I#A Q#A IR Q#A 8QR X0I#A Q#A IR Q#A QR #A R #A   QR I#A Q#A IR Q#A QR #A R #AP0M0QT9O4C IT6O2CC QT9O4C O2C HO0C C QC O2C HO0C QO2C I6O1CC T9QO0C O2C    QT9O0C O4C  O0C O4CO5X0T8P3 X0M5WD SDX1CX0Q.D   SDX1CX0ID SDX1CX0IDP0M0T1 QR O5IDQD IR QD  QR IDQD IR QDP0M0T4 QR 8O4IDQD IR QD  QR IDQD IR QDM0P0T8 QR O4IDQD IR QD  QR IDQD IR QDM0P0T8 QO3D O2IDQD IR QD  O3D O2IDQD IR QDP0M0 QT6O2C IO4CC QT7O0C T9O4C IT6O2CO1C IO4CC QT7O0C T9OCX0T0 P0 O4 Q#A IP9O5#FF SX0#DX1FX0#DX1F X0#DX1FX0#DX1F X0#DX1FX0#DX1F X0#DX1FX0#DX1F X80H#DP0T2O5M3 Q#A O6SP0EP9#FIP9F W#D Q#DRO4M0T1 SX0#AX1#A#A#A O5X0#FX1#FX0FX1F X0#DX1#D#D#D#D#D X0#DX1#D#D#D#D#D X0#DX1#D#D#D X0#DX1#D IRP0M0T8IO1 Q#AP1 O2I#FF IX0#DX1#D#D X0#DX1#D#D X0#DX1#D X0#DRRRO3M0T1 SX0#AX1#A#A#A O4X0#FX1#FX0FX1F X0#DX1#D#D#D#D8#D X0#DX1#D#D#D#D#D X0#DX1#D#D#D X0#DX1#D IRM0P0 Q T9O2C T6O4C H.T7O0C QO4T9C HT7O0CX0P0T8M3 O4Q.#A P9IO5D QO4#A O5D O4Q#A SO5P0F#F#DF Q#DF DI#DSD#D O4M0T1 WR HR  X0S#DX1#D#D#D X0FX1FFF X0DX1DDD X0#DX1#D SD#DM0P0 QT6O2C IO0CO1C QT9O2C O1C HO0C HO08.C QT9O2CX0P0T8M3O5 HD Q#D I#F#D D#D QD O4#AP0T2O6 X0HR Q#D I#F#D D#D QD O5#AO5M0T1 SX0DX1DDDDDDD X0#DX1#D#D#D X0#FX1#FX0#DX1#D X0DX1DX0#DX1#D X0DX1DDD O4X0#AX1#A#A#AO4M0T1 SX0DX1DDDDDDD X0#DX1#D#D#D X0#FX1#FX0#DX1#D X0DX1DX0#DX1#D X0DX1DDD O3X0#AX18#A#A#AM0P0 T7HO0C IO4T6CO0CO1CO2C QO4T9CC QT9O0CX0P0T8M3O5 O5SX0FX1#FX0FX1#F X0#DX1#DX0#DX1#D X0FX1#FX0FX1#F X0DX1DX0DX1D X0#DX1#DX0#DX1#D X0QDX1IDDP0T2O6 X0 O6SX0FX1#FX0FX1#F X0#DX1#DX0#DX1#D X0FX1#FX0FX1#F X0DX1DX0DX1D X0#DX1#DX0#DX1#D X0QDX1IDDO5M8	0T1 SO5X0FX1FFF X0#DX1#D#D#D X0FX1FFF X0DX1DDD X0#DX1#D#D#D X0DX1DDD X0DX1DX0DX1DM0T8IO2 X0FX1F X0#DX1#D X0FX1F X0DX1D X0#DX1#D X0DX1D X0DDO4M0T1 SO4X0FX1FFF X0#DX1#D#D#D X0FX1FFF X0DX1DDD X0#DX1#D#D#D X0DX1DDD X0DX1DX0DX1DM0P0 QR H.T7C QO4T9C HT7O0C8
P0T0O4X0M1Q.#D .#D #D H#D I#D#GG#G FG#DF H#DO6X0T2 W#D H#D I#D#GG#G FG#DF H#DP0O5M0T1 SX0#DX1#D#D#D#D#D X0#DX1#D#D#D#D#D X0#DX1#D#D#D HX0#D I#D#GG#G FG#DF SX0#DX1#DX0#DX1#D X0#DX1#DX0#DX1#DM0T8IO2 X0#DX1#D#D X0#DX1#D#D X0#DX1#D X0#DRRR X0I#D#GG#G FG#D8F X0#DX1#D#D#DP0O4M0T1 SX0#DX1#D#D#D#D#D X0#DX1#D#D#D#D#D X0#DX1#D#D#D HX0#D I#D#GG#G FG#DF SX0#DX1#DX0#DX1#D X0#DX1#DX0#DX1#DM0P0 QO4T9C IO0T6C O2C QT9O4C O2C HO0T7C H.O0T7C QO4T9C HO0T7CT0O5QC ICO4#A#G#AO5QC IO4#AO5CO4#G#A Q#G IG#G IO4Q#A O5C O4#A O85CT2O6QC ICO5#A#G#AO6QC IO5#AO6CO5#G#A Q#G IG#G IO5Q#A O6C O5#A O6CO6M0T1SX0CX1CCCIX0CO5#ASX0#GX1#GX0#AX1#AO6X0CX1CCCO5X0#AX1#AO6X0CX1CO5X0#GX1#GX0#AX1#AX0#GX1#G#G#GIG#GSX0#AX1#A#A#A O6X0CX1CCC O5SX0#AX1#A#A#A O6X0CX1CCCM0T8IO3 X0CX1C X0CO2#A#G#A O3X08CX1C O2X0#AO3CO2#G#A X0#GX1#G X0G#G X0#AX1#A O3X0CX1C O2X0#AX1#A O3X0CX1CO5M0T1SX0CX1CCCIX0CO4#ASX0#GX1#GX0#AX1#AO5X0CX1CCCO4X0#AX1#AO5X0CX1CO4X0#GX1#GX0#AX1#AX0#GX1#G#G#GIG#GSX0#AX1#A#A#A O5X0CX1CCC O4SX0#AX1#A#A#A O5X0CX1CCCM0P0 QO4T9C IO0T6C O2C QT9:O4C C HO2C O0T7.C QO4T9C HO0T7C P0T0M1 IO4#AO5#DCO4#A Q#G #A IG#GGF Q#DRR I#DR #DR WRT2 IO5#AO6#DCO5#A Q#G #A IG#GGF Q#DRR I#DR #DRO5M0T1 SX0#AX1#A O6X0#DX1#D X0CX1C O5X0#AX1#A X0#GX1#G#G#G X0#AX1#A#A#A X0GX1G X0#GX1#G X0GX1G X0FX1F X0#QDRR I#DR #DRM8 33 O5X0P0T0M0 Q #DR Q.#D I#D Q#D .#D IGFG H#D   IRGFG H#D   Q.F .F F I#D QC IF Q#DRR    Q#D H#DP0X0T2O6M5 Q#DR Q.#D I#D Q#D .#D IGFG H#D  IRGFG H#D  Q.F .F F I#D QC IF Q#DRR  Q#D Q#DP0X0T8O3M3 Q#DRP2 Q.#D I#D Q#D .#D IGFG H#D  IRGFG H#D  Q.F .F F I#D8 QC IF Q#DRR  Q#D Q#DX0T8O4M3 Q#DR Q.#D I#D Q#D .#D IGFG H#D  IRGFG H#D  Q.F .F F I#D QC IF Q#DRR  Q#D Q#DO4X0T1   Q#DR Q.#D I#D Q#D .#D IGFG H#D  IRGFG H#D  SX0FX1FX0FX1FX0FX1F X0FX1FX0FX1FX0FX1F X0FX1FX0FX1F X0 I#D QC IF H#DQR  Q#D Q#DHO0T7C QT9O4C 8IO0C O4C QC C HO0T7C .C QT9O4C HO0T7C   QT9O4C IO0CO4C QCC  IR T6O1CT9O0QC H.T7C QT9O4C HO0T7CP0T0O5Q.#D I#D Q#D #D .G IF Q#D IFG #DGFG Q#D #A .G IF Q#D  F I#D QC IF Q#DX0T2O6M5 Q.#D I#D Q#D #D .G IF Q#D IFG #DGFG Q#D #A .G IF Q#D  F I#D QC IF Q#DP2X08T8O3M3 Q.#D I#D Q#D #D .G IF Q#D IFG #DGFG Q#D #A .G IF Q#D  F I#D QC IF Q#DX0T8O4M3 Q.#D I#D Q#D #D .G IF Q#D IFG #DGFG Q#D #A .G IF Q#D  F I#D QC IF Q#DO4X0T1 Q.#D I#D SX0#DX1#D#D#D X0#DX1#D#D#D SX0GX1GGGGG X0IF Q#D SX0FX1FX0GX1G X0#DX1#DX0GX1GX0FX1F8X0GX1G X0I#D#AG#A Q.G IF Q#D  F I#D QC IF Q#DQ.T9O4C IO2T6C QT9O4C T6O2C T9HO4C O0C QR O4C HO0C QO4C T6IO2C O4C QT9O4C O0C C IT6O2C O4C H.O0T7CP0T0O5HRQ#D H#D I#DC#DF QG#A G IGF Q#D  I#DF QG#A G SFP5GP0FP5GP0 Q#D  I#DF QG#A G SFP5GP0FP5GP0 Q#DX0T2O6M5 N 18  0  2  1 -1  2 -1  3 -1  4 -1  5 -1  6 -1  5 -1  7 -1                                                                                                                                                                                  8HRQ#D #DR I#DC#DF QG#A G IGF Q#D  I#DF QG#A G SFGFG Q#D I#DF QG#A G SFGFG Q#D P2X0T8O3M3HRQ#D #DR I#DC#DF QG#A G IGF Q#D  I#DF QG#A G SFGFG Q#D I#DF QG#A G SFGFG Q#DX0T8O4M3HRQ#D #DR I#DC#DF QG#A G IGF Q#D  I#DF QG#A G SFP5GP0FP5GP0 Q#D I#DF QG#A G SFP85GP0FP5GP0 Q#DO4X0T1  HRQ#D #DR I#DC#DF QG#A IG#AGF Q#D I#DF QG#A G SX0FX1GX0FX1G Q#D I#DF QG#A G SX0FX1GX0FX1G Q#DHR QT9O2C HT7O0C IT6O4CO2CO4CO2C QT9O4C O2C H.T7O0C QT9O4C HT7O0C QT9O4C IT6O2CO4C QT9C O2C O4C IT6O2CO4C HT7O2C O0CO5X0T1ID#D S X0FX1F 8X0FX1F P4X0GP0X1G X0GX1G X0FX1F X0FX1F P4X0GP0X1G X0GP0X1G X0FX1F X0FX1F P4X0GP0X1G X0GP0X1G X0FX1F X0FX1F P4X0GP0X1G X0GP0X1GHR QT9O2C HT7O0C IT6O4C O0C O0C O2C O4QT9CSO5X0FX1F X0FX1F P8X0Q#D  SP1X0FX1F X0FX1F X0FX1F X0FX1F X0FX1F X0FX1F X0FX1F X08FX1F X0HFHT7O0.C QT9O4C HT7O0CO5T0P0 Q.G IF#DFG#D Q.F IO6CO5#AO6CO5#AO6CO5#AO6CO5#AO6C O5Q#GX1#GX0#G                 X0IG#G Q#A G IP0FP5GP0FP5G P0Q#DRR Q#D Q#D IRP0X0T2O6M5 Q.G IF#DFG#D Q.F IO6C#AC#AC#AC#AC O6Q#GX1#GX0#G                 X0IG#G Q#A8 G IP0FP5GP0FP5G P0Q#DRR Q#D #D IRX0T8O3M3P0 Q.G P2IF#DFG#D Q.F IO4CO3#AO4CO3#AO4CO3#AO4CO3#AO4C O3Q#GX1#GX0#G                 X0IG#G Q#A G IP0FP5GP0FP5G P0Q#DRR Q#D #D IRX0T8O4M3P0 Q.G P3IF#DFG#D Q.F IO5CO4#AO5CO4#AO5CO4#AO5CO4#AO5C O4Q#GX1#GX0#G     8            X0IG#G Q#A G IP0FP5GP0FP5G P0Q#DRR Q#D #D IRX0T1O4M0P0 Q.G IF#DFG#D Q.F IO5CO4#AO5CO4#AO5CO4#AO5CO4#AO5C O4SX0#GX1#G#G#G X0#GX1#G#G#G  X0#GX1#G#G#G    X0IG#G Q#A G IP0FP5GP0FP5G P0Q#DRR Q#D #D IRQT9O4C IO2T6C O4C QT9O4C C T7HO0C T7HO0.C O2T89QC HT7O0C T9O4QC IT6O2C O3C QT9O4C O2.C IO6O0C QO4T9C HT7O0.C QO4T9C T7O0.CO5T0 IO6CO5#AO6CO5#AO6CO5#AO6CO5#AO6C  O5H#G O5I#A O6#D C O5 #A Q#G SP0GP2#GP0GP2#G P0Q.FP0X0T2O6 IO6C#AC#AC#AC#AC  H#G I#A #D C #A Q#G SP0GP2#GP0GP2#G P0Q.FX0T8O3M3 IO4CO3#AO84CO3#AO4CO3#AO4CO3#AO4C  O3H#G I#A O4#D C O3 #A Q#G SP0GP2#GP0GP2#G P0Q.FX0T8O4M3 IO5CO4#AO5CO4#AO5CO4#AO5CO4#AO5C  O4H#G I#A O5#D C O4 #A Q#G SP0GP2#GP0GP2#G P0Q.FX0T1O4M0P0 IO5CO4#AO5CO4#AO5CO4#AO5CO4#AO5C  SO4X0#GX1#G#G#G X0#GX1#G#G#G  X0O4I#A O5#D 8C O4 #A SX0#GX1#G#G#G X0SP0GP2#GP0GP2#G P0Q.FIR T9O4C ST6O2CC IO0C O2C QT9O4C O2C HT7O0C H.C QT9O4C HT7O0C O5T0 IO6CO5#AO6CO5#AO6CO5#AO6CO5#AO6C  O5H#G Q#G IG#G Q#A G IFG #DFP0X0T2O6 IC#AC#AC#AC#AC  H#G Q#G IG#G Q#A G IFG #DFX0T8O3M3 IO4CO3#AO4CO3#AO84CO3#AO4CO3#AO4C  O3H#G Q#G IG#G Q#A G IFG #DFX0T8O4M3 IO5CO4#AO5CO4#AO5CO4#AO5CO4#AO5C  O4H#G Q#G IG#G Q#A G IFG #DFX0T1O4M0P0 IO5CO4#AO5CO4#AO5CO4#AO5CO4#AO5C  O4SX0#GX1#G#G#G X0#GX1#G#G#G X0#GX1#G#G#G X0 IG#G SX0#AX1#A#A#A X0GX1GGG X0IFG #DFIR QT9O9#4C IO2T6C O4C QT9O4C C T7HO0C T7HO0.C O2T9QC HT7O0CT0 P0O5I#D#GG#G   Q#A O6IC SO5P0#AO6P7C  P0QO5#A O6IC SO5P0#AO6P7C   P0QO5#A O6IC SO5P0#AO6P7C  P0QO5#A O6IC SO5P0#AO6P7C P0QO5#A I#GP3#A P0W#A Q#ARP0X0T2O6 P0I#D#GG#G   Q#A IC S#AC  Q#A IC S#AC   Q#A 8 #AX1#A#A#A X0IO4D#D SP0FP3X1#FP0X0FP3X1#F X0P0S#DX1#D#D#D P0X0FP3X1#FP0X0FP3X1#F P0X0#DX1#D#D#DM0QT9O4C IT6O2CT9O0C QT9O4CC HT9O2C H.T7O0C QT9O4CP0T0O4M1 QGP5#G SP0X0FP1X1#FP0X0FP1X1#F X0QP0#D W.DP0T2O6M3 QGP5#G SP0FP5#FP0FP5#F QP0#D W.DO5M0T1X0 SX0G8!X1GX0GX1GX0#GX1#GX0#GX1#G X0SP0FP3#FP0FP3#F P0X0#DX1#DX0#DX1#D  SX0DX1DX0DX1DX0DX1DX0DX1DX0DX1DX0DX1D X0DX1DX0DX1DX0DX1DX0DX1DX0DX1DX0DX1DX0M0T8IO2 GG#G#G FF #D#DDDDDDDDDDDDDO4M0T1X0 SX0GX1GX0GX1GX0#GX1#GX0#GX1#G X0SP0FP3#FP0FP3#F P0X0#DX1#DX0#DX1#D  S8"X0DX1DX0DX1DX0DX1DX0DX1DX0DX1DX0DX1D X0DX1DX0DX1DX0DX1DX0DX1DX0DX1DX0DX1DX0M0HT7O0C  QT9O4C IT6O2CT9O0C QT9O4CC HT7O0C CP0T0O4M1 ID#D QD O3#A P0O4ID#D SP0X0FP1X1#FP0X0FP1X1#F X0QP0#D  SP0X0FP1X1#FP0X0FP1X1#F X0QP0#DP0T2O6M3 ID#D QD O5#A P0O6ID#D SP0FP8#5#FP0FP5#F QP0#D  SP0FP5#FP0FP5#F QP0#DO5M0T1S X0DX1DDDDDDD X0O4#AX1#A#A#A X0IO5D#D SP0FP3X1#FP0X0FP3X1#F X0P0S#DX1#D#D#D P0X0FP3X1#FP0X0FP3X1#F P0X0#DX1#D#D#DM0T8IO2DDDDO1#A#AO2D#DFF#D#DFF#D#DO4M0T1X0S X0DX1DDDDDDD X0O3#AX1#A#A#A X0IO4D#D SP0FP3X1#FP8$0X0FP3X1#F X0P0S#DX1#D#D#D P0X0FP3X1#FP0X0FP3X1#F P0X0#DX1#D#D#DM0 QT9O4CC HT9O2C H.T7O0C QT9O4CP0T0O4M1 QGP5#G SP0X0FP1X1#FP0X0FP1X1#F X0QP0#D W.DP0T2O6M3 QGP5#G SP0FP5#FP0FP5#F QP0#D W.DO5M0T1X0 SX0GX1GX0GX1GX0#GX1#GX0#GX1#G X0SP0FP3#FP0FP3#F P0X0#8%DX1#DX0#DX1#D  SX0DX1DX0DX1DX0DX1DX0DX1DX0DX1DX0DX1D X0DX1DX0DX1DX0DX1DX0DX1DX0DX1DX0DX1DX0M0T8IO2 GG#G#G FF #D#DDDDDDDDDDDDDO4M0T1X0 SX0GX1GX0GX1GX0#GX1#GX0#GX1#G X0SP0FP3#FP0FP3#F P0X0#DX1#DX0#DX1#D  SX0DX1DX0DX1DX0DX1DX0DX1DX0DX1DX0DX1D X0DX1DX0DX1D8&X0DX1DX0DX1DX0DX1DX0DX1DX0M0HT7O0C  QT9O4C IT6O2CT9O0C QT9O4CC HT7O0C CP0T0O4M1 ID#D QD O3#A P0O4I#FF IX0#DX1#D#DX0#DX1#D#DX0#DX1#D X0Q#DRT2O6M3 ID#D QD O5#A O6I#FF W#D Q#DRO5M0T1S X0DX1DDDDDDD SX0O4#AX1#A#A#A X0IO5#FF P0 SX0#D#DX1#D#D#D#D  X0#D#DX1#8'D#D#D#D X0#D#DX1#D#D Q#DRM0T8IO2DDDDO1#A#AO2#F#F #D#D#D #D#D#D #D#D Q#DRO4M0T1S X0DX1DDDDDDD SX0O3#AX1#A#A#A X0IO4#FF P0 SX0#D#DX1#D#D#D#D  X0#D#DX1#D#D#D#D X0#D#DX1#D#D Q#DRQT9O4C C HT7O0C .C QT9O4C HT7O0CP0T0O4 SP0FP3#FP0FP3#F P0FP3#F P0ID P0#DR #G8 R SP0FP3#FP0FP3#FP0FP3#F P0ID P0#DR HO4T9C T0O4I#DR#DRQRT2O6SP0FP3#FP0FP3#F P0FP3#F P0ID P0#DR #GR SP0FP3#FP0FP3#FP0FP3#F P0ID P0#DR HO4T9C O6T2I#DR#DRQRO5M0T1 SP0FP3#FP0FP3#F P0FP3#F P0ID P0#DR #GR SP0FP3#FP0FP3#FP0FP3#F P0ID P0#DR HO4T9C T1O5I#DR#DRQ93#ARO4CR  O3#ARO4#DRDR#DRCRDRO3#ARO4CRX0T8M3 SO4#ARO5#DRDR#DRCRDRO4#ARO5CR  O4#ARO5#DRDR#DRCRDRO4#ARO5CR  O4#ARO5#DRDR#DRCRDRO4#ARO5CRX0T1O4M0 IO4#AO5#DD#DCDO4#AO5C  O4#AO5#DD#DCDO4#AO5C  O4#AO5#DD#DCDO4#AO5CQT9O4C IT6O2C O3C QT9O4C T6C HT7O0C H.T7O0C9-----------------------.SAVENEWFRAMETOMEMORY'------------------------  POKE $40800 + STARTX + STARTY * 80, STARTCHAR  POKE $FF80000 + STARTX + STARTY * 80, STARTCOLOR  POKE $40800 + ENDX + ENDY * 80, ENDCHAR  POKE $FF80000 + ENDX + ENDY * 890, ENDCOLOR  FRAMECOUNT = PEEK($50000 + ԯͯ)  GOSUB LOCATENEXTFREEBYTE  PTR = $50000 + BYTESUSED  NEWFRAMEFLAG = 1  GOSUB SAVEFRAMETOMEMORYATPTR  RETURN'---------------------------.SAVEFRAMETOMEMORYATPTR'----;OOOOOOO P                                                                                                                 9 QT9O4C H.T7O0CX0T0O4Q#A SO5 X0FX1#FX0FX1#F X0#DX1#DX0#DX1#D X0DX1DX0DX1D X0#DX1#DX0#DX1#D X0DX1DX0DX1D X0CX1CX0CX1C O4X0#AX1#AX0#AX1#AP0X0T2  O6Q#A SO6 X0FX1#FX0FX1#F X0Q#D D #D D C O6#AX0T8M3 O3Q#A SO4 X0F#FF#F X0I#D#D DD #D#D DD CC O3#A#AX0T8M3 O49TS OF ATTIC  TO CACHE ITS VARIOUS MODULES. BELIEVE BIK'S INTENT BY THIS IS SO THAT ELEVEN CAN RE-LOAD ITS MODULESSTRAIGHT FROM THE CACHE (AND NOT NEED TO ALWAYS ACCESS THE DRIVE).S SOME OF THESE MODULES HAVE GROWN OVER TIME, THE AMOUNT OF ATTI9	C ALLOCATED TO THEM HAS INCREMENTALLY GROWN.HE DIAGRAM BELOW REPRESENTS CURRENT ATTIC RAM USAGE:$800,0000 +---------------+          ! 11.       ! (MAX 53KB)$801,0000 +---------------+          ! 11.      ! (MAX 53KB)$802,0000 +---9Q#A SO5 X0F#FF#F X0I#D#D DD #D#D DD CC O4#A#AX0T1O4M0 O4Q#A SO5 X0FX1#FX0FX1#F X0#DX1#DX0#DX1#D X0DX1DX0DX1D X0#DX1#DX0#DX1#D X0DX1DX0DX1D X0CX1CX0CX1C O4X0#AX1#AX0#AX1#AX0QT9O4C IT6O0CC QT9O4C T6C HT9O2C HT7O0CST0O4 X0#GX1#GX0#GX1#G X0#AX1#AX0#AX1#A 9X0O5CX1CX0DX1D X0Q#D X0O4#A X1#A #A #A X0H#AP0X0T2 O6 Q#G #A IC D Q#D X0O6#A X1#A #A #A X0H#AX0T8M3 O3 Q#G #A O4ICD Q#D QO3#A #A #A #A H#AX0T8M4 O4 SX0#GX1#GX0#GX1#G X0#AX1#AX0#AX1#A X0O5CX1CX0DX1D X0Q#D X0O4#A X1#A #A #A X0H#AX0T1O4M0 SO4 X0#GX1#GX09
------------+          ! 11.   ! (8KB)$802,2000 +---------------+          ! 11.   ! (8KB)$802,4000 +---------------+          ! 11.       ! (8KB)$802,6000 +---------------+$803,0000 +---------------+          !     !      ... +---------------+                                                                                                                                                                                                                               9-----------------------  POKE PTR + ͯԯ, STARTX  POKE PTR + ͯԯ, STARTY  POKE PTR + ͯԯ, X - STARTX + 1  POKE PTR + ͯԯ, Y - STARTY + 1  IF NEWFRAMEFLAG THEN BEGIN    LN = ͯԯ - ͯԯ9    EDMA Я, LN, 0, PTR + ͯԯ  BEND  PTR = PTR + ͯԯ  FOR YIDX = STARTY TO Y    FOR XIDX = STARTX TO X     POKE PTR, PEEK($40800 + XIDX + YIDX * 80)     PTR = PTR + 1    NEXT XIDX  NEXT YIDX  FOR YIDX = STARTY9 TO Y    FOR XIDX = STARTX TO X     POKE PTR, PEEK($FF80000 + XIDX + YIDX * 80)     PTR = PTR + 1    NEXT XIDX  NEXT YIDX  IF NEWFRAMEFLAG THEN BEGIN    WPOKE $50000 + ԯ, PTR - $50000    POKE $50000 + ԯͯ, FRAMECO9UNT + 1  BEND  CURSOR 0,49  PRINT CLRLINERIGHT$;"FRAME COUNT=";PEEK($50000 + ԯͯ);  PRINT ", NEXT-FREE=$";HEX$(PTR);  CURSOR 0,0  NEWFRAMEFLAG = 0  RETURN'----------.LOADFRAME'----------  PRINT "";CLRLINERIGHT$;  INP9UT "FRAME#";CURRFRAME  GOSUB DRAWCURRFRAME  RETURN'------------.DELETEFRAME'------------  GOSUB GETENDPTR  ENDPTR = PTR  ' DECREMENT FRAME COUNT  FRAMECOUNT = FRAMECOUNT - 1  POKE $50000 + ԯͯ, FRAMECOUNT  GOSUB DELE:TEFRAMESIZEFROMTOTAL  IF CURRFRAME = FRAMECOUNT THEN BEGIN    CURRFRAME = CURRFRAME - 1  BEND : ELSE BEGIN    GOSUB SHIFTREMAININGFRAMESALONG  BEND  GOSUB DRAWCURRFRAME  RETURN'----------------------------.DELETEFRAMESIZEF9  X1 = X  Y1 = Y  ' COORD2  STORESTATE = ůį  GOSUB ENTERCOORD  X2 = X  Y2 = Y  POKE $40800 + STARTX + STARTY * 80, STARTCHAR  POKE $FF80000 + STARTX + STARTY * 80, STARTCOLOR  POKE $40800 + ENDX + ENDY * 80, ENDCHAR  POKE $FF980000 + ENDX + ENDY * 80, ENDCOLOR  RETURN'----------------------------------.PEEKSELECTEDCOORDSINTOX1Y1X2Y2'----------------------------------  X1 = PEEK(CURRPTR + K)  Y1 = PEEK(CURRPTR + K + 1)  X2 = PEEK(CURRPTR + K + 2)  Y2 = PEEK(9CURRPTR + K + 3)  RETURN'------------------.SHOWHITBOXCOORDS'------------------  GOSUB PEEKSELECTEDCOORDSINTOX1Y1X2Y2  PRINT X1;",";Y1;",";X2;",";Y2;  RETURN'--------.LOADBIN'--------  INPUT "LOAD NAME: ";FNAME$  IF FNAME$ = "" THE9N RETURN  BLOAD (FNAME$),P($50000)  ' GOSUB ONEOFFREPAIR  RETURN'--------------.ONEOFFREPAIR'--------------  ' INJECT SPACES WHERE NEEDED  SRCPTR = $42000  DESTPTR = $50000  FRAMECOUNT = PEEK(SRCPTR)  POKE DESTPTR + ԯͯ9, FRAMECOUNT  SRCPTR = SRCPTR + 1  DESTPTR = DESTPTR + ԯ0  SZ = ԯ0  FOR K = 0 TO FRAMECOUNT - 1    POKE DESTPTR + ͯԯ, PEEK(SRCPTR)    SRCPTR = SRCPTR + 1    POKE DESTPTR + ͯԯ, PEEK(SRCPTR)9#GX1#G X0#AX1#AX0#AX1#A X0O5CX1CX0DX1D X0Q#D X0O4#A X1#A #A #A X0H#AQT9O4C Q.T7O0C IT6O2C QT9O4C H.T7O0C QT9O4C HT7O0CST0O4 X0#GX1#GX0#GX1#G X0#AX1#AX0#AX1#A X0O5CX1CX0DX1D X0Q#D X0O4H.#A Q#A H#AP0X0T2 O6 Q#G #A IC D Q#D X0O6#ARR Q#A #ARX0T8M3 O3 Q#G9 #A O4ICD Q#D QO3#ARR #A #ARX0T8M3 O4 Q#G #A O5ICD Q#D QO4#ARR #A #ARX0T1O4M0 SO4 X0#GX1#GX0#GX1#G X0#AX1#AX0#AX1#A X0O5CX1CX0DX1D X0Q#D QO4#A RR #A #ARQT9O4C Q.T7O0C IT6O2C QT9O4C H.T7O0C QT9O4C HT7O0CT2O6M3H.#D S#DFI#D SDC QM9D IR O6I#D#GF#DD#D QM99D O5#A IRSO6#FFP0M0X0T4 QR O4#D R #D R D R #D R D O3#AT7M0 O0X0QC IO4X0T6CC T9O2QG T6O4C QT7O0C T6O4C  T7O0C S HT9O4C T6QO4C T9O2O2CM0P0T4X0 QR O5#D R #D R D R #D R D O4 I#AB O5D#DM0T5O2X1I#D#D#D#D#D#D#D#D DDDD #D#D#D#D DDDD O1 #AT2O6M3H.#D S#DFI#D: SDC QM9D IRM1X0T4 QR O4#D R #D R D RT7M0 O0X0QC IO4X0T6CC T9O2QG T6O4C QT7O0C T6O4C T4X0 QR O5#D R #D R D RM0T5O2X1I#D#D#D#D#D#D#D#D DDDDM1X0T0O4 Q#D ICO3#A Q#G#A O4ICD Q#D O3#ARR #A #A IRRT2O6Q#D ICO5#A Q#G#A O6ICD Q#D O5#ARR #A #A IRRO5 ST1X0#9    SRCPTR = SRCPTR + 1    FRMW = PEEK(SRCPTR)    POKE DESTPTR + ͯԯ, FRMW    SRCPTR = SRCPTR + 1    FRMH = PEEK(SRCPTR)    POKE DESTPTR + ͯԯ, FRMH    SRCPTR = SRCPTR + 1    LN = ͯԯ - ͯԯ9    EDMA Я, LN, 0, DESTPTR + ͯԯ    LN = FRMW * FRMH * 2    EDMA Я, LN, SRCPTR, DESTPTR + ͯԯ    SRCPTR = SRCPTR + LN    DESTPTR = DESTPTR + ͯԯ + LN    SZ = SZ + ͯԯ + LN   9   NEXT K  DESTPTR = $50000  WPOKE DESTPTR + ԯ, SZ  RETURN'--------.SAVEBIN'--------  INPUT "SAVE NAME: ";FNAME$  IF FNAME$ = "" THEN RETURN  PTR = $50000 + WPEEK($50000 + ԯ)  DELETE (FNAME$)  BSAVE (FNAME9$),P($50000) TO P(PTR)  RETURN'-------------------------------------.CALCULATEOPTIMISEDDATASIZEINTOSZ'-------------------------------------  SZ = WPEEK($50000 + ԯ)  PTR = $50000 + ԯ0  FOR K = 0 TO FRAMECOUNT - 1 9   FRMW = PEEK(PTR + ͯԯ)    FRMH = PEEK(PTR + ͯԯ)    SZ = SZ - FRMW * FRMH    PTR = PTR + ͯԯ + FRMW * FRMH * 2  NEXT K  RETURN'--------------.SAVEOPTIMISED'--------------  INPUT "SAVE NAME (OPTIMISED): ";FNAME9 $  IF FNAME$ = "" THEN RETURN  DELETE (FNAME$)  DOPEN #2,(FNAME$ + ",P"),W,U8  PRINT #2, CHR$(1);  PRINT #2, CHR$(2);  ' DUMMY ADDRESS  GOSUB CALCULATEOPTIMISEDDATASIZEINTOSZ    PRINT #2, CHR$(MOD(SZ, 256));  PRINT #2, CHR$(INT(SZ / 256))9!;  PRINT #2, CHR$(FRAMECOUNT);  PTR = $50000 + ԯ0  FOR FRMIDX = 0 TO FRAMECOUNT - 1    X = PEEK(PTR + ͯԯ)    Y = PEEK(PTR + ͯԯ)    FRMW = PEEK(PTR + ͯԯ)    FRMH = PEEK(PTR + ͯԯ)    PRINT #29", CHR$(X);CHR$(Y);CHR$(FRMW);CHR$(FRMH);    FOR K=0 TO 15      PRINT #2, CHR$(PEEK(PTR + ͯԯ + K));    NEXT K    SRCCHARPTR = PTR + ͯԯ    SRCCLRPTR = PTR + ͯԯ + FRMW * FRMH        FOR K = 0 TO FRMW *9 FRMH - 1      CVAL = PEEK(SRCCLRPTR + K)      IF PEEK(SRCCHARPTR + K) = 32 THEN BEGIN        CVAL = $FF      BEND      PRINT #2, CHR$(CVAL);    NEXT K    PTR = PTR + ͯԯ + FRMW * FRMH * 2  NEXT FRMIDX  DCLOSE #2  RETURN'-9$IC S#AC  Q#A IC S#AC Q#A I#GP4#A P0W#A Q#ARX0T8O3M3 P0O3I#D#GG#G   Q#A O4IC SO3P0#AO4P7C  P0QO3#A O4IC SO3P0#AO4P7C   P0QO3#A O4IC SO3P0#AO4P7C  P0QO3#A O4IC SO3P0#AO4P7C P0QO3#A I#GP1#A P0W#AQ#ARX0T8O4M3 P0O4I#D#GG#G   Q#A O5IC SO4P0#AO5P7C  P0QO4#A O9%5IC SO4P0#AO5P7C   P0QO4#A O5IC SO4P0#AO5P7C  P0QO4#A O5IC SO4P0#AO5P7C P0QO4#A I#GP2#A P0W#AQ#AR X0T1O4M0 P0HR S#AX1#A#A#A QR  SX0#AX1#A#A#A QR SX0#AX1#A#A#A  QR SX0#AX1#A#A#A QR SX0#AX1#A#A#A QR SX0#AX1#A#A#A #A#A#A#A #A#A#A#A #A#A#A#A X0#AQT9O4C IT69&O0C O2C QT9O4C O2C HT9O4C HT7O0.C QT9O4C HT7O0C QT9O4C IT6O0C O2C QT9O4C O2C HT7O0CT0Q.O6C O5I#A#G#AO6CO5#G H#AP0X0T2O6 Q.O6C I#A#G#AC#G H#AX0T8O3M3 Q.O4C O3I#A#G#AO4CO3#G H#AX0T8O4M3 Q.O5C O4I#A#G#AO5CO4#G H#AX0T1O4M0 SO5X0CX1CX0CX1CX0CX1C X0O4I#A#9 G#AO5CO4#G H#AQ.T7O0C IT6O2C QT9O4C QT6O4C HT7O0CX0IO4T1#AO5#DD#DCDO4#AO5C  O4#AO5#DD#DCDO4#AO5C  O4#AO5#DD#DCDO4#AO5CP0X0T2O6 S#AR#DRDR#DRCRDR#ARCR  #AR#DRDR#DRCRDR#ARCR  #AR#DRDR#DRCRDR#ARCRX0T8M3 SO3#ARO4#DRDR#DRCRDRO3#ARO4CR  O3#ARO4#DRDR#DRCRDRO9OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO:--.STORESTATEINFO'----------------  IF STORESTATE = ůԯ THEN BEGIN    STARTCHAR = PEEK($40800 + X + Y * 80)    STARTCOLOR = PEEK($FF80000 + X + Y * 80)    STARTX = X    STARTY = Y  BEND:ELSE BEGIN ' ůį    ENDCHAR = P@EEK($40800 + X + Y * 80)    ENDCOLOR = PEEK($FF80000 + X + Y * 80)    ENDX = X    ENDY = Y  BEND  RETURN'---------.INITVARS'---------  CURRENTFRAME = 0  STORESTATE = ůԯ  X = 0  Y = 0  CURRFRAME = 0  RETURN  '--------:: V CURRDIR = :CW: V ENVSATTACK = :CX: V ENVSDECAY = :CY: V ENVSSUSTAIN = :CZ: W ENVSRELEASE = :DA: )W ENVSWAVEFORM = :DB: >W ENVSPW = :DC: QW FSROW = :DD: cW FSEL = :DE: zW FILTFREQ = :DF: W FILTLP = :DG: :W FILTBP = :DH: W FILTHP = :DI: W FILTRES = :DJ: W FILTDIR = :DK: W FILTMIN = :DL: X FILTSWEEP = :DM: 'X SEQCNT = :DN: >X SEQCHUNK = :D1: UX SEQEXTRA = :DP: iX PLYPTR = :DQ: ~X PLYFLAG = :DR: X PJUMP = :;D2: X BJUMP = :D3: X NEXTBADDIETIME = :DU: X BADDIEDEADTIME = :DV: X BADDIESTATE = :DW: Y  = :DX: Y RET% = :A%: -Y TMPO% = :B%: ;Y  = :C%: KY A$ = :A$: [Y V$ = :B$: nY SONG$ = :C$: Y V1$ = :D$: Y V2$ = :     360   A0:B0:E0:F0: A$(5,50):C$"CDEFGAB0123456789 #$.HIQRSWOTUXMPL":A%12:B%0:B%0: E$(9): G(9): H(9): I(9): J(9): K(9): L(9): 1! E$(.)"IANO":G(.).:H(.)9:I(.).:J(.).:K(.)2:L(.)1536:E$(1)"CCORDION":G(1)12:H(1).:I(1)12::RUM3 0  9  0  0  3  0 MUTESTRUM 300  1  0  0  15  0  0  0 LOWPDOWN 1000  1  0  0  15  2  100  10 LOWPOSC 1000  1  0  0  15  3  100  10 BANDPUP 1000  0  1  0  15  1  100  10 BANDPDOWN 1000  0  1  0  15:  2  100  10 BANDPOSC 1000  0  1  0  15  3  100  10 HIGHPUP 1000  0  0  1  15  1  100  10 HIGHPDOWN 1000  0  0  1  15  2  100  10 HIGHPOSC 1000  0  0  1  15  3  100  10 SPARE1 0  0  0  0  0  0  0  0 S:	PARE2 0  0  0  0  0  0  0  0  102 -9  10 -10  0 -8  0.01 -1  15 -2  0  0  0  1  0  2  2 -5  0 -2  0 -8  0.02  3  0  4  0 -7  0 -10  0 -8  0.01 -2  0  5  0  6  2  7  0  8  0  9  0 -7  0 -5  0 -8 :
 0.03  10  0 -7  0 -10  0 -8  0.01 -2  0  11  0  12  0 -7  0 -5  0 -8  0.03  10  0 -7  0 -10  0 -8  0.01 -2  0  11  0  13  0 -7  0 -4  0 -8  0.12 -9  10  14  2  15  0 -7  0 -10  0 -8  0.01 -2  0 -9 : 12  16  0 -9  14  17  0  18  0  17  0  18  0  17  0  16  0 -1  16 -8  0.007  19  0  20  0  21  0  22  0  23  0 -2  0  24  0 -1  15 -9  10 -4  0 -8  0.06 -1  15  25  0 -7  0 -9  15  26  0 -4  0 -9   15  25  0 -7  0  26  0  27  0  24  0 -9  10 -4  0  28  0  29  0 -7  0 -10  0 -8  0.01 -2  0  30  0 -9  15  16  0 -1  16  31  0  32  0  33  0 -3  0                                                                 : REM DBLQUOTE$ = :A$: 424 REM PARSERFILE$ = :B$: 425 REM T$ = :C$: 426 REM BLANKLINE$ = :D$: 427 REM TYPEIDENT$ = :E$: 428 REM CURRSRCLINE$ = :F$: 429 REM NEXTLINE$ = :G$: 430 REM MK$ = :H$: 431 REM TOKENS$ = :I$: 432 REM DUMBCMDS$ = :J$;#: 433 REM DESTLINE$ = :K$: 434 REM VARTABLE$ = :L$: 435 REM DEFINEVAL$ = :M$: 436 REM LABELNAME$ = :N$: 437 REM ARGS$ = :O$: 438 REM STRUCTNAME$ = :P$: 439 REM STRUCTFIELDS$ = :Q$: 440 REM STRUCTVARS$ = :R$: 441 REM WHITESPACE$ = :S$: 44:J(1).:K(1)1:L(1).:E$(2)"ALLIOPE":G(2).:H(2). ! I(2)15:J(2).:K(2).:L(2).:E$(3)"RUM":G(3).:H(3)5:I(3)5:J(3).:K(3)3:L(3).:E$(4)"LUTE":G(4)9:H(4)4:I(4)4:J(4).:K(4).:L(4).:E$(5)"UITAR" m" G(5).:H(5)9:I(5)2:J(5)1:K(5)1:L(5):0T8IO2 #AO3#DCO2#A Q#G #A IG#GGF Q#DRR I#DR #DRO4M0T1 SX0#AX1#A O5X0#DX1#D X0CX1C O4X0#AX1#A X0#GX1#G#G#G X0#AX1#A#A#A X0GX1G X0#GX1#G X0GX1G X0FX1F X0#QDRR I#DR #DRQR IT6O4CC QR C IR O2CQC H.O0T7C O2QT9C HO0T7C 16 IANO 0  9  0  0  2  1536 PL:UCKY 0  8  0  0  1  0 ALLIOPE 9  4  9  9  0  0 RUM 0  5  5  9  3  0 PLUCKY2 0  9  0  0  1  0 UMMING 0  8  0  0  2  100 RUM1 0  8  0  0  3  0 RUM2 0  10  0  0  3  2048 STRINGY 8  9  4  1  1  512 :ROMTOTAL'----------------------------  GOSUB GETCURRFRAMEPTR  CURRPTR = PTR  FRMW = PEEK(CURRPTR + ͯԯ)  FRMH = PEEK(CURRPTR + ͯԯ)  SZ = WPEEK($50000 + ԯ)  SZ = SZ - (ͯԯ + FRMW * FRMH * 2)  :WPOKE $50000 + ԯ, SZ  RETURN'----------------------------.SHIFTREMAININGFRAMESALONG'----------------------------  GOSUB GETCURRFRAMEPTR  CURRPTR = PTR  FRMW = PEEK(CURRPTR + ͯԯ)  FRMH = PEEK(CURRPTR + ͯ:ԯ)  STARTPTR = CURRPTR + ͯԯ + FRMW * FRMH * 2  LN = ENDPTR - STARTPTR + 1  ' PRINT "CURRPTR = ";HEX$(CURRPTR)  ' PRINT "STARTPTR = ";HEX$(STARTPTR)  ' PRINT "ENDPTR = ";HEX$(ENDPTR)  ' PRINT "LN = ";HEX$(LN)  ' GET KEY: A$  ' A$=""  EDMA Я, LN, STARTPTR, CURRPTR    RETURN'-----------.GETENDPTR'-----------  FRAMECOUNT = PEEK($50000 + ԯͯ)  PTR = $50000 + ԯ0  FRMIDX = 0  IF FRMIDX >= FRAMECOUNT THEN BEGIN    CURSOR 0,0:    PRINT CLRLINERIGHT$;"INVALID BLOCK#!"    RETURN  BEND  ' TRAVERSE TO FIND BLOCK  FOR FRMIDX = 0 TO FRAMECOUNT - 1    FRMW = PEEK(PTR + ͯԯ)    FRMH = PEEK(PTR + ͯԯ)    PTR = PTR + ͯԯ + FRMW * FRMH * 2  NEX:T FRMIDX  RETURN'------------------.GETCURRFRAMEPTR'------------------  FRAMECOUNT = PEEK($50000 + ԯͯ)  ' TRAVERSE TO FIND BLOCK  PTR = $50000 + ԯ0  FOR FRMIDX = 0 TO FRAMECOUNT    IF FRMIDX = CURRFRAME THEN R: ETURN    FRMW = PEEK(PTR + ͯԯ)    FRMH = PEEK(PTR + ͯԯ)    PTR = PTR + ͯԯ + FRMW * FRMH * 2  NEXT FRMIDX  PTR = 0  RETURN'---------------.DRAWCURRFRAME'---------------  FRAMECOUNT = PEEK($50000 + ԯ:.:E$(6)"ARPSICRD":G(6).:H(6)9:I(6).:J(6).:K(6)2:L(6)512:E$(7)"RGAN":G(7).:H(7)9:I(7)9:J(7).:K(7)2 # L(7)2048:E$(8)"RUMPET":G(8)8:H(8)9:I(8)4:J(8)1:K(8)2:L(8)512:E$(9)"YLOPHONE":G(9).:H(9)9:I(9).:J(9).:K(9).:L(9).: F$(3:):F$(.)"" # F$(1)"":F$(2)"":F$(3)"": G$(10): M(10): N(10): O(10): P(10): Q(10): R(10): S(10): T(10):G$(.)"LOWPUP":M(.)1000 .$ N(.)1:O(.)0:P(.)0:Q(.)15:R(.)1:S(.)100:T(.)10:G$(1)"LOWPDOWN":M(1)1000:N(1)1:O(1)0:PBDX1#DX0#DX1#D X0CX1C O4X0#AX1#A X0#GX1#GX0#GX1#G X0#AX1#AX0#AX1#A O5X0CX1C X0DX1D X0#DX1#D X0#DX1#D O4Q#A RR #A #AM0T8I O2X0#DX1#D X0CO1X1#A X0#GX1#G X0#AX1#A O2X0C X1D X0#DX1#D O1Q#A RR #A #AO4 ST1X0#DX1#DX0#DX1#D X0CX1C O3X0#AX1#A X0#GX1#GX0#GX1#G X0:(1)0:Q(1)15:R(1)2:S(1)100:T(1)10:G$(2)"LOWPOSC" $ M(2)1000:N(2)1:O(2)0:P(2)0:Q(2)15:R(2)3:S(2)100:T(2)10:G$(3)"BANDPUP":M(3)1000:N(3)0:O(3)1:P(3)0:Q(3)15:R(3)1:S(3)100:T(3)10 `%	 G$(4)"BANDPDOWN":M(4)1000:N(4)0:O(4)1:P(4):0:Q(4)15:R(4)2:S(4)100:T(4)10:G$(5)"BANDPOSC":M(5)1000:N(5)0:O(5)1:P(5)0:Q(5)15:R(5)3:S(5)100 %
 T(5)10:G$(6)"HIGHPUP":M(6)1000:N(6)0:O(6)0:P(6)1:Q(6)15:R(6)1:S(6)100:T(6)10:G$(7)"HIGHPDOWN":M(7)1000:N(7)0:O(7)0:P(7)1:Q(7):15:R(7)2 & S(7)100:T(7)10:G$(8)"HIGHPOSC":M(8)1000:N(8)0:O(8)0:P(8)1:Q(8)15:R(8)3:S(8)100:T(8)10:G$(9)"SPARE1":M(9).:N(9)0:O(9)0:P(9)0:Q(9).:R(9)0 ' S(9).:T(9).:G$(10)"SPARE2":M(10).:N(10)0:O(10)0:P(10)0:Q(10).:R(10)0:S:(10).:T(10).: U(200): V(200):Y.05: '  N$(10):N$(1)"":N$(2)"":N$(3)"":N$(4)"ϯ1":N$(5)"ϯ2":N$(6)"ϯ":N$(7)"ϯ":N$(8)"ϯ":N$(9)"" A( N$(10)"": Q$(11): R$(11):Q$(.)"A":R$(.)"C":Q$(1)"W":@$R$(1)"#C":Q$(2)"S":R$(2)"D":Q$(3)"E":R$(3)"#D":Q$(4)"D":R$(4)"E":Q$(5)"F" ( R$(5)"F":Q$(6)"T":R$(6)"#F":Q$(7)"G":R$(7)"G":Q$(8)"Y":R$(8)"#G":Q$(9)"H":R$(9)"A":Q$(10)"U":R$(10)"#A":Q$(11)"J":R$(11)"B": T$(4): a) T$(.)"":T$(1):!)  PTR = $50000 + ԯ0  FRMIDX = 0  IF FRMIDX >= FRAMECOUNT THEN BEGIN    CURSOR 0,0    PRINT CLRLINERIGHT$;"INVALID BLOCK#!"    RETURN  BEND  GOSUB GETCURRFRAMEPTR  IF PTR = 0 THEN PRINT "NOT FOUND!" : RETURN    X = PE:"EK(PTR + ͯԯ)  Y = PEEK(PTR + ͯԯ)  FRMW = PEEK(PTR + ͯԯ)  FRMH = PEEK(PTR + ͯԯ)  ENDX = X + FRMW - 1  ENDY = Y + FRMH - 1  PRINT "";CLRLINERIGHT$;  PRINT "X=";X;", Y=";Y;", W=";FRMW;", H=";FRMH;  PRINT :#", PTR=$";HEX$(PTR);  PRINT "";CHR$(27);"J";CLRLINERIGHT$;"FRAME=";CURRFRAME;  PRINT ", NXT=$";HEX$(PTR + ͯԯ + FRMW * FRMH * 2);  SRCCHARPTR = PTR + ͯԯ  SRCCLRPTR = PTR + ͯԯ + FRMW * FRMH  DESTCHARP:%TR =$40800 + X + Y * 80  DESTCLRPTR = $FF80000 + X + Y * 80  FOR YIDX = Y TO ENDY    EDMA Я, FRMW, SRCCHARPTR, DESTCHARPTR    EDMA Я, FRMW, SRCCLRPTR, DESTCLRPTR    SRCCHARPTR = SRCCHARPTR + FRMW    SRCCLRPTR = SRCCLR RINT "";  NEXT Y  RETURN  ' ----------------  FOR X = X1+1 TO X2-1    CURSOR X,Y1 : PRINT "";    CURSOR X,Y2 : PRINT "";  NEXT X  ' DRAW VERTICALS  ' --------------  FOR Y = Y1+1 TO Y2-1    CURSOR X1,Y : PRINT "";    CURSOR X2,Y : P:&PTR + FRMW    DESTCHARPTR = DESTCHARPTR + 80    DESTCLRPTR = DESTCLRPTR + 80  NEXT YIDX  RETURN'-------------------------.RESTORECHARUNDERCURSOR'-------------------------  IF STORESTATE = ůԯ THEN BEGIN    POKE $40800 :'+ X + Y * 80, STARTCHAR    POKE $FF80000 + X + Y * 80, STARTCOLOR  BEND:ELSE BEGIN  ' ůį    POKE $40800 + X + Y * 80, ENDCHAR    POKE $FF80000 + X + Y * 80, ENDCOLOR        BEND  RETURN'-----------.DRAWCURSOR'-----------  POKE:  $40800 + X + Y * 80, 43  POKE $FF80000 + X + Y * 80, 1  RETURN'-----------.DRAWFOOTER'-----------  CURSOR 0,49  PRINT CLRLINERIGHT$;"FRAME COUNT=";PEEK($50000 + ԯͯ);", NEXT-FREE=$";  PRINT HEX$(PTR);  RETURN'--------------;  I  	
                                                                                                                                                                                                               ;                                                                                                                           ;       
   


  
  

       
 
               ;             	
                                                                                                                                                              ;                                                                                                                                                                                           :E$: Y V3$ = :F$: Y V4$ = :G$: Y V5$ = :H$: Y V6$ = :I$: Y ENVSNAME$ = :J$: Z FILTNAME$ = :K$: Z  = :L$:  Z  = :A&:                                                                                                          ;       
   


  
  

      
    ;                  	
                                                                                                                ;	                                                                                                                                                                                                       ;
                                
   


  
  

  ;      
                           	

                                                           ;                                                                                                                                                                                                                ;                                                                            
   


 ;% 
  

     
                            	

 ; P                ;  P                AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA<AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC;                                                                                                                                                                                                                                ;                                                                                                                                                                 ;                                                                                 ;            ࠠ ;;OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO;OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO;OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO;OOOOOOOOOOOOOOOO;;; P                ;;; ;!;" #P                =#;$2 REM S$ = :T$: 443 REM Z$ = :U$: 444 REM CURRDESTLINE$ = :V$: 445 REM C$ = :W$: 446 REM F$ = :X$: 447 REM D$ = :Y$: 448 REM PARSERERROR$ = :Z$: 449 REM P$ = :AA$: 450 REM DIMENSION$ = :AB$: 451 REM VALUE$ = :AC$: 452 REM TR$ = :AD$: 453 RE<M HX$ = :AE$: 454 REM BI$ = :AF$: 455 REM PP$ = :AG$: 456 REM VN$ = :AH$: 457 REM OF$ = :AI$: 458 REM ARGSLIST$ = :AJ$: 459 REM B$ = :AK$: 460 REM A$ = :AL$: 461 REM CX$ = :AM$: 462 REM LC$ = :AN$: 463 REM BC$ = :AO$: 464 REM TF$ = :AP$: 465;&                                                                                                                                                                                                                      ;'                                                                                                                     @        
   


  
         
                        <<                


























 






                


























<%  	
        

  


  

       <   
 
                            	
    <    

  


  

         
         <             	
        

  


<  

           
                          <		

        

  


  

        
 <
                           	

    <    

  


  

        
                 <                	


    

  


 = 
       
                                    	


<R| CHUNKCNT = :CL: R} CHUNKIDX = :CM: R~ VIDX = :CN: R ROW = :CO: R ECHOM = :CP: S ECHOB = :CQ: 'S ECHOSZ = :CR: >S CHUNKRPT = :CS: VS ECHODELAY = :CT: eS V = :CU: |S CURRFREQ = :CV: S CURRDIR = :CW: S<UB 110:GOSUB 111:F$=T$:AP$=" ":AY=. 253 IFLEFT$(T$,1)=A$THENBEGIN 254 AP$=A$+", ":AY=2:BEND 255 AU=INSTR(F$,AP$) 256 IFAU<>.THENBEGIN 257 T$=MID$(F$,1,INSTR(F$,AP$)+AY-1):F$=MID$(F$,INSTR(F$,AP$)+AY+1):BEND 258 IFAU=.THENBEGIN 259 T$=F$:F$="":BEND< 260 RETURN 261 BANK.:AZ=PEEK(M):F$=LEFT$(D$,AZ):BA=POINTER(F$):BB=65536+WPEEK(BA+1):M=M+1 262 IFAZ<>.THENBEGIN 263 EDMA.,AZ,M,BB:M=M+AZ:BEND 264 K=K+1:AD$=S$:T$=F$:GOSUB 110:F$=T$:AI=.:BC=.:BANK1:RETURN 265 BC=INSTR(F$,"'") 266 IFBC<>.THENBEGIN <267 IFINSTR(F$,A$)<>.THENBEGIN 268 BC=.:BANK.:BD=PEEK(BA)-1:BE=WPEEK(BA+1):BANK1:FORV=.TOBD:BF=PEEK(BE+V) 269 IFBF=BTHENBEGIN 270 AI=ABS(AI-1) 271 BEND:ELSEBEGIN 272 IFBF=CANDAI=.THENBEGIN 273 BC=V+1:V=999:BEND 274 BEND 275 NEXT:BEND 276 IFBCTHE<NBEGIN 277 F$=LEFT$(F$,BC-1):BEND 278 BEND 279 RETURN 280 IFINSTR(F$,"IFDEF")=2THENBEGIN 281 T$=MID$(F$,8):GOSUB 243:O=1:BEND 282 IFINSTR(F$,"ENDIF")=2THENBEGIN 283 R=.:O=1:BEND 284 IFINSTR(F$,"DEFINE")=2THENBEGIN 285 W=1:GOSUB 49:W=.:BEND 286 <IFINSTR(F$,"DECLARE")=2THENBEGIN 287 W=.:GOSUB 49:BEND 288 IFINSTR(F$,"OUTPUT")=2THENBEGIN 289 GOSUB 98:BEND 290 IFINSTR(F$,"STRUCT")=2THENBEGIN 291 GOSUB 247:O=1:BEND 292 RETURN 293 AQ$=T$:F$=T$:AW=-1:GOSUB 252:FORBG=.TOI-1 294 IFT$=P$(BG)THENBE<GIN 295 AW=BG:BG=I-1:BEND 296 NEXTBG 297 IFAW=-1THENBEGIN 298 F$=AQ$:T$=AQ$:RETURN 299 BEND 300 GOSUB 252:AR$=T$:BH=INSTR(AR$,"("):T$=R$(AW):GOSUB 112:AW=1:BI=.:FORBG=.TOY 301 IFO$(BG)<>""THENBEGIN 302 PRINT"ARGS$(";BG;")=";O$(BG) 303 IFBH=.THEN<BEGIN 304 T$=AR$+""+O$(BG):PRINT"STRUCT: ";T$:AA$=T$:GOSUB 58:BEND 305 IFBH<>.THENBEGIN 306 T$=LEFT$(AR$,BH-1)+""+O$(BG)+MID$(AR$,BH):PRINT"STRUCT: ";T$:AA$=T$:GOSUB 58:Q$(BI)=AA$:BI=BI+1:BEND 307 NEXTBG:T$=G$:GOSUB 339:G$="":GOSUB 252 308 IFT$<>"= ="THENBEGIN 309 F$="":RETURN 310 BEND 311 GOSUB 252:BI=.:BJ=.:BK=.:DOWHILET$<>"" 312 IFT$="_"THENBEGIN 313 J=J+1:GOSUB 261 314 GOTO 334:BEND 315 IFBK=.ANDT$<>"["THENBEGIN 316 PRINT"ERROR: EXPECTED [":SLEEP1:STOP:BEND 317 IFBK=.ANDT$="["THENBEGIN<CCCDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFGGGGGGGGGGG<GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIJJJJJJJJJJJJJJJJJJJJJJJJJ<JJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM<MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO P                <<< P                <<< <!<"<# P                <$<%<& #P                <'<  )P                = 318 BK=1 319 GOTO 334:BEND 320 IFBK=1ANDT$<>"["ANDT$<>"]"THENBEGIN 321 PRINT"ERROR: EXPECTED [ OR ]":SLEEP1:STOP:BEND 322 IFBK=2THENBEGIN 323 IFLEFT$(T$,1)="]"THENBEGIN 324 BJ=BJ+1:BI=.:BK=1:T$="" 325 GOTO 329:BEND 326 IFRIGHT$(T$,1)=","THENBEG=IN 327 T$=LEFT$(T$,LEN(T$)-1):BEND 328 T$=Q$(BI)+"("+STR$(BJ)+")="+T$:GOSUB 122:GOSUB 339:T$="":BI=BI+1 329 BEND 330 IFBK=1ANDT$="["THENBEGIN 331 BK=2:BI=.:BEND 332 IFBK=1ANDT$="]"THENBEGIN 333 BK=.:BEND 334 GOSUB 252:LOOP:T$="":F$="":G$="":AS$="?Z":RETURN 335 IFRIGHT$(V$,1)="_"THENBEGIN 336 V$=LEFT$(V$,LEN(V$)-1):A=.:BL=1 337 BEND:ELSEBEGIN:BL=.:BEND 338 RETURN 339 IFLEN(V$)+LEN(T$)+LEN(STR$(Q))>=159THENBEGIN 340 A=1:BEND 341 IFAS$<>""THENBEGIN 342 T$="":AS$="":RETURN 343 BEND 344 IFA=====                                                                









 























                        









=	 


  

           
                                            =
    

  
 
  

            
  =                                      = 

   

  

                  
  
                  ?                      
   


   
       =        

  


  

         =   
                   
	
		    =    

  


  

               
              =        		
	

    

  


  

 =                        
                    
    =    

  


  

          = 
                               =    

  


  

           
           =                    = 

  


  

           
                        =    

  


  

    =    
                           =    

  


  

        
                =               

=  


  
       
                                     =    

  


  

     =      
                          =$    

  


  

           
           =   I  	
                                                                                                                                                                                                               =!                                                                                                                           ="    

  


  

          
 
               >#             	
                                                                                                                                                              =%=                  

 =&=' )P                =>      
                           	

                                                           >                                                                                                                                                                                                                >                                                                         

  


 > 

        
                            	

 >                                                                                                                                                                                                                      >                                                                                                                     >    

  


  

        
                        >         	


                                                                                                                                                                        >	                                                                                                                                                           >
    

  


  
       
                   >                 	


                                                                                                                                   >                                                                                                                                                                                                          >               

  


  

        >    
                   
	
		                                                                                 >                                                                                                                                                                                                     >                                                                

  


        

        >                       
                       		
	

                   >                                                                                                                                                                                                    >                                                                                                                 
>
  


  

                         
               >     
                                                                                                                                                                                                        >                                                                                                                                       >    

  


  

           
         >                                                                                                                                                                                >                                                                                                                                                                                        >    

  


  

     >      
                                                                                                                               >                                                                                                                                                                                                               >                                       

 > 


  

           
                                                                 >                                                                                                                                                                                                                              >                                                                             >!    

  


  

         
                       >"                                                                                                                                                                                                                                ?#                                                                                                                   











>$                                                                                                                                                                                          >%    

  


  

         
    >&                  	
                                                                                                                  >'                                                                                                                                                                                                     >                              

  


  

     ?                                                                                                                                                                                                       ?                       

   


  
?
           
                                                                                         ?                                                                                                                                                                                                                          ?                                                         ? 

   


  

           
                               ?                                                                                                                                                                                                                                           ?                                                                                           ?	    

   


  

           
            ?
                                                                                                                                                                                                                        ?                                                                                                                                                             ?    

  
 
  

            
     ?                                                                                                                                                                       ?                                                                                                                                                                                          ?       

   

  

              ?    
  
                                                                                                                         ?                                                                                                                                                                                               ?                                                     
   


   
  ?            
   
                                                                ?                                                                                                                                                                                                                                            ?                                                                       ?    

     

   

        
   
                ?                                                                                                                                                                                                                                                     B                                                                                                             ?       
   
                                     ?    

     

   

    ?    
   
                                      ?          

  
   
 
           
  
                                                                                                                                                                                                                                                                     ?1THENBEGIN 345 K$(Q)=V$:V$=T$:A%(Q)=J:Q=Q+1:A=. 346 BEND:ELSEBEGIN 347 IFV$<>""ANDBL=.ANDRIGHT$(V$,1)<>":"THENBEGIN 348 V$=V$+":":BEND 349 V$=V$+T$:BEND 350 IFPTHENPRINT"<<"Q;T$ 351 RETURN 352 FORAD=.TO3:FORAE=.TOF(AD):GOSUB 211:PRINT#1,STR$(S)+"? REM "+L$(AD,AE)+" = :"+AG$+E$(AD)+":":S=S+1:NEXTAE:NEXTAD:RETURN 353 REM NEXTLINEFLAG = :A: 354 REM DBLQUOTECHAR = :B: 355 REM SNGLQUOTECHAR = :C: 356 REM I = :D: 357 REM BINCONV = :E: 358 REM ELEMENTCNT = :F: 359 REM LABELLINENO = :G: ? 360 REM LABELCNT = :H: 361 REM STRUCTCNT = :I: 362 REM SRCLINENO = :J: 363 REM CURSRCLINENO = :K: 364 REM CB = :L: 365 REM CURATTICADDR = :M: 366 REM TOTALLINES = :N: 367 REM DELETELINEFLAG = :O: 368 REM VERBOSE = :P: 369 REM DESTLINE?!NO = :Q: 370 REM INSIDEIFDEF = :R: 371 REM CURDESTLINENO = :S: 372 REM S1 = :T: 373 REM S2 = :U: 374 REM R = :V: 375 REM DEFINEFLAG = :W: 376 REM IGNOREBRACKETS = :X: 377 REM ARGCNT = :Y: 378 REM BKTOPENIDX = :Z: 379 REM BKTCLOSEIDX =?" :AA: 380 REM EQUALSIDX = :AB: 381 REM DONTMARKLABEL = :AC: 382 REM TY = :AD: 383 REM ID = :AE: 384 REM ARGSLISTLEN = :AF: 385 REM IGNOREDELIMFLAG = :AG: 386 REM ARGSIDX = :AH: 387 REM QUOTEFLAG = :AI: 388 REM DIDREPLACEFLAG = :AJ: 3@#89 REM EXPECTINGLABEL = :AK: 390 REM RVIDX = :AL: 391 REM T = :AM: 392 REM FOUNDSTRUCTIDX = :AN: 393 REM BR = :AO: 394 REM B = :AP: 395 REM VL = :AQ: 396 REM N1 = :AR: 397 REM N2 = :AS: 398 REM BA = :AT: 399 REM A = :AU: 400 REM AD = :AV:?$    

  


  

        
           
  ?%                                                                                                                                                                                              ?&                                                                                                                                                          ?'    

  


  
       
        ?                                                                                                                                                       @: NEXT CHUNK, -/+ TEMPO, 7=ENV EDITOR, 9/-=SEQ EDITOR" |+ ": PLAY CURR VOICE, +: PLAY ALL VOICE, 1=LOAD, 3=SAVE, +=QUIT" + "-//: ROW CUT/COPY/PASTE, -: STOP MUSIC, -: PLAY FROM CURSOR":: 25: , "TEMPO: @= :I$: 431 REM DUMBCMDS$ = :J$: 432 REM DESTLINE$ = :K$: 433 REM VARTABLE$ = :L$: 434 REM DEFINEVAL$ = :M$: 435 REM LABELNAME$ = :N$: 436 REM ARGS$ = :O$: 437 REM STRUCTNAME$ = :P$: 438 REM STRUCTFIELDS$ = :Q$: 439 REM STRUCTVARS$ = :R$:@";A%:"CHUNKIDX: ";A:C.5 , FC @, A.,9C2:(27);"Q";"V";C1;": ";A$(C,A); ~, ::A.,9C2:(27);"Q";"V";C1;": ";:D1(A$(C,A)) , ED1 , "";(A$(C,A),D,1);""; , ::(A$(C,A),D,1);: ,  D:(A$(C,A)).E(A$(C@ 440 REM WHITESPACE$ = :S$: 441 REM S$ = :T$: 442 REM Z$ = :U$: 443 REM CURDESTLINE$ = :V$: 444 REM CURTOK$ = :W$: 445 REM F$ = :X$: 446 REM DELIM$ = :Y$: 447 REM PARSERERROR$ = :Z$: 448 REM VARNAME$ = :AA$: 449 REM DIMENSION$ = :AB$: 450@,A))" "; ,!  -" C: -# D1(C$):D$(C$,D,1) ,-$ B$D$ A-% E(A$(F,A)) t-& A$(F,A)(A$(F,A),E)D$(A$(F,A),E1):EE1: {-'  -( A$(F,A)A$(F,A)D$:EE1: -)  -* D: -+ E(A$(F,A)) -, (A$(F,A),E1,1)" ":EE1:EF REM VALUE$ = :AC$: 451 REM TR$ = :AD$: 452 REM HX$ = :AE$: 453 REM BI$ = :AF$: 454 REM GENVARNAME$ = :AG$: 455 REM OF$ = :AH$: 456 REM ARGSLIST$ = :AI$: 457 REM CURCH$ = :AJ$: 458 REM A$ = :AK$: 459 REM DEFAULTDELIM$ = :AL$: 460 REM LC$ = @(A$(F,A)) #.- :(A$(F,A),E1,1)" ":EE1:E(A$(F,A)) +.. : 6./ E. E.0 E1E.: s.1 EE1:(A$(F,A),E1,1)" ":EE1:E. .2 :(A$(F,A),E1,1)" ":EE1:E. .3 :EE1: .4 AH.9: 359:AH: .5 "LOAD NAME: ";B$:B$""@ O/6 #2,(B$),R,U8:2,B:A.B1:C.5:2,A$(C,A):C:A:2,A%:AH.9:2,E$(AH):2,G(AH):2,H(AH):2,I(AH) /7 2,J(AH):2,K(AH):2,L(AH): 359:AH::AH.10:2,G$(AH):2,M(AH):2,N(AH):2,O(AH):2,P(AH) 08 2,Q(AH):2,R(AH):2,S(AH):2,T(AH):AH:AF@	-------------.LOCATENEXTFREEBYTE'---------------------  FRAMECOUNT = PEEK($50000 + ԯͯ)  FRMIDX = 0  PTR = $50000 + ԯ0  DO WHILE 1    IF FRMIDX = FRAMECOUNT THEN BEGIN      BYTESUSED = PTR-$50000      RETURN   @
 BEND    FRMW = PEEK(PTR + ͯԯ)    FRMH = PEEK(PTR + ͯԯ)    PTR = PTR + ͯԯ + FRMW * FRMH * 2    FRMIDX = FRMIDX + 1  LOOP  RETURN'---------------------.CHECKMAGICSIGNATURE'---------------------  IF PEEK($@5FFFE) <> 71 OR PEEK($5FFFF) <> 73 THEN BEGIN    WPOKE $5FFFE, $4947    PRINT "";CLRLINERIGHT$;    PRINT "MAGIC SIGNATURE APPLIED. RESET FRAME COUNT TO ZERO? (Y/N)";    GET KEY A$    IF A$ = "Y" THEN BEGIN      WPOKE $50000 + ԯ, 0A .:2,AF:AH.:AHAF:2,U(AH):2,V(AH):AHAH1::#2:A.  09  10: B.:AN.50 0; A$(.,AN)""A$(1,AN)""A$(2,AN)""A$(3,AN)""A$(4,AN)""A$(5,AN)"" 0< BAN1: 0= AN: 0> "SAVE NAME: ";B$:B$"" 1? (B$):#2,(B$),W,U8:ABA:I      POKE $50000 + ԯͯ, 0    BEND    PRINT "";CLRLINERIGHT$;  BEND  RETURN'---------------.CHECKEDITFLAG'---------------  IF PEEK($5FFFC) = 1 THEN BEGIN ' EDITING?    POKE $5FFFC, 0    CURRFRAME = PEEK($5FFFD)    GOSUB @                       @   


                   

  

                        @       
  

             @   
  

   

                        @       
  

                

  

  

        @                      
 @ 

    
                

  

                        @       

  
   

           @     

  

                        @       

  
    

                   

  

                   @           @ 

     
                

  

                        @       

     
       @   

  

                        @           
     
   
        

  

                        @@           
   
   
    

  

                           @           
   6 
   

 

 
                       
  @!         	


                                                                                                                                                                        @"                                                                                                                                                           A#       
   


  
       
                   @% 401 REM FOUNDIDX = :AW: 402 REM K = :AX: 403 REM SF = :AY: 404 REM CURLINELEN = :AZ: 405 REM SRCLINEPTR = :BA: 406 REM SRCLINEBUFFPTR = :BB: 407 REM CUTTAILIDX = :BC: 408 REM CURLINELENMINUSONE = :BD: 409 REM CURLINEBUFFADDR = :BE@&"":T$(2)"":T$(3)"":T$(4)"": U$(2):U$(.)"":U$(1)"":AP1:AQ0:AR0:AS0:AT1:AU5:AY1: ) BA2: V$(5,2):V$(0,0)"WHOLE":V$(0,1)"W":V$(0,2)"1":V$(1,0)"HALF":V$(1,1)"H":V$(1,2)"2":V$(2,0)"QUARTER":V$(2,1)"Q":V$(2,2)"3@': 410 REM CHR = :BF: 411 REM RIDX = :BG: 412 REM BL = :BH: 413 REM SZ = :BI: 414 REM SR = :BJ: 415 REM SM = :BK: 416 REM CONTNEXTLINEFLAG = :BL: 417 REM SHITTYSYNTAXFLAG = :BM: 418 REM ZZ = :BN: 419 REM  = :BO: 420 REM MAPDESTTOSRCLIN@ ":V$(3,0)"EIGHTH" O* V$(3,1)"I":V$(3,2)"4":V$(4,0)"SIXTEENTH":V$(4,1)"S":V$(4,2)"5": X$(6): |* "";(14);(27);"5";::"":;.:<.:5 * $: 22: 70 *  20 '+ A.,.:"PLAYMAKER V0.5 - BY GURCE ISIKYILDIZ":"---------":"<: PREV CHUNK, >@ENO% = :A%: 421 REM  = :B%: 422 REM DBLQUOTE$ = :A$: 423 REM PARSERFILE$ = :B$: 424 REM T$ = :C$: 425 REM BLANKLINE$ = :D$: 426 REM TYPEIDENT$ = :E$: 427 REM CURSRCLINE$ = :F$: 428 REM NEXTLINE$ = :G$: 429 REM MK$ = :H$: 430 REM TOKENS$ A                                                                   
   


       
        A

                 
                       		
	

                   A                                                                                                                                                                                                    A                                                                                                                    A
   


  
  

                      
               A     
                                                                                                                                                                                                        A                                                                                                                                       A       
   


  
  

        
         A	                                                                                                                                                                              A
                                                                                                                                                                                          A       
   


  
  

  A      
                                                                                                                               A                                                                                                                                                                                                               A                                          
  A 


  
  

        
                                                                 A                                                                                                                                                                                                                              A                                                                            A       
   


  
  

      
                       A                                                                                                                                                                                                                                A                                                                                                                   











A       
   


  
         
           
  A                                                                                                                                                                                            A                                                                                                                                                            A       
   


  
       
        A                                                                                                                                                      A                                                                                                                                                                                                       A                          
    


  
A  

        
                                                                                         A                                                                                                                                                                                                                          A                                                          A   
    


  
  

        
                               B                                                                                                                                                                                                                                           B 58:2,B:A.B1:C.5:2,A$(C,A):C:A:2,A%:AH.9:2,E$(AH) 1@ 2,G(AH):2,H(AH):2,I(AH):2,J(AH):2,K(AH):2,L(AH):AH:AH.10:2,G$(AH):2,M(AH):2,N(AH) 1A 2,O(AH):2,P(AH):2,Q(AH):2,R(AH):2,S(AH):2,T(AH):AH:2,AF:AH.:AHAF:2,U(AH)A"  I  	
                                                                                                                                                                                                              B#                                                                                                                           A$                 	


                                                                                                                                  A%                                                                                                                                                                                                           A&                  
   


  
  

     A'    
                   
	
		                                                                                 A                                                                                                                                                                                                      B                                                                                                                                                                                                    B                                
    



 
  

  B      
                           	

                                                           B:2,V(AH):AHAH1 1B :#2:AAB: (2C "SAVE (AS TEXT) NAME: ";B$:B$"" 2D (B$):#2,(B$),W,U8:A.50:C.5:2,"V";(49C);"$(";(A);")=";:2,(34);A$(C,A);(34):C:2,"":A 2E #2:A.: 2F  210:B$O$: 108 2G B$""F5 2H FF1:E(B#AX1#AX0#AX1#A O4X0CX1C X0DX1D X0#DX1#D X0#DX1#D O3Q#A RR #A #AT7O0X0H.C  QT9O4C T7O2HC  T7O0H.C T9O2QC T7O0HCM1T0X0O4H.#D IF#D SDC QD IRT2O6M3H.#D S#DFI#D SDC QM9D IRO5M0T1S X0#DX1#DX0#DX1#D X0#DX1#DX0#DX1#D X0#DX1#DX0#DX1#D X0#DX1#DX0#DX1#D X0DX1DXBA$(F,A))E(A$(F,A)): 3I B$""F. -3J FF1:E(A$(F,A))E(A$(F,A)): I3K B$""E(A$(F,A)) V3L EE1: l3M B$""E.EE1 3N B$""E. 3O A$(F,A)(A$(F,A),E1)(A$(F,A),E1):EE1: 3P B% 3Q B%.:B$"J":E.:B 3R B$"K":E(A$(F,A)): 4S B$(27) 425 4T B$"": 14U B$(27)B%(B%1) B4V B$"" 43 S4W B$"" 47 f4X B$"<"A. w4Y AA1:E.: 4Z B$">"A50 4[ AA1:E.: 4\ B$"-"A%A%1 4] B$"+"A%A%1 4^ B$""  5B	_ "ARE YOU SURE? (Y/N)":O$:O$"Y": 5`  5a B$"" 53 )5b B$"" 62 ;5c B$"" 151 O5d B$(16) 362 `5e B$"" 67 }5f B$(13)A%:A$(F,A) 5g B$(141) 5h A%: 135: 5i B$"" 5j H$A$(F,A):H$(H$,E)(H$,E2)B                                                                                                                                                                                                               B
:A$(F,A)H$: 5k  35: 6l BB(54801)16:BB. *6m B$"X"W$A$(F,A):A$(F,A)"" A6n B$"C"W$A$(F,A) X6o B$"V"A$(F,A)W$ j6p B$"" 120 |6q B$"" 121 6r B$(13) 6s H$(A$(F,A),E1):A%:H$: 6t B$","AO1: 124 6u B$"B."AO1: 124 6v B$"I" 122 6w B$"": 7x BD.5:X$(BD)A$(BD,A):BD: A7y BD.5:A$(BD,A)X$(BD):BD: 7z AN501A11:BD.5:A$(BD,AN)A$(BD,AN1):BD:AN:BD.5:A$(BD,A)"":BD:AN.100:U(AN)AU(AN)U(AN)1 7{ AN: 7| H$A$(F,A):BB                                                                            
    



B 
  

     
                            	

 B                                                                                                                                                                                                                     B                                                                                                                     D       
    



 
  

     
                        BC.:AO1BC6 7} C%.: 130:C%.(7);:  8~ AN.:AN(H$):I$(H$,AN1,1) <8 I$"O"(AN1)(H$) 8 I$(((H$,AN2,1))AO):I$(I$,2):H$(H$,AN1)I$(H$,AN3): 8 ANAN1::A$(F,A)H$: 8 C%1:AN.:AN(H$):I$(H$,AN1,1) 8 IB$"O"(AN1)(H$) 9 I$(H$,AN2,1):(I$)BCC%.: 9  9 ANAN1:: e9 H$A$(.,A):I$A$(1,A):J$A$(2,A):K$A$(3,A):L$A$(4,A):M$A$(5,A) r9 AA1 9 H$:(Y):,I$:(Y):,,J$:(Y):,,,K$:(Y):,,,,L$:(Y):,,,,,M$:(Y): 9B  9 W.X. 9 H$,I$,J$,K$,L$,M$: :  : W1X. 8: H$,I$,J$,,L$,M$:(Y):,,,H$: H: W1X1 p: H$,I$,J$,,L$:(Y):,,,H$,,J$: : W2X. : H$,,J$,,,M$:(Y):,,,H$:(Y):,H$:(Y):,,,,H$: : W2XB1 ; H$,,J$:(Y):,,,H$:(Y):,H$,,,,J$:(Y):,,,,H$: ;  1; 1: 153: 184:O$"" 9; : y; "ENV EDITOR";(9);V$(BA,0);(9);"OCTAVE";AU:"----------" ; "-/+: DECR/INCR, </>: OCTAVE, : EDIT, : FOCUS ENV/FILTER, +: EBXIT": F< "   ";(9);(9);"";(9);"";(9);"";(9);"";(9);:"";(9);"":AH.9 ^< AJAH">";:ՙ" "; < AH;": ";:AI.:A$E$(AH): 176:AI1:ALG(AH): 176:AI2:ALH(AH): 176:AI3:ALI(AH): 176 = AI4B:ALJ(AH): 176:AI5:ALK(AH): 176:AI6:ALL(AH): 176::AH::"FILTER EDITOR" = "-------------";:(9);"FREQ";(9);"LP";(9);"BP";(9);"HP";(9);"RES";:(9);"DIR";(9);"MIN";(9);"SWEEP" = AP.10: 161:AP: = ATAP">";:ՙ" "; = AN.: M167:G$(AP);"  ";(9);:AN1: 167:M(AP);(9); .> AN2: 167:U$(N(AP));(9);:AN3: 167:U$(O(AP));(9); f> AN4: 167:U$(P(AP));(9);:AN5: 167:Q(AP);(9); > AN6: 167:F$(R(AP));(9);:AN7: 167:S(AP);(9); > AN8: 167:T(AP);:"": > C0DX1D X0DX1DX0DX1DM0T8I O2X0#DX1#DX0#DX1#DX0#DX1#DX0#DX1#D X0DX1DX0DX1DO4M0T1S X0#DX1#DX0#DX1#D X0#DX1#DX0#DX1#D X0#DX1#DX0#DX1#D X0#DX1#DX0#DX1#D X0DX1DX0DX1D X0DX1DX0DX1DX0M0T9O4QC IT6O2CO0T9C QO4T9C  QO2T9C HT7CM1T0O4I#D#GF#DD#D QD O3#A IRSO4#FFTD                                                                                           B          

  
 F   
 
           
  
                             

  
B  ?#                                                                                                                                                                                                                                                B                                                                                                 B        


                B   

  

                                                                                                                                                                                                   B                                                                                                                                                    B!       
  

     B"           
  

   

                                                                                                                                          C#                                                                                                                                                                                          B$       
    



 
  

       
 
               B%             	
                                                                                                                                                             B&                                                                                                                                                                                          B'       
     



 
  

      
    B                   	
                                                                                                                  CM1O5T6P0QDP7AAAP5IAGA#AA#AGAQGAAAWR  P0QDP7AAAP5IAGA#AA#AGAQGAAI#AAHGHR  QRIDQDICQDHAG  QRIDQDICQDQAAHG  QRIDQDICQDHAG  QRIDQDICQD QAA HGM2O1T1WD R R HCR WO0 #A R R HAR WG R R HAR W#A R R HO1C RM1O2T1WD R R HCR WO1 #A R R HAR WG R R HAR W#A R R HO2C RCM1O5T2P0QDP7AAAP5IAGA#AA#AGAQGAAAWR  P0QDP7AAAP5IAGA#AA#AGAQGAAI#AAHGHR  QRIDQDICQDHAG  QRIDQDICQDQAAHG  QRIDQDICQDHAG  QRIDQDICQD QAA HGX1T3 O5.WEC 24 IANO 0  9  0  0  2  1536 CCORDION 12  0  12  13  1  0 ALLIOPE 0  0  15  10  0  0 RUM 7  12  5  9  3  0 LUTE 9  4  4  0  0  0 UITAR 0  9  2  1  1  0 ARPSICRD 4  10  5  9  2  3895 RGAN a 0  9  9  0  2  2048 RUMPET 8  9  4  1  2  512 YLOPHONE 0  9  0  0  0  0                                                                                                                                                               CR O4IDQD IR QD  QR IDQD IR QDM0P0T8 QR O4IDQD IR QD  QR IDQD IR QDM0P0T8 QO3D O2IDQD IR QD  O3D O2IDQD IR QDP0M0 QT6O2C IO4CC QT7O0C T9O4C IT6O2CO1C IO4CC QT7O0C T9OCX0T8 P0 O4 Q#A IP9O5#FF SX0#DX1FX0#DX1F X0#DX1FX0#DX1F X0#DX1FX0#DX1F X0#DX1FX0#DX1FC X0H#DP0T2O6M3 Q#A IP0#FP9F W#D H#DO4M0T1 SX0#AX1#AX0#AX1#A O5X0#FX1#FX0FX1F X0#DX1#D#D#D#D#D# X0#DX1#D#D#D#D#D X0#DX1#D#D#D X0H#DP0M0T8O1 Q#A O2P1I#FF IX0#DX1#D#D X0#DX1#D#D X0#DX1#D X0Q#DRO3M0T1 SX0#AX1#AX0#AX1#A O4X0#FX1#FX0FX1F X0#DX1#D#D#D#D#D# C  
  

                

  

  

                                                                              C                                                                                                                                                                                                                 C	                                                     C
       
  

    
                

  

                     C                                                                                                                                                                                                                                            C                                                                                   C       

  
   

               C 

  

                                                                                                                                                                                                                        C                                                                                                                          C         

   
     

           C            

  

                                                                                                                                                               C                                                                                                                                                                                C              C 

     
                

  

                                                                                                     C                                                                                                                                                                                                              C                                           D       

     
          

  

                                           FX0#DX1#D#D#D#D#D X0#DX1#D#D#D X0H#DM0P0 QT9O0C T6O2C H.T7O0C QT9O4C HT7O0CX0P0T8M3 O4Q.#A P9IO5D QO4#A O5D O4Q#A SO5P0F#F#DF Q#DF DI#DSD#D O4M0T1 WR HR SX0#DX1#D#D#D X0FX1FFF X0DX1DDD X0#DX1#D X0D#DM0P0 QT6O4C IT6O0CO2C QO4C O2T9C HO0T7C H.C QO2T9C2O6I#D#GF#DD#D QM9D O5#A IRSO6#FFO5M0T1S X0#DX1#DX0#DX1#D X0#DX1#DX0#DX1#D X0DX1DX0DX1DX0DX1DX0DX1D O4X0#AX1#AX0#AX1#A X0#AX1#A O5X0#FX1FM0T8I O2X0#DX1#DX0#DX1#D X0DX1DX0DX1D O1X0#AX1#A X0#A SO2#FX1FO4M0T1S X0#DX1#DX0#DX1#D X0#DX1#DX0#DX1#D X0DX1DX0DXC1DX0DX1DX0DX1D O3X0#AX1#AX0#AX1#A X0#AX1#A O4X0#FX1FM0H.T7O2C QT9O4C HT7O0CP0T0O4M1H#D ID#D QD O3#A P0O4ID#D SP0X0FP1X1#FP0X0FP1X1#F X0QP0#D  SP0X0FP1X1#FP0X0FP1X1#F X0QP0#DP0T2O6M3H#D ID#D QD O5#A P0O6ID#D SP0FP5#FP0FP5#F QP0#D  SP0FP5#FP0FP5#F QP0#DCO5M0T1SX0#DX1#DX0#DX1#DX0#DX1#DX0#DX1#D X0DX1DDDDDDD X0O4#AX1#A#A#A X0IO5D#D SP0FP3X1#FP0X0FP3X1#F X0P0S#DX1#D#D#D P0X0FP3X1#FP0X0FP3X1#F P0X0#DX1#D#D#DM0T8IO2#D#D#D#DDDDDO1#A#AO2D#DFF#D#DFF#D#DO4M0T1X0S#DX1#D#D#D#D#D#D#D X0DX1DX0DX1DX0DX1DX0DX1D X0O3C#AX1#A#A#A X0IO4D#D SP0FP3X1#FP0X0FP3X1#F X0P0S#DX1#D#D#D P0X0FP3X1#FP0X0FP3X1#F P0X0#DX1#D#D#DM0QT9O4C IT6O2CT9O0C QT9O4CC HT9O2C H.T7O0C QT9O4CP0T0O4M1 QGP5#G SP0X0FP1X1#FP0X0FP1X1#F X0QP0#D W.DP0T2O6M3 QGP5#G SP0FP5#FP0FP5#F QP0#D W.DO5M0T1X0 SX0GCX1GX0GX1GX0#GX1#GX0#GX1#G X0SP0FP3#FP0FP3#F P0X0#DX1#DX0#DX1#D  SX0DX1DX0DX1DX0DX1DX0DX1DX0DX1DX0DX1D X0DX1DX0DX1DX0DX1DX0DX1DX0DX1DX0DX1DX0M0T8IO2 GG#G#G FF #D#DDDDDDDDDDDDDO4M0T1X0 SX0GX1GX0GX1GX0#GX1#GX0#GX1#G X0SP0FP3#FP0FP3#F P0X0#DX1#DX0#DX1#D  SCX0DX1DX0DX1DX0DX1DX0DX1DX0DX1DX0DX1D X0DX1DX0DX1DX0DX1DX0DX1DX0DX1DX0DX1DX0M0HT7O0C  QT9O4C IT6O2CT9O0C QT9O4CC HT7O0C CP0T0O4M1 ID#D QD O3#A P0O4ID#D SP0X0FP1X1#FP0X0FP1X1#F X0QP0#D  SP0X0FP1X1#FP0X0FP1X1#F X0QP0#DP0T2O6M3 ID#D QD O5#A P0O6ID#D SP0FPC5#FP0FP5#F QP0#D  SP0FP5#FP0FP5#F QP0#DO5M0T1S X0DX1DDDDDDD X0O4#AX1#A#A#A X0IO5D#D SP0FP3X1#FP0X0FP3X1#F X0P0S#DX1#D#D#D P0X0FP3X1#FP0X0FP3X1#F P0X0#DX1#D#D#DM0T8IO2DDDDO1#A#AO2D#DFF#D#DFF#D#DO4M0T1X0S X0DX1DDDDDDD X0O3#AX1#A#A#A X0IO4D#D SP0FP3X1#FPC 0X0FP3X1#F X0P0S#DX1#D#D#D P0X0FP3X1#FP0X0FP3X1#F P0X0#DX1#D#D#DM0 QT9O4CC HT9O2C H.T7O0C QT9O4CP0T0O4M1 QGP5#G SP0X0FP1X1#FP0X0FP1X1#F X0QP0#D W.DP0T2O6M3 QGP5#G SP0FP5#FP0FP5#F QP0#D W.DO5M0T1X0 SX0GX1GX0GX1GX0#GX1#GX0#GX1#G X0SP0FP3#FP0FP3#F P0X0#C!DX1#DX0#DX1#D  SX0DX1DX0DX1DX0DX1DX0DX1DX0DX1DX0DX1D X0DX1DX0DX1DX0DX1DX0DX1DX0DX1DX0DX1DX0M0T8IO2 GG#G#G FF #D#DDDDDDDDDDDDDO4M0T1X0 SX0GX1GX0GX1GX0#GX1#GX0#GX1#G X0SP0FP3#FP0FP3#F P0X0#DX1#DX0#DX1#D  SX0DX1DX0DX1DX0DX1DX0DX1DX0DX1DX0DX1D X0DX1DX0DX1DC"X0DX1DX0DX1DX0DX1DX0DX1DX0M0HT7O0C  QT9O4C IT6O2CT9O0C QT9O4CC HT7O0C CP0T0O4M1 ID#D QD O3#A P0O4I#FF IX0#DX1#D#DX0#DX1#D#DX0#DX1#D X0Q#DRT2O6M3 ID#D QD O5#A O6I#FF W#D Q#DRO5M0T1S X0DX1DDDDDDD SX0O4#AX1#A#A#A X0IO5#FF P0 SX0#D#DX1#D#D#D#D  X0#D#DX1#C$D#D#D#D X0#D#DX1#D#D Q#DRM0T8IO2DDDDO1#A#AO2#F#F #D#D#D #D#D#D #D#D Q#DRO4M0T1S X0DX1DDDDDDD SX0O3#AX1#A#A#A X0IO4#FF P0 SX0#D#DX1#D#D#D#D  X0#D#DX1#D#D#D#D X0#D#DX1#D#D Q#DRQT9O4C C HT7O0C .C QT9O4C HT7O0CM0P0T0O4 SP0FP3#FP0FP3#F P0FP3#F P0ID P0#DR C                          C%#GR SP0FP3#FP0FP3#FP0FP3#F P0ID P0#DR HO4T9C T0O4I#DR#DRQRT2O6SP0FP3#FP0FP3#F P0FP3#F P0ID P0#DR #GR SP0FP3#FP0FP3#FP0FP3#F P0ID P0#DR HO4T9C O6T2I#DR#DRQRO5M0T1 SP0FP3#FP0FP3#F P0FP3#F P0ID P0#DR #GR SP0FP3#FP0FP3#FP0FP3#F P0ID P0#DR HO4T9C T1O5I#DR#DC&RQRP0M0T8IO2 IFFFD Q#D #G IFFFD Q#D X0HO4T9C T8O2 I#DR#DRT8P0O4 SX0FP3X1#FX0FX1#FX0FX1#F P0X0ID P3#DR #GR SP0X0FP3X1#FX0FX1#FX0FX1#F P0ID P3#DR X0HO4T9C T8I#DR#DRQRQT9O4C IT9O0C O2C QT9O4C O2C IT9O4C O0C QO0C QT7C HO4T9C QT9O4C HT7O0CX0P0T8M3O4Q.#AP9C'IO5DQO4#ASO5DO4#AIO5DP0O4Q#AIO5D#DP0SFP1I.GSGI.FSFI.GGP3#GSP0#AP3B#ABP0Q#GSFP3#FF#FF#FIP0DH#D P3Q#GP0SX0#FP2X1FX0#FX1FP0X0I#DX1P7GX0DX1#DM0T4O4 QR X0I#A Q#A IR Q#A QR X0I#A Q#A IR Q#A QR #A R #A   QR I#A Q#A IR Q#A QR #A R #AT8P0O3 QR X0I#A Q#A IR Q#CA QR X0I#A Q#A IR Q#A QR #A R #A   QR I#A Q#A IR Q#A QR #A R #AP0M0QT9O4C IT6O2CC QT9O4C O2C HO0C C QC O2C HO0C QO2C I6O1CC T9QO0C O2C    QT9O0C O4C  O0C O4CO5X0T8P3 X0M5WD SDX1CX0Q.D   SDX1CX0ID SDX1CX0IDP0M0T1 QR O5IDQD IR QD  QR IDQD IR QDP0M0T4 QD                                                                                                                D            

  
 F   

 
           
 

                                                                                                                                                                                                             D                                                                   
    



      
        D

                 
                       		
	

                   D                                                                                                                                                                                                   D                                                                                                                    D
    



 
  

                      
               D	     
                                                                                                                                                                                                       D
                                                                                                                                       D       
    



 
  

        
         D                                                                                                                                                                                D                                                                                                                                                                                       D       
    



 
  

  D      
                                                                                                                               E                                                                                                                                                                                                              D         	


                                                                                                                                                                       D                                                                                                                                                           D       
    



 
       
                   D                 	


                                                                                                                                   D                                                                                                                                                                                                         D                  
    



 
  

     E&                                                                                                                                                                                                                                                      D    
                   
	
		                                                                                 D                                                                                                                                                                                                    D       
    


  
  

        
            D                                                                                                                                                                                                                        D                                                                                                                                                             D       
   


  

 

         
     D                                                                                                                                                                      D                                                                                                                                                                                              D         
 
  



 
 

 


         D!    
  
                                                                                                                         D"                                                                                                                                                                                                  D#                                                       
    


   

 D$ 

         
   
                                                                D%                                                                                                                                                                                                                                           D&                                                                         D'      
     


    

         
   
                D                                                                                                                                                                                                                                                      E                                                                                                                                                             E       
    



 

 

         
     E                                                                                                                                                                       E                                                                                                                                                                                             E   
   

 
  
 

  


  

        E    
  
                                                                                                                         E                                                                                                                                                                                               E                                                    
     
  



   


E	  
         
   
                                                                E
                                                                                                                                                                                                                                     E                                                                          E          


    
 

   

    
   
   
                E                                                                                                                                                                                                                                                     E                                                                                                          E                

 
 
 F   

 

          
 
  
    

                                                                                                                                                                                                      E                                          
   E 



 
  

        
                                                                 E                                                                                                                                                                                                                             E                                                                            E       
    



 
  

      
                       E                                                                                                                                                                                                                               E                                                                                                                   











E       
    



 
  

     
           
  E                                                                                                                                                                                              E                                                                                                                                                         E       
    



 
       
        E                                                                                                                                                      E                                                                                                                                                                                                      E                          
     



 
E  

        
                                                                                         E                                                                                                                                                                                                                          E!                                                          E"   
     



 
  

        
                               E#                                                                                                                                                                                                                                          E$                                                                                           E%       
     



 
  

        
            E                                                                                                                                                                                                                        E'                                                          F            
     
   
        

  

 F                                                                                                                                                                                                                                              F                                                                                                                     F           
 F  
   
    

  

                                                                                                                                                                                        F                                                                                                                                                                                    F            
   
   

 

 
            F%  	
          
   



 
  

    F	   
 
                            	
    F
      
   



 
  

      
         F             	
          
   


F
 
  

        
                          F	

          
   



 
  

     
 F                           	

    F      
   



 
  

     
                 F                	


      
   



F 
       
                                    	


F          
   



 
  

      F   
                   
	
		    F      
   



 
  

            
              F        		
	

      
   



 
  F

                      
                    
    F      
   



 
  

       F  
                               F:AM$: 461 REM BC$ = :AN$: 462 REM TF$ = :AO$: 463 REM SF$ = :AP$: 464 REM CO$ = :AQ$: 465 REM SK$ = :AR$: 466 REM ZZ$ = :AS$: 467 REM TOKNAME$ = :AT$: 468 REM CLEANVARNAME$ = :AU$: 469 REM  = :AV$: 470 REM  = :A&: 32000 32001 32002 32003FCX0P0T8M3O5 HD Q#D I#F#D D#D QD O4#A O5SX0FX1#FX0FX1#F X0#DX1#DX0#DX1#D X0FX1#FX0FX1#F X0DX1DX0DX1D X0#DX1#DX0#DX1#D X0QDX1IDDM0P0HO0T7CO4X0T8 W#D H#D I#D#GG#G FG#DF H#DO5QC ICO4#A#G#AO5QC IO4#AO5CO4#G#A Q#G IG#G IO4Q#A O5C O4#A O5CIO4  32004 32005 32006 32007 32008 32009 32010D:D"11TOKENIZED":IFDS<>0THEN?"DISC ERROR: ";DS$:ELSE?"":D"11.POST                                                                                                              F#AO5#DCO4#A Q#G #A IG#GGF Q#DRR I#DR #DR 15 IANO 0  9  0  0  2  1536 PLUCKY 0  8  0  0  1  0 ALLIOPE 9  4  9  9  0  0 RUM 0  5  5  9  3  0 PLUCKY2 0  9  0  0  1  0 UMMING 0  8  0  0  2  100 RUM1 0  F ~  : I$(10): E(16): A%(1000): K$(1000): F(4): L$(4,200): M$(200): N$(200): G(200):H0: O$(32): P$(30): Q$(30):    R$(30):I0: ! B$"11.PARSE":H$"@~":A$(34):B34:C39::" PREPROCESSOR V0.6.0"::7,"SCRATCH"A$B$A$":DSAF$VE"A$B$A$":DVERIFY"A$B$ ! C$"                                                                               ":D$C$C$C$:C$"" %" I$(.)" PRINT INPUT IF THEN ELSE DO LOOP WHILE UNTIL GOSUB GOTO OPEN CLOSE DOPEN DCLOSE FOR NEXT GETKEY HEX$ DIM F8  0  0  3  0 RUM2 0  10  0  0  3  2048 STRINGY 8  9  4  1  1  512 RUM3 0  9  0  0  3  0 MUTESTRUM 300  1  0  0  15  0  0  0 LOWPDOWN 1000  1  0  0  15  2  100  10 LOWPOSC 1000  1  0  0  15  3  100 H 10 BANDPUP 1000  0  1  0  15  1  100  10 BANDPDOWN 1000  0  1  0  15  2  100  10 BANDPOSC 1000  0  1  0  15  3  100  10 HIGHPUP 1000  0  0  1  15  1  100  10 HIGHPDOWN 1000  0  0  1  15  2  100  10 HIGHF!      
   



 
  

        
           F"                    F#   
   



 
  

        
                        F%      
   



 
  

 HPEEK POKE WAIT DEC CHR$ ASC SGN SQR STR$" " I$(.)I$(.)" GRAPHIC CLR SCREEN DEF BEGIN BEND LEN MID$ RIGHT$ LEFT$ INSTR FOR NEXT STEP TRAP BORDER AND FOREGROUND " 6# I$(1)" BACKGROUND SET ABS SIN COS TAN LOG FRE CURSOR PIXEL WINDOW RWINDOW LINE BOX CF&    
                           F'      
   



 
  

     
                G                  
G   



 
       
                                     G      
   



 
  

  G      
                          G      
   



 
  

        
           G                    
 G  



 
  

        
                                            G      
   



 

 

         
  G                                      G	
 
   

  

  

            
  
                  G
                     
    
  



  



  G       
   
                                     G          


    
 

  

   G
  
   
                                      G               

 
 
   

 

          
 
 
    
                                                                                                                                                                                                                                                              G%  	
           
  


 
  

    G   
 
                            	
    G       
  


 
  

      
         G             	
           
  


G 
  

        
                          G	

           
  


 
  

     
 G                           	

    G       
  


 
         
                 G                	


       
  


G 
       
                                    	


G           
  


 
  

      G   
                   
	
		    G       
  


 
  

            
              G        		
	

       
  


 
  G

                      
                    
    G       
  


 
  

       G  
                               G!       
  


 
  

        
           G"                      G#  
  


 
  

        
                        G$       
  


 
  

 G%    
                           G&       
  


 
         
                G'                  
H   


 
       
                                     H       
  


 
  

  H      
                          H       
  


 
  

        
           H                     
 H 


 
  

        
                                            H       
  


 

 

         
  H                                        H 
  


  

 

            
  
                  H	                        
  


  

 
  H
       
   
                                     H      
     


    

   H   
   
                                      H           

 
   

 
           
 

                                                                                                                                                                                                                                                                   H  I  	
                                                                                                                                                                                                H                                                                                                                     H

  


 

 
         
 
               H             	
                                                                                                                                                      H                                                                                                                                                                               HPOSC 1000  0  0  1  15  3  100  10 SPARE1 0  0  0  0  0  0  0  0 SPARE2 0  0  0  0  0  0  0  0  97 -9  10 -10  0 -8  0.01 -1  15 -2  0  0  0  1  0  2  2 -5  0 -2  0 -8  0.02  3  0  4  0 -7  0 -10IIRCLE ELLIPSE PALETTE RESTORE DATA ERR$ ER EL CURSOR ON OFF" # I$(1)I$(1)" VAL SCRATCH RETURN RND STOP BANK TI DO OR ST IF EL ER ON TO PEN GET END INT NOT DS RUN USING DOT " A$	 I$(2)" APPEND ATN AUTO BACKUP BLOAD BOOT BSAVE BUMP BVERIFY CATALOG CHAI  0 -8  0.01 -2  0  5  0  6  2  7  0  8  0  9  0 -7  0 -5  0 -8  0.03  10  0 -7  0 -10  0 -8  0.01 -2  0  11  0  12  0 -7  0 -5  0 -8  0.03  10  0 -7  0 -10  0 -8  0.01 -2  0  11  0  13  0 -7  0 -H

  


 

 
       
    H                  	
                                                                                                             H                                                                                                                                                                                       H                         

  


 

 
   H     
                           	

                                                           H                                                                                                                                                                                            H                                                                     

 


H

 
      
                             	

 H                                                                                                                                                                                                    H                                                                                                                   H!

 




        
                         H"         	


                                                                                                                                                             H#                                                                                                                                                H$

 



       
                   H%                 	


                                                                                                                             H&                                                                                                                                                                                            H'           

 




 
      I      
                   
	
		                                                                                 I                                                                                                                                                                                 I                                                            

 




 I
                  
                       		
	

                   I                                                                                                                                                                                       -9  10 -4  0 -8  0.06  25  0 -7  0 -9  15  26  0 -4  0 -9  10  25  0 -7  0 -9  15  26  0  27  0  24  0 -4  0 -9  10  28  0  29  0 -7  0 -10  0 -8  0.01  16  0  30  0  31  0  32  0  0  13  0 -7  0 -INGE CHAR CMD COLLISION COLOR CONCAT CONT COPY WPOKE WPEEK SETBIT CLRBIT " $
 I$(3)" DCLEAR DEFFN DELETE FN DIR DISK DLOAD DMA DMODE DPAT DSAVE DVERIFY EDMA ENVELOPE ERASE EXIT EXP FAST FILTER FIND GO64 HEADER HELP HIGHLIGHT " I% I$(4)" JOY LIST LOAD ILOCATE LPEN MOD MONITOR MOUSE MOVSPR NEW PAINT PLAY POINTER POLYGON POS POT PUDEF " % I$(5)" RCOLOR RDOT READ RECORD REM RENAME RESUME RGR RMOUSE RPLAY RREG RSPCOLOR RSPPOS RSPRITE SAVE SCNCLR SLEEP SLOW SOUND SPC SPRCOLOR " W& I$(6)" SPRITE SPRSAV ISYS TAB TEMPO TROFF TRON TYPE USR VERIFY VOL XOR KEY VSYNC RCURSOR T@& C@& RGRAPHIC FREAD POINTER " & J$" BLOAD BSAVE DLOAD TO SAVE DIR COLLECT DOPEN DCLOSE BACKUP FREAD GET ": 225:128:E$(0)"":E$(1)"%":E$(2)"$":E$(3)"&":E(.)1 ' D116:E(D)I	E(D1)E(D1):D a' A.:S$(32)(160)"	":J.:"PASS 1 ";:K.:TI:L$8030000:ML:N(M):MM2:KN: 261 }'  265:T$F$: 111:F$T$ ' F$"" ' O.:P">> :"Q;", : ";J;": ";F$ ' (F$,1)"." ' A1: 105: ' (F$,1)"#"I
 '  280: ( R1 33 3( (F$,4)"DATA"(F$,5)"BEGIN" >( A1: J( O. Y( P."."; u( T$F$: 122: 293: 335 (  339:(T$,4)"BEND"(T$,6)"RETURN"(T$,2)"IF":A1: (  (   (! JJ1 (" P (# "SRCLINENO=";JJ:U$: ($  )% V$"" !)& K$(Q)V$:QQ1: G)' 1: 233:"11TEMP":"11TOKENIZED" )( 1,1,5,"11TEMP,S,W":(13)"PASS 2 ";:S.Q1:T$K$(S):PS;"=> "T$:ՙ"."; )) (T$,H$).:T(T$,H$):U(T$,H$,T2) )* U. )+  *, ::W$(T$,TI                                                                                                           
I
 




 
                   
               IGETCURRFRAMEPTR    STARTX = PEEK(PTR + ͯԯ)    STARTY = PEEK(PTR + ͯԯ)    X = STARTX + PEEK(PTR + ͯԯ) - 1    Y = STARTY + PEEK(PTR + ͯԯ) - 1    NEWFRAMEFLAG = 0    GOSUB SAVEFRAMETOMEMORYATPTR    GIOSUB DRAWCURRFRAME  BEND  RETURN'--------------.YANKSELECTION'--------------  POKE $D020, PEEK($D020) + 1  ' SELECT A REGION WITH CURSOR MOVEMENT  GOSUB GETSELECTEDCOORDSINTOX1Y1X2Y2  ' COPY IT INTO A BASIC VAR  PTR = POINTER(CLIPBOARIDCHAR&(0))  LN = X2-X1+1  FOR Y = Y1 TO Y2    EDMA Я, LN, $40800+X1+Y*80, PTR    PTR = PTR + LN  NEXT Y  PTR = POINTER(CLIPBOARDCLR&(0))  FOR Y = Y1 TO Y2    EDMA Я, LN, $FF80000+X1+Y*80, PTR    PTR = PTR + LN  NEXT Y  CLIPW = IX2-X1+1  CLIPH = Y2-Y1+1  POKE $D020, PEEK($D020) - 1  RETURN'-----.PASTE'-----  ' COPY SELECTION FROM VARS ONTO SCREEN AT CURRENT CURSOR POSITION  X1 = X  Y1 = Y  X2 = X + CLIPW - 1  Y2 = Y + CLIPH - 1  PTR = POINTER(CLIPBOARDCHAR&(0))I  LN = X2-X1+1  FOR Y = Y1 TO Y2    EDMA Я, LN, PTR, $40800+X1+Y*80    PTR = PTR + LN  NEXT Y  PTR = POINTER(CLIPBOARDCLR&(0))  FOR Y = Y1 TO Y2    EDMA Я, LN, PTR, $FF80000+X1+Y*80    PTR = PTR + LN  NEXT Y  ' : RE-SAVE CURRIENT FRAME  GOSUB SAVEFRAMETOMEMORYATPTR  GOSUB GETCURRFRAMEPTR  STARTX = PEEK(PTR + ͯԯ)  STARTY = PEEK(PTR + ͯԯ)  X = STARTX + PEEK(PTR + ͯԯ) - 1  Y = STARTY + PEEK(PTR + ͯԯ) - 1  NEWFRAMEFLAG =  00  GOSUB SAVEFRAMETOMEMORYATPTR  RETURN                                                                                                                                                                                                               I     
                                                                                                                                                                                               I                                                                                                                           I

  


 

 
         
         I4  0 -8  0.12 -9  10  14  2  15  0 -7  0 -10  0 -8  0.01 -2  0 -9  12  16  0 -9  14  17  0  18  0  17  0  18  0  17  0  16  0 -1  16 -8  0.007  19  0  20  0  21  0  22  0  23  0 -2  0  24  0 -1  15 I                                                                                                                                                                           I                                                                                                                                                                        I

  


 

  
   I      
                                                                                                                               I                                                                                                                                                                                           I                                  

  I


 

  
         
                                                                 I                                                                                                                                                                                                                I!                                                                       I"

  


 

  
       
                        I#                                                                                                                                                                                                                        I$                                                                                                      I%

  


 

         
           
  I&                                                                                                                                                                                         I'                                                                                                                                         J 

  


  
       
        J                                                                                                                                                      J                                                                                                                                                                                  JEDMA 0,$D400,$8000000,$2001:NEW RESTORE":"RUN";:128:208,2:688,13,13: *= R1:AX.F(4) >= L$(4,AX)T$ I= R.: S= AX: h= F$(F$,9): 252 v= T$"" = "ERROR: NO STRUCT NAME FOUND":1: =  = P$(I)T$:R$(I)F$:II1:J = T$F$: 110: 111:F$T$:AP$" ":AY.  > (T$,1)A$ > AP$A$", ":AY2: )> AU(F$,AP$) 7> AU. p>T$(F$,1,(F$,AP$)AY1):F$(F$,(F$,AP$)AY1): }>AU. >T$F$:F$"": > >.:AZ(M):F$(D$,AZ):BA
(F$):BB$1J0000(BA1):MM1 >AZ. >!.,AZ,M,BB:MMAZ: 0?KK1:AD$S$:T$F$: 110:F$T$:AI.:BC.:1: A?	BC(F$,"'") O?
BC. c?(F$,A$). ?BC.:.:BD(BA)1:BE(BA1):1:V.BD:BF(BEV) ?BFB ?AI(AI1) ?J: ?BFCAI. ?BCV1:V999: ? ?: @BC @F$(F$,BC1): "@ (@ @@(F$,"IFDEF")2 \@T$(F$,8): 243:O1: t@(F$,"ENDIF")2 @R.:O1: @(F$,"DEFINE")2 @W1: 49:W.: @(F$,"DEJ	CLARE")2 @W.: 49: @ (F$,"OUTPUT")2 @! 98: A"(F$,"STRUCT")2 )A# 247:O1: /A$ VA%AQ$T$:F$T$:AW1: 252:BG.I1 hA&T$P$(BG) |A'AWBG:BGI1: A(BG A)AW1 A*F$AQ$:T$AQ$: A+ A, 252:AR$J                   

   


 
J

  
         
                                                                                         KT$:BH(AR$,"("):T$R$(AW): 112:AW1:BI.:BG.Y B-O$(BG)"" B."ARGS$(";BG;")=";O$(BG) +B/BH. _B0T$AR$""O$(BG):"STRUCT: ";T$:AA$T$: 58: mB1BH. B2T$(AR$,BH1)""O$(BG)(AR$,BH):"STRUCT: ";T$:AA$T$: 58:Q$(BI)AAJ                                                                                                                                                                                                        J2,UT2): 196:T$(T$,T1)W$(T$,U2): 0*- :P"<= ";(S)T$ *. 1,(S)" "T$:S: 352:V.10:1,(32000V):V:X$"D:D"A$"11TOKENIZED"A$ +/ X$X$":IFDS<>0THEN?"A$"DISC ERROR: ":X$X$A$";DS$:ELSE?"A$:X$X$"J":X$X$A$":D"A$"11.POST":1,X$:1:"" +0 "ELAPSED TIME:";TI;"TICKS":"EDMA 0,$1FFF,$8022000,$2001:NEW RESTORE":"RUN";:128:208,2:688,13,13: +1 T$(F$,10W):X1: 112:X.:G$"" +2 Y. +3 Z$"?DECLARE PARAMETER MISSING IN LINEJ                                                   J

   


 

  
         
                               J                                                                                                                                                                                                                                  J                                                                               J

   


 

  
         
            J                                                                                                                                                                                                               J                                                                                                                                                  J

  


 
   
          
     J                                                                                                                                                                    J "(J) +4  108: ,5 D.Y:AA$O$(D): 58:D (,6 G$"" ;,7 O.:F$"^^"G$ M,8 ::O1: S,9  ,: AB$"":AC$"":Z(AA$,"("):AA(AA$,")"):AB(AA$,"=") ,; AB. ,< AC$(AA$,AB1):AA$(AA$,AB1):AD$S$:T$AA$: 111:AA$T$:T$AC$: 1K                                                                                                                                                                               J10: 111 ,= AC$T$ -> (AC$,1)"$" (-? AE$(AC$,2): 208: =-@ (AC$,1)"%" W-A AF$(AC$,2): 202: ^-B  q-C Z.AA. -D AB$(AA$,Z1,AAZ1):AU$(AA$,Z1):T$AB$:AC1: 122:AC.:AB$T$:AA$AU$:O.: -E AD0:C$(AA$,1) -F PJ -G "ADDING ";: .H ("%&$",C$). ".I C$"":AD0: ..J W1 :.K AD4: I.L C$"%" U.M AD1: d.N C$"$" p.O AD2: .P C$"&" .Q AD3: .R L$(AD,F(AD))AA$ .S AB$"" .T AEF(AD): 211 .U W. .V G$G$"DIM "AJG$C$"("AB$"):": .W  /X AC$"" !/Y AEF(AD): 211 -/Z W. M/[ G$G$AG$C$"="AC$":": T/\  `/] W1 u/^ M$(F(AD))AC$: /_ P /` AA$;": ";F(AD): /a F(AD)F(AD)1: /b T$(F$,8): 112 /c Y. /d "?INVALID PARJAMETERS IN LINE ";J:: 0e T$O$(.):AD$A$: 110: 111 "0f P L0g "SETTING OUTPUT FILE TO "T$"": ]0h AH$T$:O1: g0i P 0j "LABEL ";F$;" AT LINE ";Q: 0k O1:N$(H)(F$,2):G(H)Q1:HH1:  1l 4:V1(Z$):$4FF30V1,((Z$,V,1)):JV:$4FF30V1,.:$FF09,(J,256):$FF0A,J256:$FF07,($FF07)2: *1m  238 P1n (AD$,((T$,1))):T$(T$,2):: z1o (AD$,(T$,1)):T$(T$,(T$)1):: 1p Y$",;":Y.:AI$T$:AF(T$):AG. 1q AF. 1r Y1: 1s  2t AH.31:O$(AH)"":AH:AJH1AF:AJ$(AI$,AH,1):AJ$"("X1AG1 2u AJ$")"X1AG. 32v (Y$,AJ$).AG1 G2w O$(Y)O$(Y)AJ$ 2x ::T$O$(Y):AD$" ": 110: 111:O$(Y)T$:YY1: 2y AH:T$O$(Y):AD$" ": 110: 111:O$(Y)T$:T$AI$: 2z (T$,2)"^^" 2{ T$(T$,J(T$)2): 2|  E3} AI.:AK$"":W$"":BM.:AK.:AL$"?<>=+-#*/^,.:;() ":Y$AL$:AL1(T$):AJ$(T$,AL,1) Z3~ AJ$":"AI. f3 BM.: y3 BMAJ$"(" 3 Y$AL$: 3 BMAJ$")" 3 Y$AL$"DPUB": 3 AJ$A$ 3 AI(AI1) 3 AI1J  3  147:AK$AK$W$:W$"" 4 ::AK$AK$AJ$:AJ$"": 4  *4 AI1 :4 AK$AK$AJ$ G4  145: \4 (Y$,AJ$). 4  147:AK$AK$W$:W$"":AJ$" "AJ$"" 4 AK$AK$AJ$ 4 ::W$W$AJ$: 4 : 147:T$AK$W$: 4  4 W$J!""W$"_" 4 (W$). 4 AK.: 5  5 W$"0"  5 W$".": '5  75 AKAC. H5  195:AK.: O5  b5 W$"GOTO"A1 5 W$"GOTO"W$"GOSUB"W$"TRAP" 5 AK1: 5 (W$,1)"$" 5 AE$(W$,2): 208: 5  5 (W$,1J")"%" 5 AF$(W$,2): 202: 5  6 AT$" "W$" ":AM.6 /6 (I$(AM),AT$). B6 AM$W$: 194: I6  q6 :AJ.:C$(W$,1):AD0:C$"%"AD1 6 C$"$"AD2 6 C$"&"AD3 6 AE.F(AD) 6 W$L$(AD,AE) 6  211:W$AG$E$(AD):AJ#EF(AD):AJ1: 6 AE:AJ1  7 AE.F(4) 7 W$L$(4,AE) $7 W$M$(AE): +7  C7 AE:AN1:AE.I1 U7 W$P$(AE) o7  293:ANAE:AEI1: w7 AE 7 AN1 7  7  7 (W$)222 7 (J$,AM$).(W$"R"W$"P" 7 W$"UJ$8"W$"W"): 7  "8 Z$"?UNRESOLVED IDENTIFIER: '"W$"' IN LINE "(J):1 .8  108: 48  F8 W$H$W$H$: Y8 AJ.:AE.H1 k8 W$N$(AE) 8 W$(G(AE)):AEH:AJ1: 8 AE:AJ 8 Z$"?UNRESOLVED LABEL: '"W$"' IN LINE"(A%(S1))J%:1 8  108: 9 AO.:AP.(AF$)1:AN$(AF$,(AF$)AP,1) '9 AN$"1"AN$"0" :9 4:$FF08,132 G9  192: `9 AN$"1"AOAOE(AP) j9 AP: 9  209:AQ(AE$):: 9 :4:$FF08,131 9  192 9 AE26 9 AG$(65AE): 9  :J& AS(AE,26):AR(AE26)1:AG$(65AR)(65AS):AG$"DO"AG$"D1" (: AG$"GO"AG$"G1" ?: AG$"TO"AG$"T1" V: AG$"DS"AG$"D2" m: AG$"DT"AG$"D3" : AG$"EL"AG$"E1" : AG$"ER"AG$"E2" : AG$"FN"AG$"F1" : AG$"IF"AG$"I1" J':  :  : 4:AT$FF00 ; (AT.)("S")(AT1)("K") _; P($FF07)8:X$"":AUAT$10:(AU).:X$X$((AU)):AUAU1::($FF07)1 }; "FILENAME? "X$:"";: ; "FILENAME";AK$ ; AK$"" ; "NO FILENAME SET":: < AT,("JS"):AT1,("K"):V116:AT8V1,((AK$,V,1)):V:X$AK$: (< AV$FF30:4:V.16:AVV,.:V 8< AH$"" D< AO$AH$ c< ::AO$"ELEVEN.OUT": < V1(AO$):AVV1,((AO$,V,1)):V: < AK$ < AK$"" < BN:BN1 <  = "K%  	
    

 





     K   
 
                            	
    K C@BK1T$"["T$"]" CA"ERROR: EXPECTED [ OR ]":1:: 	DBBK2 DC(T$,1)"]" 9DDBJBJ1:BI.:BK1:T$"" FDE 329: ZDF(T$,1)"," rDGT$(T$,(T$)1): DHT$Q$(BI)"("(BJ)")="T$: 122: 339:T$"":BIBI1 DI DKJBK1T$"[" DKBK2:BI.: DLBK1T$"]" DMBK.:  EN 252::T$"":F$"":G$"":AS$"Z": 4EO(V$,1)"_" REPV$(V$,(V$)1):A.:BL1 eEQ::BL.: kER ES(V$)(T$)((Q))159 ETA1: EUAS$"" EVT$"":ASK$"": EW EXA1 EYK$(Q)V$:V$T$:A%(Q)J:QQ1:A. EZ: F[V$""BL.(V$,1)":" /F\V$V$":": ?F]V$V$T$: PF^P"<<"Q;T$ VF_ F`AD.3:AE.F(AD): 211:1,(S)" REM "L$(AD,AE)" = :"AG$E$(AD)":":SS1:AE:ADK: Fa NEXTLINEFLAG = :A: Fb DBLQUOTECHAR = :B: Gc SNGLQUOTECHAR = :C: Gd I = :D: )Ge BINCONV = :E: AGf ELEMENTCNT = :F: ZGg LABELLINENO = :G: pGh LABELCNT = :H: Gi STRUCTCNT = :I: Gj SRCLINENO = :J: Gk CURSRCLINKENO = :K: Gl CB = :L: Gm CURATTICADDR = :M: Gn TOTALLINES = :N: Ho DELETELINEFLAG = :O: ,Hp VERBOSE = :P: DHq DESTLINENO = :Q: ]Hr INSIDEIFDEF = :R: yHs CURDESTLINENO = :S: Ht S1 = :T: Hu S2 = :U: Hv R = :V: Hw DENFINEFLAG = :W: Hx IGNOREBRACKETS = :X: Hy ARGCNT = :Y: Iz BKTOPENIDX = :Z: !I{ BKTCLOSEIDX = :AA: 9I| EQUALSIDX = :AB: VI} DONTMARKLABEL = :AC: fI~ TY = :AD: vI ID = :AE: I ARGSLISTLEN = :AF: I IGNOREDELIMFLAG = K	

 





      
         K
             	
    

 


K


       
                          K	

    

 





     
 K                           	

    K

 




       
                 K                	




 


K
       
                                    	


K    

 





      K   
                   
	
		    K

 





            
              K        		
	



 




K
                  
                    
    K

 





       K$ 
                               K$:BIBI1: B3BG:T$G$: 339:G$"": 252 B4T$"=" C5F$"": 	C6 +C7 252:BI.:BJ.:BK.:T$"" :C8T$"_" JC9JJ1: 261 WC: 334: lC;BK.T$"[" C<"ERROR: EXPECTED [":1:: C=BK.T$"[" C>BK1 C? 334:K   
 



 

 
        K     
   
                                                                                                                             K                                                                                                                                                                                         K                                                   

 


   
K  
         
   
                                                                K                                                                                                                                                                                                                    K                                                                          K 


   


   
        
   
                K!                                                                                                                                                                                                                                                     K"                                                                                          K#      




 F  


           
  
                                                                                                                                                                                                            K%

 





        
           K&                 K'

 





        
                        L 

 





 L    
                           L

 




       
                L           

L 


 
       
                                     L

 





  L      
                          L

 





        
           L              

 L	





        
                                            L


 



 
         
  L                                   L
 



 


            
  
                  L                   




 

  L       
   
                                     L


   


   
   L  
   
                                      L      




  


          
 
                                                                                                                                                                                                                                                                  L ~  : I$(10): E(16): A%(1000): K$(1000): F(4): L$(4,200): M$(200): N$(200): G(200):H0: O$(32): P$(30): Q$(30):    R$(30):I0: ! B$"11.PARSE":H$"@~":A$(34):B34:C39::" PREPROCESSOR V0.6.0"::7,"SCRATCH"A$B$A$":DSALVE"A$B$A$":DVERIFY"A$B$ ! C$"                                                                               ":D$C$C$C$:C$"" %" I$(.)" PRINT INPUT IF THEN ELSE DO LOOP WHILE UNTIL GOSUB GOTO OPEN CLOSE DOPEN DCLOSE FOR NEXT GETKEY HEX$ DIM LPEEK POKE WAIT DEC CHR$ ASC SGN SQR STR$" " I$(.)I$(.)" GRAPHIC CLR SCREEN DEF BEGIN BEND LEN MID$ RIGHT$ LEFT$ INSTR FOR NEXT STEP TRAP BORDER AND FOREGROUND " 6# I$(1)" BACKGROUND SET ABS SIN COS TAN LOG FRE CURSOR PIXEL WINDOW RWINDOW LINE BOX CLIRCLE ELLIPSE PALETTE RESTORE DATA ERR$ ER EL CURSOR ON OFF" # I$(1)I$(1)" VAL SCRATCH RETURN RND STOP BANK TI DO OR ST IF EL ER ON TO PEN GET END INT NOT DS RUN USING DOT " A$	 I$(2)" APPEND ATN AUTO BACKUP BLOAD BOOT BSAVE BUMP BVERIFY CATALOG CHAL#NGE CHAR CMD COLLISION COLOR CONCAT CONT COPY WPOKE WPEEK SETBIT CLRBIT " $
 I$(3)" DCLEAR DEFFN DELETE FN DIR DISK DLOAD DMA DMODE DPAT DSAVE DVERIFY EDMA ENVELOPE ERASE EXIT EXP FAST FILTER FIND GO64 HEADER HELP HIGHLIGHT " I% I$(4)" JOY LIST LOAD L ;  A$(27)"Q": AH(50,3):AM0: A&(8050): B&(8050): i   AT(3):AT(.)4:AT(1)8:AT(2)12:AT(3)16   $:53280,11,14: 142: 148: 154: 143: 137   1: 138: 136: 18: 5:   A.,49:A$;   AR0   (27)"QX=";B;", Y=";C;: ! LAR1 A!	 (27)"QX=";N;", Y=";O;:", W=";BN1;", H=";CO1;: L!
 A$;: v! 1: 138: 136:B$:B$(13) 132 ! B$""B.BB1 ! B$""B79BB1 ! B$""C.CC1 ! B$""C49CC1 ! B$(13) ! :  " B$:B$" "L 132 " B$""B.BB1 -" B$""B79BB1 C" B$""C.CC1 Z" B$""C49CC1 l" B$"D" 110 ~" B$"Y" 158 " B$"P" 160 " B$"C" " "";:R.: 124: " B$"-"R. " RR1: 124: " B$"="R(327682)1 L# RR1: 124: #  B$" " '#! ARAR1 4#" AR2 C##  100:: J#$  \#% B$"L" 109 k#& B$"X" }#' A.,.::: #( B$"E" #) A.,40:393212,1:393213,R::: #* B$"" 85 #+ B$"" 90 #, B$"" 93 #- B$"" 47 L#.  $/ AN0:1: 61: 55: 72 8$0 B$"X"B$(27)B$"" P$1 (147);: 124:: X$2 : u$3 (264192BC80)32 $4 AFAF128 $5 ::267911168BC80,1: $6 264192BC80,AF: %7  124: 122:AO.3:AI(DAT(AO)):AJ(DAT(AO)1):LAK(DAT(AO)2):AL(DAT(AO)3) 6%8 (AI.AJ.AK.AL.) %9 BAI:CAJ:AF112: 51:BAK:CAJ:AF110: 51:BAI:CAL:AF109: 51:BAK:CAL:AF125: 51 %: BAI1AK1:CAJ:AF64: 51:CAL:AF64: 51:B:CAJ1AL1:BAI:AF93: 51 %; BAK:AF93:L 51:C: &< AO: )&=  122:ABD:AM."";:ՙ""; f&> A40,40:(27);"Q  HEAD: ";:AF4: 84:AM1"";:ՙ""; &? A40,41:(27);"Q TORSO: ";:AF8: 84:AM2"";:ՙ""; &@ A40,42:(27);"Q  FEET: ";:AF12: 84:AM3"";:ՙ""; 'A A40,43:(2L7);"QATTACK: ";:AF16: 84:"";: 71: ('B AM.AF4 7'C AM1AF8 G'D AM2AF12 W'E AM3AF16 ]'F  m'G  66: 83: 'H B$:B$""AM.AMAM1 'I B$""AM3AMAM1 'J B$"-"R. 'K RR1: 124: 'L B$"="R(327682)1 'M RRL 1: 124: (N B$(13) J(O  81: 66:ABAF,AI:ABAF1,AJ:ABAF2,AK:ABAF3,AL: P(P  (Q BAI:CAJ:AR0: 11:AIB:AJC:AR1: 11:AKB:ALC:264192NO80,J:267911168NO80,K:264192PQ80,L (R 267911168PQ80,M: )S AI(ABAF):AJ(ABL!AF1):AK(ABAF2):AL(ABAF3): 7)T  83:AI;",";AJ;",";AK;",";AL;: V)U "LOAD NAME: ";C$:C$"" m)V (C$),P(327680): )W AC270336:AD327680:E(AC):AD2,E:ACAC1:ADAD3:AE3:AF.E1:AD0,(AC):ACAC1:AD1,(AC):ACAC1:H(AC):AD2,HL" x*X ACAC1:I(AC):AD3,I:ACAC1:AG204:!3,AG,.,AD4:AGHI2:!0,AG,AC,AD20:ACACAG:ADAD20AG:AEAE20AG:AF:AD327680:AD0,AE ~*Y  *Z "SAVE NAME: ";C$:C$"" *[ D327680(3276800):(C$):(C$),P(327680)P(D): -+\ AE(3276800):M#D3276803:AF.E1:H(D2):I(D3):AEAEHI:DD20HI2:AF: X+] "SAVE NAME (OPTIMISED): ";C$:C$"" +^ (C$):#2,(C$",P"),W,U8:2,(1);:2,(2);: 92:2,((AE,256)); ,_ 2,((AE256));:2,(E);:D3276803:F.E1:B(D0):C(D1):H(L$LOCATE LPEN MOD MONITOR MOUSE MOVSPR NEW PAINT PLAY POINTER POLYGON POS POT PUDEF " % I$(5)" RCOLOR RDOT READ RECORD REM RENAME RESUME RGRAPHIC RMOUSE RPLAY RREG RSPCOLOR RSPPOS RSPRITE SAVE SCNCLR SLEEP SLOW SOUND SPC SPRCOLOR " \& I$(6)" SPRITE SPL%RSAV SYS TAB TEMPO TROFF TRON TYPE USR VERIFY VOL XOR KEY VSYNC RCURSOR T@& C@& RGRAPHIC FREAD POINTER " & J$" BLOAD BSAVE DLOAD TO SAVE DIR COLLECT DOPEN DCLOSE BACKUP FREAD GET ": 225:128:E$(0)"":E$(1)"%":E$(2)"$":E$(3)"&":E(.)1 ' D116:L&E(D)E(D1)E(D1):D g' A.:S$(32)(160)"	":J.:"PASS 1 ";:K.:TI:L134414336:ML:N(M):MM2:KN: 261 '  265:T$F$: 111:F$T$ ' F$"" ' O.:P">> :"Q;", : ";J;": ";F$ ' (F$,1)"." ' A1: 105: ' (F$,1)L'"#" (  280: ( R1 33 9( (F$,4)"DATA"(F$,5)"BEGIN" D( A1: P( O. _( P."."; {( T$F$: 122: 293: 335 (  339:(T$,4)"BEND"(T$,6)"RETURN"(T$,2)"IF":A1: (  (   (! JJ1 (" P (# "SRCLINEM NO=";J:U$: )$  )% V$"" ')& K$(Q)V$:QQ1: M)' 1: 233:"11TEMP":"11TOKENIZED" )( 1,1,5,"11TEMP,S,W":(13)"PASS 2 ";:S.Q1:T$K$(S):PS;"=> "T$:ՙ"."; )) (T$,H$).:T(T$,H$):U(T$,H$,T2) )* U. )+  *, ::W$M(T$,T2,UT2): 196:T$(T$,T1)W$(T$,U2): 6*- :P"<= ";(S)T$ *. 1,(S)" "T$:S: 352:V.10:1,(32000V):V:X$"D:D"A$"11TOKENIZED"A$ +/ X$X$":IFDS<>0THEN?"A$"DISC ERROR: ":X$X$A$";DS$:ELSE?"A$:X$X$"M":X$X$A$":D"A$"11.POST":1,X$:1:"" +0 "ELAPSED TIME:";TI;"TICKS":"EDMA 0,$1FFF,$8022000,$2001:NEW RESTORE":"RUN";:128:208,2:688,13,13: +1 T$(F$,10W):X1: 112:X.:G$"" +2 Y. +3 Z$"?DECLARE PARAMETER MISSING IMN LINE "(J) ,4  108: ,5 D.Y:AA$O$(D): 58:D .,6 G$"" A,7 O.:F$"^^"G$ S,8 ::O1: Y,9  ,: AB$"":AC$"":Z(AA$,"("):AA(AA$,")"):AB(AA$,"=") ,; AB. ,< AC$(AA$,AB1):AA$(AA$,AB1):AD$S$:T$AA$: 111:AA$T$:T$AMC$: 110: 111 ,= AC$T$ -> (AC$,1)"$" .-? AE$(AC$,2): 208: C-@ (AC$,1)"%" ]-A AF$(AC$,2): 202: d-B  w-C Z.AA. -D AB$(AA$,Z1,AAZ1):AU$(AA$,Z1):T$AB$:AC1: 122:AC.:AB$T$:AA$AU$:O.: -E AD0:C$(AA$,1) M-F P  .G "ADDING ";: .H ("%&$",C$). (.I C$"":AD0: 4.J W1 @.K AD4: O.L C$"%" [.M AD1: j.N C$"$" v.O AD2: .P C$"&" .Q AD3: .R L$(AD,F(AD))AA$ .S AB$"" .T AEF(AD): 211 .U W. .V G$G$"DMIM "AG$C$"("AB$"):": /W  /X AC$"" '/Y AEF(AD): 211 3/Z W. S/[ G$G$AG$C$"="AC$":": Z/\  f/] W1 {/^ M$(F(AD))AC$: /_ P /` AA$;": ";F(AD): /a F(AD)F(AD)1: /b T$(F$,8): 112 /c Y. /d "?INVALMID PARAMETERS IN LINE ";J:: 0e T$O$(.):AD$A$: 110: 111 (0f P R0g "SETTING OUTPUT FILE TO "T$"": c0h AH$T$:O1: m0i P 0j "LABEL ";F$;" AT LINE ";Q: 0k O1:N$(H)(F$,2):G(H)Q1:HH1: &1l 4:V1(Z$):327472V1,((Z$,VM,1)):V:327472V1,.:65289,(J,256):65290,J256:65287,(65287)2: 01m  238 V1n (AD$,((T$,1))):T$(T$,2):: 1o (AD$,(T$,1)):T$(T$,(T$)1):: 1p Y$",;":Y.:AI$T$:AF(T$):AG. 1q AF. 1r Y1: 1s  
2t AH.31:O$(AH)"":M	AH:AH1AF:AJ$(AI$,AH,1):AJ$"("X1AG1  2u AJ$")"X1AG. 92v (Y$,AJ$).AG1 M2w O$(Y)O$(Y)AJ$ 2x ::T$O$(Y):AD$" ": 110: 111:O$(Y)T$:YY1: 2y AH:T$O$(Y):AD$" ": 110: 111:O$(Y)T$:T$AI$: 2z (T$,2)"^^" 2{ T$M
(T$,(T$)2): 2|  K3} AI.:AK$"":W$"":BM.:AK.:AL$"?<>=+-#*/^,.:;() ":Y$AL$:AL1(T$):AJ$(T$,AL,1) `3~ AJ$":"AI. l3 BM.: 3 BMAJ$"(" 3 Y$AL$: 3 BMAJ$")" 3 Y$AL$"DPUB": 3 AJ$A$ 3 AI(AI1) 3 MAI1 3  147:AK$AK$W$:W$"" 4 ::AK$AK$AJ$:AJ$"": #4  04 AI1 @4 AK$AK$AJ$ M4  145: b4 (Y$,AJ$). 4  147:AK$AK$W$:W$"":AJ$" "AJ$"" 4 AK$AK$AJ$ 4 ::W$W$AJ$: 4 : 147:T$AK$W$: 4  4MARAPAS1AQAN"";:ՙ"";: > AK.A$E$(AJ) ? AK1ALG(AJ) ? AK2ALH(AJ) .? AK3ALI(AJ) A? AK4ALJ(AJ) T? AK5ALK(AJ) g? AK6ALL(AJ) m?  ? AJAHAKAIAS."";:ՙ""; ? AI. ? A$;(9);"";: ?  ? AIM5 ? T$(AL);(9);"";: ?  ? AL;(9);"";: @  210:O$""AK.AKAK1 0@ O$""AK6AKAK1 I@ O$""AJ.AJAJ1 b@ O$""AJ9AJAJ1 @ O$"+"O$"="AO1: 311 @ O$"-"AO1: 315 @ O$""AO100: 311 @ O$""AMO100: 315 @ O$(13)O$"+": 268  A O$(141)O$"-": 268 A O$(9)AS1: 196 *A  237: 305: SA 1: 153: 210:O$""AQ.AQAQ1 lA O$""AQ8AQAQ1 A O$""AR.ARAR1 A O$""AR10ARAR1 A O$"+"O$"="AO1: 31M7 A O$"-"AO1: 334 A O$""AO100: 317 B O$""AO100: 334 B O$" " -B ATARAT1:ATAR :B  261: TB O$(13) 277: 261 jB O$(9)O$"" B  237: 305::AS.: B O$"":O$"":O$ B AT1 B  241: B MAZ1 B (1). 217 B  B : B ANU(AY) B AN. C AAN:Z.ZV(AY) .C  135:.1: 364: <C AN1 YC ANV(AY):(AN):A%AN: gC AN2 C ANV(AY):ARAN:ATAN: 261: C AN4W1:AA. C AN5W2:AA. C AMN6X1:AA. C AN7W.:X. C AN8YV(AY) D AN10AA1:W.:X. D AN9ALV(AY):AL,AL .D Z.ZZ1 @D Z.AYAY1 PD AN3AY. gD AYAFAZ.:AY1 mD  D AN04:O$V$(AN,2)BAAN D AN:O$">"AU6AUAU1 D O$"<"MAU.AUAU1 D  D AT1 D AW0 UE "";(9);(9);(9);(9);(9);(27);"QCURRFREQ=";AV;:54293,(AV7)((AVS3)256):54357,(AV7)((AVS3)256) bE AW1 rE AVAVT(AT) E AVM(AT) E AVM(AT):R(AT)3AW2 E R(AT)1AVS(AT)M):H(D2):I(D3):PBH1:QCI1:"";A$;:"X=";B;", Y=";C;", W=";H;", H=";I;:", PTR=$";(D); 1 "";(27);"J";A$;"FRAME=";R;:", NXT=$";(D20HI2);:SD20:TD20HI:W264192BC80:X267911168BC80:VCQ:!0,H,S,W 1 !0,H,T,X:SSH:TTH:MWW80:XX80:V: 1 AR0 $2 264192BC80,J:267911168BC80,K W2 ::264192BC80,L:267911168BC80,M: ]2  2 264192BC80,43:267911168BC80,1: 2 A.,49:A$;"FRAME COUNT=";(3276802);", NEXT-FREE=$";:(D);: 2 AR0M 3 J(264192BC80):K(267911168BC80):NB:OC N3 ::L(264192BC80):M(267911168BC80):PB:QC: T3  o3 A.:AR0:B.:C.:R.: 3 E(3276802):F.:D3276803:1 3 FE 3 GD327680: 3  3 H(D2):I(D3):DD20HM E  E  E  E AW2 E AVAVT(AT) E AVS(AT) F AVS(AT):R(AT)3AW1 'F R(AT)2AVM(AT) .F 4F ;F AF NFAT1 FAVM(AT):AW0:R(AT)1R(AT)3:AVS(AT):AW1: FR(AT)2 FAW2: F	1,M(AT),N(NAT),O(AT),P(AT),Q(AT):2,M(AT),N(AT),O(AT),P(AT),Q(AT): G
A$"":"NEW NAME: ",A$:A$""E$(AJ)A$ G 0GAK. 266: =GAK6 sGA$"":"NEW VALUE: ",A$:AL(A$):AL4095AL4095 GAL.AL. GL(AJ)AL: G GO$"+"AO1: 311 MI2:FF1:: 	4 (393214)71(393215)73 h4 393214,18759:"";A$;:"MAGIC SIGNATURE APPLIED. RESET FRAME COUNT TO ZERO? (Y/N)";:B$ w4 B$"Y" 4 3276800,.:3276802,.: 4 "";A$;: 4  4 (393212)1 5 393212,.:R(39M3213): 122:N(D0):O(D1):BN(D2)1:CO(D3)1:AS.: 102 %5  124: +5  5 53280,(53280)1: 81:D
(A&(.)):AGAKAI1:CAJAL:!0,AG,264192AIC80,D:DDAG:C 5 D
(B&(.)):CAJAL:!0,AG,267911168AIC80,D:DDAG:C:APAKAI1:AQMALAJ1:53280,(53280)1: i6 AIB:AJC:AKBAP1:ALCAQ1:D
(A&(.)):AGAKAI1:CAJAL:!0,AG,D,264192AIC80:DDAG:C:D
(B&(.)):CAJAL 6 !0,AG,D,267911168AIC80:DDAG:C: 102: 122:N(D0):O(D1):BN(D2)1 6 CO(D3)1:ASM.: 102: 6  CURRENTFRAME = :A: 7  X = :B: 7  Y = :C: !7  PTR = :D: 97  FRAMECOUNT = :E: L7  FRMIDX = :F: c7  BYTESUSED = :G: t7  FRMW = :H: 7  FRMH = :I: 7  STARTCHAR = :J: 7  STARTCOLOR = :K: 7  ENDCHAR = :L: 7  MENDCOLOR = :M: 7  STARTX = :N: 8  STARTY = :O: 8  ENDX = :P: '8  ENDY = :Q: >8  CURRFRAME = :R: W8  SRCCHARPTR = :S: o8  SRCCLRPTR = :T: 8  XIDX = :U: 8  YIDX = :V: 8  DESTCHARPTR = :W: 8  DESTCLRPTR = :X: 8  CVAML = :Y: 8  STARTPTR = :Z:  9  ENDPTR = :AA: 9  CURRPTR = :AB: +9  SRCPTR = :AC: A9  DESTPTR = :AD: Q9  SZ = :AE: `9  K = :AF: p9  LN = :AG: 9  B = :AH: 9  X1 = :AI: 9  Y1 = :AJ: 9  X2 = :AK: 9  Y2 = :AL: 9  HBSELM  W$""W$"_" 4 (W$). 5 AK.: 
5  5 W$"0" &5 W$".": -5  =5 AKAC. N5  195:AK.: U5  h5 W$"GOTO"A1 5 W$"GOTO"W$"GOSUB"W$"TRAP" 5 AK1: 5 (W$,1)"$" 5 AE$(W$,2): 208: 5  5 M = :AM: 9  HBMODE = :AN: 9  IDX = :AO: :  CLIPW = :AP: :  CLIPH = :AQ: 8:  STORESTATE = :AR: T:  NEWFRAMEFLAG = :AS: i:  BXOFFS = :AT: w:   = :AU: :   = :A%: :  CLRLINERIGHT$ = :A$: :  A$ = :B$: :  FNAME$ = :C$: : U   = :D$: :  CLIPBOARDCHAR& = :A&: ;  CLIPBOARDCLR& = :B&: ;   = :C&:                                                                                                                                                                             M!(W$,1)"%" 5 AF$(W$,2): 202: 6  6 AT$" "W$" ":AM.6 56 (I$(AM),AT$). H6 AM$W$: 194: O6  w6 :AJ.:C$(W$,1):AD0:C$"%"AD1 6 C$"$"AD2 6 C$"&"AD3 6 AE.F(AD) 6 W$L$(AD,AE) 6  211:W$AG$E$M"(AD):AEF(AD):AJ1: 6 AE:AJ1 7 AE.F(4) 7 W$L$(4,AE) *7 W$M$(AE): 17  I7 AE:AN1:AE.I1 [7 W$P$(AE) u7  293:ANAE:AEI1: }7 AE 7 AN1 7  7  7 (W$)222 7 (J$,AM$).(W$"R"W$"P" 7 N#W$"U8"W$"W"): 7  (8 Z$"?UNRESOLVED IDENTIFIER: '"W$"' IN LINE "(J):1 48  108: :8  L8 W$H$W$H$: _8 AJ.:AE.H1 q8 W$N$(AE) 8 W$(G(AE)):AEH:AJ1: 8 AE:AJ 8 Z$"?UNRESOLVED LABEL: '"W$"' IN LINE"(A%M$D2):I(D3):2,(B);(C);(H);(I); W,` AF.15:2,((D4AF));:AF:SD20:TD20HI:AF.HI1:Y(TAF) j,a (SAF)32 w,b Y255: ,c 2,(Y);:AF:DD20HI2:F:#2: -d 264192NO80,J:267911168NO80,K:264192PQ80,L:267911168PM%Q80,M:E(3276802): 143:D327680G:AS1 -e  102: E-f D0,N:D1,O:D2,BN1:D3,CO1 P-g AS l-h AG204:!3,AG,.,D4: -i DD20:VOC:UNB:D,(264192UV80):DD1:U:V:VOC:UNB:D,(267911168UV80):DD1:U:V -j AS 
.M&k 3276800,D327680:3276802,E1: Y.l A.,49:A$;"FRAME COUNT=";(3276802);:", NEXT-FREE=$";(D);:A.,.:AS.: z.m "";A$;:"FRAME#";R: 124: .n  117:AAD:EE1:3276802,E: 115 .o RE .p RR1 .q :: 116: .r  124: +/s  122:M'ABD:H(AB2):I(AB3):AE(3276800):AEAE(20HI2):3276800,AE: t/t  122:ABD:H(AB2):I(AB3):ZAB20HI2:AGAAZ1:!0,AG,Z,AB: /u E(3276802):D3276803:F. /v FE /w A.,.:A$;"INVALID BLOCK#!": /x  /y F.E1:H(D2M):I(D3):DD20HI2:F: '0z E(3276802):D3276803:F.E:FR S0{ H(D2):I(D3):DD20HI2:F:D.: t0| E(3276802):D3276803:F. 0} FE 0~ A.,.:A$;"INVALID BLOCK#!": 0  0  122:D."NOT FOUND!": ?1 B(D0):C(D1NI1: = T$F$: 110: 111:F$T$:AP$" ":AY. > (T$,1)A$ > AP$A$", ":AY2: .> AU(F$,AP$) <> AU. u>T$(F$,1,(F$,AP$)AY1):F$(F$,(F$,AP$)AY1): >AU. >T$F$:F$"": > >.:AZ(M):F$(D$,AZ):BA
(F$):NBB65536(BA1):MM1 >AZ. ?!.,AZ,M,BB:MMAZ: 4?KK1:AD$S$:T$F$: 110:F$T$:AI.:BC.:1: E?	BC(F$,"'") S?
BC. g?(F$,A$). ?BC.:.:BD(BA)1:BE(BA1):1:V.BD:BF(BEV) ?BFB ?AI(AI1) N?: ?BFCAI. ?BCV1:V999: ? ?: 
@BC @F$(F$,BC1): &@ ,@ D@(F$,"IFDEF")2 `@T$(F$,8): 243:O1: x@(F$,"ENDIF")2 @R.:O1: @(F$,"DEFINE")2 @W1: 49:W.: @(F$N,"DECLARE")2 @W.: 49: @ (F$,"OUTPUT")2 A! 98: A"(F$,"STRUCT")2 -A# 247:O1: 3A$ ZA%AQ$T$:F$T$:AW1: 252:BG.I1 lA&T$P$(BG) A'AWBG:BGI1: A(BG A)AW1 A*F$AQ$:T$AQ$: A+ A, 252:NAR$T$:BH(AR$,"("):T$R$(AW): 112:AW1:BI.:BG.Y B-O$(BG)"" "B."ARGS$(";BG;")=";O$(BG) /B/BH. cB0T$AR$""O$(BG):"STRUCT: ";T$:AA$T$: 58: qB1BH. B2T$(AR$,BH1)""O$(BG)(AR$,BH):"STRUCT: ";T$:AA$T$: 58:Q$(BIN)AA$:BIBI1: B3BG:T$G$: 339:G$"": 252 B4T$"=" C5F$"": C6 /C7 252:BI.:BJ.:BK.:T$"" >C8T$"_" NC9JJ1: 261 [C: 334: pC;BK.T$"[" C<"ERROR: EXPECTED [":1:: C=BK.T$"[" C>BK1 C? 33N4: C@BK1T$"["T$"]"  DA"ERROR: EXPECTED [ OR ]":1:: DBBK2 !DC(T$,1)"]" =DDBJBJ1:BI.:BK1:T$"" JDE 329: ^DF(T$,1)"," vDGT$(T$,(T$)1): DHT$Q$(BI)"("(BJ)")="T$: 122: 339:T$"":BIBI1 DIN DJBK1T$"[" DKBK2:BI.: DLBK1T$"]" DMBK.: $EN 252::T$"":F$"":G$"":AS$"Z": 8EO(V$,1)"_" VEPV$(V$,(V$)1):A.:BL1 iEQ::BL.: oER ES(V$)(T$)((Q))159 ETA1: EUAS$"" EVT$"N	":AS$"": EW EXA1 EYK$(Q)V$:V$T$:A%(Q)J:QQ1:A. FZ: "F[V$""BL.(V$,1)":" 3F\V$V$":": CF]V$V$T$: TF^P"<<"Q;T$ ZF_ F`AD.3:AE.F(AD): 211:1,(S)" REM "L$(AD,AE)" = :"AG$E$(AD)":":SS1:AEN
:AD: Fa NEXTLINEFLAG = :A: Fb DBLQUOTECHAR = :B: 
Gc SNGLQUOTECHAR = :C: Gd I = :D: -Ge BINCONV = :E: EGf ELEMENTCNT = :F: ^Gg LABELLINENO = :G: tGh LABELCNT = :H: Gi STRUCTCNT = :I: Gj SRCLINENO = :J: Gk CURSRCNLINENO = :K: Gl CB = :L: Gm CURATTICADDR = :M: Gn TOTALLINES = :N: Ho DELETELINEFLAG = :O: 0Hp VERBOSE = :P: HHq DESTLINENO = :Q: aHr INSIDEIFDEF = :R: }Hs CURDESTLINENO = :S: Ht S1 = :T: Hu S2 = :U: Hv R = :V: HwN DEFINEFLAG = :W: Hx IGNOREBRACKETS = :X: Hy ARGCNT = :Y: 
Iz BKTOPENIDX = :Z: %I{ BKTCLOSEIDX = :AA: =I| EQUALSIDX = :AB: ZI} DONTMARKLABEL = :AC: jI~ TY = :AD: zI ID = :AE: I ARGSLISTLEN = :AF: I IGNOREDELIMFLANGO$"-"AO1: 315 G GAQ2ALN(AR):AL(AL1,2):N(AR)AL: $HAQ3ALO(AR):AL(AL1,2):O(AR)AL: PHAQ4ALP(AR):AL(AL1,2):P(AR)AL: |HAQ6ALR(AR):AL(AL1,4):R(AR)AL: HA$"":"NEW VALUE: ",A$ HA$"" HAOQ.G$(AR)A$ HAQ1 HAL(A$):AL2047AL2047 HAL.AL. IM(AR)AL: I AQ5 ,I!AL(A$):AL15AL15 ;I"AL.AL. KI#Q(AR)AL: XI$AQ6 pI%AL(A$):AL3AL3 I&AL.AL. I'R(AR)AL: I(AQ7 I)AL(A$):ANG = :AG: I ARGSIDX = :AH: I QUOTEFLAG = :AI:  J DIDREPLACEFLAG = :AJ: J EXPECTINGLABEL = :AK: 1J RVIDX = :AL: @J T = :AM: ^J FOUNDSTRUCTIDX = :AN: nJ BR = :AO: }J B = :AP: J VL = :AQ: J N1 = :AR: J N2 = :NAS: J BA = :AT: J A = :AU: J AD = :AV: J FOUNDIDX = :AW: K K = :AX: K SF = :AY: ,K CURLINELEN = :AZ: FK SRCLINEPTR = :BA: dK SRCLINEBUFFPTR = :BB: ~K CUTTAILIDX = :BC: K CURLINELENMINUSONE = :BD: KN CURLINEBUFFADDR = :BE: K CHR = :BF: K RIDX = :BG: K BL = :BH: L SZ = :BI: L SR = :BJ: $L SM = :BK: EL CONTNEXTLINEFLAG = :BL: eL SHITTYSYNTAXFLAG = :BM: uL ZZ = :BN: L  = :BO: L MAPDESTTOSRCLINENO% = :AN%: L  = :B%: L DBLQUOTE$ = :A$: L PARSERFILE$ = :B$: L T$ = :C$: M BLANKLINE$ = :D$: *M TYPEIDENT$ = :E$: EM CURSRCLINE$ = :F$: ]M NEXTLINE$ = :G$: nM MK$ = :H$: M TOKENS$ = :I$: M DUMBCMDS$ = :J$: M DENSTLINE$ = :K$: M VARTABLE$ = :L$: M DEFINEVAL$ = :M$: M LABELNAME$ = :N$: N ARGS$ = :O$: *N STRUCTNAME$ = :P$: FN STRUCTFIELDS$ = :Q$: `N STRUCTVARS$ = :R$: yN WHITESPACE$ = :S$: N S$ = :T$: N Z$ = :U$: N CUN:AG: I ARGSIDX = :AH: I QUOTEFLAG = :AI: I DIDREPLACEFLAG = :AJ: J EXPECTINGLABEL = :AK: -J RVIDX = :AL: <J T = :AM: ZJ FOUNDSTRUCTIDX = :AN: jJ BR = :AO: yJ B = :AP: J VL = :AQ: J N1 = :AR: J N2 = :AS: NJ BA = :AT: J A = :AU: J AD = :AV: J FOUNDIDX = :AW: J K = :AX: K SF = :AY: (K CURLINELEN = :AZ: BK SRCLINEPTR = :BA: `K SRCLINEBUFFPTR = :BB: zK CUTTAILIDX = :BC: K CURLINELENMINUSONE = :BD: K CURNLINEBUFFADDR = :BE: K CHR = :BF: K RIDX = :BG: K BL = :BH:  L SZ = :BI: L SR = :BJ:  L SM = :BK: AL CONTNEXTLINEFLAG = :BL: aL SHITTYSYNTAXFLAG = :BM: qL ZZ = :BN: L  = :BO: L MAPDESTTOSRCLINENO% = :A%: NRDESTLINE$ = :V$: N CURTOK$ = :W$: N F$ = :X$: N DELIM$ = :Y$: 
O PARSERERROR$ = :Z$: "O VARNAME$ = :AA$: ;O DIMENSION$ = :AB$: PO VALUE$ = :AC$: bO TR$ = :AD$: tO HX$ = :AE$: O BI$ = :AF$: O GENVARNAME$ = :AG$N: O OF$ = :AH$: O ARGSLIST$ = :AI$: O CURCH$ = :AJ$: O A$ = :AK$: P DEFAULTDELIM$ = :AL$: "P LC$ = :AM$: 4P BC$ = :AN$: FP TF$ = :AO$: XP SF$ = :AP$: jP CO$ = :AQ$: |P SK$ = :AR$: P ZZ$ = :AS$: P TOKNAME$NL  = :B%: L DBLQUOTE$ = :A$: L PARSERFILE$ = :B$: L T$ = :C$: M BLANKLINE$ = :D$: &M TYPEIDENT$ = :E$: AM CURSRCLINE$ = :F$: YM NEXTLINE$ = :G$: jM MK$ = :H$: M TOKENS$ = :I$: M DUMBCMDS$ = :J$: M DESTLNINE$ = :K$: M VARTABLE$ = :L$: M DEFINEVAL$ = :M$: M LABELNAME$ = :N$: N ARGS$ = :O$: &N STRUCTNAME$ = :P$: BN STRUCTFIELDS$ = :Q$: \N STRUCTVARS$ = :R$: uN WHITESPACE$ = :S$: N S$ = :T$: N Z$ = :U$: N CURDENSTLINE$ = :V$: N CURTOK$ = :W$: N F$ = :X$: N DELIM$ = :Y$: O PARSERERROR$ = :Z$: O VARNAME$ = :AA$: 7O DIMENSION$ = :AB$: LO VALUE$ = :AC$: ^O TR$ = :AD$: pO HX$ = :AE$: O BI$ = :AF$: O GENVARNAME$ = :AG$: ON OF$ = :AH$: O ARGSLIST$ = :AI$: O CURCH$ = :AJ$: O A$ = :AK$: P DEFAULTDELIM$ = :AL$: P LC$ = :AM$: 0P BC$ = :AN$: BP TF$ = :AO$: TP SF$ = :AP$: fP CO$ = :AQ$: xP SK$ = :AR$: P ZZ$ = :AS$: P TOKNAME$ = : BAT$: P CLEANVARNAME$ = :AU$: P  = :AV$: P  = :A&:                                                                                                                                                                                                 F = :AT$: P CLEANVARNAME$ = :AU$: P  = :AV$: P  = :A&:                                                                                                                                                                                                                                                                                                                                                                                                                                                          N =2:DC(6)=512:J$(7)="RGAN":CX(7)=.:CY(7)=9:CZ(7)=9:DA(7)=.:DB(7)=2:DC(7)=2048:J$(8)="RUMPET" 17 CX(8)=8:CY(8)=9:CZ(8)=4:DA(8)=1:DB(8)=2:DC(8)=512:J$(9)="YLOPHONE":CX(9)=.:CY(9)=9:CZ(9)=.:DA(9)=.:DB(9)=.:DC(9)=.:DD=0:DE=-1: 18 DD=0:DE=-1:DIM K$(10):DIN!M DF(10):DIM DG(10):DIM DH(10):DIM DI(10):DIM DJ(10):DIM DK(10):DIM DL(10):DIM DM(10):K$(.)="LOWPUP":DF(.)=1000:DG(.)=1:DH(.)=0 19 DI(.)=0:DJ(.)=15:DK(.)=1:DL(.)=100:DM(.)=10:K$(1)="LOWPDOWN":DF(1)=1000:DG(1)=1:DH(1)=0:DI(1)=0:DJ(1)=15:DK(1)=2:DL(1)=1N"00:DM(1)=10:K$(2)="LOWPOSC" 20 DF(2)=1000:DG(2)=1:DH(2)=0:DI(2)=0:DJ(2)=15:DK(2)=3:DL(2)=100:DM(2)=10:K$(3)="BANDPUP":DF(3)=1000:DG(3)=0:DH(3)=1:DI(3)=0:DJ(3)=15:DK(3)=1:DL(3)=100 21 DM(3)=10:K$(4)="BANDPDOWN":DF(4)=1000:DG(4)=0:DH(4)=1:DI(4)=0:DJ(4O')=15:DK(4)=2:DL(4)=100:DM(4)=10:K$(5)="BANDPOSC":DF(5)=1000:DG(5)=0:DH(5)=1:DI(5)=0 22 DJ(5)=15:DK(5)=3:DL(5)=100:DM(5)=10:K$(6)="HIGHPUP":DF(6)=1000:DG(6)=0:DH(6)=0:DI(6)=1:DJ(6)=15:DK(6)=1:DL(6)=100:DM(6)=10:K$(7)="HIGHPDOWN":DF(7)=1000 23 DG(7)=0N$(S1)):1 8  108: 9 AO.:AP.(AF$)1:AN$(AF$,(AF$)AP,1) -9 AN$"1"AN$"0" @9 4:65288,132 M9  192: f9 AN$"1"AOAOE(AP) p9 AP: 9  209:AQ(AE$):: 9 :4:65288,131 9  192 9 AE26 9 AG$(65AE): 9N%  : AS(AE,26):AR(AE26)1:AG$(65AR)(65AS):AG$"DO"AG$"D1" .: AG$"GO"AG$"G1" E: AG$"TO"AG$"T1" \: AG$"DS"AG$"D2" s: AG$"DT"AG$"D3" : AG$"EL"AG$"E1" : AG$"ER"AG$"E2" : AG$"FN"AG$"F1" : AG$"IF"AG$N&"I1" :  :  : 4:AT65280 ; (AT.)("S")(AT1)("K") d; P(65287)8:X$"":AUAT16:(AU).:X$X$((AU)):AUAU1::(65287)1 ; "FILENAME? "X$:"";: ; "FILENAME";AK$ ; AK$"" ; "NO FILENAME SET":: 	< AN'T,("S"):AT1,("K"):V116:AT8V1,((AK$,V,1)):V:X$AK$: -< AV65328:4:V.16:AVV,.:V =< AH$"" I< AO$AH$ h< ::AO$"ELEVEN.OUT": < V1(AO$):AVV1,((AO$,V,1)):V: < AK$ < AK$"" < BN:BN1 <  =N  "EDMA 0,$D400,$8000000,$2001:NEW RESTORE":"RUN";:128:208,2:688,13,13: /= R1:AX.F(4) C= L$(4,AX)T$ N= R.: X= AX: m= F$(F$,9): 252 {= T$"" = "ERROR: NO STRUCT NAME FOUND":1: =  = P$(I)T$:R$(I)F$:IO(10)=0:DH(10)=0:DI(10)=0:DJ(10)=.:DK(10)=0 25 DL(10)=.:DM(10)=.:DIM D1(200):DIM DP(200): 26 PRINTCHR$(27)+"5":PRINTCHR$(147);:BORDER.:BACKGROUND.:GOSUB 32:BZ=.:GOSUB 38 27 GOSUB 39:GOSUB 30:GOSUB 168 28 GOTO 27 29 WPOKE262153,Y:WPOKE262156,Z:WPOKE26O SAY.:AZ1:Z.:: 52:A%: SO$" " SAYAG:AZ1:Z.:: 52:A%: TO$(13) 431 TO$"C" 440 )TO$(27) 425 :TO$""AG. NTO$""AGAF1 mT((AG43)43)AEAEAE43 T((AG43)43)(AE43)AEAE43 TO TAY1:AZ.:: 52:A%: 261: TAF. UANAG:ANAF1:U(AN)U(AN1):V(AN)V(AN1):ANAN1::AFAF1:AGAFAG.AGAG1 #U /UAF. U"";(9);(9);(27);"Q";:AL.:"CHUNK#: ",AL:U(AG)AL:"";(9);(9);(27);"Q";:AL1:"EXTRA#:O ",AL:V(AG)AL: UAF. U"";(9);(9);(27);"Q"; UAC. 	VALU(AG):H$(AL):(H$,1)" "H$(H$,2) DV"CHUNK#: ";(27);"^";H$;(27);"_";:"",AL:U(AG)AL: QVAC1 VALV(AG):H$(AL):(H$,1)" "H$(H$,2) V"EXTRA#: ";(O27);"^";H$;(27);"_";:"",AL:V(AG)AL: V WALU(AG):"";:AH1111:AH;":";N$(AH):AH::"CMD: ",AL:AL.U(AG)AL W kWAFAF1:ANAF2:ANAG:U(AN1)U(AN):V(AN1)V(AN):ANAN1::U(AG).:V(AG).: WAGAF:AFAF1:U(AG).:V(AG).: OW CHUNKIDX = :A: W CHUNKCNT = :B: W VIDX = :C: W IDX = :D: W CURSORX = :E: X CURSORY = :F: X ENVSATTACK = :G: 5X ENVSDECAY = :H: NX ENVSSUSTAIN = :I: gX ENVSRELEASE = :J: X ENVSWAVEFORM = :K: X ENVSPOW = :L: X FILTFREQ = :M: X FILTLP = :N: X FILTBP = :O: X FILTHP = :P: X FILTRES = :Q: Y FILTDIR = :R: &Y FILTMIN = :S: =Y FILTSWEEP = :T: SY SEQCHUNK = :U: iY SEQEXTRA = :V: |Y ECHOM = :W: Y ECHOB = O:X: Y ECHOSZ = :Y: Y CHUNKRPT = :Z: Y ECHODELAY = :AA: Y TMP = :AB: Y SSCOL = :AC: Z S = :AD: Z SEQOFFS = :AE: .Z SEQCNT = :AF: BZ SEQPTR = :AG: SZ ROW = :AH: dZ COL = :AI: vZ SROW = :AJ: Z SCOL = :AK: O	Z V = :AL: Z MAXV = :AM: Z K = :AN: Z DELTA = :AO: Z FPRESET = :AP: Z FSCOL = :AQ: [ FSROW = :AR: [ FFOCUS = :AS: ,[ FSEL = :AT: =[ OCT = :AU: T[ CURRFREQ = :AV: j[ CURRDIR = :AW: [ HANDLED = :AX: [ PLO
YPTR = :AY: [ PLYFLAG = :AZ: [ SDUR = :BA: [ ALTKEY = :BB: [ LIMIT = :BC: [ Y = :BD: [  = :BE: \ TMPO% = :A%: )\ ESCFLAG% = :B%: ;\ RET% = :C%: I\  = :D%: Y\ V$ = :A$: k\ KEY$ = :B$: \ VALID$ = :C$: \ PVAL$ = :D$: \ ENVSNAME$ = :E$: \ DIRNAME$ = :F$: \ FILTNAME$ = :G$: \  V1$ = :H$: \ V2$ = :I$: ] V3$ = :J$: ] V4$ = :K$: -] V5$ = :L$: >] V6$ = :M$: X] SEQCMDNAME$ = :N$: h] A$ = :O$: x] V$ = :P$: ]	 KEYSO2151,AA:POKE262148,AB:POKE55042,4:POKE55041,0:POKE55045,0:RETURN 30 PRINTCHR$(147);:PRINTCHR$(14);:PRINT"AY OF THE MPLODING OOT":PRINT"=========================":PRINT" GAME MADE BY THE 65 COMMUNITY!":GETKEYA$:A$="" 31 EDMA3,3840,160,264192:PRIONTCHR$(142);:RETURN 32 CA=270336:AE=0:BN=0:BLOAD"LEVEL1-BG.DAT",P(CA):GOSUB 42:GOSUB 43:GOSUB 37:AE=1 33 BN=1:BLOAD"PLAYER.DAT",P(CA):GOSUB 42:GOSUB 37:AE=1:BN=2:BLOAD"PLAYER2.DAT",P(CA) 34 GOSUB 42:GOSUB 37:AE=1:BN=3:BLOAD"PLAYER3.DAT",P(CA):GOSUB 42O 35 GOSUB 37:AE=1:BN=4:BLOAD"PLAYER4.DAT",P(CA):GOSUB 42:GOSUB 37:AE=2:BN=5 36 BLOAD"DUCK.DAT",P(CA):GOSUB 42:GOSUB 37:BLOAD"PAL.BIN",P(262400),R:RETURN 37 CA=BS:AF=WPEEK(CA+0):CA=CA+AF:RETURN 38 CA=262400+BZ*16*3:FORV=.TO15:POKE53504+V+16,PEEK(CA):COA=CA+1:POKE53760+V+16,PEEK(CA):CA=CA+1:POKE54016+V+16,PEEK(CA):CA=CA+1:NEXTV:RETURN 39 FORV=.TO20:POKE262144+V,.:NEXTV:POKE262144,129:POKE262145,0:POKE262146,7:POKE262147,134:POKE262148,32:POKE262149,0:POKE262150,0:WPOKE262151,0 40 WPOKE262153,4096:POKOE262155,5:WPOKE262156,4096:POKE262158,5:POKE262159,0:WPOKE262160,0:EDMA3,3840,160,327680:EDMA3,160,32,331520:EDMA3,4000,79,331776:AJ=. 41 CD=1:BQ=4:BO=BQ:AK=.:CE=1:BR=2:BP=BR:CG=.:CH=CF(CD,0):AQ=.:AR=23:AS=60:AT=23:AU=18:AV=.:AW=18:AX=.:AM=.:AN=1:RETURNO 42 BS=CA:C(AE)=PEEK(CA+2):CA=CA+3:I=.:DOWHILEI<C(AE):PRINTI;:D(BN,I)=CA:J=PEEK(CA+2):K=PEEK(CA+3):CA=CA+20+J*K:I=I+1:LOOP:CA=BS:RETURN 43 AI=335872:FORP=.TOC(0)-1:CA=D(0,P):L=PEEK(CA+0):M=PEEK(CA+1):J=PEEK(CA+2):K=PEEK(CA+3):N=L+J-1:O=M+K-1:E(P)=AI:FOORX=MTOO:FORV=.TO1:EDMA.,J,(CA+20),AI 44 AI=AI+J:NEXTV:CA=CA+J:NEXTX:NEXTP:RETURN 45 POKE262155,5:FORU=.TOC(0)-1:P=BX(U):GOSUB 165:NEXTU:RETURN 46 IFAQ<25THENBEGIN 47 AQ=AQ+1 48 BEND:ELSEBEGIN 49 IFAS>.THENBEGIN 50 GOSUB 197:AS=AS-1:BEND 51 BEND OL2047AL2047 I*AL.AL. I+S(AR)AL: I,AQ8 J-AL(A$):AL2047AL2047 J.AL.AL. #J/T(AR)AL: *J0 FJ1S$"X0":AT1S$"X1" J2S$S$V$(BA,1):S$S$"O"(AU):AN.11:O$Q$(AN)S$S$R$(AN) J3AN J4(S$). J5"OT"(AJ)S$: J6 J7 168:AM15:AK5AM4 J8AK6AM4095 K9ALALAO:ALAMALAM K: 351: /K; 168:ALALAO:AL.AL. ;K< 351: HK=AQ1 iK>ALM(AR)AO:AL2047AL2047 yK?M(AR)AL: K@AQ2N(AR)1 KAAQ3O(AR)1 KBAQ4O52 AJ=.:RETURN 53 IFAQ>.THENBEGIN 54 AQ=AQ-1 55 BEND:ELSEBEGIN 56 IFAS<60THENBEGIN 57 GOSUB 198:AS=AS+1:BEND 58 BEND 59 AJ=.:RETURN 60 GETA$:IFA$=","ANDBZ>.THENBZ=BZ-1:GOSUB 38 61 IFA$="."ANDBZ<11THENBZ=BZ+1:GOSUB 38 62 IFA$="1"THENBEGIN 63 A=OMOD(A+1,2):EDMA3,3840,160,327680:EDMA3,3840,160,264192:BEND 64 IFA$="D"THENBEGIN 65 IFCD=1THENBEGIN 66 CD=2:BO=5 67 BEND:ELSEBEGIN:CD=1:BO=BQ:BEND 68 CH=CF(CD,0):CG=.:AJ=.:BEND 69 IFA$="<"ANDBQ>1THENBEGIN 70 BQ=BQ-1:BO=BQ:BEND 71 IFA$=">"ANDBQ<4TOHENBEGIN 72 BQ=BQ+1:BO=BQ:BEND 73 F=JOY(2):G=FAND128:H=FAND127:IFH>8THENH=. 74 IFF=.ANDCH=3THENBEGIN 75 IFCG>=CC(1,3)-1THENBEGIN 76 AJ=.:CH=4:CG=.:BEND 77 BEND 78 IFF=.THENRETURN 79 IFH=3THENGOSUB 46 80 IFH=7THENGOSUB 53 81 IFG=128ANDBT(AM,H)=2OANDCH=CF(CD,0)THENBEGIN 82 CH=CF(CD,1):SOUND1+AM*3,4000,5,1,100,1000,3:IFAJ=1THENCH=5 83 CG=.:BEND 84 IFG=128ANDBT(AM,H)=4ANDCH=0THENBEGIN 85 CH=2:SOUND1+AM*3,2000,5,1,100,1000,3:IFAJ=1THENCH=6 86 CG=.:BEND 87 IFA$="X"THENBEGIN 88 AJ=.:CH=CF(CD,7)O:CG=.:BEND 89 IFH=5ANDCH=0THENBEGIN 90 CH=3:CG=.:BEND 91 RETURN 92 AG=0:P=CB(CD,CH,CG):BU=AQ:BV=AR:AL=AM:AE=CD:BN=BO:GOSUB 161:RETURN 93 AG=1:P=CB(CE,CJ,CI):BU=AS:BV=AT:AL=AN:AE=CE:BN=BP:GOSUB 161:RETURN 94 IFCH=CF(CD,0)AND(H=7ORH=3)THENBEGIN 95 COG=CG+1:BEND 96 IFCH<>CF(CD,0)THENBEGIN 97 CG=CG+1:BEND 98 IFCH=3ANDH=5THENBEGIN 99 IFCG>=CC(1,3)THENBEGIN 100 CG=CC(1,3)-1:AJ=1:BEND 101 RETURN 102 BEND 103 IFCG>=CC(CD,CH)THENBEGIN 104 IFCH=7THENBEGIN 105 IFAU>.THENBEGIN 106 CH=4:CG=. 107 BEOP(AR)1 KCAQ5 KDALQ(AR)AO:AL15AL15 KEQ(AR)AL: 	LFAQ6R(AR)3R(AR)R(AR)1 !LGAQ7S(AR)2047 BLHALS(AR)AO:AL2047AL2047 RLIS(AR)AL: jLJAQ8T(AR)2047 LKALT(AR)AO:AL2047AL2047 LLT(AR)AL: LM 261:O LNAQ1 LOALM(AR)AO:AL.AL. LPM(AR)AL: LQAQ2N(AR). MRAQ3O(AR). MSAQ4P(AR). "MTAQ5 =MUALQ(AR)AO:AL.AL. MMVQ(AR)AL: mMWAQ6R(AR).R(AR)R(AR)1 MXAQ7S(AR). MYALS(AR)AO:AL.AL. MZS(O"AR)AL: M[AQ8T(AR). M\ALT(AR)AO:AL.AL. M]T(AR)AL: M^ 261: N_AK.E$(AJ)A$  N`AK1G(AJ)AL 3NaAK2H(AJ)AL FNbAK3I(AJ)AL YNcAK4J(AJ)AL lNdAK5K(AJ)AL NeAK6L(AJ)AL NfAHAJ: 359: Ng
AH,G(AH),HOND:ELSEBEGIN:CG=CC(CD,CH)-1:BEND 108 RETURN 109 BEND 110 IFAJ=1ANDCH<>3THENBEGIN 111 CH=3:CG=CC(1,3)-1 112 BEND:ELSEBEGIN:CH=CF(CD,0):CG=.:BEND 113 BEND 114 IFAQ>(AS+5)THENAM=1 115 IFAS>(AQ+5)THENAM=. 116 RETURN 117 IFAS>(AQ+5)THENAN=1 118 IFAOQ>(AS+5)THENAN=. 119 IFCJ<>0THENBEGIN 120 CI=CI+1:BEND 121 IFCI>=CC(CE,CJ)THENBEGIN 122 IFCJ=7THENBEGIN 123 IFAW>.THENBEGIN 124 CJ=4:CI=. 125 BEND:ELSEBEGIN:CI=CC(CE,CJ)-1:BEND 126 RETURN 127 BEND 128 IFAK=1ANDCJ<>3THENBEGIN 129 CJ=3:CI=CC(1,3O )-1 130 BEND:ELSEBEGIN:CJ=CF(CE,0):CI=.:BEND 131 RETURN 132 BEND 133 IFCI=7THENRETURN 134 GOSUB 152:IFA%=1THENRETURN 135 GOSUB 147:IFA%=1THENRETURN 136 GOSUB 138:IFA%=1THENRETURN 137 RETURN 138 A%=. 139 IFABS(AQ-AS)>=8ANDCJ=0THENBEGIN 140 A%=1O!:V=INT(RND(1)*8) 141 IFV=1THENBEGIN 142 CJ=1:CI=.:SOUND1+AN*3,4000,5,1,100,1000,3:BEND 143 IFV=2THENBEGIN 144 CJ=2:CI=.:SOUND1+AN*3,2000,5,1,100,1000,3:BEND 145 BEND 146 RETURN 147 A%=. 148 IFABS(AQ-AS)>8THENBEGIN 149 IFINT(RND(1)*4)>=3THENGOSUBP" 156 150 A%=1:BEND 151 RETURN 152 A%=. 153 IFABS(AQ-AS)>20THENBEGIN 154 GOSUB 156:A%=1:BEND 155 RETURN 156 CJ=0:CI=CI+1:IFCI>=CC(CE,CJ)THENCI=. 157 IFAS>AQTHENBEGIN 158 AS=AS-1 159 BEND:ELSEBEGIN:AS=AS+1:BEND 160 RETURN 161 POKE262155,4:IFAL=O#(AH),I(AH),J(AH),K(AH),L(AH): NhER30 Ni:(ER);" ERROR":" IN LINE";EL:: Oj1: 364: 392:O$"" Ok: Ol"SEQUENCE EDITOR":"---------------":")DD )NSERT )ELETE, DIT=, LAYLL=+, LAY= - SEQCNT = ";AF Om": EO$DIT , : STOP MUSIC, +: EXIT":" MD            XTRA":" ---            -----" *Pn((AF1)43)1((AE43)1)((AF1)43) @PoA75,5:"--->": MPpAE. cPqA70,5:"<---": uPrANAE:ANAF PsAN(AE4321)ANAF: 389 Pt(ANO%AE)43A40,6(ANAE43) PuAYAN">";:ՙ" "; PvAD.: 390 PwU(AN).(U(AN))11 8QxA$N$((U(AN))):AD10(A$):A$;:AD.:" ";:ADAD1: SQy::U(AN);(9);: gQzAD1: 390:AX. xQ{U(AN)2 Q|AX1 Q}V(AN)1(9);"<NONEO&>": Q~(9);G$(V(AN)): Q QAX.U(AN)1 QAX1:(9);V(AN): QAX. R(9);V(AN): R""; (RANAN1:: FRAGANACAD"";:ՙ""; LR dR 210:O$"A" 443 vRO$"I" 442 RO$"D" 426 RO$""AG.OAGAG1 RO$""AGAF1AGAG1 RO$"" RAC1 RAC. R:  S(AG43). SAC1:AGAG43: S #S 2SO$"" ?SAC. HSAC1 SS: fS(AG43)AF {SAC.:AGAG43: S S SO$(141)O :DH(7)=0:DI(7)=1:DJ(7)=15:DK(7)=2:DL(7)=100:DM(7)=10:K$(8)="HIGHPOSC":DF(8)=1000:DG(8)=0:DH(8)=0:DI(8)=1:DJ(8)=15:DK(8)=3:DL(8)=100:DM(8)=10 24 K$(9)="SPARE1":DF(9)=.:DG(9)=0:DH(9)=0:DI(9)=0:DJ(9)=.:DK(9)=0:DL(9)=.:DM(9)=.:K$(10)="SPARE2":DF(10)=.:DGPTURN 199 CA=B+4:FORBD=.TO3:AY=PEEK(CA+.):AZ=PEEK(CA+1):BA=PEEK(CA+2):BB=PEEK(CA+3) 200 IFNOT(AY=.ANDAZ=.ANDBA=.ANDBB=.)THENBEGIN 201 GOSUB 237:BC=7 202 IFBD=3THENBEGIN 203 BC=2:GOSUB 207 204 BEND:ELSEBEGIN:GOSUB 207:BEND 205 BEND 206 CA=CA+4:NEXTPBD:RETURN 207 W=AY:X=AZ:V=112:GOSUB 209:W=BA:X=AZ:V=110:GOSUB 209:W=AY:X=BB:V=109:GOSUB 209:W=BA:X=BB:V=125:GOSUB 209:FORW=AY+1TOBA-1 208 X=AZ:V=64:GOSUB 209:X=BB:V=64:GOSUB 209:NEXTW:FORX=AZ+1TOBB-1:W=AY:V=93:GOSUB 209:W=BA:V=93:GOSUB 209:NEXTX:RETURNP 209 IFPEEK(327680+W+X*80)<>32THENBEGIN 210 V=V+128 211 BEND:ELSEBEGIN:POKE331776+W+X*80,1:BEND 212 IFBC=2THENPOKE331776+W+X*80,BC 213 POKE327680+W+X*80,V:RETURN 214 B=D(BN,P):AP=AL 215 IFAG=0THENBEGIN 216 P=CB(CE,CJ,CI):AH=D(BP,P):AO=AN:BU=AS:BVP=AT:BEND 217 IFAG=1THENBEGIN 218 P=CB(CD,CH,CG):AH=D(BO,P):AO=AM:BU=AQ:BV=AR:BEND 219 AY=PEEK(B+16+.):AZ=PEEK(B+16+1):BA=PEEK(B+16+2):BB=PEEK(B+16+3):IFAY=.ANDAZ=.ANDBA=.ANDBB=.THENRETURN 220 GOSUB 237:BF=AY:BG=AZ:BH=BA:BI=BB:L=PEEK(AH+0):M=PEEK(AH+1P):L=L+BU:M=M+BV:J=PEEK(AH+2):K=PEEK(AH+3):CA=AH+4:FORBD=.TO2:AY=PEEK(CA+.) 221 AZ=PEEK(CA+1):BA=PEEK(CA+2):BB=PEEK(CA+3):GOSUB 237:BJ=AY:BK=AZ:BL=BA:BM=BB:GOSUB 241 222 IFA%=1THENBEGIN 223 IFAG=1THENBEGIN 224 CH=CF(CD,7):CG=.:IFAU>.THENAU=AU-1 225 IPFAU=.THENBEGIN 226 SOUND1+AM*3,8000,50,1,435,100,.,4000 227 BEND:ELSEBEGIN:SOUND1+AM*3,8000,10,1,435,200,.,4000:BEND 228 BEND 229 IFAG=0THENBEGIN 230 CJ=CF(CE,7):CI=.:IFAW>.THENAW=AW-1 231 IFAW=.THENBEGIN 232 SOUND1+AN*3,8000,50,1,435,100,.,4000 P233 BEND:ELSEBEGIN:SOUND1+AN*3,8000,10,1,435,200,.,4000:BEND 234 BEND 235 BD=2:BEND 236 CA=CA+4:NEXTBD:AL=AP:CA=D(BN,P):RETURN 237 IFAL=.THENBEGIN 238 AY=L+AY:AZ=M+AZ:BA=L+BA:BB=M+BB 239 BEND:ELSEBEGIN:BE=AY:AY=L+J-BA-1:AZ=M+AZ:BA=L+J-BE-1:BB=M+BB:PBEND 240 RETURN 241 IFNOT((BJ>BH)OR(BL<BF)OR(BK>BI)OR(BM<BG))THENBEGIN:A%=1 242 BEND:ELSEBEGIN:A%=.:BEND 243 RETURN 244 INPUT"LOAD NAME: ";C$:IFC$=""THENRETURN 245 DOPEN#2,(C$),R,U8:INPUT#2,CL:FORCM=.TOCL-1:FORCN=.TO5:INPUT#2,B$(CN,CM):NEXTCN:NEXTCP	M:INPUT#2,B%:FORCO=.TO9:INPUT#2,J$(CO):INPUT#2,CX(CO):INPUT#2,CY(CO) 246 INPUT#2,CZ(CO):INPUT#2,DA(CO):INPUT#2,DB(CO):INPUT#2,DC(CO):GOSUB 249:NEXTCO:PRINT:FORCO=.TO10:INPUT#2,K$(CO):INPUT#2,DF(CO):INPUT#2,DG(CO) 247 INPUT#2,DH(CO):INPUT#2,DI(CO):INPUTP
#2,DJ(CO):INPUT#2,DK(CO):INPUT#2,DL(CO):INPUT#2,DM(CO):NEXTCO:DN=.:INPUT#2,DN:CO=.:DOWHILECO<DN:INPUT#2,D1(CO) 248 INPUT#2,DP(CO):CO=CO+1:LOOP:DCLOSE#2:CM=.:RETURN 249 ENVELOPECO,CX(CO),CY(CO),CZ(CO),DA(CO),DB(CO),DC(CO):RETURN 250 V=D1(DQ) 251 IFV>=P.THENBEGIN 252 CM=V:IFCS<=.THENCS=DP(DQ) 253 GOSUB 270:BEND 254 IFV=-1THENBEGIN 255 V=DP(DQ):TEMPO(V):B%=V:BEND 256 IFV=-2THENBEGIN 257 V=DP(DQ):DD=V:DE=V:GOSUB 286:BEND 258 IFV=-4THENCP=1:CT=. 259 IFV=-5THENCP=2:CT=. 260 IFV=-6THENCQ=1:CT=. 26 IN$ = :Q$: ]
 KEYSOUT$ = :R$: ] PSTR$ = :S$: ] WNAME$ = :T$: ] FILTSTATENAME$ = :U$: ] DUR$ = :V$: ^ CLIP$ = :W$:  ^ CP$ = :X$: .^  = :Y$: <^  = :A&:                                                                      P1 IFV=-7THENCP=.:CQ=. 262 IFV=-8THENCR=DP(DQ) 263 IFV=-10THENCT=1:CP=.:CQ=. 264 IFV=-9THENCU=DP(DQ):VOLCU,CU 265 IFCS>.THENCS=CS-1 266 IFCS<=.THENDQ=DQ+1 267 IFV=-3THENDQ=. 268 IFDQ>=DNTHENDR=.:DQ=-1 269 RETURN 270 D$=B$(.,CM):E$=B$(1,CM):F$=B$(P2,CM):G$=B$(3,CM):H$=B$(4,CM):I$=B$(5,CM) 271 IFCT=1THENBEGIN 272 PLAYD$:SLEEP(CR):PLAY,E$:SLEEP(CR):PLAY,,F$:SLEEP(CR):PLAY,,,G$:SLEEP(CR):PLAY,,,,H$:SLEEP(CR):PLAY,,,,,I$:SLEEP(CR):RETURN 273 BEND 274 IFCP=.ANDCQ=.THENBEGIN 275 PLAYD$,E$,F$,G$,H$,PI$:RETURN 276 BEND 277 IFCP=1ANDCQ=.THENBEGIN 278 PLAYD$,E$,F$,,H$,I$:SLEEP(CR):PLAY,,,D$:BEND 279 IFCP=1ANDCQ=1THENBEGIN 280 PLAYD$,E$,F$,,H$:SLEEP(CR):PLAY,,,D$,,F$:BEND 281 IFCP=2ANDCQ=.THENBEGIN 282 PLAYD$,,F$,,,I$:SLEEP(CR):PLAY,,,D$:SLEEP(CRP):PLAY,D$:SLEEP(CR):PLAY,,,,D$:BEND 283 IFCP=2ANDCQ=1THENBEGIN 284 PLAYD$,,F$:SLEEP(CR):PLAY,,,D$:SLEEP(CR):PLAY,D$,,,,F$:SLEEP(CR):PLAY,,,,D$:BEND 285 RETURN 286 IFDE=-1THENRETURN 287 CV=DF(DE):CW=0:IFDK(DE)=1ORDK(DE)=3THENBEGIN:CV=DL(DE):CW=1:BENDP 288 IFDK(DE)=2THENBEGIN 289 CW=2:BEND 290 FILTER1,DF(DE),DG(DE),DH(DE),DI(DE),DJ(DE):FILTER2,DF(DE),DG(DE),DH(DE),DI(DE),DJ(DE):RETURN 291 REM  = :A: 292 REM DATAADDR = :B: 293 REM MAXFRAMES = :C: 294 REM FRAMEADDR = :D: 295 REM FRAMEDBPLUPADDR = :E: 296 REM JDIRRAW = :F: 297 REM JFIRE = :G: 298 REM JDIR = :H: 299 REM FRMIDX = :I: 300 REM FRMW = :J: 301 REM FRMH = :K: 302 REM FRMX = :L: 303 REM FRMY = :M: 304 REM FRMX1 = :N: 305 REM FRMY1 = :O: 306 REM FRAMEIDX = :P: 307 PREM CDATAADDR = :Q: 308 REM YY = :R: 309 REM SCRADDR = :S: 310 REM CLRADDR = :T: 311 REM LIDX = :U: 312 REM K = :V: 313 REM X = :W: 314 REM Y = :X: 315 REM SRCADDR = :Y: 316 REM DESTADDR = :Z: 317 REM LENGTH = :AA: 318 REM TRANSP = :AB: 31P9 REM DESTMBSEL = :AC: 320 REM DESTBANK = :AD: 321 REM FORM = :AE: 322 REM SZ = :AF: 323 REM CHARACTER = :AG: 324 REM OPPONENTDATAADDR = :AH: 325 REM DBLUPADDR = :AI: 326 REM KNEELFLAG = :AJ: 327 REM BADDIEKNEELFLAG = :AK: 328 REM MIRROPR = :AL: 329 REM PLAYERMIRROR = :AM: 330 REM BADDIEMIRROR = :AN: 331 REM OPPONENTMIRROR = :AO: 332 REM TMPMIRROR = :AP: 333 REM PX = :AQ: 334 REM PY = :AR: 335 REM BX = :AS: 336 REM BY = :AT: 337 REM PLAYERENERGY = :AU: 338 REM LAGPENERGYP = :AV: 339 REM BADDIEENERGY = :AW: 340 REM LAGBENERGY = :AX: 341 REM X1 = :AY: 342 REM Y1 = :AZ: 343 REM X2 = :BA: 344 REM Y2 = :BB: 345 REM DRAWCOLOR = :BC: 346 REM IDX = :BD: 347 REM TMPX1 = :BE: 348 REM PX1 = :BF: 349 REM PY1 = :BG: P350 REM PX2 = :BH: 351 REM PY2 = :BI: 352 REM OX1 = :BJ: 353 REM OY1 = :BK: 354 REM OX2 = :BL: 355 REM OY2 = :BM: 356 REM DATIDX = :BN: 357 REM PLAYERDATIDX = :BO: 358 REM BADDIEDATIDX = :BP: 359 REM PLAYERDATFIXED = :BQ: 360 REM BPADDIEDATFIXED = :BR: 361 REM TMP = :BS: 362 REM JD = :BT: 363 REM FX = :BU: 364 REM FY = :BV: 365 REM XOFFS = :BW: 366 REM DRAWORDER = :BX: 367 REM OFFSAMOUNT = :BY: 368 REM PALIDX = :BZ: 369 REM PTR = :CA: 370 REM ANIMORDER = :CB: 371 REPM MAXFRAME = :CC: 372 REM PLAYERFORM = :CD: 373 REM BADDIEFORM = :CE: 374 REM FORMANIM = :CF: 375 REM PLAYERFRAME = :CG: 376 REM PLAYERANIM = :CH: 377 REM BADDIEFRAME = :CI: 378 REM BADDIEANIM = :CJ: 379 REM BXOFFS = :CK: 380 REM CHUNKPCNT = :CL: 381 REM CHUNKIDX = :CM: 382 REM VIDX = :CN: 383 REM ROW = :CO: 384 REM ECHOM = :CP: 385 REM ECHOB = :CQ: 386 REM ECHOSZ = :CR: 387 REM CHUNKRPT = :CS: 388 REM ECHODELAY = :CT: 389 REM V = :CU: 390 REM CURRFREQ = :CV: 391 REM PCURRDIR = :CW: 392 REM ENVSATTACK = :CX: 393 REM ENVSDECAY = :CY: 394 REM ENVSSUSTAIN = :CZ: 395 REM ENVSRELEASE = :DA: 396 REM ENVSWAVEFORM = :DB: 397 REM ENVSPW = :DC: 398 REM FSROW = :DD: 399 REM FSEL = :DE: 400 REM FILTFREQ = :DF: 4P01 REM FILTLP = :DG: 402 REM FILTBP = :DH: 403 REM FILTHP = :DI: 404 REM FILTRES = :DJ: 405 REM FILTDIR = :DK: 406 REM FILTMIN = :DL: 407 REM FILTSWEEP = :DM: 408 REM SEQCNT = :DN: 409 REM SEQCHUNK = :D1: 410 REM SEQEXTRA = :DP: 411 REPM PLYPTR = :DQ: 412 REM PLYFLAG = :DR: 413 REM  = :DS: 414 REM RET% = :A%: 415 REM TMPO% = :B%: 416 REM  = :C%: 417 REM A$ = :A$: 418 REM V$ = :B$: 419 REM KEY$ = :C$: 420 REM V1$ = :D$: 421 REM V2$ = :E$: 422 REM V3$ = :F$: 423 REM V4$ = :G$P: 424 REM V5$ = :H$: 425 REM V6$ = :I$: 426 REM ENVSNAME$ = :J$: 427 REM FILTNAME$ = :K$: 428 REM  = :L$: 429 REM  = :A&: 32000 32001 32002 32003 32004 32005 32006 32007 32008 32009 32010D:D"11TOKENIZED":IFDS<>0THEN?"DISC ERROR: ";D 1S$:ELSE?"":D"11.POST                                                                                                                                                                                                              P  
   A0: U  B270336: C(3): D(6,25): E(64):I0:AI335872:AU18:AV0:AW18:AX0:    BT(1,8):BT(.,1)1:BT(.,2)2:BT(.,3)3:BT(.,4)4:BT(.,5)5:BT(.,6)6:BT(.,7)7:BT(.,8)8:BT(1,1)1:BT(1,2)8:BT(1,3)3:BT(1,4)6:BT(1,5)5:BT(1,6)4 ! BT(1,7)3:P!BT(1,8)2 !  BW(7): BX(7):BX(.)1:BX(1)7:BX(2)0:BX(3)2:BX(4)3:BX(5)4:BX(6)5:BX(7)6: BY(7):BY(.).7:BY(1).:BY(2).1:BY(3).5:BY(4)1:BY(5)1.5:BY(6)2 6"  CB(3,10,10):CB(1,0,.)0:CB(1,0,1)1:CB(1,0,2)2:CB(1,0,3)1:CB(1,1,.)3:CB(1,1,1)4:CP'OTO GAMEPLAY  RETURN'----------------.DRAWENERGYBARS'----------------  IF PLAYERENERGY <> LAGPENERGY THEN BEGIN    IF LAGPENERGY < PLAYERENERGY THEN BEGIN      LAGPENERGY = LAGPENERGY + 1      K = LAGPENERGY      GOSUB DRAWBLUETRIANGP#1THENSETBIT262150,5:ELSECLRBIT262150,5 162 B=D(BN,P):L=PEEK(B+0):M=PEEK(B+1):J=PEEK(B+2):K=PEEK(B+3):L=BU:M=BV:N=L+J-1:O=M+K-1:T=331776+L+M*80:IFAL=1THENT=T+J-1 163 Q=B+20:FORR=MTOO:Y=Q:Z=T:AA=J:AB=255:GOSUB 29:Q=Q+J:T=T+80:NEXTR:IFATHENGOSUB 199 164 P$GOSUB 214:RETURN 165 CLRBIT262150,5 166 B=D(0,P):L=PEEK(B+0):M=PEEK(B+1):J=PEEK(B+2):K=PEEK(B+3):N=L+J-1:O=M+K-1:T=331776+L+M*80:Q=B+20+J*K:BW(P)=MOD(BW(P)+80,80):BW=INT(BW(P)):Q=E(P):FORR=MTOO 167 Y=Q+BW:Z=T:AA=J:AB=255:GOSUB 29:Q=Q+J*2:T=T+80:NEXTR:P%RETURN 168 GOSUB 60:GOSUB 45:GOSUB 192:GOSUB 194:GOSUB 193:GOSUB 171 169 IFRPLAY(1)=.THENGOSUB 250 170 GOTO 168:RETURN 171 IFAU<>AVTHENBEGIN 172 IFAV<AUTHENBEGIN 173 AV=AV+1:V=AV:GOSUB 188:RETURN 174 BEND 175 IFAV>AUTHENBEGIN 176 V=AV:GOSUB 189:P&AV=AV-1:RETURN 177 BEND 178 BEND 179 IFAW<>AXTHENBEGIN 180 IFAX<AWTHENBEGIN 181 AX=AX+1:V=AX:GOSUB 190:RETURN 182 BEND 183 IFAX>AWTHENBEGIN 184 V=AX:GOSUB 191:AX=AX-1:RETURN 185 BEND 186 BEND 187 RETURN 188 CURSOR1+V*2,48:PRINT"";:CURSOR1+P'V*2,49:PRINT"";:RETURN 189 CURSOR1+V*2,48:PRINT" ";:CURSOR1+V*2,49:PRINT" ";:RETURN 190 CURSOR78-V*2,48:PRINT"";:CURSOR78-V*2,49:PRINT"";:RETURN 191 CURSOR78-V*2,48:PRINT" ";:CURSOR78-V*2,49:PRINT" ";:RETURN 192 GOSUB 93:GOSUB 92:RETURNP  193 GOSUB 94:GOSUB 117:RETURN 194 IFATHENBEGIN 195 EDMA.,3840,327680,264192:EDMA3,3840,160,327680:BEND 196 EDMA.,3840,331776,267911168:EDMA3,3840,79,331776:RETURN 197 FORV=.TO7:BW(V)=BW(V)+BY(V):NEXTV:RETURN 198 FORV=.TO7:BW(V)=BW(V)-BY(V):NEXTV:RE